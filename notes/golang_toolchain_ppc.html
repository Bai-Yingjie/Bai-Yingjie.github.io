
<!DOCTYPE HTML>
<html lang="zh-hans" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>go tools增加ppc32支持.md · My Notes</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        <meta name="author" content="Bai Yingjie">
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search-plus/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-prism-ext/prism.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-prism-ext/prism-line-numbers.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-expandable-chapters-small/expandable-chapters-small.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-disqus/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-splitter/splitter.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-wide-page/wide.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-hide-navigation-buttons/index.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-anchor-navigation-ex/style/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="golang_toolchain_compile_gccgo.html" />
    
    
    <link rel="prev" href="as_title.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="输入并搜索" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    简介
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="as_title.html">
            
                <a href="as_title.html">
            
                    
                    开源
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="my_opensource.html">
            
                <a href="my_opensource.html">
            
                    
                    我的开源项目
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="my_upstream.html">
            
                <a href="my_upstream.html">
            
                    
                    我的upstream commit
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="as_title.html">
            
                <a href="as_title.html">
            
                    
                    系统分析和性能
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="system_analysis_bcc和ebpf.html">
            
                <a href="system_analysis_bcc和ebpf.html">
            
                    
                    bcc和ebpf(starting)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="performance_ovs进程调查.html">
            
                <a href="performance_ovs进程调查.html">
            
                    
                    OVS进程调查
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="performance_ping流程和函数调用解析.html">
            
                <a href="performance_ping流程和函数调用解析.html">
            
                    
                    ping流程和函数调用解析
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4" data-path="CentOS_系统性能优化配置.html">
            
                <a href="CentOS_系统性能优化配置.html">
            
                    
                    CentOS 性能优化系统配置
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="as_title.html">
            
                <a href="as_title.html">
            
                    
                    ARM server
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="arm_server_杂记.html">
            
                <a href="arm_server_杂记.html">
            
                    
                    Arm server 杂记
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="as_title.html">
            
                <a href="as_title.html">
            
                    
                    嵌入式系统开发调试
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="embedded_debugging.html">
            
                <a href="embedded_debugging.html">
            
                    
                    嵌入式调试杂记
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="uboot_杂记.html">
            
                <a href="uboot_杂记.html">
            
                    
                    uboot杂记
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3" data-path="buildroot_杂记.html">
            
                <a href="buildroot_杂记.html">
            
                    
                    buildroot杂记
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.4" data-path="toolchain_升级gcc问题解决.html">
            
                <a href="toolchain_升级gcc问题解决.html">
            
                    
                    升级GCC7.3问题解决
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="as_title.html">
            
                <a href="as_title.html">
            
                    
                    Linux工程实践
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="linux_日常使用.html">
            
                <a href="linux_日常使用.html">
            
                    
                    日常linux使用
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="git_日常使用.html">
            
                <a href="git_日常使用.html">
            
                    
                    日常git使用
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3" data-path="向kernel提交补丁.html">
            
                <a href="向kernel提交补丁.html">
            
                    
                    向kernel提交补丁
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.4" data-path="linux_ssh_relay.html">
            
                <a href="linux_ssh_relay.html">
            
                    
                    ssh relay
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.5" data-path="gitlab_ci.html">
            
                <a href="gitlab_ci.html">
            
                    
                    gitlab CI
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.6" data-path="docker_操作记录.html">
            
                <a href="docker_操作记录.html">
            
                    
                    docker操作记录
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.7" data-path="centos_操作记录.html">
            
                <a href="centos_操作记录.html">
            
                    
                    centos操作记录
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="as_title.html">
            
                <a href="as_title.html">
            
                    
                    Golang
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" data-path="as_title.html">
            
                <a href="as_title.html">
            
                    
                    入门
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1.1" data-path="golang_语法基础.html">
            
                <a href="golang_语法基础.html">
            
                    
                    Golang 语法基础
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.1.2" data-path="golang_json性能.html">
            
                <a href="golang_json性能.html">
            
                    
                    Golang json性能比较
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7.2" data-path="golang_原理.html">
            
                <a href="golang_原理.html">
            
                    
                    Golang 原理相关
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.2.1" data-path="golang_interface原理.html">
            
                <a href="golang_interface原理.html">
            
                    
                    Golang interface原理(网摘)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.2.2" data-path="golang_内存分配.html">
            
                <a href="golang_内存分配.html">
            
                    
                    Golang 内存分配(网摘)
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7.3" data-path="golang_标准库.html">
            
                <a href="golang_标准库.html">
            
                    
                    Golang 标准库
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.4" data-path="golang_我的反射代码.html">
            
                <a href="golang_我的反射代码.html">
            
                    
                    Golang 我的反射代码
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.5" data-path="golang_问答.html">
            
                <a href="golang_问答.html">
            
                    
                    Golang 问答
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.6" data-path="golang_高效go.html">
            
                <a href="golang_高效go.html">
            
                    
                    Golang 高效go
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.7" data-path="golang_进阶.html">
            
                <a href="golang_进阶.html">
            
                    
                    Golang 进阶
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.8" data-path="as_title.html">
            
                <a href="as_title.html">
            
                    
                    Golang 杂记
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.8.1" data-path="golang_杂记1.html">
            
                <a href="golang_杂记1.html">
            
                    
                    Golang 杂记1
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.8.2" data-path="golang_杂记2.html">
            
                <a href="golang_杂记2.html">
            
                    
                    Golang 杂记2
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.8.3" data-path="golang_杂记3.html">
            
                <a href="golang_杂记3.html">
            
                    
                    Golang 杂记3
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.8.4" data-path="golang_lib选型.html">
            
                <a href="golang_lib选型.html">
            
                    
                    Golang lib选型
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.8.5" data-path="golang_mod_proxy.html">
            
                <a href="golang_mod_proxy.html">
            
                    
                    go mod和go proxy
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.8.6" data-path="golang_汇编_arm64.html">
            
                <a href="golang_汇编_arm64.html">
            
                    
                    Golang 汇编语法和arm64小知识
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.8.7" data-path="golang_cgo_swig.html">
            
                <a href="golang_cgo_swig.html">
            
                    
                    go调用c可以用swig
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7.9" data-path="as_title.html">
            
                <a href="as_title.html">
            
                    
                    Golang 环境和工具链生成
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter active" data-level="1.7.9.1" data-path="golang_toolchain_ppc.html">
            
                <a href="golang_toolchain_ppc.html">
            
                    
                    go tools增加ppc32支持.md
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.9.2" data-path="golang_toolchain_compile_gccgo.html">
            
                <a href="golang_toolchain_compile_gccgo.html">
            
                    
                    编译gccgo
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.9.3" data-path="golang_go_on_mips.html">
            
                <a href="golang_go_on_mips.html">
            
                    
                    go on mips boards(not so updated)
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.9.3.1" data-path="golang_go_on_mips_part1.html">
            
                <a href="golang_go_on_mips_part1.html">
            
                    
                    part 1: cross compile go
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.9.3.2" data-path="golang_go_on_mips_part2.html">
            
                <a href="golang_go_on_mips_part2.html">
            
                    
                    part 2: build native go compiler
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.9.3.3" data-path="golang_go_on_mips_part3.html">
            
                <a href="golang_go_on_mips_part3.html">
            
                    
                    part 3: gccgo experiments
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.9.3.4" data-path="golang_go_on_mips_part4.html">
            
                <a href="golang_go_on_mips_part4.html">
            
                    
                    part 4: Golang json performance
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.9.3.5" data-path="golang_gentoo_on_mips_board_and_build_go.html">
            
                <a href="golang_gentoo_on_mips_board_and_build_go.html">
            
                    
                    Gentoo on mips board and build go
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7.10" data-path="as_title.html">
            
                <a href="as_title.html">
            
                    
                    微服务
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.10.1" data-path="golang_micro.html">
            
                <a href="golang_micro.html">
            
                    
                    go-micro和micro
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.10.2" data-path="golang_微服务概念.html">
            
                <a href="golang_微服务概念.html">
            
                    
                    微服务概念
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7.11" data-path="as_title.html">
            
                <a href="as_title.html">
            
                    
                    解释器和编解码
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.11.1" data-path="golang_yeagi.html">
            
                <a href="golang_yeagi.html">
            
                    
                    解释器yeagi
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.11.2" data-path="golang_tengo.html">
            
                <a href="golang_tengo.html">
            
                    
                    解释器tengo
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.11.3" data-path="golang_govaluate.html">
            
                <a href="golang_govaluate.html">
            
                    
                    解释器govaluate
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.11.4" data-path="golang_encoding_gotiny.html">
            
                <a href="golang_encoding_gotiny.html">
            
                    
                    gotiny编解码
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.11.5" data-path="golang_abs.html">
            
                <a href="golang_abs.html">
            
                    
                    解释器abs
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7.12" data-path="as_title.html">
            
                <a href="as_title.html">
            
                    
                    调试和性能
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.12.1" data-path="golang_调试记录.html">
            
                <a href="golang_调试记录.html">
            
                    
                    Golang 调试记录
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.12.2" data-path="golang_topid性能优化.html">
            
                <a href="golang_topid性能优化.html">
            
                    
                    Golang topid性能优化
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.12.3" data-path="golang_gshell性能调试.html">
            
                <a href="golang_gshell性能调试.html">
            
                    
                    Golang gshell性能调试
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7.13" data-path="as_title.html">
            
                <a href="as_title.html">
            
                    
                    网络和消息中间件
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.13.1" data-path="golang_zmq.html">
            
                <a href="golang_zmq.html">
            
                    
                    消息中间件基本概念和zero mq
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.13.2" data-path="golang_mango.html">
            
                <a href="golang_mango.html">
            
                    
                    消息中间件mango
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.13.3" data-path="golang_libp2p.html">
            
                <a href="golang_libp2p.html">
            
                    
                    Golang p2p网络
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="as_title.html">
            
                <a href="as_title.html">
            
                    
                    Rust
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.1" data-path="rust_入门_brief.html">
            
                <a href="rust_入门_brief.html">
            
                    
                    Rust 入门系列
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.1.1" data-path="rust_books.html">
            
                <a href="rust_books.html">
            
                    
                    Rust reference books
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.1.2" data-path="rust_入门1.html">
            
                <a href="rust_入门1.html">
            
                    
                    Rust 安装和基础语法
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.1.3" data-path="rust_入门2.html">
            
                <a href="rust_入门2.html">
            
                    
                    Rust 泛型和内存所有权
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.1.4" data-path="rust_入门3.html">
            
                <a href="rust_入门3.html">
            
                    
                    Rust 闭包 容器 迭代器 生成器 线程
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.1.5" data-path="rust_工程构建.html">
            
                <a href="rust_工程构建.html">
            
                    
                    Rust 工程构建
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8.2" data-path="rust_coding_brief.html">
            
                <a href="rust_coding_brief.html">
            
                    
                    Rust 代码积累
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.2.1" data-path="rust_序列化.html">
            
                <a href="rust_序列化.html">
            
                    
                    Rust 序列化原理
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2.2" data-path="rust_知识点积累.html">
            
                <a href="rust_知识点积累.html">
            
                    
                    Rust 知识点更新
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2.3" data-path="rust_adaptiveservice.html">
            
                <a href="rust_adaptiveservice.html">
            
                    
                    rust版本的adaptiveservice探索
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2.4" data-path="rust_常用设施.html">
            
                <a href="rust_常用设施.html">
            
                    
                    Rust 常用设施
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2.5" data-path="rust_代码小段.html">
            
                <a href="rust_代码小段.html">
            
                    
                    Rust 代码小段
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8.3" data-path="others.html">
            
                <a href="others.html">
            
                    
                    其他
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.3.1" data-path="rust_mdbook_使用.html">
            
                <a href="rust_mdbook_使用.html">
            
                    
                    Rust 使用mdbook
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="as_title.html">
            
                <a href="as_title.html">
            
                    
                    C开发
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.9.1" data-path="c_automake_autoconf.html">
            
                <a href="c_automake_autoconf.html">
            
                    
                    automake autoconf
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2" data-path="makefile_原理和实践.html">
            
                <a href="makefile_原理和实践.html">
            
                    
                    makefile
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.3" data-path="c_编程杂记高级篇.html">
            
                <a href="c_编程杂记高级篇.html">
            
                    
                    C编程杂记高级篇
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.4" data-path="c_编程杂记基础篇.html">
            
                <a href="c_编程杂记基础篇.html">
            
                    
                    C编程杂记基础篇
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.5" data-path="c_networking_socket高阶用法.html">
            
                <a href="c_networking_socket高阶用法.html">
            
                    
                    网络编程: Advanced Socket Topics(网摘)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.6" data-path="c_protobuf介绍.html">
            
                <a href="c_protobuf介绍.html">
            
                    
                    序列化: protobuf介绍
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.7" data-path="c_进程间通信_共享文件和共享内存.html">
            
                <a href="c_进程间通信_共享文件和共享内存.html">
            
                    
                    进程间通信: 共享文件和共享内存(网摘)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.8" data-path="c_pthread_condition和mutex.html">
            
                <a href="c_pthread_condition和mutex.html">
            
                    
                    并发 任务 事件 和锁.md
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.9" data-path="kernel_user_space_howto.html">
            
                <a href="kernel_user_space_howto.html">
            
                    
                    kernel space和user space交互(网摘, linux2.6)
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="as_title.html">
            
                <a href="as_title.html">
            
                    
                    脚本
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.1" data-path="shell_变量.html">
            
                <a href="shell_变量.html">
            
                    
                    shell变量
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.2" data-path="shell_基础篇.html">
            
                <a href="shell_基础篇.html">
            
                    
                    shell命令和脚本记录-基础篇
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.3" data-path="shell_高级篇.html">
            
                <a href="shell_高级篇.html">
            
                    
                    shell命令和脚本记录-高级篇
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.4" data-path="shell_脚本片段.html">
            
                <a href="shell_脚本片段.html">
            
                    
                    shell脚本片段
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.5" data-path="python_记录.html">
            
                <a href="python_记录.html">
            
                    
                    python记录
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.6" data-path="lua_记录.html">
            
                <a href="lua_记录.html">
            
                    
                    lua记录
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.7" data-path="shell_rds脚本阅读.html">
            
                <a href="shell_rds脚本阅读.html">
            
                    
                    RDS脚本阅读
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.8" data-path="Project_Euler.html">
            
                <a href="Project_Euler.html">
            
                    
                    Project Euler
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.11" data-path="as_title.html">
            
                <a href="as_title.html">
            
                    
                    cloud和容器相关
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.11.1" data-path="cloud_杂记.html">
            
                <a href="cloud_杂记.html">
            
                    
                    云杂记
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.2" data-path="container_当代容器读书笔记.html">
            
                <a href="container_当代容器读书笔记.html">
            
                    
                    当代容器读书笔记
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.12" data-path="as_title.html">
            
                <a href="as_title.html">
            
                    
                    Operating System
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.12.1" data-path="system_libc_part1.html">
            
                <a href="system_libc_part1.html">
            
                    
                    libc概览1
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.2" data-path="system_libc_part2.html">
            
                <a href="system_libc_part2.html">
            
                    
                    libc概览2
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.3" data-path="system_libc_part3.html">
            
                <a href="system_libc_part3.html">
            
                    
                    libc概览3
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.4" data-path="system_原理杂记.html">
            
                <a href="system_原理杂记.html">
            
                    
                    系统原理杂记
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.5" data-path="system_alpine.html">
            
                <a href="system_alpine.html">
            
                    
                    Alpine Linux
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.6" data-path="system_进程间通信.html">
            
                <a href="system_进程间通信.html">
            
                    
                    进程间通信
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.7" data-path="system_特殊功能fd.html">
            
                <a href="system_特殊功能fd.html">
            
                    
                    eventfd timerfd signalfd和fd共享
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.13" data-path="as_title.html">
            
                <a href="as_title.html">
            
                    
                    CPU和device虚拟化
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.13.1" data-path="as_title.html">
            
                <a href="as_title.html">
            
                    
                    gvisor
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.13.1.1" data-path="golang_gvisor代码_KVM.html">
            
                <a href="golang_gvisor代码_KVM.html">
            
                    
                    gvisor KVM模式代码
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.1.2" data-path="golang_gvisor调试.html">
            
                <a href="golang_gvisor调试.html">
            
                    
                    gvisor调试
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.1.3" data-path="golang_gvisor_ptrace.html">
            
                <a href="golang_gvisor_ptrace.html">
            
                    
                    gvisor ptrace模式介绍(网摘)
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.13.2" data-path="rust_vmm_brief.html">
            
                <a href="rust_vmm_brief.html">
            
                    
                    rust VMM(virtual machine monitor)
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.13.2.1" data-path="rust_vmm_简介.html">
            
                <a href="rust_vmm_简介.html">
            
                    
                    rust-vmm简介
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.2.2" data-path="rust_firecracker_代码.html">
            
                <a href="rust_firecracker_代码.html">
            
                    
                    firecracker代码
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.2.3" data-path="rust_firecracker_使用.html">
            
                <a href="rust_firecracker_使用.html">
            
                    
                    firecracker使用
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.2.4" data-path="rust_cloud-hypervisor_代码.html">
            
                <a href="rust_cloud-hypervisor_代码.html">
            
                    
                    cloud hypervisor代码
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.2.5" data-path="rust_cloud-hypervisor_使用.html">
            
                <a href="rust_cloud-hypervisor_使用.html">
            
                    
                    cloud hypervisor使用
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.2.6" data-path="rust_cloud-hypervisor_问题与解决.html">
            
                <a href="rust_cloud-hypervisor_问题与解决.html">
            
                    
                    cloud hypervisor问题与解决
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.13.3" data-path="virtualization_virtio规范阅读笔记.html">
            
                <a href="virtualization_virtio规范阅读笔记.html">
            
                    
                    virtio规范阅读笔记.md
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.4" data-path="qemu_ovs_虚拟化环境.html">
            
                <a href="qemu_ovs_虚拟化环境.html">
            
                    
                    qemu OVS 虚拟化环境准备
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.5" data-path="qemu使用.html">
            
                <a href="qemu使用.html">
            
                    
                    Qemu使用(old)
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.14" data-path="as_title.html">
            
                <a href="as_title.html">
            
                    
                    计算机网络相关
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.14.1" data-path="networking_杂记1.html">
            
                <a href="networking_杂记1.html">
            
                    
                    networking杂记1
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.2" data-path="as_title.html">
            
                <a href="as_title.html">
            
                    
                    Qemu OVS和DPDK
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.14.2.1" data-path="OVS_DPDK_编译运行.html">
            
                <a href="OVS_DPDK_编译运行.html">
            
                    
                    OVS-DPDK编译运行
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.2.2" data-path="OVS_架构和代码.html">
            
                <a href="OVS_架构和代码.html">
            
                    
                    OVS架构和代码
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.2.3" data-path="OVS_DPDK_performance_HXT_ARM_server.html">
            
                <a href="OVS_DPDK_performance_HXT_ARM_server.html">
            
                    
                    OVS-DPDK for ARM server 性能测试环境
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.2.4" data-path="DPDK_Mellanox.html">
            
                <a href="DPDK_Mellanox.html">
            
                    
                    DPDK Mellanox
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.2.5" data-path="OVS_phy-vm-phy.html">
            
                <a href="OVS_phy-vm-phy.html">
            
                    
                    OVS PHY-VM-PHY
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.2.6" data-path="networking_网络虚拟化用例记录.html">
            
                <a href="networking_网络虚拟化用例记录.html">
            
                    
                    网络虚拟化用例记录
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.2.7" data-path="networking_网络虚拟化操作记录.html">
            
                <a href="networking_网络虚拟化操作记录.html">
            
                    
                    网络虚拟化操作记录
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.14.3" data-path="as_title.html">
            
                <a href="as_title.html">
            
                    
                    虚拟化网络
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.14.3.1" data-path="networking_tc_filter_连接veth和tap.html">
            
                <a href="networking_tc_filter_连接veth和tap.html">
            
                    
                    Connecting a veth device to tap
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.3.2" data-path="networking_multicast_vxlan_flannel.html">
            
                <a href="networking_multicast_vxlan_flannel.html">
            
                    
                    multicast vxlan和flannel
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.3.3" data-path="networking_virtio网络介绍.html">
            
                <a href="networking_virtio网络介绍.html">
            
                    
                    virtio网络介绍(网摘): vhost-net virtio-net vhost-user SRIOV
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.3.4" data-path="networking_virtualization_杂记.html">
            
                <a href="networking_virtualization_杂记.html">
            
                    
                    虚拟化网络杂记
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.3.5" data-path="networking_linux虚拟网络接口.html">
            
                <a href="networking_linux虚拟网络接口.html">
            
                    
                    linux虚拟网络接口(网摘)
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.15" data-path="as_title.html">
            
                <a href="as_title.html">
            
                    
                    内核 设备和驱动相关
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.15.1" data-path="driver_驱动中使用工作队列轮询.html">
            
                <a href="driver_驱动中使用工作队列轮询.html">
            
                    
                    驱动中使用工作队列轮询
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.2" data-path="device_driver_杂记.html">
            
                <a href="device_driver_杂记.html">
            
                    
                    驱动调试杂记
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.3" data-path="device_driver_原理相关.html">
            
                <a href="device_driver_原理相关.html">
            
                    
                    kernel和驱动原理相关
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.4" data-path="device_localbus_16bit读写.html">
            
                <a href="device_localbus_16bit读写.html">
            
                    
                    CPLD做8bit到16bit转换
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.5" data-path="as_title.html">
            
                <a href="as_title.html">
            
                    
                    nand
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.15.5.1" data-path="device_driver_octeon_nand.html">
            
                <a href="device_driver_octeon_nand.html">
            
                    
                    octeon nand flash驱动
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.5.2" data-path="device_driver_nand概率写失败问题分析.html">
            
                <a href="device_driver_nand概率写失败问题分析.html">
            
                    
                    Nand flash概率写失败问题分析
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.15.6" data-path="octeon_remote_pci.html">
            
                <a href="octeon_remote_pci.html">
            
                    
                    octeon remote-pci.c阅读
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.7" data-path="Device_VFIO_notes.html">
            
                <a href="Device_VFIO_notes.html">
            
                    
                    VFIO简介
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.8" data-path="as_title.html">
            
                <a href="as_title.html">
            
                    
                    智能网卡和DPDK
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.15.8.1" data-path="smartNIC_智能网卡对比.html">
            
                <a href="smartNIC_智能网卡对比.html">
            
                    
                    智能网卡对比
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.8.2" data-path="octeon_pci_NIC.html">
            
                <a href="octeon_pci_NIC.html">
            
                    
                    octeon PCI NIC
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.8.3" data-path="as_title.html">
            
                <a href="as_title.html">
            
                    
                    octeon liquidIO
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.15.8.3.1" data-path="smartNIC_liquidIO_代码阅读app篇.html">
            
                <a href="smartNIC_liquidIO_代码阅读app篇.html">
            
                    
                    PCI-NIC 代码阅读 --app篇
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.8.3.2" data-path="smartNIC_liquidIO_代码阅读api篇.html">
            
                <a href="smartNIC_liquidIO_代码阅读api篇.html">
            
                    
                    PCI-NIC 代码阅读 --api篇
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.8.3.3" data-path="smartNIC_liquidIO_代码阅读driver篇之结构体.html">
            
                <a href="smartNIC_liquidIO_代码阅读driver篇之结构体.html">
            
                    
                    PCI-NIC 代码阅读 --driver篇之结构体
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.8.3.4" data-path="smartNIC_liquidIO_代码阅读driver篇.html">
            
                <a href="smartNIC_liquidIO_代码阅读driver篇.html">
            
                    
                    PCI-NIC 代码阅读 --driver篇
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.8.3.5" data-path="smartNIC_liquidIO_代码阅读真NIC篇.html">
            
                <a href="smartNIC_liquidIO_代码阅读真NIC篇.html">
            
                    
                    PCI-NIC 代码阅读 --真NIC篇
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.15.8.4" data-path="networking_dpdk使用_2014.html">
            
                <a href="networking_dpdk使用_2014.html">
            
                    
                    DPDK使用(2014)
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.15.9" data-path="device_nvme要点介绍.html">
            
                <a href="device_nvme要点介绍.html">
            
                    
                    nvme要点介绍
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.16" data-path="as_title.html">
            
                <a href="as_title.html">
            
                    
                    CPU Arch相关
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.16.1" data-path="as_title.html">
            
                <a href="as_title.html">
            
                    
                    ARM64
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.16.1.1" data-path="CPU_ARM64_thunder_overview.html">
            
                <a href="CPU_ARM64_thunder_overview.html">
            
                    
                    thunder 概览
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.1.2" data-path="CPU_ARM64_thunder_开发板操作记录.html">
            
                <a href="CPU_ARM64_thunder_开发板操作记录.html">
            
                    
                    thunder 开发板操作记录
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.1.3" data-path="CPU_ARM64_thunder_bdk.html">
            
                <a href="CPU_ARM64_thunder_bdk.html">
            
                    
                    thunder BDK
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.1.4" data-path="CPU_ARM64_thunder_efi_rtc.html">
            
                <a href="CPU_ARM64_thunder_efi_rtc.html">
            
                    
                    thunder RTC时间和efi
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.1.5" data-path="CPU_ARM64_thunder_uefi_fdt.html">
            
                <a href="CPU_ARM64_thunder_uefi_fdt.html">
            
                    
                    thunder uefi和fdt
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.1.6" data-path="CPU_ARM64_thunder_atf.html">
            
                <a href="CPU_ARM64_thunder_atf.html">
            
                    
                    thunder atf
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.1.7" data-path="CPU_ARM64_thunder_kernel_boot.html">
            
                <a href="CPU_ARM64_thunder_kernel_boot.html">
            
                    
                    thunder kernel启动打印流程
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.16.2" data-path="as_title.html">
            
                <a href="as_title.html">
            
                    
                    PPC
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.16.2.1" data-path="CPU_PPC启动多核Linux_流程和内存映射.html">
            
                <a href="CPU_PPC启动多核Linux_流程和内存映射.html">
            
                    
                    PPC启动多核linux: 流程和内存映射
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.2.2" data-path="CPU_PPC_kernel升级记录.html">
            
                <a href="CPU_PPC_kernel升级记录.html">
            
                    
                    PPC kernel升级记录
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.16.3" data-path="as_title.html">
            
                <a href="as_title.html">
            
                    
                    MIPS
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.16.3.1" data-path="CPU_MIPS_octeon地址空间和寄存器访问.html">
            
                <a href="CPU_MIPS_octeon地址空间和寄存器访问.html">
            
                    
                    octeon 地址空间和寄存器访问
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.3.2" data-path="CPU_MIPS_octeon操作记录.html">
            
                <a href="CPU_MIPS_octeon操作记录.html">
            
                    
                    octeon 操作记录
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.3.3" data-path="CPU_MIPS_octeon_包处理性能.html">
            
                <a href="CPU_MIPS_octeon_包处理性能.html">
            
                    
                    octeon 系列处理器包处理性能
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.3.4" data-path="CPU_MIPS_octeon_ddr调试记录.html">
            
                <a href="CPU_MIPS_octeon_ddr调试记录.html">
            
                    
                    octeon DDR调试
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.3.5" data-path="CPU_MIPS_octeon_BDK.html">
            
                <a href="CPU_MIPS_octeon_BDK.html">
            
                    
                    octeon CN78xx BDK
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.3.6" data-path="kernel_增加ECC中断.html">
            
                <a href="kernel_增加ECC中断.html">
            
                    
                    octeon 增加ECC中断
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.3.7" data-path="CPU_MIPS_octeon_hw-ddr2代码走读.html">
            
                <a href="CPU_MIPS_octeon_hw-ddr2代码走读.html">
            
                    
                    octeon hw-ddr2代码走读
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.3.8" data-path="CPU_MIPS_octeon_reboot调试和ddr中断.html">
            
                <a href="CPU_MIPS_octeon_reboot调试和ddr中断.html">
            
                    
                    octeon reboot调试和DDR中断
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.3.9" data-path="CPU_MIPS_octeon中断.html">
            
                <a href="CPU_MIPS_octeon中断.html">
            
                    
                    octeon 中断
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.3.10" data-path="CPU_MIPS_octeon原子操作.html">
            
                <a href="CPU_MIPS_octeon原子操作.html">
            
                    
                    octeon 原子操作
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.3.11" data-path="CPU_MIPS_octeon网口代码分析.html">
            
                <a href="CPU_MIPS_octeon网口代码分析.html">
            
                    
                    octeon 网口代码分析
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            本书使用 GitBook 发布
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >go tools增加ppc32支持.md</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div class="search-plus" id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <div id="anchor-navigation-ex-navbar"><i class="fa fa-navicon"></i><ul><li><span class="title-icon "></span><a href="#gccgo&#x5DE5;&#x5177;&#x94FE;&#x4E0D;&#x7F16;&#x8BD1;c&#x6587;&#x4EF6;"><b>1. </b>gccgo&#x5DE5;&#x5177;&#x94FE;&#x4E0D;&#x7F16;&#x8BD1;c&#x6587;&#x4EF6;</a></li><ul><li><span class="title-icon "></span><a href="#&#x8FC7;&#x7A0B;"><b>1.1. </b>&#x8FC7;&#x7A0B;</a></li></ul><li><span class="title-icon "></span><a href="#gcc&#x7684;gccgo&#x5B98;&#x65B9;&#x6587;&#x6863;"><b>2. </b>gcc&#x7684;gccgo&#x5B98;&#x65B9;&#x6587;&#x6863;</a></li><li><span class="title-icon "></span><a href="#&#x7F16;&#x8BD1;gc-go&#x5E76;&#x4E0A;&#x4F20;&#x4E0B;&#x8F7D;"><b>3. </b>&#x7F16;&#x8BD1;gc go&#x5E76;&#x4E0A;&#x4F20;&#x4E0B;&#x8F7D;</a></li><li><span class="title-icon "></span><a href="#gccgo-toolchain&#x51C6;&#x5907;-&#x64CD;&#x4F5C;&#x547D;&#x4EE4;&#x7248;&#x672C;"><b>4. </b>gccgo toolchain&#x51C6;&#x5907;, &#x64CD;&#x4F5C;&#x547D;&#x4EE4;&#x7248;&#x672C;</a></li><ul><li><span class="title-icon "></span><a href="#build-toolchain"><b>4.1. </b>build toolchain</a></li></ul><li><span class="title-icon "></span><a href="#install-dependencies"><b>5. </b>install dependencies</a></li><li><span class="title-icon "></span><a href="#build"><b>6. </b>build</a></li><ul><li><span class="title-icon "></span><a href="#upload-the-toolchain-to-artifactory"><b>6.1. </b>upload the toolchain to artifactory</a></li></ul><li><span class="title-icon "></span><a href="#&#x547D;&#x4EE4;cache"><b>7. </b>&#x547D;&#x4EE4;cache</a></li><li><span class="title-icon "></span><a href="#go&#x6E90;&#x7801;&#x7F16;&#x8BD1;"><b>8. </b>go&#x6E90;&#x7801;&#x7F16;&#x8BD1;</a></li><ul><li><span class="title-icon "></span><a href="#&#x539F;&#x7248;go&#x6E90;&#x7801;&#x7F16;&#x8BD1;go-tools"><b>8.1. </b>&#x539F;&#x7248;go&#x6E90;&#x7801;&#x7F16;&#x8BD1;go tools</a></li><li><span class="title-icon "></span><a href="#&#x4FEE;&#x6539;&#x7248;&#x6E90;&#x7801;&#x7F16;&#x8BD1;"><b>8.2. </b>&#x4FEE;&#x6539;&#x7248;&#x6E90;&#x7801;&#x7F16;&#x8BD1;</a></li></ul><li><span class="title-icon "></span><a href="#&#x4E0D;&#x6539;&#x53D8;go-tools&#x7684;&#x5C1D;&#x8BD5;"><b>9. </b>&#x4E0D;&#x6539;&#x53D8;go tools&#x7684;&#x5C1D;&#x8BD5;</a></li><ul><li><span class="title-icon "></span><a href="#&#x4F7F;&#x7528;gccgo"><b>9.1. </b>&#x4F7F;&#x7528;gccgo</a></li><ul><li><span class="title-icon "></span><a href="#&#x4F20;&#x5165;goarchppc64"><b>9.1.1. </b>&#x4F20;&#x5165;GOARCH=ppc64</a></li><li><span class="title-icon "></span><a href="#&#x4F20;&#x5165;goarchamd64"><b>9.1.2. </b>&#x4F20;&#x5165;GOARCH=amd64</a></li><li><span class="title-icon "></span><a href="#&#x603B;&#x7ED3;"><b>9.1.3. </b>&#x603B;&#x7ED3;:</a></li></ul></ul><li><span class="title-icon "></span><a href="#&#x5C1D;&#x8BD5;&#x6210;&#x529F;-&#x4F7F;&#x7528;ppc32-gccgo&#x7684;&#x65B9;&#x6CD5;"><b>10. </b>&#x5C1D;&#x8BD5;&#x6210;&#x529F;, &#x4F7F;&#x7528;ppc32 gccgo&#x7684;&#x65B9;&#x6CD5;</a></li><li><span class="title-icon "></span><a href="#&#x4FEE;&#x6539;go&#x6E90;&#x7801;-&#x652F;&#x6301;goarchppc32"><b>11. </b>&#x4FEE;&#x6539;go&#x6E90;&#x7801;, &#x652F;&#x6301;GOARCH=ppc32</a></li><ul><li><span class="title-icon "></span><a href="#&#x7F16;&#x8BD1;gccgo"><b>11.1. </b>&#x7F16;&#x8BD1;gccgo</a></li><ul><li><span class="title-icon "></span><a href="#crosstool-ng&#x7F16;&#x8BD1;gccgo"><b>11.1.1. </b>crosstool-ng&#x7F16;&#x8BD1;gccgo</a></li><li><span class="title-icon "></span><a href="#&#x4F7F;&#x7528;crosstool-ng&#x7684;gccgo"><b>11.1.2. </b>&#x4F7F;&#x7528;crosstool-ng&#x7684;gccgo</a></li></ul><li><span class="title-icon "></span><a href="#&#x4FEE;&#x6539;go&#x6E90;&#x7801;&#x652F;&#x6301;ppc32"><b>11.2. </b>&#x4FEE;&#x6539;go&#x6E90;&#x7801;&#x652F;&#x6301;ppc32</a></li><ul><li><span class="title-icon "></span><a href="#power-isa&#x80CC;&#x666F;&#x77E5;&#x8BC6;"><b>11.2.1. </b>power ISA&#x80CC;&#x666F;&#x77E5;&#x8BC6;</a></li><li><span class="title-icon "></span><a href="#default-arch&#x9009;&#x9879;"><b>11.2.2. </b>default ARCH&#x9009;&#x9879;</a></li><li><span class="title-icon "></span><a href="#&#x9ED8;&#x8BA4;&#x7F16;&#x8BD1;&#x5668;&#x53C2;&#x6570;"><b>11.2.3. </b>&#x9ED8;&#x8BA4;&#x7F16;&#x8BD1;&#x5668;&#x53C2;&#x6570;</a></li><li><span class="title-icon "></span><a href="#&#x8981;&#x4FEE;&#x6539;&#x7684;&#x6587;&#x4EF6;"><b>11.2.4. </b>&#x8981;&#x4FEE;&#x6539;&#x7684;&#x6587;&#x4EF6;</a></li></ul></ul><li><span class="title-icon "></span><a href="#ppc64&#x65E0;&#x6CD5;&#x5728;e6500&#x4E0A;&#x8FD0;&#x884C;"><b>12. </b>ppc64&#x65E0;&#x6CD5;&#x5728;e6500&#x4E0A;&#x8FD0;&#x884C;</a></li><ul><li><span class="title-icon "></span><a href="#&#x8FD9;&#x4E9B;&#x7F3A;&#x5931;&#x7684;&#x7B26;&#x53F7;&#x5E94;&#x8BE5;&#x5728;&#x54EA;&#x91CC;"><b>12.1. </b>&#x8FD9;&#x4E9B;&#x7F3A;&#x5931;&#x7684;&#x7B26;&#x53F7;&#x5E94;&#x8BE5;&#x5728;&#x54EA;&#x91CC;?</a></li><li><span class="title-icon "></span><a href="#&#x4E3A;&#x4EC0;&#x4E48;generic-morestackc&#x6CA1;&#x6709;&#x7F16;&#x8BD1;&#x5230;"><b>12.2. </b>&#x4E3A;&#x4EC0;&#x4E48;generic-morestack.c&#x6CA1;&#x6709;&#x7F16;&#x8BD1;&#x5230;?</a></li><ul><li><span class="title-icon "></span><a href="#crosstool-ng&#x7684;bug"><b>12.2.1. </b>crosstool-ng&#x7684;bug</a></li></ul><li><span class="title-icon "></span><a href="#&#x5173;&#x4E8E;split-stack"><b>12.3. </b>&#x5173;&#x4E8E;split stack</a></li><ul><li><span class="title-icon "></span><a href="#&#x4E0A;&#x9762;&#x63D0;&#x5230;&#x7684;gold-linker&#x662F;&#x4EC0;&#x4E48;&#x610F;&#x601D;"><b>12.3.1. </b>&#x4E0A;&#x9762;&#x63D0;&#x5230;&#x7684;gold linker&#x662F;&#x4EC0;&#x4E48;&#x610F;&#x601D;?</a></li><li><span class="title-icon "></span><a href="#&#x76F8;&#x5173;&#x94FE;&#x63A5;"><b>12.3.2. </b>&#x76F8;&#x5173;&#x94FE;&#x63A5;</a></li></ul></ul><li><span class="title-icon "></span><a href="#&#x4E0A;&#x4F20;gccgo&#x5DE5;&#x5177;&#x94FE;&#x5230;artifactory"><b>13. </b>&#x4E0A;&#x4F20;gccgo&#x5DE5;&#x5177;&#x94FE;&#x5230;artifactory</a></li><li><span class="title-icon "></span><a href="#gccgo&#x7684;hello-size&#x8FC7;&#x5927;&#x95EE;&#x9898;"><b>14. </b>gccgo&#x7684;hello size&#x8FC7;&#x5927;&#x95EE;&#x9898;</a></li><ul><li><span class="title-icon "></span><a href="#&#x76F8;&#x5173;&#x547D;&#x4EE4;"><b>14.1. </b>&#x76F8;&#x5173;&#x547D;&#x4EE4;</a></li><li><span class="title-icon "></span><a href="#&#x51CF;&#x5C0F;libgoa&#x7684;&#x4F53;&#x79EF;"><b>14.2. </b>&#x51CF;&#x5C0F;libgo.a&#x7684;&#x4F53;&#x79EF;</a></li><ul><li><span class="title-icon "></span><a href="#&#x4F7F;&#x80FD;lto"><b>14.2.1. </b>&#x4F7F;&#x80FD;lto</a></li></ul><li><span class="title-icon "></span><a href="#&#x6539;&#x52A8;&#x63D0;&#x4EA4;&#x5230;crosstool-ng"><b>14.3. </b>&#x6539;&#x52A8;&#x63D0;&#x4EA4;&#x5230;crosstool-ng</a></li><li><span class="title-icon "></span><a href="#goexport&#x5C0F;&#x8282;"><b>14.4. </b>go_export&#x5C0F;&#x8282;</a></li><li><span class="title-icon "></span><a href="#static&#x548C;static-libgo"><b>14.5. </b>static&#x548C;static-libgo</a></li></ul><li><span class="title-icon "></span><a href="#&#x8BA9;gcgo&#x652F;&#x6301;ppc32"><b>15. </b>&#x8BA9;gcgo&#x652F;&#x6301;ppc32</a></li><li><span class="title-icon "></span><a href="#&#x4E0B;&#x4E00;&#x6B65;"><b>16. </b>&#x4E0B;&#x4E00;&#x6B65;</a></li><li><span class="title-icon "></span><a href="#&#x8865;&#x5145;-fant-f&#x8FD0;&#x884C;topid"><b>17. </b>&#x8865;&#x5145;: fant-f&#x8FD0;&#x884C;topid</a></li><li><span class="title-icon "></span><a href="#&#x8865;&#x5145;-ppc64"><b>18. </b>&#x8865;&#x5145;: ppc64</a></li><li><span class="title-icon "></span><a href="#&#x8865;&#x5145;-&#x4E3A;&#x4EC0;&#x4E48;gc-go&#x5DE5;&#x5177;&#x94FE;&#x7684;&#x652F;&#x6301;ppc64-&#x4F46;&#x4E0D;&#x80FD;&#x5728;e6500&#x4E0A;&#x8FD0;&#x884C;"><b>19. </b>&#x8865;&#x5145;: &#x4E3A;&#x4EC0;&#x4E48;gc go&#x5DE5;&#x5177;&#x94FE;&#x7684;&#x652F;&#x6301;ppc64, &#x4F46;&#x4E0D;&#x80FD;&#x5728;e6500&#x4E0A;&#x8FD0;&#x884C;?</a></li><li><span class="title-icon "></span><a href="#&#x8865;&#x5145;-elf&#x683C;&#x5F0F;"><b>20. </b>&#x8865;&#x5145;: elf&#x683C;&#x5F0F;</a></li></ul></div><a href="#gccgo&#x5DE5;&#x5177;&#x94FE;&#x4E0D;&#x7F16;&#x8BD1;c&#x6587;&#x4EF6;" id="anchorNavigationExGoTop"><i class="fa fa-arrow-up"></i></a><html><head></head><body><ul>
<li><a href="#gccgo&#x5DE5;&#x5177;&#x94FE;&#x4E0D;&#x7F16;&#x8BD1;c&#x6587;&#x4EF6;">gccgo&#x5DE5;&#x5177;&#x94FE;&#x4E0D;&#x7F16;&#x8BD1;c&#x6587;&#x4EF6;</a><ul>
<li><a href="#&#x8FC7;&#x7A0B;">&#x8FC7;&#x7A0B;</a></li>
</ul>
</li>
<li><a href="#gcc&#x7684;gccgo&#x5B98;&#x65B9;&#x6587;&#x6863;">gcc&#x7684;gccgo&#x5B98;&#x65B9;&#x6587;&#x6863;</a></li>
<li><a href="#&#x7F16;&#x8BD1;gc-go&#x5E76;&#x4E0A;&#x4F20;&#x4E0B;&#x8F7D;">&#x7F16;&#x8BD1;gc go&#x5E76;&#x4E0A;&#x4F20;&#x4E0B;&#x8F7D;</a></li>
<li><a href="#gccgo-toolchain&#x51C6;&#x5907;-&#x64CD;&#x4F5C;&#x547D;&#x4EE4;&#x7248;&#x672C;">gccgo toolchain&#x51C6;&#x5907;, &#x64CD;&#x4F5C;&#x547D;&#x4EE4;&#x7248;&#x672C;</a><ul>
<li><a href="#build-toolchain">build toolchain</a></li>
<li><a href="#upload-the-toolchain-to-artifactory">upload the toolchain to artifactory</a></li>
</ul>
</li>
<li><a href="#&#x547D;&#x4EE4;cache">&#x547D;&#x4EE4;cache</a></li>
<li><a href="#go&#x6E90;&#x7801;&#x7F16;&#x8BD1;">go&#x6E90;&#x7801;&#x7F16;&#x8BD1;</a><ul>
<li><a href="#&#x539F;&#x7248;go&#x6E90;&#x7801;&#x7F16;&#x8BD1;go-tools">&#x539F;&#x7248;go&#x6E90;&#x7801;&#x7F16;&#x8BD1;go tools</a></li>
<li><a href="#&#x4FEE;&#x6539;&#x7248;&#x6E90;&#x7801;&#x7F16;&#x8BD1;">&#x4FEE;&#x6539;&#x7248;&#x6E90;&#x7801;&#x7F16;&#x8BD1;</a></li>
</ul>
</li>
<li><a href="#&#x4E0D;&#x6539;&#x53D8;go-tools&#x7684;&#x5C1D;&#x8BD5;">&#x4E0D;&#x6539;&#x53D8;go tools&#x7684;&#x5C1D;&#x8BD5;</a><ul>
<li><a href="#&#x4F7F;&#x7528;gccgo">&#x4F7F;&#x7528;gccgo</a><ul>
<li><a href="#&#x4F20;&#x5165;goarchppc64">&#x4F20;&#x5165;<code>GOARCH=ppc64</code></a></li>
<li><a href="#&#x4F20;&#x5165;goarchamd64">&#x4F20;&#x5165;<code>GOARCH=amd64</code></a></li>
<li><a href="#&#x603B;&#x7ED3;">&#x603B;&#x7ED3;:</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#&#x5C1D;&#x8BD5;&#x6210;&#x529F;-&#x4F7F;&#x7528;ppc32-gccgo&#x7684;&#x65B9;&#x6CD5;">&#x5C1D;&#x8BD5;&#x6210;&#x529F;, &#x4F7F;&#x7528;ppc32 gccgo&#x7684;&#x65B9;&#x6CD5;</a></li>
<li><a href="#&#x4FEE;&#x6539;go&#x6E90;&#x7801;-&#x652F;&#x6301;goarchppc32">&#x4FEE;&#x6539;go&#x6E90;&#x7801;, &#x652F;&#x6301;<code>GOARCH=ppc32</code></a><ul>
<li><a href="#&#x7F16;&#x8BD1;gccgo">&#x7F16;&#x8BD1;gccgo</a><ul>
<li><a href="#crosstool-ng&#x7F16;&#x8BD1;gccgo">crosstool-ng&#x7F16;&#x8BD1;gccgo</a></li>
<li><a href="#&#x4F7F;&#x7528;crosstool-ng&#x7684;gccgo">&#x4F7F;&#x7528;crosstool-ng&#x7684;gccgo</a></li>
</ul>
</li>
<li><a href="#&#x4FEE;&#x6539;go&#x6E90;&#x7801;&#x652F;&#x6301;ppc32">&#x4FEE;&#x6539;go&#x6E90;&#x7801;&#x652F;&#x6301;ppc32</a><ul>
<li><a href="#power-isa&#x80CC;&#x666F;&#x77E5;&#x8BC6;">power ISA&#x80CC;&#x666F;&#x77E5;&#x8BC6;</a><ul>
<li><a href="#power-isa-v206">Power ISA v.2.06</a></li>
<li><a href="#power-isa-v207">Power ISA v.2.07</a></li>
<li><a href="#power-isa-v30">Power ISA v.3.0</a></li>
</ul>
</li>
<li><a href="#default-arch&#x9009;&#x9879;">default ARCH&#x9009;&#x9879;</a></li>
<li><a href="#&#x9ED8;&#x8BA4;&#x7F16;&#x8BD1;&#x5668;&#x53C2;&#x6570;">&#x9ED8;&#x8BA4;&#x7F16;&#x8BD1;&#x5668;&#x53C2;&#x6570;</a></li>
<li><a href="#&#x8981;&#x4FEE;&#x6539;&#x7684;&#x6587;&#x4EF6;">&#x8981;&#x4FEE;&#x6539;&#x7684;&#x6587;&#x4EF6;</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#ppc64&#x65E0;&#x6CD5;&#x5728;e6500&#x4E0A;&#x8FD0;&#x884C;">ppc64&#x65E0;&#x6CD5;&#x5728;e6500&#x4E0A;&#x8FD0;&#x884C;</a><ul>
<li><a href="#&#x8FD9;&#x4E9B;&#x7F3A;&#x5931;&#x7684;&#x7B26;&#x53F7;&#x5E94;&#x8BE5;&#x5728;&#x54EA;&#x91CC;">&#x8FD9;&#x4E9B;&#x7F3A;&#x5931;&#x7684;&#x7B26;&#x53F7;&#x5E94;&#x8BE5;&#x5728;&#x54EA;&#x91CC;?</a></li>
<li><a href="#&#x4E3A;&#x4EC0;&#x4E48;generic-morestackc&#x6CA1;&#x6709;&#x7F16;&#x8BD1;&#x5230;">&#x4E3A;&#x4EC0;&#x4E48;<code>generic-morestack.c</code>&#x6CA1;&#x6709;&#x7F16;&#x8BD1;&#x5230;?</a><ul>
<li><a href="#crosstool-ng&#x7684;bug">crosstool-ng&#x7684;bug</a></li>
</ul>
</li>
<li><a href="#&#x5173;&#x4E8E;split-stack">&#x5173;&#x4E8E;split stack</a><ul>
<li><a href="#&#x4E0A;&#x9762;&#x63D0;&#x5230;&#x7684;gold-linker&#x662F;&#x4EC0;&#x4E48;&#x610F;&#x601D;">&#x4E0A;&#x9762;&#x63D0;&#x5230;&#x7684;gold linker&#x662F;&#x4EC0;&#x4E48;&#x610F;&#x601D;?</a></li>
<li><a href="#&#x76F8;&#x5173;&#x94FE;&#x63A5;">&#x76F8;&#x5173;&#x94FE;&#x63A5;</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#&#x4E0A;&#x4F20;gccgo&#x5DE5;&#x5177;&#x94FE;&#x5230;artifactory">&#x4E0A;&#x4F20;gccgo&#x5DE5;&#x5177;&#x94FE;&#x5230;artifactory</a></li>
<li><a href="#gccgo&#x7684;hello-size&#x8FC7;&#x5927;&#x95EE;&#x9898;">gccgo&#x7684;hello size&#x8FC7;&#x5927;&#x95EE;&#x9898;</a><ul>
<li><a href="#&#x76F8;&#x5173;&#x547D;&#x4EE4;">&#x76F8;&#x5173;&#x547D;&#x4EE4;</a></li>
<li><a href="#&#x51CF;&#x5C0F;libgoa&#x7684;&#x4F53;&#x79EF;">&#x51CF;&#x5C0F;libgo.a&#x7684;&#x4F53;&#x79EF;</a><ul>
<li><a href="#&#x4F7F;&#x80FD;lto">&#x4F7F;&#x80FD;lto</a></li>
</ul>
</li>
<li><a href="#&#x6539;&#x52A8;&#x63D0;&#x4EA4;&#x5230;crosstool-ng">&#x6539;&#x52A8;&#x63D0;&#x4EA4;&#x5230;crosstool-ng</a></li>
<li><a href="#go_export&#x5C0F;&#x8282;">go_export&#x5C0F;&#x8282;</a></li>
<li><a href="#static&#x548C;static-libgo">static&#x548C;static-libgo</a></li>
</ul>
</li>
<li><a href="#&#x8BA9;gcgo&#x652F;&#x6301;ppc32">&#x8BA9;gcgo&#x652F;&#x6301;ppc32</a></li>
<li><a href="#&#x4E0B;&#x4E00;&#x6B65;">&#x4E0B;&#x4E00;&#x6B65;</a></li>
<li><a href="#&#x8865;&#x5145;-fant-f&#x8FD0;&#x884C;topid">&#x8865;&#x5145;: fant-f&#x8FD0;&#x884C;topid</a></li>
<li><a href="#&#x8865;&#x5145;-ppc64">&#x8865;&#x5145;: ppc64</a></li>
<li><a href="#&#x8865;&#x5145;-&#x4E3A;&#x4EC0;&#x4E48;gc-go&#x5DE5;&#x5177;&#x94FE;&#x7684;&#x652F;&#x6301;ppc64-&#x4F46;&#x4E0D;&#x80FD;&#x5728;e6500&#x4E0A;&#x8FD0;&#x884C;">&#x8865;&#x5145;: &#x4E3A;&#x4EC0;&#x4E48;gc go&#x5DE5;&#x5177;&#x94FE;&#x7684;&#x652F;&#x6301;ppc64, &#x4F46;&#x4E0D;&#x80FD;&#x5728;e6500&#x4E0A;&#x8FD0;&#x884C;?</a></li>
<li><a href="#&#x8865;&#x5145;-elf&#x683C;&#x5F0F;">&#x8865;&#x5145;: elf&#x683C;&#x5F0F;</a></li>
</ul>
<h1 id="gccgo&#x5DE5;&#x5177;&#x94FE;&#x4E0D;&#x7F16;&#x8BD1;c&#x6587;&#x4EF6;"><a name="gccgo&#x5DE5;&#x5177;&#x94FE;&#x4E0D;&#x7F16;&#x8BD1;c&#x6587;&#x4EF6;" class="anchor-navigation-ex-anchor" href="#gccgo&#x5DE5;&#x5177;&#x94FE;&#x4E0D;&#x7F16;&#x8BD1;c&#x6587;&#x4EF6;"><i class="fa fa-link" aria-hidden="true"></i></a>1. gccgo&#x5DE5;&#x5177;&#x94FE;&#x4E0D;&#x7F16;&#x8BD1;c&#x6587;&#x4EF6;</h1>
<p>&#x53C2;&#x8003;: <a href="https://github.com/golang/go/issues/41758" target="_blank">https://github.com/golang/go/issues/41758</a><br>&#x7ED3;&#x8BBA;: &#x6CA1;&#x6709;&#x6253;&#x5F00;<code>CGO_ENABLED=1</code>&#x7684;&#x60C5;&#x51B5;&#x4E0B;, &#x4E0D;&#x4F1A;&#x81EA;&#x52A8;&#x7F16;&#x8BD1;c&#x6587;&#x4EF6;. <code>CGO_ENABLED=1</code>&#x5C31;&#x597D;&#x4E86;.</p>
<h2 id="&#x8FC7;&#x7A0B;"><a name="&#x8FC7;&#x7A0B;" class="anchor-navigation-ex-anchor" href="#&#x8FC7;&#x7A0B;"><i class="fa fa-link" aria-hidden="true"></i></a>1.1. &#x8FC7;&#x7A0B;</h2>
<p>&#x4F7F;&#x7528;gccgo&#x7F16;&#x8BD1;MF14Temp&#x65F6;&#xFF0C;&#x7531;&#x4E8E;import&#x4E86;fsnotify&#x8FD9;&#x4E2A;&#x5305;&#xFF0C;&#x800C;&#x8FD9;&#x4E2A;&#x5305;&#x4F1A;&#x4F7F;&#x7528;<code>golang.org/x/sys/</code>&#x8FD9;&#x4E2A;&#x5305; &#x8FD9;&#x4E2A;&#x5305;&#x91CC;<code>unix/gccgo.go</code>&#x8FD9;&#x4E2A;go&#x6587;&#x4EF6;&#x91CC;&#x9700;&#x8981;&#x8C03;&#x7528;<code>gccgoRealSyscall</code>&#x548C;<code>gccgoRealSyscallNoError</code>&#x8FD9;&#x4E24;&#x4E2A;&#x51FD;&#x6570;&#xFF0C;&#x800C;&#x8FD9;&#x4E24;&#x4E2A;&#x51FD;&#x6570;&#x7684;&#x5B9E;&#x73B0;&#x5728;unix/gccgo_c.c&#x8FD9;&#x4E2A;c&#x6587;&#x4EF6;&#x4E2D;&#x3002;</p>
<p>&#x4EA7;&#x751F;&#x4E0B;&#x8FF0;&#x94FE;&#x63A5;&#x9519;&#x8BEF;&#x7684;&#x539F;&#x56E0;&#x662F;gccgo_c.c&#x8FD9;&#x4E2A;c&#x6587;&#x4EF6;&#x6CA1;&#x6709;&#x88AB;gccgo&#x7F16;&#x8BD1;&#xFF0C;&#x56E0;&#x6B64;&#x9700;&#x8981;&#x5728;&#x7F16;&#x8BD1;MF14Temp&#x65F6;&#xFF0C;&#x52A0;&#x4E0A;&#x201C;CGO_ENABLED=1&#x201D;&#x8FD9;&#x4E2A;&#x9009;&#x9879;&#xFF0C;&#x4F7F;&#x80FD;CGO&#xFF0C;&#x8BA9;GO&#x80FD;&#x591F;&#x8C03;&#x7528;C</p>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">GOARCH=ppc64 go build -o MF14Temp_ppc64
# gitlabe1.ext.net.nokia.com/godevsig/MF14Temp
/opt/crosstool/powerpc64-e6500-linux-gnu/bin/../lib/gcc/powerpc64-e6500-linux-gnu/10.2.0/../../../../powerpc64-e6500-linux-gnu/bin/ld: /home/xming/.cache/go-build/16/16ae8d3fbaffd001bb92ecdbfd968c9b2f078bb1bfd38396335cd0a145ce241c-d(_go_.o): in function `golang.x2eorg..z2fx..z2fsys..z2funix.SyscallNoError&apos;:
/repo/xming/go/pkg/mod/golang.org/x/sys@v0.0.0-20191005200804-aed5e4c7ecf9/unix/gccgo.go:23: undefined reference to `gccgoRealSyscallNoError&apos;
/opt/crosstool/powerpc64-e6500-linux-gnu/bin/../lib/gcc/powerpc64-e6500-linux-gnu/10.2.0/../../../../powerpc64-e6500-linux-gnu/bin/ld: /home/xming/.cache/go-build/16/16ae8d3fbaffd001bb92ecdbfd968c9b2f078bb1bfd38396335cd0a145ce241c-d(_go_.o): in function `golang.x2eorg..z2fx..z2fsys..z2funix.Syscall&apos;:
/repo/xming/go/pkg/mod/golang.org/x/sys@v0.0.0-20191005200804-aed5e4c7ecf9/unix/gccgo.go:30: undefined reference to `gccgoRealSyscall&apos;
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h1 id="gcc&#x7684;gccgo&#x5B98;&#x65B9;&#x6587;&#x6863;"><a name="gcc&#x7684;gccgo&#x5B98;&#x65B9;&#x6587;&#x6863;" class="anchor-navigation-ex-anchor" href="#gcc&#x7684;gccgo&#x5B98;&#x65B9;&#x6587;&#x6863;"><i class="fa fa-link" aria-hidden="true"></i></a>2. gcc&#x7684;gccgo&#x5B98;&#x65B9;&#x6587;&#x6863;</h1>
<p><a href="https://gcc.gnu.org/onlinedocs/gcc-10.2.0/gccgo/" target="_blank">https://gcc.gnu.org/onlinedocs/gcc-10.2.0/gccgo/</a></p>
<h1 id="&#x7F16;&#x8BD1;gc-go&#x5E76;&#x4E0A;&#x4F20;&#x4E0B;&#x8F7D;"><a name="&#x7F16;&#x8BD1;gc-go&#x5E76;&#x4E0A;&#x4F20;&#x4E0B;&#x8F7D;" class="anchor-navigation-ex-anchor" href="#&#x7F16;&#x8BD1;gc-go&#x5E76;&#x4E0A;&#x4F20;&#x4E0B;&#x8F7D;"><i class="fa fa-link" aria-hidden="true"></i></a>3. &#x7F16;&#x8BD1;gc go&#x5E76;&#x4E0A;&#x4F20;&#x4E0B;&#x8F7D;</h1>
<p>&#x5230;<code>https://artifactory-blr1.int.net.nokia.com/artifactory/godevsig-generic-local/toolchain/gccgo/</code> &#x67E5;&#x6700;&#x65B0;&#x7684;&#x6587;&#x4EF6;&#x5939;
&#x627E;&#x5230;commit&#x53F7;, &#x6BD4;&#x5982; 059da3dd98ab7be871a0556dd53fa4057f7dcf09
&#x4E0B;&#x8F7D;:</p>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">#&#x7F16;&#x8BD1;
cd golang-go
git checkout release-branch.go1.16
cd src
GOOS=linux GOARCH=amd64 ./bootstrap.bash

#&#x4E0A;&#x4F20;
curl -H &quot;X-JFrog-Art-Api:AKCp8hyinctVijrdqGaFc1YAT7e7KDHWJEaackjuv6oCheipkYU9jU5okRj8rnFkVvcZWnTVc&quot; -X PUT &quot;https://artifactory-blr1.int.net.nokia.com:443/artifactory/godevsig-generic-local/toolchain/gcgo/`git rev-parse HEAD`/&quot;  -T ../../go-linux-amd64-bootstrap.tbz

#&#x4E0B;&#x8F7D;
curl https://artifactory-blr1.int.net.nokia.com/artifactory/godevsig-generic-local/toolchain/gcgo/1cabb66796f4529afc615dd466b5667fe1509f6c/go-linux-amd64-bootstrap.tbz -O
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h1 id="gccgo-toolchain&#x51C6;&#x5907;-&#x64CD;&#x4F5C;&#x547D;&#x4EE4;&#x7248;&#x672C;"><a name="gccgo-toolchain&#x51C6;&#x5907;-&#x64CD;&#x4F5C;&#x547D;&#x4EE4;&#x7248;&#x672C;" class="anchor-navigation-ex-anchor" href="#gccgo-toolchain&#x51C6;&#x5907;-&#x64CD;&#x4F5C;&#x547D;&#x4EE4;&#x7248;&#x672C;"><i class="fa fa-link" aria-hidden="true"></i></a>4. gccgo toolchain&#x51C6;&#x5907;, &#x64CD;&#x4F5C;&#x547D;&#x4EE4;&#x7248;&#x672C;</h1>
<p>Steps to prepare gccgo toolchain</p>
<h2 id="build-toolchain"><a name="build-toolchain" class="anchor-navigation-ex-anchor" href="#build-toolchain"><i class="fa fa-link" aria-hidden="true"></i></a>4.1. build toolchain</h2>
<ul>
<li><p>checkout godev branch</p>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">cd crosstool-ng
git checkout godev
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
</li>
<li><p>make crosstool-ng
```sh</p>
<h1 id="install-dependencies"><a name="install-dependencies" class="anchor-navigation-ex-anchor" href="#install-dependencies"><i class="fa fa-link" aria-hidden="true"></i></a>5. install dependencies</h1>
<p>apt install flex help2man texinfo libtool-bin libncurses-dev gawk bison rsync</p>
</li>
</ul>
<h1 id="build"><a name="build" class="anchor-navigation-ex-anchor" href="#build"><i class="fa fa-link" aria-hidden="true"></i></a>6. build</h1>
<p>./bootstrap
./configure --enable-local
make</p>
<pre class="line-numbers language-undefined"><code class=" language-undefined">
* build gccgo toolchain
e.g. to build ppc64 gccgo
```sh
./ct-ng defconfig DEFCONFIG=samples/Nokia/isam-reborn_godev-ppc64-e6500
./ct-ng build
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul>
<li>find the toolchain in targets after successfully build<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">cd targets
ls
# powerpc64-e6500-linux-gnu
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
</li>
</ul>
<h2 id="upload-the-toolchain-to-artifactory"><a name="upload-the-toolchain-to-artifactory" class="anchor-navigation-ex-anchor" href="#upload-the-toolchain-to-artifactory"><i class="fa fa-link" aria-hidden="true"></i></a>6.1. upload the toolchain to artifactory</h2>
<ul>
<li>compress the toolchain folder<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">tar cJf godev-gccgo-ppc64.tar.xz powerpc64-e6500-linux-gnu
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li>upload to artifactory<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">curl -H &quot;X-JFrog-Art-Api:AKCp8hyinctVijrdqGaFc1YAT7e7KDHWJEaackjuv6oCheipkYU9jU5okRj8rnFkVvcZWnTVc&quot; -X PUT &quot;https://artifactory-blr1.int.net.nokia.com:443/artifactory/godevsig-generic-local/toolchain/gccgo/`git rev-parse HEAD`/&quot;  -T godev-gccgo-ppc64.tar.xz
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
</ul>
<p>&#x540C;&#x65F6;&#x4E0A;&#x4F20;ppc&#x548C;ppc64</p>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">proxyoff

cd crosstool-ng/targets

tar cJf godev-gccgo-ppc.tar.xz powerpc-e500mc-linux-gnu
tar cJf godev-gccgo-ppc64.tar.xz powerpc64-e6500-linux-gnu

curl -H &quot;X-JFrog-Art-Api:AKCp8hyinctVijrdqGaFc1YAT7e7KDHWJEaackjuv6oCheipkYU9jU5okRj8rnFkVvcZWnTVc&quot;  -X PUT &quot;https://artifactory-blr1.int.net.nokia.com:443/artifactory/godevsig-generic-local/toolchain/gccgo/`git rev-parse HEAD`/&quot;  -T &quot;{godev-gccgo-ppc.tar.xz,godev-gccgo-ppc64.tar.xz}&quot;
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h1 id="&#x547D;&#x4EE4;cache"><a name="&#x547D;&#x4EE4;cache" class="anchor-navigation-ex-anchor" href="#&#x547D;&#x4EE4;cache"><i class="fa fa-link" aria-hidden="true"></i></a>7. &#x547D;&#x4EE4;cache</h1>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh"># hello
yingjieb@9102a93a554e /repo/yingjieb/godev/practice/src/examples
$ rm -f hello; rm -rf /home/yingjieb/.cache/go-build/; rm -f gccgo.log; PATH=$PATH:/repo/yingjieb/crosstoolng/github/crosstool-ng/targets/powerpc-e500mc-linux-gnu/bin GOARCH=ppc64 /repo/yingjieb/godev/golang-go/bin/go build -compiler gccgo -gccgoflags &apos;-static -Os&apos; hello.go

/repo/yingjieb/crosstoolng/github/crosstool-ng/targets/powerpc-e500mc-linux-gnu/bin/powerpc-linux-strip hello

scp yingjieb@10.182.105.138:/repo/yingjieb/godev/practice/src/examples/hello .

# topid
yingjieb@godev-server /repo/yingjieb/godev/practice
$ export GOPATH=&quot;`pwd`:$GOPATH&quot;

yingjieb@godev-server /repo/yingjieb/godev/practice/src/tools
$ PATH=$PATH:/repo/yingjieb/crosstoolng/github/crosstool-ng/targets/powerpc-e500mc-linux-gnu/bin GOARCH=ppc64 /repo/yingjieb/godev/golang-go/bin/go build -compiler gccgo -gccgoflags &apos;-static -Os&apos; topid.go

/repo/yingjieb/crosstoolng/github/crosstool-ng/targets/powerpc-e500mc-linux-gnu/bin/powerpc-linux-strip topid

scp yingjieb@10.182.105.138:/repo/yingjieb/godev/practice/src/tools/topid .

./topid -record -tag fantf -p 1 -child -chartserver 10.182.105.138:9887 -i 3
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>&#x76EE;&#x6807;&#x662F;&#x4FEE;&#x6539;golang go&#x7684;&#x7F16;&#x8BD1;&#x5668;&#x6E90;&#x7801;, &#x4F7F;&#x5176;&#x652F;&#x6301;ppc32&#x7684;gccgo&#x540E;&#x7AEF;</p>
<h1 id="go&#x6E90;&#x7801;&#x7F16;&#x8BD1;"><a name="go&#x6E90;&#x7801;&#x7F16;&#x8BD1;" class="anchor-navigation-ex-anchor" href="#go&#x6E90;&#x7801;&#x7F16;&#x8BD1;"><i class="fa fa-link" aria-hidden="true"></i></a>8. go&#x6E90;&#x7801;&#x7F16;&#x8BD1;</h1>
<h2 id="&#x539F;&#x7248;go&#x6E90;&#x7801;&#x7F16;&#x8BD1;go-tools"><a name="&#x539F;&#x7248;go&#x6E90;&#x7801;&#x7F16;&#x8BD1;go-tools" class="anchor-navigation-ex-anchor" href="#&#x539F;&#x7248;go&#x6E90;&#x7801;&#x7F16;&#x8BD1;go-tools"><i class="fa fa-link" aria-hidden="true"></i></a>8.1. &#x539F;&#x7248;go&#x6E90;&#x7801;&#x7F16;&#x8BD1;go tools</h2>
<p><code>git clone https://github.com/golang/go.git</code></p>
<p><code>go build</code>&#x6E90;&#x7801;&#x5728;<code>src/cmd/go/internal/work/build.go</code></p>
<p>&#x7B2C;&#x4E00;&#x6B21;&#x7F16;&#x8BD1;&#x9700;&#x8981;&#x5168;&#x90E8;&#x7F16;&#x8BD1;.</p>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">cd golang-go/src
./make.bash -a
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>&#x518D;&#x7F16;<code>./make.bash --no-clean</code>&#x4F3C;&#x4E4E;&#x66F4;&#x5FEB;</p>
<p>&#x7F16;&#x8BD1;&#x597D;&#x7684;go&#x7A0B;&#x5E8F;&#x5728;&#x5F53;&#x524D;&#x5DE5;&#x7A0B;&#x7684;bin&#x76EE;&#x5F55;&#x4E0B;</p>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">cd golang-go/
export GOPATH=&quot;$GOPATH:`pwd`&quot;
#&#x7F16;&#x8BD1;go&#x4E3B;&#x7A0B;&#x5E8F;, &#x4F1A;&#x5728;&#x5F53;&#x524D;&#x76EE;&#x5F55;&#x4E0B;&#x751F;&#x6210;go&#x7684;&#x53EF;&#x6267;&#x884C;&#x7A0B;&#x5E8F;
cd src/cmd/go
go build
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>&#x6CE8;: go tools&#x662F;&#x6307;<code>GOTOOLDIR</code>&#x4E0B;&#x9762;&#x7684;&#x4E00;&#x4E9B;&#x53EF;&#x6267;&#x884C;&#x6587;&#x4EF6;:</p>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">$ ls &quot;/usr/local/go/pkg/tool/linux_amd64&quot;
addr2line  asm  buildid  cgo  compile  cover  dist  doc  fix  link  nm  objdump  pack  pprof  test2json  trace  vet
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<h2 id="&#x4FEE;&#x6539;&#x7248;&#x6E90;&#x7801;&#x7F16;&#x8BD1;"><a name="&#x4FEE;&#x6539;&#x7248;&#x6E90;&#x7801;&#x7F16;&#x8BD1;" class="anchor-navigation-ex-anchor" href="#&#x4FEE;&#x6539;&#x7248;&#x6E90;&#x7801;&#x7F16;&#x8BD1;"><i class="fa fa-link" aria-hidden="true"></i></a>8.2. &#x4FEE;&#x6539;&#x7248;&#x6E90;&#x7801;&#x7F16;&#x8BD1;</h2>
<p>&#x6211;&#x5728;godevsig&#x5206;&#x652F;&#x4FEE;&#x6539;&#x4E86;&#x6E90;&#x7801;, &#x652F;&#x6301;ppc&#x7684;gccgo
&#x73B0;&#x5728;&#x6211;&#x60F3;&#x57FA;&#x4E8E;go1.13 release&#x5206;&#x652F;&#x81EA;&#x5DF1;&#x7F16;&#x8BD1;&#x4E00;&#x5957;&#x5DE5;&#x5177;&#x94FE;&#x51FA;&#x6765;
&#x5728;godev-tool docker&#x91CC;&#x9762;&#x64CD;&#x4F5C;:</p>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">git checkout release-branch.go1.13
# e164f53422&#x662F;godevsig&#x5206;&#x652F;&#x4E0A;&#x6211;&#x7684;commit
git cherry-pick e164f53422
#&#x5728;1.15&#x4E4B;&#x524D;, &#x9700;&#x8981;&#x8FD9;&#x4E2A;commit&#x6765;&#x652F;&#x6301;ppc&#x7684;cgo
git cherry-pick 5d1378143bc

#&#x6211;&#x8FD8;&#x60F3;&#x8981;1.14&#x7684;-trimpath&#x529F;&#x80FD;
git cherry-pick eb6ce1cff4
git rm cmd/go/testdata/script/build_trimpath.txt

#gccgo&#x4E0D;&#x652F;&#x6301;go:linkname &#x6307;&#x793A;&#x7B26;, go module&#x8981;&#x7528;&#x5C31;&#x51FA;&#x9519;`//go:linkname is only supported for functions`
#&#x9700;&#x8981;&#x4E0B;&#x9762;&#x7684;patch
git cherry-pick baf7d95350
git cherry-pick 45873a242d

cd golang-go/src
GOOS=linux GOARCH=amd64 ./bootstrap.bash
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>&#x6CE8;: bootstrap&#x652F;&#x6301;<code>BOOTSTRAP_FORMAT=mintgz</code>&#x610F;&#x601D;&#x662F;&#x751F;&#x6210;&#x5E72;&#x51C0;&#x7684;&#x5DE5;&#x5177;&#x94FE;, &#x5220;&#x6389;&#x4E00;&#x4E9B;&#x4E0D;&#x7528;&#x7684;&#x6587;&#x4EF6;. &#x4F46;&#x4F3C;&#x4E4E;&#x5220;&#x7684;&#x592A;&#x72E0;&#x4E86;, &#x4E0D;&#x63A8;&#x8350;</p>
<h1 id="&#x4E0D;&#x6539;&#x53D8;go-tools&#x7684;&#x5C1D;&#x8BD5;"><a name="&#x4E0D;&#x6539;&#x53D8;go-tools&#x7684;&#x5C1D;&#x8BD5;" class="anchor-navigation-ex-anchor" href="#&#x4E0D;&#x6539;&#x53D8;go-tools&#x7684;&#x5C1D;&#x8BD5;"><i class="fa fa-link" aria-hidden="true"></i></a>9. &#x4E0D;&#x6539;&#x53D8;go tools&#x7684;&#x5C1D;&#x8BD5;</h1>
<p>&#x901A;&#x5E38;&#x6765;&#x8BB2;, &#x7528;go tools&#x9700;&#x8981;&#x4F20;&#x5165;<code>GOARCH=</code>, &#x800C;ppc32&#x662F;&#x4E0D;&#x5728;&#x5217;&#x8868;&#x91CC;&#x9762;&#x7684;:</p>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">$ go tool dist list | grep linux
linux/386
linux/amd64
linux/arm
linux/arm64
linux/mips
linux/mips64
linux/mips64le
linux/mipsle
linux/ppc64
linux/ppc64le
linux/s390x
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="&#x4F7F;&#x7528;gccgo"><a name="&#x4F7F;&#x7528;gccgo" class="anchor-navigation-ex-anchor" href="#&#x4F7F;&#x7528;gccgo"><i class="fa fa-link" aria-hidden="true"></i></a>9.1. &#x4F7F;&#x7528;gccgo</h2>
<p>&#x4E00;&#x822C;&#x7684;, go build&#x7684;&#x65F6;&#x5019;, &#x52A0;<code>-compiler gccgo</code>&#x9009;&#x9879;&#x4F7F;&#x80FD;gccgo&#x7F16;&#x8BD1;&#x5668;, &#x9700;&#x8981;&#x6709;<code>gccgo</code>&#x8FD9;&#x4E2A;&#x53EF;&#x6267;&#x884C;&#x6587;&#x4EF6;.
&#x5BF9;ppc32&#x6765;&#x8BF4;, &#x9996;&#x5148;&#x8981;&#x6709;crosstool-ng&#x7F16;&#x8BD1;&#x51FA;&#x6765;&#x7684;gccgo, &#x6BD4;&#x5982;<code>powerpc-e500mc-linux-gnu-gccgo</code>
&#x5728;<code>/repo/yingjieb/godev/gccgoppc32/powerpc-e500mc-linux-gnu/bin</code>&#x4E0B;&#x9762;
&#x5EFA;&#x4E00;&#x4E2A;gccgo&#x7684;&#x53EF;&#x6267;&#x884C;&#x811A;&#x672C;, &#x5185;&#x5BB9;&#x5982;&#x4E0B;:
&#x8FD9;&#x4F1A;&#x628A;&#x6240;&#x6709;&#x8C03;&#x7528;&#x5230;gccgo&#x7684;&#x53C2;&#x6570;&#x6253;&#x5370;&#x51FA;&#x6765;</p>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">#!/bin/bash

(
echo `pwd`
echo &quot;$@&quot;
) &gt;&gt; gccgo.log

exec powerpc-e500mc-linux-gnu-gccgo $@
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>&#x6CE8;&#x610F;, <code>go build</code>&#x4F1A;&#x4F7F;&#x7528;cache, &#x8981;&#x5F97;&#x5230;&#x5B8C;&#x6574;&#x8FC7;&#x7A0B;, &#x9700;&#x8981;&#x5220;&#x6389;cache</p>
<h3 id="&#x4F20;&#x5165;goarchppc64"><a name="&#x4F20;&#x5165;goarchppc64" class="anchor-navigation-ex-anchor" href="#&#x4F20;&#x5165;goarchppc64"><i class="fa fa-link" aria-hidden="true"></i></a>9.1.1. &#x4F20;&#x5165;GOARCH=ppc64</h3>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">yingjieb@9102a93a554e /repo/yingjieb/godev/practice/src/examples
$ rm -f hello; rm -rf /home/yingjieb/.cache/go-build/; rm -f gccgo.log; PATH=$PATH:/repo/yingjieb/godev/gccgoppc32/powerpc-e500mc-linux-gnu/bin GOARCH=ppc64 go build -compiler gccgo hello.go
yingjieb@9102a93a554e /repo/yingjieb/godev/practice/src/examples
$ cat gccgo.log
/repo/yingjieb/godev/practice/src/examples
-print-search-dirs
/repo/yingjieb/godev/practice/src/examples
-dumpversion
/repo/yingjieb/godev/practice/src/examples
-dumpmachine
/repo/yingjieb/godev/practice/src/examples
-### -x go -c -
/repo/yingjieb/godev/practice/src/examples
-c -g -fdebug-prefix-map=/tmp/go-build836929485=/tmp/go-build -gno-record-gcc-switches -fgo-relative-import-path=_/repo/yingjieb/godev/practice/src/examples -o /tmp/go-build836929485/b001/_go_.o -I /tmp/go-build836929485/b001/_importcfgroot_ /repo/yingjieb/godev/practice/src/examples/hello.go
/repo/yingjieb/godev/practice/src/examples
-xassembler-with-cpp -I /tmp/go-build836929485/b001/ -c -o /tmp/go-build836929485/b001/_buildid.o -D GOOS_linux -D GOARCH_ppc64 /tmp/go-build836929485/b001/_buildid.s
/repo/yingjieb/godev/practice/src/examples
-### -x go -c -
/repo/yingjieb/godev/practice/src/examples
-o /tmp/go-build836929485/b001/exe/a.out -Wl,-( -Wl,--whole-archive /tmp/go-build836929485/b001/_pkg_.a -Wl,--no-whole-archive -Wl,-) -Wl,--build-id=0x66534c46775162664f44395036684634392d76552f6f79586f4a615778706b5f78586c7852795069492f476e3059334754737349613869696f4b524356432f66534c46775162664f44395036684634392d7655
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>&#x867D;&#x7136;&#x4F20;&#x5165;&#x7684;&#x662F;<code>GOARCH=ppc64</code>, &#x4F46;&#x4F9D;&#x7136;&#x6210;&#x529F;&#x751F;&#x6210;&#x4E86;hello&#x7A0B;&#x5E8F;:</p>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">yingjieb@9102a93a554e /repo/yingjieb/godev/practice/src/examples
$ file hello
hello: ELF 32-bit MSB executable, PowerPC or cisco 4500, version 1 (SYSV), dynamically linked, interpreter /lib/ld.so.1, for GNU/Linux 4.9.156, with debug_info, not stripped
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>&#x751F;&#x6210;&#x7684;hello&#x548C;libgo.so.13&#x8003;&#x5230;&#x677F;&#x5B50;&#x4E0A;(FANT-F), &#x53EF;&#x4EE5;&#x6B63;&#x5E38;&#x6267;&#x884C;:</p>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">scp yingjieb@10.182.105.138:/repo/yingjieb/godev/practice/src/examples/hello .
scp yingjieb@10.182.105.138:/repo/yingjieb/godev/gccgoppc32/powerpc-e500mc-linux-gnu/powerpc-e500mc-linux-gnu/lib/libgo.so.13 .

~ # LD_LIBRARY_PATH=`pwd` ./hello
hello world!
4
0x21192008 4
4
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="&#x4F20;&#x5165;goarchamd64"><a name="&#x4F20;&#x5165;goarchamd64" class="anchor-navigation-ex-anchor" href="#&#x4F20;&#x5165;goarchamd64"><i class="fa fa-link" aria-hidden="true"></i></a>9.1.2. &#x4F20;&#x5165;GOARCH=amd64</h3>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">yingjieb@9102a93a554e /repo/yingjieb/godev/practice/src/examples
$ rm -f hello; rm -rf /home/yingjieb/.cache/go-build/; rm -f gccgo.log; PATH=$PATH:/repo/yingjieb/godev/gccgoppc32/powerpc-e500mc-linux-gnu/bin GOARCH=amd64 go build -compiler gccgo hello.go
# command-line-arguments
go1: error: &apos;-m64&apos; not supported in this configuration
yingjieb@9102a93a554e /repo/yingjieb/godev/practice/src/examples
$ cat gccgo.log
/repo/yingjieb/godev/practice/src/examples
-print-search-dirs
/repo/yingjieb/godev/practice/src/examples
-dumpversion
/repo/yingjieb/godev/practice/src/examples
-dumpmachine
/repo/yingjieb/godev/practice/src/examples
-### -x go -c -
/repo/yingjieb/godev/practice/src/examples
-c -g -m64 -fdebug-prefix-map=/tmp/go-build246565517=/tmp/go-build -gno-record-gcc-switches -fgo-relative-import-path=_/repo/yingjieb/godev/practice/src/examples -o /tmp/go-build246565517/b001/_go_.o -I /tmp/go-build246565517/b001/_importcfgroot_ /repo/yingjieb/godev/practice/src/examples/hello.go
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>&#x8BF4;&#x660E;<code>go build</code>&#x786E;&#x5B9E;&#x4F1A;<strong>&#x9ED8;&#x8BA4;</strong>&#x4F20;&#x5165;&#x4E00;&#x4E9B;&#x7F16;&#x8BD1;&#x9009;&#x9879;, &#x6BD4;&#x5982;&#x8FD9;&#x91CC;, &#x56E0;&#x4E3A;&#x6307;&#x5B9A;&#x4E86;<code>GOARCH=amd64</code>, &#x4F46;&#x6211;&#x4EEC;&#x7684;&#x4EA4;&#x53C9;&#x7F16;&#x8BD1;&#x5668;&#x662F;<code>powerpc-e500mc-linux-gnu-gccgo</code>, &#x4E0D;&#x8BA4;x86&#x7684;<code>-m64</code>&#x9009;&#x9879;, &#x62A5;&#x9519;:
<code>go1: error:  &apos;-m64&apos;  not supported in  this configuration</code></p>
<h3 id="&#x603B;&#x7ED3;"><a name="&#x603B;&#x7ED3;" class="anchor-navigation-ex-anchor" href="#&#x603B;&#x7ED3;"><i class="fa fa-link" aria-hidden="true"></i></a>9.1.3. &#x603B;&#x7ED3;:</h3>
<p>&#x4F7F;&#x7528;gccgo ppc32&#x7684;&#x4EA4;&#x53C9;toolchain&#x7684;&#x65F6;&#x5019;, &#x540E;&#x7AEF;&#x7F16;&#x8BD1;&#x5668;<code>powerpc-e500mc-linux-gnu-gccgo</code>&#x5C31;&#x9ED8;&#x8BA4;&#x4F7F;&#x7528;ppc32.
&#x5F53;<code>go build</code>&#x4F20;&#x5165;<code>GOARCH=ppc64</code>&#x65F6;, &#x5E76;&#x6CA1;&#x6709;&#x4F20;&#x5165;&quot;&#x9ED8;&#x8BA4;&quot;&#x7684;ABI, &#x6240;&#x4EE5;&#x6CA1;&#x6709;&#x7ED9;&#x7F16;&#x8BD1;&#x5668;&#x9020;&#x6210;&#x56F0;&#x6270;. 
&#x4F46;&#x8FD9;&#x91CC;&#x6709;&#x4E2A;&#x9690;&#x60A3;: </p>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">-xassembler-with-cpp -I /tmp/go-build836929485/b001/  -c -o /tmp/go-build836929485/b001/_buildid.o -D GOOS_linux -D GOARCH_ppc64 /tmp/go-build836929485/b001/_buildid.s
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>&#x8FD9;&#x91CC;&#x7684;<code>-D GOARCH_ppc64</code>&#x662F;&#x4E0D;&#x5BF9;&#x7684;.</p>
<h1 id="&#x5C1D;&#x8BD5;&#x6210;&#x529F;-&#x4F7F;&#x7528;ppc32-gccgo&#x7684;&#x65B9;&#x6CD5;"><a name="&#x5C1D;&#x8BD5;&#x6210;&#x529F;-&#x4F7F;&#x7528;ppc32-gccgo&#x7684;&#x65B9;&#x6CD5;" class="anchor-navigation-ex-anchor" href="#&#x5C1D;&#x8BD5;&#x6210;&#x529F;-&#x4F7F;&#x7528;ppc32-gccgo&#x7684;&#x65B9;&#x6CD5;"><i class="fa fa-link" aria-hidden="true"></i></a>10. &#x5C1D;&#x8BD5;&#x6210;&#x529F;, &#x4F7F;&#x7528;ppc32 gccgo&#x7684;&#x65B9;&#x6CD5;</h1>
<p>&#x5176;&#x4ED6;&#x90FD;&#x4E00;&#x6837;, &#x53EA;&#x662F;&#x8981;&#x4F20;&#x5165;<code>GOARCH=ppc64</code>&#x548C;<code>-compiler gccgo</code>, &#x5E76;&#x4E14;&#x4FDD;&#x8BC1;<code>PATH=$PATH:/repo/yingjieb/godev/gccgoppc32/powerpc-e500mc-linux-gnu/bin</code>&#x4E0B;&#x9762;&#x6709;<code>gccgo</code>&#x94FE;&#x63A5;&#x5230;&#x540C;&#x76EE;&#x5F55;&#x4E0B;&#x7684;<code>powerpc-e500mc-linux-gnu-gccgo</code></p>
<h1 id="&#x4FEE;&#x6539;go&#x6E90;&#x7801;-&#x652F;&#x6301;goarchppc32"><a name="&#x4FEE;&#x6539;go&#x6E90;&#x7801;-&#x652F;&#x6301;goarchppc32" class="anchor-navigation-ex-anchor" href="#&#x4FEE;&#x6539;go&#x6E90;&#x7801;-&#x652F;&#x6301;goarchppc32"><i class="fa fa-link" aria-hidden="true"></i></a>11. &#x4FEE;&#x6539;go&#x6E90;&#x7801;, &#x652F;&#x6301;GOARCH=ppc32</h1>
<p>&#x524D;&#x9762;&#x5DF2;&#x7ECF;&#x8BC1;&#x660E;, &#x4F7F;&#x7528;<code>GOARCH=ppc64</code>&#x662F;&#x53EF;&#x4EE5;&#x7F16;&#x8BD1;&#x6210;&#x529F;&#x7684;, &#x5E76;&#x4E14;&#x8FD0;&#x884C;&#x4E5F;&#x6CA1;&#x53D1;&#x73B0;&#x4EC0;&#x4E48;&#x95EE;&#x9898;.
&#x4F46;&#x6CE8;&#x610F;&#x5230;ppc64&#x4F1A;&#x5B9A;&#x4E49;<code>-D GOARCH_ppc64</code>, &#x8FD9;&#x4E2A;&#x5B8F;&#x662F;&#x7ED9;C&#x548C;&#x6C47;&#x7F16;&#x770B;&#x7684;, &#x6709;&#x4EC0;&#x4E48;&#x5F71;&#x54CD;&#x5462;?
&#x641C;&#x7D22;&#x4E00;&#x4E0B;, &#x4E0B;&#x9762;&#x7684;&#x6587;&#x4EF6;&#x4F7F;&#x7528;&#x4E86;<code>GOARCH_ppc64</code></p>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">src/internal/bytealg/compare_ppc64x.s
src/internal/bytealg/indexbyte_ppc64x.s
src/crypto/md5/md5block_ppc64x.s

# &#x8FD9;&#x4E2A;&#x6587;&#x4EF6;&#x662F;go&#x8FD0;&#x884C;&#x65F6;&#x7684;&#x6C47;&#x7F16;&#x652F;&#x6301;, &#x6BD4;&#x5982;gcWriteBarrier, &#x548C;cgo&#x76F8;&#x5173;&#x7684;&#x5B9E;&#x73B0;
// +build ppc64 ppc64le
src/runtime/asm_ppc64x.s

# &#x8FD9;&#x4E2A;&#x4F3C;&#x4E4E;&#x662F;syscall&#x7684;&#x6C47;&#x7F16;&#x5B9E;&#x73B0;
// +build linux
// +build ppc64 ppc64le
src/runtime/sys_linux_ppc64x.s

src/runtime/cgo/asm_ppc64x.s
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>&#x4E0B;&#x9762;&#x6211;&#x4EEC;&#x8981;&#x4FEE;&#x6539;go&#x6E90;&#x7801;, &#x4EE5;&#x652F;&#x6301;&#x76F4;&#x63A5;&#x4F20;&#x5165;<code>GOARCH=ppc32</code>
&#x9996;&#x5148;&#x9700;&#x8981;crosstool-ng&#x7F16;&#x51FA;gccgo. </p>
<h2 id="&#x7F16;&#x8BD1;gccgo"><a name="&#x7F16;&#x8BD1;gccgo" class="anchor-navigation-ex-anchor" href="#&#x7F16;&#x8BD1;gccgo"><i class="fa fa-link" aria-hidden="true"></i></a>11.1. &#x7F16;&#x8BD1;gccgo</h2>
<p>gcc&#x6E90;&#x7801;&#x91CC;&#x9762;&#x5305;&#x542B;&#x4E86;go&#x7684;&#x6E90;&#x7801;, &#x5728;<code>gcc/libgo</code>&#x4E0B;&#x9762;. &#x4E0D;&#x540C;&#x7248;&#x672C;&#x7684;gcc&#x7684;go&#x6E90;&#x7801;&#x7248;&#x672C;&#x5982;&#x4E0B;:
<code>cat gcc/libgo/VERSION</code></p>
<table>
<thead>
<tr>
<th>gcc version</th>
<th>go version</th>
</tr>
</thead>
<tbody>
<tr>
<td>gcc-8.3.0</td>
<td>go1.10.3</td>
</tr>
<tr>
<td>gcc-9.3.0</td>
<td>go1.12</td>
</tr>
<tr>
<td>gcc-10.1.0</td>
<td>go1.14.2</td>
</tr>
</tbody>
</table>
<h3 id="crosstool-ng&#x7F16;&#x8BD1;gccgo"><a name="crosstool-ng&#x7F16;&#x8BD1;gccgo" class="anchor-navigation-ex-anchor" href="#crosstool-ng&#x7F16;&#x8BD1;gccgo"><i class="fa fa-link" aria-hidden="true"></i></a>11.1.1. crosstool-ng&#x7F16;&#x8BD1;gccgo</h3>
<p>&#x8FD9;&#x91CC;&#x6211;&#x7528;&#x5B98;&#x65B9;crosstool-ng
<code>git clone https://github.com/crosstool-ng/crosstool-ng</code>
&#x9700;&#x8981;&#x5148;&#x5B89;&#x88C5;&#x4E9B;&#x4F9D;&#x8D56;:</p>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">apt install flex help2man texinfo libtool-bin libncurses-dev gawk bison
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>&#x8981;&#x751F;&#x6210;ct-ng</p>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">cd crosstool-ng
./bootstrap
./configure --enable-local
make
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>&#x4F7F;&#x7528;cg-ng</p>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">./ct-ng help
./ct-ng list-samples
./ct-ng powerpc-e300c3-linux-gnu

./ct-ng defconfig DEFCONFIG=samples/Nokia/isam-reborn-ppc-P40xx
./ct-ng menuconfig
./ct-ng build

#&#x4FDD;&#x5B58;config
./ct-ng savedefconfig DEFCONFIG=samples/Nokia/isam-reborn-ppc-e6500
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>&#x5B8C;&#x6210;&#x540E;, &#x4F1A;&#x5728;<code>targets</code>&#x4E0B;&#x9762;&#x751F;&#x6210;&#x5DE5;&#x5177;&#x94FE;</p>
<h3 id="&#x4F7F;&#x7528;crosstool-ng&#x7684;gccgo"><a name="&#x4F7F;&#x7528;crosstool-ng&#x7684;gccgo" class="anchor-navigation-ex-anchor" href="#&#x4F7F;&#x7528;crosstool-ng&#x7684;gccgo"><i class="fa fa-link" aria-hidden="true"></i></a>11.1.2. &#x4F7F;&#x7528;crosstool-ng&#x7684;gccgo</h3>
<p>&#x4E3A;&#x4E86;&#x7248;&#x672C;&#x4E00;&#x81F4;, &#x6211;&#x9009;&#x7528;&#x4E86;
gcc-10.2.0, &#x91CC;&#x9762;&#x7684;go&#x7248;&#x672C;&#x662F;go1.14;
go&#x6E90;&#x7801;&#x4F7F;&#x7528;<code>release-branch.go1.14</code>, &#x7F16;&#x8BD1;go tools.
&#x4F7F;&#x7528;&#x65B0;&#x751F;&#x6210;&#x7684;go tools, &#x6307;&#x5B9A;gccgo&#x7F16;&#x8BD1;hello.go</p>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">PATH=$PATH:/repo/yingjieb/crosstoolng/github/crosstool-ng/targets/powerpc-e500mc-linux-gnu/bin GOARCH=ppc64 /repo/yingjieb/godev/golang-go/bin/go build -compiler gccgo -gccgoflags &apos;-static -Os&apos; hello.go
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h2 id="&#x4FEE;&#x6539;go&#x6E90;&#x7801;&#x652F;&#x6301;ppc32"><a name="&#x4FEE;&#x6539;go&#x6E90;&#x7801;&#x652F;&#x6301;ppc32" class="anchor-navigation-ex-anchor" href="#&#x4FEE;&#x6539;go&#x6E90;&#x7801;&#x652F;&#x6301;ppc32"><i class="fa fa-link" aria-hidden="true"></i></a>11.2. &#x4FEE;&#x6539;go&#x6E90;&#x7801;&#x652F;&#x6301;ppc32</h2>
<h3 id="power-isa&#x80CC;&#x666F;&#x77E5;&#x8BC6;"><a name="power-isa&#x80CC;&#x666F;&#x77E5;&#x8BC6;" class="anchor-navigation-ex-anchor" href="#power-isa&#x80CC;&#x666F;&#x77E5;&#x8BC6;"><i class="fa fa-link" aria-hidden="true"></i></a>11.2.1. power ISA&#x80CC;&#x666F;&#x77E5;&#x8BC6;</h3>
<p><a href="https://en.wikipedia.org/wiki/Power_ISA" target="_blank">power ISA</a></p>
<h4 id="power-isa-v206"><a name="power-isa-v206" class="anchor-navigation-ex-anchor" href="#power-isa-v206"><i class="fa fa-link" aria-hidden="true"></i></a>Power ISA v.2.06</h4>
<p>The specification for Power ISA v.2.06 was released in February 2009, and revised in July 2010. It is based on Power ISA v.2.05 and includes extensions for the POWER7 processor and <a href="https://en.wikipedia.org/wiki/PowerPC_e500#e500mc" title="PowerPC e500" target="_blank">e500-mc core</a>. One significant new feature is vector-scalar floating-point instructions (<a href="https://en.wikipedia.org/wiki/AltiVec#VSX_(Vector_Scalar_Extension" target="_blank">VSX</a> &quot;AltiVec&quot;)). <strong>Book III-E</strong> also includes significant enhancement for the embedded specification regarding hypervisor and virtualisation on single and multi core implementations.</p>
<p>The spec was revised in November 2010 to the Power ISA v.2.06 revision B spec, enhancing virtualization features.</p>
<p><strong>Compliant cores</strong></p>
<ul>
<li>All cores that comply with previous versions of the Power ISA</li>
<li><a href="https://en.wikipedia.org/wiki/POWER7" title="POWER7" target="_blank">POWER7</a></li>
<li><a href="https://en.wikipedia.org/wiki/IBM_A2#A2I" title="IBM A2" target="_blank">A2I</a></li>
<li><a href="https://en.wikipedia.org/wiki/PowerPC_e500#e500mc" title="PowerPC e500" target="_blank">e500-mc</a></li>
<li><a href="https://en.wikipedia.org/wiki/PowerPC_e5500" title="PowerPC e5500" target="_blank">e5500</a></li>
</ul>
<h4 id="power-isa-v207"><a name="power-isa-v207" class="anchor-navigation-ex-anchor" href="#power-isa-v207"><i class="fa fa-link" aria-hidden="true"></i></a>Power ISA v.2.07</h4>
<p>The specification for Power ISA v.2.07 was released in May 2013. It is based on Power ISA v.2.06 and includes major enhancements to <a href="https://en.wikipedia.org/wiki/Logical_partition_(virtual_computing_platform" target="_blank">logical partition functionality</a> &quot;Logical partition (virtual computing platform)&quot;), <a href="https://en.wikipedia.org/wiki/Transactional_memory" title="Transactional memory" target="_blank">transactional memory</a>, expanded performance monitoring, new storage control features, additions to the VMX and VSX vector facilities (VSX-2), along with <a href="https://en.wikipedia.org/wiki/Advanced_Encryption_Standard" title="Advanced Encryption Standard" target="_blank">AES</a>&gt; and <a href="https://en.wikipedia.org/wiki/Galois_Counter_Mode" title="Galois Counter Mode" target="_blank">Galois Counter Mode</a> (GCM), SHA-224, SHA-256, SHA-384 and SHA-512 (<a href="https://en.wikipedia.org/wiki/SHA-2" title="SHA-2" target="_blank">SHA-2</a>) cryptographic extensions and <a href="https://en.wikipedia.org/wiki/Cyclic_redundancy_check" title="Cyclic redundancy check" target="_blank">cyclic redundancy check</a> (CRC) <a href="https://en.wikipedia.org/wiki/Algorithm" title="Algorithm" target="_blank">algorithms</a>.</p>
<p>The spec was revised in April 2015 to the Power ISA v.2.07 B spec.</p>
<p><strong>Compliant cores</strong></p>
<ul>
<li>All cores that comply with previous versions of the Power ISA</li>
<li><a href="https://en.wikipedia.org/wiki/POWER8" title="POWER8" target="_blank">POWER8</a></li>
<li><a href="https://en.wikipedia.org/wiki/PowerPC_e6500" title="PowerPC e6500" target="_blank">e6500</a> core</li>
<li><a href="https://en.wikipedia.org/wiki/IBM_A2#A2O" title="IBM A2" target="_blank">A2O</a></li>
</ul>
<h4 id="power-isa-v30"><a name="power-isa-v30" class="anchor-navigation-ex-anchor" href="#power-isa-v30"><i class="fa fa-link" aria-hidden="true"></i></a>Power ISA v.3.0</h4>
<p>The specification for Power ISA v.3.0 was released in November 2015. It is the first to come out after the founding of the OpenPOWER Foundation and includes enhancements for a broad spectrum of workloads and removes the server and embedded categories while retaining backwards compatibility and adds support for VSX-3 instructions. New functions include 128-bit quad-precision floating-point operations, a random number generator, hardware-assisted garbage collection and hardware-enforced trusted computing.</p>
<p>The spec was revised in March 2017 to the Power ISA v.3.0 B spec.</p>
<p><strong>Compliant cores</strong></p>
<ul>
<li>All cores that comply with previous versions of the Power ISA</li>
<li><a href="https://en.wikipedia.org/wiki/POWER9" title="POWER9" target="_blank">POWER9</a></li>
</ul>
<h3 id="default-arch&#x9009;&#x9879;"><a name="default-arch&#x9009;&#x9879;" class="anchor-navigation-ex-anchor" href="#default-arch&#x9009;&#x9879;"><i class="fa fa-link" aria-hidden="true"></i></a>11.2.2. default ARCH&#x9009;&#x9879;</h3>
<p>&#x6BCF;&#x4E2A;arch&#x90FD;&#x6709;&#x4E2A;default&#x9009;&#x9879;: &#x8FD9;&#x6BB5;&#x4EE3;&#x7801;&#x662F;&#x81EA;&#x52A8;&#x751F;&#x6210;&#x7684;</p>
<pre class="line-numbers language-go" lang="go"><code class=" language-go"><span class="token comment">// Code generated by go tool dist; DO NOT EDIT.</span>

<span class="token keyword">package</span> objabi

<span class="token keyword">import</span> <span class="token string">&quot;runtime&quot;</span>

<span class="token keyword">const</span> defaultGO386 <span class="token operator">=</span> <span class="token string">`sse2`</span>
<span class="token keyword">const</span> defaultGOARM <span class="token operator">=</span> <span class="token string">`5`</span>
<span class="token keyword">const</span> defaultGOMIPS <span class="token operator">=</span> <span class="token string">`hardfloat`</span>
<span class="token keyword">const</span> defaultGOMIPS64 <span class="token operator">=</span> <span class="token string">`hardfloat`</span>
<span class="token keyword">const</span> defaultGOPPC64 <span class="token operator">=</span> <span class="token string">`power8`</span>
<span class="token keyword">const</span> defaultGOOS <span class="token operator">=</span> runtime<span class="token punctuation">.</span>GOOS
<span class="token keyword">const</span> defaultGOARCH <span class="token operator">=</span> runtime<span class="token punctuation">.</span>GOARCH
<span class="token keyword">const</span> defaultGO_EXTLINK_ENABLED <span class="token operator">=</span> <span class="token string">``</span>
<span class="token keyword">const</span> defaultGO_LDSO <span class="token operator">=</span> <span class="token string">``</span>
<span class="token keyword">const</span> version <span class="token operator">=</span> <span class="token string">`go1.14.9`</span>
<span class="token keyword">const</span> stackGuardMultiplierDefault <span class="token operator">=</span> <span class="token number">1</span>
<span class="token keyword">const</span> goexperiment <span class="token operator">=</span> <span class="token string">``</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>&#x503C;&#x5F97;&#x6CE8;&#x610F;&#x7684;&#x662F;, PPC64&#x5B9E;&#x9645;&#x4E0A;&#x662F;<code>power8</code></p>
<h3 id="&#x9ED8;&#x8BA4;&#x7F16;&#x8BD1;&#x5668;&#x53C2;&#x6570;"><a name="&#x9ED8;&#x8BA4;&#x7F16;&#x8BD1;&#x5668;&#x53C2;&#x6570;" class="anchor-navigation-ex-anchor" href="#&#x9ED8;&#x8BA4;&#x7F16;&#x8BD1;&#x5668;&#x53C2;&#x6570;"><i class="fa fa-link" aria-hidden="true"></i></a>11.2.3. &#x9ED8;&#x8BA4;&#x7F16;&#x8BD1;&#x5668;&#x53C2;&#x6570;</h3>
<p><code>golang-go/src/cmd/go/internal/work/exec.go</code></p>
<pre class="line-numbers language-go" lang="go"><code class=" language-go"><span class="token comment">// gccArchArgs returns arguments to pass to gcc based on the architecture.</span>
<span class="token keyword">func</span> <span class="token punctuation">(</span>b <span class="token operator">*</span>Builder<span class="token punctuation">)</span> <span class="token function">gccArchArgs</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span> <span class="token punctuation">{</span>
    <span class="token keyword">switch</span> cfg<span class="token punctuation">.</span>Goarch <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token string">&quot;386&quot;</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;-m32&quot;</span><span class="token punctuation">}</span>
    <span class="token keyword">case</span> <span class="token string">&quot;amd64&quot;</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;-m64&quot;</span><span class="token punctuation">}</span>
    <span class="token keyword">case</span> <span class="token string">&quot;arm&quot;</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;-marm&quot;</span><span class="token punctuation">}</span> <span class="token comment">// not thumb</span>
    <span class="token keyword">case</span> <span class="token string">&quot;s390x&quot;</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;-m64&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;-march=z196&quot;</span><span class="token punctuation">}</span>
    <span class="token keyword">case</span> <span class="token string">&quot;mips64&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;mips64le&quot;</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;-mabi=64&quot;</span><span class="token punctuation">}</span>
    <span class="token keyword">case</span> <span class="token string">&quot;mips&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;mipsle&quot;</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;-mabi=32&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;-march=mips32&quot;</span><span class="token punctuation">}</span>
    <span class="token keyword">case</span> <span class="token string">&quot;ppc64&quot;</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> cfg<span class="token punctuation">.</span>Goos <span class="token operator">==</span> <span class="token string">&quot;aix&quot;</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;-maix64&quot;</span><span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token boolean">nil</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="&#x8981;&#x4FEE;&#x6539;&#x7684;&#x6587;&#x4EF6;"><a name="&#x8981;&#x4FEE;&#x6539;&#x7684;&#x6587;&#x4EF6;" class="anchor-navigation-ex-anchor" href="#&#x8981;&#x4FEE;&#x6539;&#x7684;&#x6587;&#x4EF6;"><i class="fa fa-link" aria-hidden="true"></i></a>11.2.4. &#x8981;&#x4FEE;&#x6539;&#x7684;&#x6587;&#x4EF6;</h3>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">modified:   src/cmd/dist/build.go
modified:   src/cmd/dist/buildruntime.go
modified:   src/cmd/go/internal/cfg/cfg.go
modified:   src/internal/cfg/cfg.go
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<h1 id="ppc64&#x65E0;&#x6CD5;&#x5728;e6500&#x4E0A;&#x8FD0;&#x884C;"><a name="ppc64&#x65E0;&#x6CD5;&#x5728;e6500&#x4E0A;&#x8FD0;&#x884C;" class="anchor-navigation-ex-anchor" href="#ppc64&#x65E0;&#x6CD5;&#x5728;e6500&#x4E0A;&#x8FD0;&#x884C;"><i class="fa fa-link" aria-hidden="true"></i></a>12. ppc64&#x65E0;&#x6CD5;&#x5728;e6500&#x4E0A;&#x8FD0;&#x884C;</h1>
<p>&#x7528;gcgo&#x7F16;&#x8BD1;&#x51FA;&#x6765;&#x7684;<code>GOARCH=ppc64</code>&#x7684;&#x7248;&#x672C;&#x65E0;&#x6CD5;&#x5728;fant-g&#x4E0A;&#x8FD0;&#x884C;.
&#x7528;gccgo&#x7F16;&#x51FA;&#x6765;&#x7684;32&#x4F4D;&#x7A0B;&#x5E8F;&#x53EF;&#x4EE5;&#x6267;&#x884C;.
&#x7528;gccgo&#x7F16;ppc64&#x65F6;, &#x7F16;&#x8BD1;&#x51FA;&#x9519;, &#x62A5;link&#x9519;&#x8BEF;:</p>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">lib/gcc/powerpc-e6500-linux-gnu/10.2.0/libgcc.a(morestack.o): in function `__morestack&apos;:
src/gcc/libgcc/config/rs6000/morestack.S:159: undefined reference to `__morestack_block_signals&apos;

undefined reference to `__generic_morestack&apos;
undefined reference to `__morestack_unblock_signals&apos;
undefined reference to `__morestack_block_signals&apos;
undefined reference to `__generic_releasestack&apos;
undefined reference to `__morestack_unblock_signals&apos;
undefined reference to `__generic_findstack&apos;
undefined reference to `__generic_morestack_set_initial_sp&apos;
undefined reference to `__morestack_load_mmap&apos;
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>&#x5BF9;hello.go&#x6765;&#x8BF4;, &#x52A0;&#x9009;&#x9879;<code>-fno-split-stack</code>&#x53EF;&#x4EE5;&#x6210;&#x529F;&#x7F16;&#x8BD1;ppc64, &#x6210;&#x529F;&#x8FD0;&#x884C;</p>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">/repo/yingjieb/crosstoolng/github/crosstool-ng/targets/powerpc-e6500-linux-gnu/bin/powerpc-e6500-linux-gnu-gccgo  -fno-split-stack -static hello.go

PATH=$PATH:/repo/yingjieb/crosstoolng/github/crosstool-ng/targets/powerpc-e6500-linux-gnu/bin GOARCH=ppc64 /repo/yingjieb/godev/golang-go/bin/go build -compiler gccgo -gccgoflags &apos;-static -Os -fno-split-stack&apos; hello.go
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>&#x4F46;topid.go&#x5373;&#x4F7F;&#x52A0;&#x4E86;<code>-fno-split-stack</code>, &#x8FD8;&#x662F;&#x62A5;&#x4E00;&#x6837;&#x7684;&#x94FE;&#x63A5;&#x9519;&#x8BEF;</p>
<h2 id="&#x8FD9;&#x4E9B;&#x7F3A;&#x5931;&#x7684;&#x7B26;&#x53F7;&#x5E94;&#x8BE5;&#x5728;&#x54EA;&#x91CC;"><a name="&#x8FD9;&#x4E9B;&#x7F3A;&#x5931;&#x7684;&#x7B26;&#x53F7;&#x5E94;&#x8BE5;&#x5728;&#x54EA;&#x91CC;" class="anchor-navigation-ex-anchor" href="#&#x8FD9;&#x4E9B;&#x7F3A;&#x5931;&#x7684;&#x7B26;&#x53F7;&#x5E94;&#x8BE5;&#x5728;&#x54EA;&#x91CC;"><i class="fa fa-link" aria-hidden="true"></i></a>12.1. &#x8FD9;&#x4E9B;&#x7F3A;&#x5931;&#x7684;&#x7B26;&#x53F7;&#x5E94;&#x8BE5;&#x5728;&#x54EA;&#x91CC;?</h2>
<p>&#x770B;&#x8D77;&#x6765;&#x662F;libgcc.a&#x7684;<code>__morestack</code>&#x51FD;&#x6570;&#x9700;&#x8981;&#x8C03;&#x7528;<code>__morestack_block_signals</code>&#x7B49;&#x51FD;&#x6570;, &#x4F46;&#x6CA1;&#x6709;&#x5B9A;&#x4E49;.</p>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">$ nm /repo/yingjieb/crosstoolng/github/powerpc-e6500-linux-gnu/lib/gcc/powerpc-e6500-linux-gnu/10.2.0/libgcc.a  | grep more
morestack.o:
                 U __generic_morestack
                 U __generic_morestack_set_initial_sp
0000000000000018 D __morestack
                 U __morestack_block_signals
0000000000000048 D __morestack_get_guard
                 U __morestack_load_mmap
0000000000000078 D __morestack_make_guard
0000000000000000 D __morestack_non_split
0000000000000060 D __morestack_set_guard
                 U __morestack_unblock_signals
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><code>U</code>&#x7684;&#x610F;&#x601D;&#x5C31;&#x662F;undefined
&#x5BF9;ppc&#x6765;&#x8BF4;, gcc&#x7684;&#x4EE3;&#x7801;<code>libgcc/config/rs6000/morestack.S</code>&#x4E2D;, &#x6709;<code>__morestack</code>&#x7684;&#x5B9A;&#x4E49;, &#x786E;&#x5B9E;&#x8C03;&#x7528;&#x4E86;&#x8FD9;&#x4E9B;&#x51FD;&#x6570;.<br><img src="img/golang_toolchain_ppc_20220908092605.png" alt="">  </p>
<p>&#x8FD9;&#x4E9B;&#x51FD;&#x6570;&#x7684;&#x5B9A;&#x4E49;&#x5728;:<code>libgcc/generic-morestack.c</code><br><img src="img/golang_toolchain_ppc_20220908092621.png" alt="">  </p>
<p>&#x6839;&#x636E;&#x4E0B;&#x9762;&#x7684;&#x53C2;&#x8003;&#x6587;&#x7AE0;, split stack&#x529F;&#x80FD;&#x662F;<code>Ian Lance Taylor</code>&#x5728;x86&#x4E0A;&#x5B9E;&#x73B0;&#x7684;; ppc64&#x4E0A;&#x7684;&#x5B9E;&#x73B0;&#x7684;&#x4F5C;&#x8005;&#x662F;<code>Alan Modra</code>, <a href="https://gcc.gnu.org/legacy-ml/gcc-patches/2015-05/msg01519.html" target="_blank">[Patch 0/4] PowerPC64 Linux split stack support</a></p>
<p>&#x5BF9;&#x7167;X86&#x673A;&#x5668;&#x4E0A;:</p>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh"># &#x5148;&#x627E;&#x5230;gcc&#x7684;lib&#x76EE;&#x5F55;, &#x662F;/usr/lib/gcc/x86_64-linux-gnu/7
gcc -print-search-dirs

# &#x7528;nm&#x770B;&#x7B26;&#x53F7;&#x8868;
$ nm libgcc.a | grep more
nm: _trampoline.o: no symbols
nm: __main.o: no symbols
nm: _mulhc3.o: no symbols
nm: _divhc3.o: no symbols
generic-morestack.o:
00000000000002b0 T __generic_morestack
0000000000000240 T __generic_morestack_set_initial_sp
0000000000000940 T __morestack_allocate_stack_space
0000000000000880 T __morestack_block_signals
00000000000000b8 B __morestack_current_segment
0000000000000040 T __morestack_fail
0000000000000020 b __morestack_fullmask
                 U __morestack_get_guard
0000000000000000 B __morestack_initial_sp
0000000000000ad0 T __morestack_load_mmap
                 U __morestack_make_guard
0000000000000110 T __morestack_release_segments
00000000000000c0 B __morestack_segments
                 U __morestack_set_guard
00000000000008e0 T __morestack_unblock_signals
generic-morestack-thread.o:
                 U __morestack_fail
                 U __morestack_release_segments
                 U __morestack_segments
morestack.o:
                 U __generic_morestack
                 U __generic_morestack_set_initial_sp
0000000000000037 T __morestack
                 U __morestack_block_signals
0000000000000155 T __morestack_get_guard
000000000000011c T __morestack_large_model
                 U __morestack_load_mmap
0000000000000169 T __morestack_make_guard
0000000000000000 T __morestack_non_split
000000000000015f T __morestack_set_guard
                 U __morestack_unblock_signals
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><code>T</code>&#x8868;&#x793A;&#x662F;&#x4EE3;&#x7801;&#x7B26;&#x53F7;.
&#x786E;&#x5B9E;&#x7684;&#x51FD;&#x6570;&#x5927;&#x90E8;&#x5206;&#x5728;<code>generic-morestack.o</code>&#x4E2D;. &#x8FD9;&#x548C;<code>libgcc/generic-morestack.c</code>&#x4EE3;&#x7801;&#x5206;&#x6790;&#x662F;&#x4E00;&#x6837;&#x7684;.
&#x8BF4;&#x660E;&#x8FD9;&#x90E8;&#x5206;&#x4EE3;&#x7801;&#x6CA1;&#x6709;&#x7F16;&#x8BD1;&#x5230;libgcc.a&#x4E2D;.</p>
<p>ppc32&#x6CA1;&#x6709;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;, &#x56E0;&#x4E3A;ppc32&#x672C;&#x6765;&#x5C31;&#x4E0D;&#x652F;&#x6301;split stack.</p>
<h2 id="&#x4E3A;&#x4EC0;&#x4E48;generic-morestackc&#x6CA1;&#x6709;&#x7F16;&#x8BD1;&#x5230;"><a name="&#x4E3A;&#x4EC0;&#x4E48;generic-morestackc&#x6CA1;&#x6709;&#x7F16;&#x8BD1;&#x5230;" class="anchor-navigation-ex-anchor" href="#&#x4E3A;&#x4EC0;&#x4E48;generic-morestackc&#x6CA1;&#x6709;&#x7F16;&#x8BD1;&#x5230;"><i class="fa fa-link" aria-hidden="true"></i></a>12.2. &#x4E3A;&#x4EC0;&#x4E48;generic-morestack.c&#x6CA1;&#x6709;&#x7F16;&#x8BD1;&#x5230;?</h2>
<p><code>libgcc/generic-morestack.c</code>&#x4E2D;, &#x4E3B;&#x4F53;&#x4EE3;&#x7801;&#x7684;&#x7F16;&#x8BD1;&#x6761;&#x4EF6;&#x662F;:<br><code>#if !defined __powerpc__ || defined __powerpc64__</code><br><code>__powerpc64__</code>&#x786E;&#x5B9A;&#x662F;&#x6709;&#x7684;. 
&#x90A3;&#x4E3A;&#x4EC0;&#x4E48;&#x8FD8;&#x662F;&#x6CA1;&#x6709;&#x7F16;&#x5230;&#x5462;?<br>&#x539F;&#x6765;&#x662F;<code>libgcc/config/t-stack</code>&#x4E2D;, <code>enable_threads</code>&#x63A7;&#x5236;&#x8FD9;&#x4E2A;&#x6587;&#x4EF6;&#x662F;&#x5426;&#x53C2;&#x4E0E;&#x7F16;&#x8BD1;:</p>
<pre class="line-numbers language-makefile" lang="makefile"><code class=" language-makefile"><span class="token keyword">ifeq</span> <span class="token punctuation">(</span><span class="token variable">$</span><span class="token punctuation">(</span>enable_threads<span class="token punctuation">)</span>,yes<span class="token punctuation">)</span>
LIB2ADD_ST <span class="token operator">+=</span> <span class="token variable">$</span><span class="token punctuation">(</span>srcdir<span class="token punctuation">)</span>/generic-morestack.c <span class="token variable">$</span><span class="token punctuation">(</span>srcdir<span class="token punctuation">)</span>/generic-morestack-thread.c
<span class="token keyword">endif</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>&#x5728;<a href="https://gcc.gnu.org/install/configure.html" target="_blank">gcc&#x5B89;&#x88C5;&#x624B;&#x518C;</a>&#x4E2D;, &#x6709;&#x4F7F;&#x7528;&#x65B9;&#x6CD5;:</p>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">--enable-threads
Specify that the target supports threads. This affects the Objective-C compiler and runtime library, and exception handling for other languages like C++. On some systems, this is the default.

In general, the best (and, in many cases, the only known) threading model available will be configured for use. Beware that on some systems, GCC has not been taught what threading models are generally available for the system. In this case, --enable-threads is an alias for --enable-threads=single.

--enable-threads=lib
Specify that lib is the thread support library. This affects the Objective-C compiler and runtime library, and exception handling for other languages like C++. The possibilities for lib are:

aix
AIX thread support.

dce
DCE thread support.

lynx
LynxOS thread support.

mipssde
MIPS SDE thread support.

no
This is an alias for &#x2018;single&#x2019;.

posix
Generic POSIX/Unix98 thread support.

rtems
RTEMS thread support.

single
Disable thread support, should work for all platforms.

tpf
TPF thread support.

vxworks
VxWorks thread support.

win32
Microsoft Win32 API thread support.
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>&#x5728;<code>gcc/config.gcc</code>&#x4E2D;, &#x6BCF;&#x4E2A;arch&#x548C;os&#x90FD;&#x4F1A;&#x68C0;&#x67E5;</p>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">case ${target} in
*-*-linux* | frv-*-*linux* | *-*-kfreebsd*-gnu | *-*-gnu* | *-*-kopensolaris*-gnu | *-*-uclinuxfdpiceabi)
    case ${enable_threads} in
    &quot;&quot; | yes | posix) thread_file=&apos;posix&apos; ;;
    esac
...
esac
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="crosstool-ng&#x7684;bug"><a name="crosstool-ng&#x7684;bug" class="anchor-navigation-ex-anchor" href="#crosstool-ng&#x7684;bug"><i class="fa fa-link" aria-hidden="true"></i></a>12.2.1. crosstool-ng&#x7684;bug</h3>
<p>&#x7ECF;&#x8FDB;&#x4E00;&#x6B65;&#x68C0;&#x67E5;, &#x539F;&#x7248;&#x7684;gcc&#x6CA1;&#x6709;&#x95EE;&#x9898;. &#x95EE;&#x9898;&#x5728;&#x4E8E;crosstool-ng&#x7684;&#x4E00;&#x4E2A;patch:</p>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">yingjieb@godev-server /repo/yingjieb/crosstoolng/github/crosstool-ng/packages/gcc/10.2.0
$ cat 0008-libgcc-disable-split-stack-nothreads.patch
disable split-stack for non-thread builds

Signed-off-by: Waldemar Brodkorb &lt;wbx@openadk.org&gt;

---
 libgcc/config/t-stack |    2 ++
 1 file changed, 2 insertions(+)

--- a/libgcc/config/t-stack
+++ b/libgcc/config/t-stack
@@ -1,4 +1,6 @@
 # Makefile fragment to provide generic support for -fsplit-stack.
 # This should be used in config.host for any host which supports
 # -fsplit-stack.
+ifeq ($(enable_threads),yes)
 LIB2ADD_ST += $(srcdir)/generic-morestack.c $(srcdir)/generic-morestack-thread.c
+endif
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>&#x5C1D;&#x8BD5;&#x5728;crosstool-ng&#x7684;config&#x91CC;&#x9762;&#x52A0;:</p>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">CT_CC_GCC_EXTRA_CONFIG_ARRAY=&quot;--enable-threads=yes&quot;
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>&#x4F46;&#x4E0D;&#x8D77;&#x4F5C;&#x7528;, &#x5220;&#x9664;&#x6389;&#x8FD9;&#x4E2A;&#x6587;&#x4EF6;<code>0008-libgcc-disable-split-stack-nothreads.patch</code>&#x5C31;&#x597D;&#x4E86;.</p>
<h2 id="&#x5173;&#x4E8E;split-stack"><a name="&#x5173;&#x4E8E;split-stack" class="anchor-navigation-ex-anchor" href="#&#x5173;&#x4E8E;split-stack"><i class="fa fa-link" aria-hidden="true"></i></a>12.3. &#x5173;&#x4E8E;split stack</h2>
<p>gcc&#x7684;&#x5927;&#x795E;<code>Ian Lance Taylor</code>&#x6709;&#x4E24;&#x7BC7;&#x6587;&#x7AE0;:
<a href="https://blog.golang.org/gccgo-in-gcc-471" target="_blank">gccgo&#x4E2D;&#x7684;split stack</a></p>
<blockquote>
<p>Gccgo provides the standard, complete Go library. Many of the core features of the Go runtime are the same in both gccgo and gc, including the goroutine scheduler, channels, the memory allocator, and the garbage collector. Gccgo supports splitting goroutine stacks as the gc compiler does, but currently only on x86 (32-bit or 64-bit) and only when using the gold linker (on other processors, each goroutine will have a large stack, and a deep series of function calls may run past the end of the stack and crash the program).</p>
<p>Gccgo distributions do not yet include a version of the go command. However, if you install the go command from a standard Go release, it already supports gccgo via the <code>-compiler</code> option: go build <code>-compiler gccgo myprog</code>. The tools used for calls between Go and C/C++, cgo and SWIG, also support gccgo.</p>
</blockquote>
<p><a href="https://gcc.gnu.org/wiki/SplitStacks" target="_blank">gcc&#x4E2D;&#x7684;split stack</a></p>
<h3 id="&#x4E0A;&#x9762;&#x63D0;&#x5230;&#x7684;gold-linker&#x662F;&#x4EC0;&#x4E48;&#x610F;&#x601D;"><a name="&#x4E0A;&#x9762;&#x63D0;&#x5230;&#x7684;gold-linker&#x662F;&#x4EC0;&#x4E48;&#x610F;&#x601D;" class="anchor-navigation-ex-anchor" href="#&#x4E0A;&#x9762;&#x63D0;&#x5230;&#x7684;gold-linker&#x662F;&#x4EC0;&#x4E48;&#x610F;&#x601D;"><i class="fa fa-link" aria-hidden="true"></i></a>12.3.1. &#x4E0A;&#x9762;&#x63D0;&#x5230;&#x7684;gold linker&#x662F;&#x4EC0;&#x4E48;&#x610F;&#x601D;?</h3>
<p>gold linker&#x662F;&#x53E6;&#x4E00;&#x79CD;linker, &#x5E76;&#x4E0D;&#x662F;ld&#x7684;&#x67D0;&#x79CD;&#x6A21;&#x5F0F;. </p>
<h3 id="&#x76F8;&#x5173;&#x94FE;&#x63A5;"><a name="&#x76F8;&#x5173;&#x94FE;&#x63A5;" class="anchor-navigation-ex-anchor" href="#&#x76F8;&#x5173;&#x94FE;&#x63A5;"><i class="fa fa-link" aria-hidden="true"></i></a>12.3.2. &#x76F8;&#x5173;&#x94FE;&#x63A5;</h3>
<p><a href="https://gcc.gnu.org/legacy-ml/gcc-patches/2015-05/msg01519.html" target="_blank">PowerPC64 Linux split stack support</a></p>
<p><a href="https://gcc.gnu.org/legacy-ml/gcc-patches/2015-05/msg01522.html" target="_blank">https://gcc.gnu.org/legacy-ml/gcc-patches/2015-05/msg01522.html</a>
<a href="https://groups.google.com/g/golang-codereviews/c/4T_KQys3XM0/m/VWNk2c6JCgAJ" target="_blank">https://groups.google.com/g/golang-codereviews/c/4T_KQys3XM0/m/VWNk2c6JCgAJ</a></p>
<h1 id="&#x4E0A;&#x4F20;gccgo&#x5DE5;&#x5177;&#x94FE;&#x5230;artifactory"><a name="&#x4E0A;&#x4F20;gccgo&#x5DE5;&#x5177;&#x94FE;&#x5230;artifactory" class="anchor-navigation-ex-anchor" href="#&#x4E0A;&#x4F20;gccgo&#x5DE5;&#x5177;&#x94FE;&#x5230;artifactory"><i class="fa fa-link" aria-hidden="true"></i></a>13. &#x4E0A;&#x4F20;gccgo&#x5DE5;&#x5177;&#x94FE;&#x5230;artifactory</h1>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">proxyoff

cd crosstool-ng/targets
tar cJf godev-gccgo-ppc.tar.xz powerpc-e500mc-linux-gnu
tar cJf godev-gccgo-ppc64.tar.xz powerpc64-e6500-linux-gnu

curl -H &quot;X-JFrog-Art-Api:AKCp8hyinctVijrdqGaFc1YAT7e7KDHWJEaackjuv6oCheipkYU9jU5okRj8rnFkVvcZWnTVc&quot;  -X PUT &quot;https://artifactory-blr1.int.net.nokia.com:443/artifactory/godevsig-generic-local/toolchain/gccgo/`git rev-parse HEAD`/&quot;  -T &quot;{godev-gccgo-ppc.tar.xz,godev-gccgo-ppc64.tar.xz}&quot;
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>&#x8BE6;&#x89C1;&#x7B14;&#x8BB0;<code>&#x4E91;&#x7AEF;&#x73AF;&#x5883;&#x548C;go&#x5B9E;&#x8DF5;.md</code></p>
<h1 id="gccgo&#x7684;hello-size&#x8FC7;&#x5927;&#x95EE;&#x9898;"><a name="gccgo&#x7684;hello-size&#x8FC7;&#x5927;&#x95EE;&#x9898;" class="anchor-navigation-ex-anchor" href="#gccgo&#x7684;hello-size&#x8FC7;&#x5927;&#x95EE;&#x9898;"><i class="fa fa-link" aria-hidden="true"></i></a>14. gccgo&#x7684;hello size&#x8FC7;&#x5927;&#x95EE;&#x9898;</h1>
<p>gccgo&#x7F16;&#x8BD1;&#x51FA;&#x6765;&#x7684;&#x9759;&#x6001;&#x94FE;&#x63A5;&#x7684;hello&#x662F;17M
&#x5176;&#x4E2D;&#x6709;12M&#x5DE6;&#x53F3;&#x662F;debug info. 
&#x7528;<code>gcc -s</code>&#x6216;&#x8005;<code>strip --strip-debug</code>&#x90FD;&#x80FD;&#x51CF;&#x5C0F;size, &#x4F46;&#x95EE;&#x9898;&#x662F;&#x8FD0;&#x884C;&#x65F6;panic&#x5C31;&#x4E0D;&#x80FD;&#x6253;&#x5370;&#x8C03;&#x7528;&#x6808;&#x4E86;.
&#x6309;&#x7167;<code>gcc-10.2.0/libgo/README</code>&#x7684;&#x8BF4;&#x6CD5;:</p>
<blockquote>
<p>This library should not be stripped when it is installed.  Go code
relies on being able to look up file/line information, which comes
from the debugging info using the libbacktrace library.</p>
</blockquote>
<p>go&#x9700;&#x8981;debug info&#x6765;&#x67E5;&#x627E;file line&#x4FE1;&#x606F;.</p>
<p>&#x6CE8;: <code>libbacktrace</code>&#x4E5F;&#x662F;<a href="https://github.com/ianlancetaylor/libbacktrace/commits?author=ianlancetaylor" title="View all commits by ianlancetaylor" target="_blank">ianlancetaylor</a>&#x5927;&#x795E;&#x7684;&#x4F5C;&#x54C1;: <a href="https://github.com/ianlancetaylor/libbacktrace" target="_blank">github</a></p>
<p>&#x90A3;&#x6709;&#x6CA1;&#x6709;&#x5176;&#x4ED6;&#x7684;&#x529E;&#x6CD5;&#x53EF;&#x4EE5;&#x51CF;&#x5C0F;hello&#x7684;size&#x5462;? 17M&#x4E5F;&#x592A;&#x5927;&#x4E86;.
<a href="https://sourceware.org/binutils/docs/binutils/strip.html" target="_blank">strip&#x4F7F;&#x7528;&#x8BF4;&#x660E;</a>
<a href="https://gcc.gnu.org/onlinedocs/gcc/Debugging-Options.html" target="_blank">GCC&#x7684;debug&#x9009;&#x9879;</a></p>
<p>gcc&#x7684;&#x9009;&#x9879;&#x4E2D;, <code>-g1</code>&#x548C;<code>-gz</code>&#x770B;&#x8D77;&#x6765;&#x6BD4;&#x8F83;&#x6709;&#x7528;:</p>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">-glevel
    Request debugging information and also use level to specify how much information. The default level is 2.

    Level 0 produces no debug information at all. Thus, -g0 negates -g.

    Level 1 produces minimal information, enough for making backtraces in parts of the program that you don&#x2019;t plan to debug. This includes descriptions of functions and external variables, and line number tables, but no information about local variables.

    Level 3 includes extra information, such as all the macro definitions present in the program. Some debuggers support macro expansion when you use -g3.

    If you use multiple -g options, with or without level numbers, the last such option is the one that is effective.

    -gdwarf does not accept a concatenated debug level, to avoid confusion with -gdwarf-level. Instead use an additional -glevel option to change the debug level for DWARF.

-gz[=type]
    Produce compressed debug sections in DWARF format, if that is supported. If type is not given, the default type depends on the capabilities of the assembler and linker used. type may be one of &#x2018;none&#x2019; (don&#x2019;t compress debug sections), &#x2018;zlib&#x2019; (use zlib compression in ELF gABI format), or &#x2018;zlib-gnu&#x2019; (use zlib compression in traditional GNU format). If the linker doesn&#x2019;t support writing compressed debug sections, the option is rejected. Otherwise, if the assembler does not support them, -gz is silently ignored when producing object files.
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><code>-gz</code>&#x80FD;&#x8BA9;hello&#x4ECE;17M&#x51CF;&#x5C0F;&#x5230;8.7M</p>
<h2 id="&#x76F8;&#x5173;&#x547D;&#x4EE4;"><a name="&#x76F8;&#x5173;&#x547D;&#x4EE4;" class="anchor-navigation-ex-anchor" href="#&#x76F8;&#x5173;&#x547D;&#x4EE4;"><i class="fa fa-link" aria-hidden="true"></i></a>14.1. &#x76F8;&#x5173;&#x547D;&#x4EE4;</h2>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">#&#x770B;&#x5177;&#x4F53;&#x90A3;&#x4E2A;section&#x7684;size
size -A hello
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p><a href="https://help.backtrace.io/en/articles/1716990-dwarf" target="_blank">&#x8FD9;&#x7BC7;&#x6587;&#x7AE0;</a>&#x975E;&#x5E38;&#x8BE6;&#x7EC6;&#x7684;&#x4ECB;&#x7ECD;&#x4E86;debug&#x8282;&#x7684;&#x65B9;&#x65B9;&#x9762;&#x9762;&#x7684;&#x4FE1;&#x606F;.
&#x7279;&#x522B;&#x7684;, objcopy&#x80FD;&#x591F;&#x53BB;&#x6389;&#x4EFB;&#x610F;&#x6307;&#x5B9A;section</p>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">/repo/yingjieb/godevsig/crosstool-ng/targets/powerpc-e500mc-linux-gnu/bin/powerpc-e500mc-linux-gnu-objcopy -R .debug_info -R .debug_abbrev -R .debug_aranges -R .debug_ranges -R .debug_loc -R .debug_str hello
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h2 id="&#x51CF;&#x5C0F;libgoa&#x7684;&#x4F53;&#x79EF;"><a name="&#x51CF;&#x5C0F;libgoa&#x7684;&#x4F53;&#x79EF;" class="anchor-navigation-ex-anchor" href="#&#x51CF;&#x5C0F;libgoa&#x7684;&#x4F53;&#x79EF;"><i class="fa fa-link" aria-hidden="true"></i></a>14.2. &#x51CF;&#x5C0F;libgo.a&#x7684;&#x4F53;&#x79EF;</h2>
<p>gcc&#x7684;libgo&#x5728;&#x7F16;&#x8BD1;&#x7684;&#x65F6;&#x5019;, &#x6709;&#x81EA;&#x5DF1;&#x9ED8;&#x8BA4;&#x7684;&#x7F16;&#x8BD1;&#x9009;&#x9879;<code>-O2 -g</code>
&#x7528;&#x4E0B;&#x9762;&#x7684;patch</p>
<pre class="line-numbers language-diff" lang="diff"><code class=" language-diff">diff --git a/Makefile.in b/Makefile.in
index 36e369df6..2e183c702 100644
<span class="token coord">--- a/Makefile.in</span>
<span class="token coord">+++ b/Makefile.in</span>
@@ -619,7 +619,7 @@ CXXFLAGS_FOR_TARGET = @CXXFLAGS_FOR_TARGET@
 LIBCFLAGS_FOR_TARGET = $(CFLAGS_FOR_TARGET)
 LIBCXXFLAGS_FOR_TARGET = $(CXXFLAGS_FOR_TARGET) -fno-implicit-templates
 LDFLAGS_FOR_TARGET = @LDFLAGS_FOR_TARGET@
<span class="token deleted">-GOCFLAGS_FOR_TARGET = -O2 -g</span>
<span class="token inserted">+GOCFLAGS_FOR_TARGET = -Os -g1 -gz</span>
 GDCFLAGS_FOR_TARGET = -O2 -g

 FLAGS_FOR_TARGET = @FLAGS_FOR_TARGET@
diff --git a/Makefile.tpl b/Makefile.tpl
index efed15117..3c0d2e5e2 100644
<span class="token coord">--- a/Makefile.tpl</span>
<span class="token coord">+++ b/Makefile.tpl</span>
@@ -542,7 +542,7 @@ CXXFLAGS_FOR_TARGET = @CXXFLAGS_FOR_TARGET@
 LIBCFLAGS_FOR_TARGET = $(CFLAGS_FOR_TARGET)
 LIBCXXFLAGS_FOR_TARGET = $(CXXFLAGS_FOR_TARGET) -fno-implicit-templates
 LDFLAGS_FOR_TARGET = @LDFLAGS_FOR_TARGET@
<span class="token deleted">-GOCFLAGS_FOR_TARGET = -O2 -g</span>
<span class="token inserted">+GOCFLAGS_FOR_TARGET = -Os -g1 -gz</span>
 GDCFLAGS_FOR_TARGET = -O2 -g

 FLAGS_FOR_TARGET = @FLAGS_FOR_TARGET@
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>&#x7ECF;&#x8FC7;&#x6D4B;&#x8BD5;, &#x5404;&#x4E2A;&#x9009;&#x9879;&#x7EC4;&#x5408;&#x7684;size&#x5982;&#x4E0B;:</p>
<table>
<thead>
<tr>
<th>GOCFLAGS_FOR_TARGET</th>
<th>webhello size</th>
</tr>
</thead>
<tbody>
<tr>
<td>-O2 -g(default)</td>
<td>17M</td>
</tr>
<tr>
<td>-Os -g1 -gz</td>
<td>13M</td>
</tr>
<tr>
<td>-Os -g1 -gz -fdata-sections -ffunction-sections -Wl,--gc-sections</td>
<td>12M</td>
</tr>
<tr>
<td>-Os -g1 -gz -fdata-sections -ffunction-sections -Wl,--gc-sections -flto</td>
<td>12M</td>
</tr>
<tr>
<td>-Os -g1 -gz -fdata-sections -ffunction-sections</td>
<td>12M</td>
</tr>
</tbody>
</table>
<h3 id="&#x4F7F;&#x80FD;lto"><a name="&#x4F7F;&#x80FD;lto" class="anchor-navigation-ex-anchor" href="#&#x4F7F;&#x80FD;lto"><i class="fa fa-link" aria-hidden="true"></i></a>14.2.1. &#x4F7F;&#x80FD;lto</h3>
<p>crosstool-ng&#x9ED8;&#x8BA4;&#x5728;static gcc&#x6A21;&#x5F0F;&#x4E0B;(STATIC_TOOLCHAIN=y), &#x4E0D;&#x4F7F;&#x80FD;lto.
&#x4F46;&#x53EF;&#x4EE5;&#x81EA;&#x5DF1;&#x5F3A;&#x5236;&#x4F7F;&#x80FD;:
<code>CT_CC_GCC_EXTRA_CONFIG_ARRAY=--enable-lto</code>
&#x4F46;&#x7ECF;&#x8FC7;&#x9A8C;&#x8BC1;, &#x4F3C;&#x4E4E;&#x6253;&#x5F00;lto&#x4F18;&#x5316;, &#x5E76;&#x6CA1;&#x6709;&#x51CF;&#x5C0F;size.</p>
<h2 id="&#x6539;&#x52A8;&#x63D0;&#x4EA4;&#x5230;crosstool-ng"><a name="&#x6539;&#x52A8;&#x63D0;&#x4EA4;&#x5230;crosstool-ng" class="anchor-navigation-ex-anchor" href="#&#x6539;&#x52A8;&#x63D0;&#x4EA4;&#x5230;crosstool-ng"><i class="fa fa-link" aria-hidden="true"></i></a>14.3. &#x6539;&#x52A8;&#x63D0;&#x4EA4;&#x5230;crosstool-ng</h2>
<p>&#x5728;gcc&#x5E93;&#x4E0A;commit&#x8FD9;&#x4E2A;&#x6539;&#x52A8;, &#x751F;&#x6210;patch</p>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh"># -1&#x8868;&#x793A;&#x6700;&#x65B0;&#x7684;1&#x4E2A;&#x6539;&#x52A8;
git format-patch -1
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>&#x62F7;&#x8D1D;&#x8FD9;&#x4E2A;patch&#x5230;gcc&#x4E0B;&#x9762;
<code>cp 0001-gccgo-generate-smaller-libgo-when-building-gccgo.patch crosstool-ng/packages/gcc/10.2.0/</code></p>
<h2 id="goexport&#x5C0F;&#x8282;"><a name="goexport&#x5C0F;&#x8282;" class="anchor-navigation-ex-anchor" href="#goexport&#x5C0F;&#x8282;"><i class="fa fa-link" aria-hidden="true"></i></a>14.4. go_export&#x5C0F;&#x8282;</h2>
<p>&#x7528;<code>size -A</code>&#x547D;&#x4EE4;&#x770B;&#x5230;, gccgo&#x7F16;&#x8BD1;&#x51FA;&#x6765;&#x7684;executable&#x4E2D;, &#x6709;<code>.go_export</code>&#x5C0F;&#x8282;, &#x5728;webhello&#x4E2D;&#x5360;1.6M
&#x6839;&#x636E;<a href="https://github.com/golang/go/issues/26204" target="_blank">&#x8FD9;&#x4E2A;&#x8BA8;&#x8BBA;</a>, gccgo&#x7684;&#x4F5C;&#x8005;&#x8BF4;<code>.go_export</code>&#x662F;&#x7ED9;shared library&#x7528;&#x7684;, &#x6700;&#x7EC8;&#x7684;&#x53EF;&#x6267;&#x884C;&#x6587;&#x4EF6;&#x4E0D;&#x9700;&#x8981;. &#x4F46;&#x4ED6;&#x4E0D;&#x77E5;&#x9053;&#x600E;&#x4E48;&#x544A;&#x8BC9;linker&#x628A;&#x8FD9;&#x4E2A;&#x5C0F;&#x8282;&#x53BB;&#x6389;</p>
<p>&#x90A3;&#x53EF;&#x4EE5;&#x5728;&#x6700;&#x540E;&#x624B;&#x52A8;&#x7528;<code>objcopy -R .go_export file</code>&#x6765;&#x5220;&#x9664;&#x8FD9;&#x4E2A;&#x5C0F;&#x8282;.</p>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">/opt/crosstool/powerpc64-e6500-linux-gnu/bin/powerpc64-e6500-linux-gnu-objcopy --remove-section=.go_export hello
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h2 id="static&#x548C;static-libgo"><a name="static&#x548C;static-libgo" class="anchor-navigation-ex-anchor" href="#static&#x548C;static-libgo"><i class="fa fa-link" aria-hidden="true"></i></a>14.5. static&#x548C;static-libgo</h2>
<p>&#x4F7F;&#x7528;gccgo, &#x53EF;&#x4EE5;&#x4F20;&#x5165;<code>-gccgoflags</code>&#x4E3A;<code>-static-libgo</code>, &#x53EA;&#x628A;libgo&#x7F16;&#x8BD1;&#x5230;static&#x7684;&#x76EE;&#x6807;&#x6587;&#x4EF6;&#x4E2D;, &#x800C;libc&#x7B49;&#x5E93;&#x8FD8;&#x662F;&#x52A8;&#x6001;&#x8FDE;&#x63A5;&#x7684;.
&#x8BE6;&#x89C1;<a href="https://stackoverflow.com/questions/20369106/gccgo-static-vs-static-libgo" target="_blank">&#x8FD9;&#x4E2A;&#x95EE;&#x7B54;</a></p>
<h1 id="&#x8BA9;gcgo&#x652F;&#x6301;ppc32"><a name="&#x8BA9;gcgo&#x652F;&#x6301;ppc32" class="anchor-navigation-ex-anchor" href="#&#x8BA9;gcgo&#x652F;&#x6301;ppc32"><i class="fa fa-link" aria-hidden="true"></i></a>15. &#x8BA9;gcgo&#x652F;&#x6301;ppc32</h1>
<p>&#x8FD9;&#x4E2A;<a href="https://github.com/golang/go/issues/22885" target="_blank">issue</a>&#x5C31;&#x662F;&#x8BA8;&#x8BBA;&#x8FD9;&#x4E2A;&#x8BDD;&#x9898;&#x7684;. &#x4F46;&#x622A;&#x6B62;&#x76EE;&#x524D;(2020.10)&#x8FD8;&#x6CA1;&#x6709;&#x52A8;&#x9759;.
&#x6709;&#x4EBA;&#x63D0;&#x5230;&#x4E86;&#x901A;&#x5E38;&#x652F;&#x6301;&#x4E00;&#x4E2A;ARCH&#x9700;&#x8981;&#x7684;&#x5DE5;&#x4F5C;:</p>
<p>Quoting this super useful post from Aram H&#x103;v&#x103;rneanu from <a href="https://groups.google.com/d/msg/golang-dev/SRUK7yJVA0c/JeoCRMwzBwAJ" target="_blank">https://groups.google.com/d/msg/golang-dev/SRUK7yJVA0c/JeoCRMwzBwAJ</a></p>
<p>&quot;I&apos;ve done many ports now, so the strategy I use
is this (very simplified):</p>
<pre class="line-numbers language-undefined"><code class=" language-undefined">1\. Add GOOS/GOARCH support to the toolchain

2\. Add some support for GOARCH in cmd/internal/obj
3\. Add some support for GOARCH in cmd/asm
4\. Add some support for GOOS/GOARCH in cmd/link

5\. Iterate through 2-3-4 until you can produse some kind
   of binaries from assembly files. Depending on the specifics
   of GOOS/GOARCH you might, or might not need to use external
   linking.

6\. Once you can produce binaries, thoroughly test them (link
   just assembly programs, without runtime). Basically make
   sure the low-level toolchain works.

7\. Start working on the Go compiler for GOARCH.

8\. Write a minimal alternative runtime for Go. The runtime
   is much too complicated as a first test Go program. Basically
   write your own runtime in assembly that is just stubbed
   out, but can run a good bulk of the programs in go/test.

9\. Once that works well enough, start using the real runtime.
   This requires implementing a lot of assembly, but you can
   use the lessons learned from #8.

10\. Make all the tests in go/test work.
11\. Make all the stdlib tests work. You are still working
    amd64 now, and executing on GOARCH with go_GOOS_GOARCH_exec.

12\. Run bootstrap.bash

13\. Move over the artifacts on GOOS/GOARCH machine.

14\. Make sure make.bash works. You will still likely have
    to fix problems to make this N-generation compiler work.

15\. Make sure all.bash works.

16\. Done.
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>As you can see, steps 1-14 are done on amd64 (or some other supported
platform), and only step 15 is done on the target architecture.</p>
<p>&#x641C;&#x7D22;&#x6E90;&#x7801;&#x5927;&#x7EA6;&#x6709;5000&#x884C;&#x5305;&#x542B;ppc64&#x5B57;&#x6837;... &#x8981;&#x5B8C;&#x6574;&#x652F;&#x6301;ppc32&#x5E76;&#x975E;&#x6613;&#x4E8B;.</p>
<h1 id="&#x4E0B;&#x4E00;&#x6B65;"><a name="&#x4E0B;&#x4E00;&#x6B65;" class="anchor-navigation-ex-anchor" href="#&#x4E0B;&#x4E00;&#x6B65;"><i class="fa fa-link" aria-hidden="true"></i></a>16. &#x4E0B;&#x4E00;&#x6B65;</h1>
<p>&#x7528;crosstool-ng&#x7F16;&#x8BD1;go1.13&#x517C;&#x5BB9;&#x7684;&#x5DE5;&#x5177;&#x94FE;</p>
<ul>
<li>&#x6700;&#x597D;&#x5168;&#x90E8;&#x9759;&#x6001;&#x94FE;&#x63A5;</li>
<li>&#x9AD8;&#x7248;&#x672C;</li>
</ul>
<h1 id="&#x8865;&#x5145;-fant-f&#x8FD0;&#x884C;topid"><a name="&#x8865;&#x5145;-fant-f&#x8FD0;&#x884C;topid" class="anchor-navigation-ex-anchor" href="#&#x8865;&#x5145;-fant-f&#x8FD0;&#x884C;topid"><i class="fa fa-link" aria-hidden="true"></i></a>17. &#x8865;&#x5145;: fant-f&#x8FD0;&#x884C;topid</h1>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">~ # LD_LIBRARY_PATH=`pwd` ./topid -record -tag fantf -p 1 -child -chartserver 10.182.105.138:9887 -i 3
Hello &#x4F60;&#x597D; Hola Hallo Bonjour Ciao &#x3A7;&#x3B1;&#x3AF;&#x3C1;&#x3B5;&#x3C4;&#x3B5; &#x3053;&#x3093;&#x306B;&#x3061;&#x306F; &#xC5EC;&#xBCF4;&#xC138;&#xC694;
Version: 0.1.3
Visit below URL to get the chart:
http://10.182.105.138:9888/fantf/538600174

~ # ls -lh
total 38M
-rwxr-xr-x    1 root     root       89.7K Jul  8 14:22 hello
-rwxr-xr-x    1 root     root       37.8M Jul  8 14:24 libgo.so.13
-rwxr-xr-x    1 root     root      258.3K Jul  8 15:01 topid
~ # cat /isam/slot_default/devs/rip/boardName
FANT-F  ~ #
~ #
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h1 id="&#x8865;&#x5145;-ppc64"><a name="&#x8865;&#x5145;-ppc64" class="anchor-navigation-ex-anchor" href="#&#x8865;&#x5145;-ppc64"><i class="fa fa-link" aria-hidden="true"></i></a>18. &#x8865;&#x5145;: ppc64</h1>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">yingjieb@godev-server /repo/yingjieb/godevsig/crosstool-ng/samples/Nokia
$ git show 0a81bc37
commit 0a81bc37a9e8d44c9d3f13c0b557854425b018db
Author: Bai Yingjie &lt;yingjie.bai@nokia-sbell.com&gt;
Date:   Tue Oct 20 08:55:23 2020 +0000

    godev: enable the default split-stack

    for ppc64, gccgo lib uses split-stack feature, which requires toolchain
    support split-stack.

diff --git a/packages/gcc/10.2.0/0008-libgcc-disable-split-stack-nothreads.patch b/packages/gcc/10.2.0/0008-libgcc-disable-split-stack-nothreads.patch
deleted file mode 100644
index df91a9ff..00000000
--- a/packages/gcc/10.2.0/0008-libgcc-disable-split-stack-nothreads.patch
+++ /dev/null
@@ -1,17 +0,0 @@
-disable split-stack for non-thread builds
-
-Signed-off-by: Waldemar Brodkorb &lt;wbx@openadk.org&gt;
-
----
- libgcc/config/t-stack |    2 ++
- 1 file changed, 2 insertions(+)
-
---- a/libgcc/config/t-stack
-+++ b/libgcc/config/t-stack
-@@ -1,4 +1,6 @@
- # Makefile fragment to provide generic support for -fsplit-stack.
- # This should be used in config.host for any host which supports
- # -fsplit-stack.
-+ifeq ($(enable_threads),yes)
- LIB2ADD_ST += $(srcdir)/generic-morestack.c $(srcdir)/generic-morestack-thread.c
-+endif
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h1 id="&#x8865;&#x5145;-&#x4E3A;&#x4EC0;&#x4E48;gc-go&#x5DE5;&#x5177;&#x94FE;&#x7684;&#x652F;&#x6301;ppc64-&#x4F46;&#x4E0D;&#x80FD;&#x5728;e6500&#x4E0A;&#x8FD0;&#x884C;"><a name="&#x8865;&#x5145;-&#x4E3A;&#x4EC0;&#x4E48;gc-go&#x5DE5;&#x5177;&#x94FE;&#x7684;&#x652F;&#x6301;ppc64-&#x4F46;&#x4E0D;&#x80FD;&#x5728;e6500&#x4E0A;&#x8FD0;&#x884C;" class="anchor-navigation-ex-anchor" href="#&#x8865;&#x5145;-&#x4E3A;&#x4EC0;&#x4E48;gc-go&#x5DE5;&#x5177;&#x94FE;&#x7684;&#x652F;&#x6301;ppc64-&#x4F46;&#x4E0D;&#x80FD;&#x5728;e6500&#x4E0A;&#x8FD0;&#x884C;"><i class="fa fa-link" aria-hidden="true"></i></a>19. &#x8865;&#x5145;: &#x4E3A;&#x4EC0;&#x4E48;gc go&#x5DE5;&#x5177;&#x94FE;&#x7684;&#x652F;&#x6301;ppc64, &#x4F46;&#x4E0D;&#x80FD;&#x5728;e6500&#x4E0A;&#x8FD0;&#x884C;?</h1>
<p>&#x56E0;&#x4E3A;gc go&#x7684;ppc64&#x7279;&#x6307;power8</p>
<p><a href="https://github.com/golang/go/issues/19074" target="_blank">zte&#x6709;&#x4EBA;&#x652F;&#x6301;&#x4E86;e6500</a> &#x7528;&#x6CD5;&#x662F;&#x4F20;&#x5165;GOPPC
&#x4F46;&#x6211;&#x8BD5;&#x4E86;, &#x5B98;&#x65B9;&#x6E90;&#x7801;&#x6811;&#x91CC;&#x8FD8;&#x6CA1;&#x6709;.</p>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">GOPPC64=e6500 GOARCH=ppc64 _go build hello.g
2020/11/03 01:21:57 Invalid GOPPC64 value. Must be power8 or power9.
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>&#x8FD8;&#x6709;&#x4E2A;&#x8BF4;&#x6CD5;&#x662F;, <a href="https://github.com/golang/go/issues/34850" target="_blank">&#x53BB;&#x6389;ppc64&#x7684;&#x652F;&#x6301;, &#x53EA;&#x4FDD;&#x7559;ppc64le</a></p>
<h1 id="&#x8865;&#x5145;-elf&#x683C;&#x5F0F;"><a name="&#x8865;&#x5145;-elf&#x683C;&#x5F0F;" class="anchor-navigation-ex-anchor" href="#&#x8865;&#x5145;-elf&#x683C;&#x5F0F;"><i class="fa fa-link" aria-hidden="true"></i></a>20. &#x8865;&#x5145;: elf&#x683C;&#x5F0F;</h1>
<p><a href="https://stevens.netmeister.org/631/elf.html" target="_blank">https://stevens.netmeister.org/631/elf.html</a></p>
</body></html>
                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="as_title.html" class="navigation navigation-prev " aria-label="Previous page: Golang 环境和工具链生成">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="golang_toolchain_compile_gccgo.html" class="navigation navigation-next " aria-label="Next page: 编译gccgo">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"go tools增加ppc32支持.md","level":"1.7.9.1","depth":3,"next":{"title":"编译gccgo","level":"1.7.9.2","depth":3,"path":"notes/golang_toolchain_compile_gccgo.md","ref":"notes/golang_toolchain_compile_gccgo.md","articles":[]},"previous":{"title":"Golang 环境和工具链生成","level":"1.7.9","depth":2,"path":"notes/as_title.md","ref":"notes/as_title.md","articles":[{"title":"go tools增加ppc32支持.md","level":"1.7.9.1","depth":3,"path":"notes/golang_toolchain_ppc.md","ref":"notes/golang_toolchain_ppc.md","articles":[]},{"title":"编译gccgo","level":"1.7.9.2","depth":3,"path":"notes/golang_toolchain_compile_gccgo.md","ref":"notes/golang_toolchain_compile_gccgo.md","articles":[]},{"title":"go on mips boards(not so updated)","level":"1.7.9.3","depth":3,"path":"notes/golang_go_on_mips.md","ref":"notes/golang_go_on_mips.md","articles":[{"title":"part 1: cross compile go","level":"1.7.9.3.1","depth":4,"path":"notes/golang_go_on_mips_part1.md","ref":"notes/golang_go_on_mips_part1.md","articles":[]},{"title":"part 2: build native go compiler","level":"1.7.9.3.2","depth":4,"path":"notes/golang_go_on_mips_part2.md","ref":"notes/golang_go_on_mips_part2.md","articles":[]},{"title":"part 3: gccgo experiments","level":"1.7.9.3.3","depth":4,"path":"notes/golang_go_on_mips_part3.md","ref":"notes/golang_go_on_mips_part3.md","articles":[]},{"title":"part 4: Golang json performance","level":"1.7.9.3.4","depth":4,"path":"notes/golang_go_on_mips_part4.md","ref":"notes/golang_go_on_mips_part4.md","articles":[]},{"title":"Gentoo on mips board and build go","level":"1.7.9.3.5","depth":4,"path":"notes/golang_gentoo_on_mips_board_and_build_go.md","ref":"notes/golang_gentoo_on_mips_board_and_build_go.md","articles":[]}]}]},"dir":"ltr"},"config":{"plugins":["-sharing","-lunr","-search","search-plus","-highlight","prism-ext","expandable-chapters-small","github","disqus","splitter","wide-page","hide-navigation-buttons","anchor-navigation-ex","sequence"],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"prism":{"plugins":["line-numbers"],"cssClasses":"line-numbers","css":["prismjs/themes/prism.css"]},"disqus":{"useIdentifier":false,"shortName":"bai-yingjie-notes"},"sequence":{"theme":"simple"},"github":{"url":"https://github.com/Bai-Yingjie/Bai-Yingjie.github.io"},"splitter":{},"wide-page":{},"fontsettings":{"theme":"white","family":"sans","size":2},"hide-navigation-buttons":{},"anchor-navigation-ex":{"mode":"float","pageTop":{"level1Icon":"","level2Icon":"","level3Icon":"","showLevelIcon":false},"isRewritePageTitle":true,"showLevel":true,"tocLevel1Icon":"fa fa-hand-o-right","tocLevel2Icon":"fa fa-hand-o-right","tocLevel3Icon":"fa fa-hand-o-right","showGoTop":true,"isShowTocTitleIcon":true,"printLog":false,"multipleH1":true,"associatedWithSummary":true,"float":{"floatIcon":"fa fa-navicon","level1Icon":"","level2Icon":"","level3Icon":"","showLevelIcon":false}},"prism-ext":{},"expandable-chapters-small":{},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false},"search-plus":{}},"theme":"default","author":"Bai Yingjie","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"My Notes","language":"zh-hans","gitbook":"*"},"file":{"path":"notes/golang_toolchain_ppc.md","mtime":"2022-10-12T01:03:45.931Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2022-10-12T01:04:48.354Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-search-plus/jquery.mark.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search-plus/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-expandable-chapters-small/expandable-chapters-small.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-github/plugin.js"></script>
        
    
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/URI.js/1.16.1/URI.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-disqus/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-splitter/splitter.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>


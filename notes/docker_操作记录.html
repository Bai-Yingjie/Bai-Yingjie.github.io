
<!DOCTYPE HTML>
<html lang="zh-hans" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>docker操作记录 · My Notes</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        <meta name="author" content="Bai Yingjie">
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search-plus/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-expandable-chapters-small/expandable-chapters-small.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-disqus/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-splitter/splitter.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-wide-page/wide.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-hide-navigation-buttons/index.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-anchor-navigation-ex/style/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="centos_操作记录.html" />
    
    
    <link rel="prev" href="gitlab_ci.html" />
    

    </head>
    <body>
        


<div class="book">
    <div class="book-summary">
        
            <div class="theme-code-header">
                <a href="" class="link">
                    <h1 class="title">My Notes</h1>
                </a>
            </div>
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="输入并搜索" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    简介
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="as_title.html">
            
                <a href="as_title.html">
            
                    
                    开源
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="my_opensource.html">
            
                <a href="my_opensource.html">
            
                    
                    我的开源项目
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="my_upstream.html">
            
                <a href="my_upstream.html">
            
                    
                    我的upstream commit
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="as_title.html">
            
                <a href="as_title.html">
            
                    
                    系统分析和性能
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="system_analysis_bcc和ebpf.html">
            
                <a href="system_analysis_bcc和ebpf.html">
            
                    
                    bcc和ebpf(starting)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="performance_ovs进程调查.html">
            
                <a href="performance_ovs进程调查.html">
            
                    
                    OVS进程调查
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="performance_ping流程和函数调用解析.html">
            
                <a href="performance_ping流程和函数调用解析.html">
            
                    
                    ping流程和函数调用解析
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4" data-path="CentOS_系统性能优化配置.html">
            
                <a href="CentOS_系统性能优化配置.html">
            
                    
                    CentOS 性能优化系统配置
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="as_title.html">
            
                <a href="as_title.html">
            
                    
                    ARM server
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="arm_server_杂记.html">
            
                <a href="arm_server_杂记.html">
            
                    
                    Arm server 杂记
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="as_title.html">
            
                <a href="as_title.html">
            
                    
                    嵌入式系统开发调试
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="embedded_debugging.html">
            
                <a href="embedded_debugging.html">
            
                    
                    嵌入式调试杂记
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="uboot_杂记.html">
            
                <a href="uboot_杂记.html">
            
                    
                    uboot杂记
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3" data-path="buildroot_杂记.html">
            
                <a href="buildroot_杂记.html">
            
                    
                    buildroot杂记
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.4" data-path="toolchain_升级gcc问题解决.html">
            
                <a href="toolchain_升级gcc问题解决.html">
            
                    
                    升级GCC7.3问题解决
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="as_title.html">
            
                <a href="as_title.html">
            
                    
                    Linux工程实践
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="linux_日常使用.html">
            
                <a href="linux_日常使用.html">
            
                    
                    日常linux使用
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="git_日常使用.html">
            
                <a href="git_日常使用.html">
            
                    
                    日常git使用
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3" data-path="向kernel提交补丁.html">
            
                <a href="向kernel提交补丁.html">
            
                    
                    向kernel提交补丁
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.4" data-path="linux_ssh_relay.html">
            
                <a href="linux_ssh_relay.html">
            
                    
                    ssh relay
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.5" data-path="gitlab_ci.html">
            
                <a href="gitlab_ci.html">
            
                    
                    gitlab CI
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.6.6" data-path="docker_操作记录.html">
            
                <a href="docker_操作记录.html">
            
                    
                    docker操作记录
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.7" data-path="centos_操作记录.html">
            
                <a href="centos_操作记录.html">
            
                    
                    centos操作记录
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="as_title.html">
            
                <a href="as_title.html">
            
                    
                    Golang
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" data-path="as_title.html">
            
                <a href="as_title.html">
            
                    
                    入门
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1.1" data-path="golang_语法基础.html">
            
                <a href="golang_语法基础.html">
            
                    
                    Golang 语法基础
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.1.2" data-path="golang_json性能.html">
            
                <a href="golang_json性能.html">
            
                    
                    Golang json性能比较
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7.2" data-path="golang_原理.html">
            
                <a href="golang_原理.html">
            
                    
                    Golang 原理相关
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.2.1" data-path="golang_interface原理.html">
            
                <a href="golang_interface原理.html">
            
                    
                    Golang interface原理(网摘)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.2.2" data-path="golang_内存分配.html">
            
                <a href="golang_内存分配.html">
            
                    
                    Golang 内存分配(网摘)
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7.3" data-path="golang_标准库.html">
            
                <a href="golang_标准库.html">
            
                    
                    Golang 标准库
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.4" data-path="golang_我的反射代码.html">
            
                <a href="golang_我的反射代码.html">
            
                    
                    Golang 我的反射代码
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.5" data-path="golang_问答.html">
            
                <a href="golang_问答.html">
            
                    
                    Golang 问答
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.6" data-path="golang_高效go.html">
            
                <a href="golang_高效go.html">
            
                    
                    Golang 高效go
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.7" data-path="golang_进阶.html">
            
                <a href="golang_进阶.html">
            
                    
                    Golang 进阶
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.8" data-path="as_title.html">
            
                <a href="as_title.html">
            
                    
                    Golang 杂记
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.8.1" data-path="golang_杂记1.html">
            
                <a href="golang_杂记1.html">
            
                    
                    Golang 杂记1
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.8.2" data-path="golang_杂记2.html">
            
                <a href="golang_杂记2.html">
            
                    
                    Golang 杂记2
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.8.3" data-path="golang_杂记3.html">
            
                <a href="golang_杂记3.html">
            
                    
                    Golang 杂记3
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.8.4" data-path="golang_lib选型.html">
            
                <a href="golang_lib选型.html">
            
                    
                    Golang lib选型
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.8.5" data-path="golang_mod_proxy.html">
            
                <a href="golang_mod_proxy.html">
            
                    
                    go mod和go proxy
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.8.6" data-path="golang_汇编_arm64.html">
            
                <a href="golang_汇编_arm64.html">
            
                    
                    Golang 汇编语法和arm64小知识
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.8.7" data-path="golang_cgo_swig.html">
            
                <a href="golang_cgo_swig.html">
            
                    
                    go调用c可以用swig
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7.9" data-path="as_title.html">
            
                <a href="as_title.html">
            
                    
                    Golang 环境和工具链生成
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.9.1" data-path="golang_toolchain_ppc.html">
            
                <a href="golang_toolchain_ppc.html">
            
                    
                    go tools增加ppc32支持.md
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.9.2" data-path="golang_toolchain_compile_gccgo.html">
            
                <a href="golang_toolchain_compile_gccgo.html">
            
                    
                    编译gccgo
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.9.3" data-path="golang_go_on_mips.html">
            
                <a href="golang_go_on_mips.html">
            
                    
                    go on mips boards(not so updated)
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.9.3.1" data-path="golang_go_on_mips_part1.html">
            
                <a href="golang_go_on_mips_part1.html">
            
                    
                    part 1: cross compile go
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.9.3.2" data-path="golang_go_on_mips_part2.html">
            
                <a href="golang_go_on_mips_part2.html">
            
                    
                    part 2: build native go compiler
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.9.3.3" data-path="golang_go_on_mips_part3.html">
            
                <a href="golang_go_on_mips_part3.html">
            
                    
                    part 3: gccgo experiments
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.9.3.4" data-path="golang_go_on_mips_part4.html">
            
                <a href="golang_go_on_mips_part4.html">
            
                    
                    part 4: Golang json performance
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.9.3.5" data-path="golang_gentoo_on_mips_board_and_build_go.html">
            
                <a href="golang_gentoo_on_mips_board_and_build_go.html">
            
                    
                    Gentoo on mips board and build go
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7.10" data-path="as_title.html">
            
                <a href="as_title.html">
            
                    
                    微服务
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.10.1" data-path="golang_micro.html">
            
                <a href="golang_micro.html">
            
                    
                    go-micro和micro
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.10.2" data-path="golang_微服务概念.html">
            
                <a href="golang_微服务概念.html">
            
                    
                    微服务概念
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7.11" data-path="as_title.html">
            
                <a href="as_title.html">
            
                    
                    解释器和编解码
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.11.1" data-path="golang_yeagi.html">
            
                <a href="golang_yeagi.html">
            
                    
                    解释器yeagi
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.11.2" data-path="golang_tengo.html">
            
                <a href="golang_tengo.html">
            
                    
                    解释器tengo
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.11.3" data-path="golang_govaluate.html">
            
                <a href="golang_govaluate.html">
            
                    
                    解释器govaluate
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.11.4" data-path="golang_encoding_gotiny.html">
            
                <a href="golang_encoding_gotiny.html">
            
                    
                    gotiny编解码
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.11.5" data-path="golang_abs.html">
            
                <a href="golang_abs.html">
            
                    
                    解释器abs
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7.12" data-path="as_title.html">
            
                <a href="as_title.html">
            
                    
                    调试和性能
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.12.1" data-path="golang_调试记录.html">
            
                <a href="golang_调试记录.html">
            
                    
                    Golang 调试记录
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.12.2" data-path="golang_topid性能优化.html">
            
                <a href="golang_topid性能优化.html">
            
                    
                    Golang topid性能优化
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.12.3" data-path="golang_gshell性能调试.html">
            
                <a href="golang_gshell性能调试.html">
            
                    
                    Golang gshell性能调试
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7.13" data-path="as_title.html">
            
                <a href="as_title.html">
            
                    
                    网络和消息中间件
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.13.1" data-path="golang_zmq.html">
            
                <a href="golang_zmq.html">
            
                    
                    消息中间件基本概念和zero mq
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.13.2" data-path="golang_mango.html">
            
                <a href="golang_mango.html">
            
                    
                    消息中间件mango
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.13.3" data-path="golang_libp2p.html">
            
                <a href="golang_libp2p.html">
            
                    
                    Golang p2p网络
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="as_title.html">
            
                <a href="as_title.html">
            
                    
                    Rust
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.1" data-path="rust_入门_brief.html">
            
                <a href="rust_入门_brief.html">
            
                    
                    Rust 入门系列
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.1.1" data-path="rust_books.html">
            
                <a href="rust_books.html">
            
                    
                    Rust reference books
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.1.2" data-path="rust_入门1.html">
            
                <a href="rust_入门1.html">
            
                    
                    Rust 安装和基础语法
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.1.3" data-path="rust_入门2.html">
            
                <a href="rust_入门2.html">
            
                    
                    Rust 泛型和内存所有权
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.1.4" data-path="rust_入门3.html">
            
                <a href="rust_入门3.html">
            
                    
                    Rust 闭包 容器 迭代器 生成器 线程
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.1.5" data-path="rust_工程构建.html">
            
                <a href="rust_工程构建.html">
            
                    
                    Rust 工程构建
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8.2" data-path="rust_coding_brief.html">
            
                <a href="rust_coding_brief.html">
            
                    
                    Rust 代码积累
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.2.1" data-path="rust_序列化.html">
            
                <a href="rust_序列化.html">
            
                    
                    Rust 序列化原理
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2.2" data-path="rust_知识点积累.html">
            
                <a href="rust_知识点积累.html">
            
                    
                    Rust 知识点更新
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2.3" data-path="rust_adaptiveservice.html">
            
                <a href="rust_adaptiveservice.html">
            
                    
                    rust版本的adaptiveservice探索
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2.4" data-path="rust_常用设施.html">
            
                <a href="rust_常用设施.html">
            
                    
                    Rust 常用设施
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2.5" data-path="rust_代码小段.html">
            
                <a href="rust_代码小段.html">
            
                    
                    Rust 代码小段
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8.3" data-path="others.html">
            
                <a href="others.html">
            
                    
                    其他
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.3.1" data-path="rust_mdbook_使用.html">
            
                <a href="rust_mdbook_使用.html">
            
                    
                    Rust 使用mdbook
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="as_title.html">
            
                <a href="as_title.html">
            
                    
                    C开发
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.9.1" data-path="c_automake_autoconf.html">
            
                <a href="c_automake_autoconf.html">
            
                    
                    automake autoconf
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2" data-path="makefile_原理和实践.html">
            
                <a href="makefile_原理和实践.html">
            
                    
                    makefile
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.3" data-path="c_编程杂记高级篇.html">
            
                <a href="c_编程杂记高级篇.html">
            
                    
                    C编程杂记高级篇
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.4" data-path="c_编程杂记基础篇.html">
            
                <a href="c_编程杂记基础篇.html">
            
                    
                    C编程杂记基础篇
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.5" data-path="c_networking_socket高阶用法.html">
            
                <a href="c_networking_socket高阶用法.html">
            
                    
                    网络编程: Advanced Socket Topics(网摘)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.6" data-path="c_protobuf介绍.html">
            
                <a href="c_protobuf介绍.html">
            
                    
                    序列化: protobuf介绍
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.7" data-path="c_进程间通信_共享文件和共享内存.html">
            
                <a href="c_进程间通信_共享文件和共享内存.html">
            
                    
                    进程间通信: 共享文件和共享内存(网摘)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.8" data-path="c_pthread_condition和mutex.html">
            
                <a href="c_pthread_condition和mutex.html">
            
                    
                    并发 任务 事件 和锁.md
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.9" data-path="kernel_user_space_howto.html">
            
                <a href="kernel_user_space_howto.html">
            
                    
                    kernel space和user space交互(网摘, linux2.6)
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="as_title.html">
            
                <a href="as_title.html">
            
                    
                    脚本
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.1" data-path="shell_变量.html">
            
                <a href="shell_变量.html">
            
                    
                    shell变量
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.2" data-path="shell_基础篇.html">
            
                <a href="shell_基础篇.html">
            
                    
                    shell命令和脚本记录-基础篇
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.3" data-path="shell_高级篇.html">
            
                <a href="shell_高级篇.html">
            
                    
                    shell命令和脚本记录-高级篇
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.4" data-path="shell_脚本片段.html">
            
                <a href="shell_脚本片段.html">
            
                    
                    shell脚本片段
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.5" data-path="python_记录.html">
            
                <a href="python_记录.html">
            
                    
                    python记录
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.6" data-path="lua_记录.html">
            
                <a href="lua_记录.html">
            
                    
                    lua记录
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.7" data-path="shell_rds脚本阅读.html">
            
                <a href="shell_rds脚本阅读.html">
            
                    
                    RDS脚本阅读
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.8" data-path="Project_Euler.html">
            
                <a href="Project_Euler.html">
            
                    
                    Project Euler
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.11" data-path="as_title.html">
            
                <a href="as_title.html">
            
                    
                    cloud和容器相关
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.11.1" data-path="cloud_杂记.html">
            
                <a href="cloud_杂记.html">
            
                    
                    云杂记
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.2" data-path="container_当代容器读书笔记.html">
            
                <a href="container_当代容器读书笔记.html">
            
                    
                    当代容器读书笔记
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.12" data-path="as_title.html">
            
                <a href="as_title.html">
            
                    
                    Operating System
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.12.1" data-path="system_libc_part1.html">
            
                <a href="system_libc_part1.html">
            
                    
                    libc概览1
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.2" data-path="system_libc_part2.html">
            
                <a href="system_libc_part2.html">
            
                    
                    libc概览2
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.3" data-path="system_libc_part3.html">
            
                <a href="system_libc_part3.html">
            
                    
                    libc概览3
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.4" data-path="system_原理杂记.html">
            
                <a href="system_原理杂记.html">
            
                    
                    系统原理杂记
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.5" data-path="system_alpine.html">
            
                <a href="system_alpine.html">
            
                    
                    Alpine Linux
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.6" data-path="system_进程间通信.html">
            
                <a href="system_进程间通信.html">
            
                    
                    进程间通信
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.7" data-path="system_特殊功能fd.html">
            
                <a href="system_特殊功能fd.html">
            
                    
                    eventfd timerfd signalfd和fd共享
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.13" data-path="as_title.html">
            
                <a href="as_title.html">
            
                    
                    CPU和device虚拟化
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.13.1" data-path="as_title.html">
            
                <a href="as_title.html">
            
                    
                    gvisor
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.13.1.1" data-path="golang_gvisor代码_KVM.html">
            
                <a href="golang_gvisor代码_KVM.html">
            
                    
                    gvisor KVM模式代码
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.1.2" data-path="golang_gvisor调试.html">
            
                <a href="golang_gvisor调试.html">
            
                    
                    gvisor调试
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.1.3" data-path="golang_gvisor_ptrace.html">
            
                <a href="golang_gvisor_ptrace.html">
            
                    
                    gvisor ptrace模式介绍(网摘)
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.13.2" data-path="rust_vmm_brief.html">
            
                <a href="rust_vmm_brief.html">
            
                    
                    rust VMM(virtual machine monitor)
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.13.2.1" data-path="rust_vmm_简介.html">
            
                <a href="rust_vmm_简介.html">
            
                    
                    rust-vmm简介
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.2.2" data-path="rust_firecracker_代码.html">
            
                <a href="rust_firecracker_代码.html">
            
                    
                    firecracker代码
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.2.3" data-path="rust_firecracker_使用.html">
            
                <a href="rust_firecracker_使用.html">
            
                    
                    firecracker使用
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.2.4" data-path="rust_cloud-hypervisor_代码.html">
            
                <a href="rust_cloud-hypervisor_代码.html">
            
                    
                    cloud hypervisor代码
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.2.5" data-path="rust_cloud-hypervisor_使用.html">
            
                <a href="rust_cloud-hypervisor_使用.html">
            
                    
                    cloud hypervisor使用
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.2.6" data-path="rust_cloud-hypervisor_问题与解决.html">
            
                <a href="rust_cloud-hypervisor_问题与解决.html">
            
                    
                    cloud hypervisor问题与解决
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.13.3" data-path="virtualization_virtio规范阅读笔记.html">
            
                <a href="virtualization_virtio规范阅读笔记.html">
            
                    
                    virtio规范阅读笔记.md
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.4" data-path="qemu_ovs_虚拟化环境.html">
            
                <a href="qemu_ovs_虚拟化环境.html">
            
                    
                    qemu OVS 虚拟化环境准备
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.5" data-path="qemu使用.html">
            
                <a href="qemu使用.html">
            
                    
                    Qemu使用(old)
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.14" data-path="as_title.html">
            
                <a href="as_title.html">
            
                    
                    计算机网络相关
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.14.1" data-path="networking_杂记1.html">
            
                <a href="networking_杂记1.html">
            
                    
                    networking杂记1
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.2" data-path="as_title.html">
            
                <a href="as_title.html">
            
                    
                    Qemu OVS和DPDK
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.14.2.1" data-path="OVS_DPDK_编译运行.html">
            
                <a href="OVS_DPDK_编译运行.html">
            
                    
                    OVS-DPDK编译运行
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.2.2" data-path="OVS_架构和代码.html">
            
                <a href="OVS_架构和代码.html">
            
                    
                    OVS架构和代码
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.2.3" data-path="OVS_DPDK_performance_HXT_ARM_server.html">
            
                <a href="OVS_DPDK_performance_HXT_ARM_server.html">
            
                    
                    OVS-DPDK for ARM server 性能测试环境
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.2.4" data-path="DPDK_Mellanox.html">
            
                <a href="DPDK_Mellanox.html">
            
                    
                    DPDK Mellanox
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.2.5" data-path="OVS_phy-vm-phy.html">
            
                <a href="OVS_phy-vm-phy.html">
            
                    
                    OVS PHY-VM-PHY
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.2.6" data-path="networking_网络虚拟化用例记录.html">
            
                <a href="networking_网络虚拟化用例记录.html">
            
                    
                    网络虚拟化用例记录
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.2.7" data-path="networking_网络虚拟化操作记录.html">
            
                <a href="networking_网络虚拟化操作记录.html">
            
                    
                    网络虚拟化操作记录
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.14.3" data-path="as_title.html">
            
                <a href="as_title.html">
            
                    
                    虚拟化网络
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.14.3.1" data-path="networking_tc_filter_连接veth和tap.html">
            
                <a href="networking_tc_filter_连接veth和tap.html">
            
                    
                    Connecting a veth device to tap
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.3.2" data-path="networking_multicast_vxlan_flannel.html">
            
                <a href="networking_multicast_vxlan_flannel.html">
            
                    
                    multicast vxlan和flannel
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.3.3" data-path="networking_virtio网络介绍.html">
            
                <a href="networking_virtio网络介绍.html">
            
                    
                    virtio网络介绍(网摘): vhost-net virtio-net vhost-user SRIOV
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.3.4" data-path="networking_virtualization_杂记.html">
            
                <a href="networking_virtualization_杂记.html">
            
                    
                    虚拟化网络杂记
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.3.5" data-path="networking_linux虚拟网络接口.html">
            
                <a href="networking_linux虚拟网络接口.html">
            
                    
                    linux虚拟网络接口(网摘)
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.15" data-path="as_title.html">
            
                <a href="as_title.html">
            
                    
                    内核 设备和驱动相关
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.15.1" data-path="driver_驱动中使用工作队列轮询.html">
            
                <a href="driver_驱动中使用工作队列轮询.html">
            
                    
                    驱动中使用工作队列轮询
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.2" data-path="device_driver_杂记.html">
            
                <a href="device_driver_杂记.html">
            
                    
                    驱动调试杂记
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.3" data-path="device_driver_原理相关.html">
            
                <a href="device_driver_原理相关.html">
            
                    
                    kernel和驱动原理相关
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.4" data-path="device_localbus_16bit读写.html">
            
                <a href="device_localbus_16bit读写.html">
            
                    
                    CPLD做8bit到16bit转换
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.5" data-path="as_title.html">
            
                <a href="as_title.html">
            
                    
                    nand
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.15.5.1" data-path="device_driver_octeon_nand.html">
            
                <a href="device_driver_octeon_nand.html">
            
                    
                    octeon nand flash驱动
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.5.2" data-path="device_driver_nand概率写失败问题分析.html">
            
                <a href="device_driver_nand概率写失败问题分析.html">
            
                    
                    Nand flash概率写失败问题分析
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.15.6" data-path="octeon_remote_pci.html">
            
                <a href="octeon_remote_pci.html">
            
                    
                    octeon remote-pci.c阅读
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.7" data-path="Device_VFIO_notes.html">
            
                <a href="Device_VFIO_notes.html">
            
                    
                    VFIO简介
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.8" data-path="as_title.html">
            
                <a href="as_title.html">
            
                    
                    智能网卡和DPDK
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.15.8.1" data-path="smartNIC_智能网卡对比.html">
            
                <a href="smartNIC_智能网卡对比.html">
            
                    
                    智能网卡对比
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.8.2" data-path="octeon_pci_NIC.html">
            
                <a href="octeon_pci_NIC.html">
            
                    
                    octeon PCI NIC
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.8.3" data-path="as_title.html">
            
                <a href="as_title.html">
            
                    
                    octeon liquidIO
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.15.8.3.1" data-path="smartNIC_liquidIO_代码阅读app篇.html">
            
                <a href="smartNIC_liquidIO_代码阅读app篇.html">
            
                    
                    PCI-NIC 代码阅读 --app篇
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.8.3.2" data-path="smartNIC_liquidIO_代码阅读api篇.html">
            
                <a href="smartNIC_liquidIO_代码阅读api篇.html">
            
                    
                    PCI-NIC 代码阅读 --api篇
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.8.3.3" data-path="smartNIC_liquidIO_代码阅读driver篇之结构体.html">
            
                <a href="smartNIC_liquidIO_代码阅读driver篇之结构体.html">
            
                    
                    PCI-NIC 代码阅读 --driver篇之结构体
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.8.3.4" data-path="smartNIC_liquidIO_代码阅读driver篇.html">
            
                <a href="smartNIC_liquidIO_代码阅读driver篇.html">
            
                    
                    PCI-NIC 代码阅读 --driver篇
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.8.3.5" data-path="smartNIC_liquidIO_代码阅读真NIC篇.html">
            
                <a href="smartNIC_liquidIO_代码阅读真NIC篇.html">
            
                    
                    PCI-NIC 代码阅读 --真NIC篇
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.15.8.4" data-path="networking_dpdk使用_2014.html">
            
                <a href="networking_dpdk使用_2014.html">
            
                    
                    DPDK使用(2014)
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.15.9" data-path="device_nvme要点介绍.html">
            
                <a href="device_nvme要点介绍.html">
            
                    
                    nvme要点介绍
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.16" data-path="as_title.html">
            
                <a href="as_title.html">
            
                    
                    CPU Arch相关
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.16.1" data-path="as_title.html">
            
                <a href="as_title.html">
            
                    
                    ARM64
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.16.1.1" data-path="CPU_ARM64_thunder_overview.html">
            
                <a href="CPU_ARM64_thunder_overview.html">
            
                    
                    thunder 概览
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.1.2" data-path="CPU_ARM64_thunder_开发板操作记录.html">
            
                <a href="CPU_ARM64_thunder_开发板操作记录.html">
            
                    
                    thunder 开发板操作记录
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.1.3" data-path="CPU_ARM64_thunder_bdk.html">
            
                <a href="CPU_ARM64_thunder_bdk.html">
            
                    
                    thunder BDK
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.1.4" data-path="CPU_ARM64_thunder_efi_rtc.html">
            
                <a href="CPU_ARM64_thunder_efi_rtc.html">
            
                    
                    thunder RTC时间和efi
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.1.5" data-path="CPU_ARM64_thunder_uefi_fdt.html">
            
                <a href="CPU_ARM64_thunder_uefi_fdt.html">
            
                    
                    thunder uefi和fdt
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.1.6" data-path="CPU_ARM64_thunder_atf.html">
            
                <a href="CPU_ARM64_thunder_atf.html">
            
                    
                    thunder atf
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.1.7" data-path="CPU_ARM64_thunder_kernel_boot.html">
            
                <a href="CPU_ARM64_thunder_kernel_boot.html">
            
                    
                    thunder kernel启动打印流程
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.16.2" data-path="as_title.html">
            
                <a href="as_title.html">
            
                    
                    PPC
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.16.2.1" data-path="CPU_PPC启动多核Linux_流程和内存映射.html">
            
                <a href="CPU_PPC启动多核Linux_流程和内存映射.html">
            
                    
                    PPC启动多核linux: 流程和内存映射
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.2.2" data-path="CPU_PPC_kernel升级记录.html">
            
                <a href="CPU_PPC_kernel升级记录.html">
            
                    
                    PPC kernel升级记录
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.16.3" data-path="as_title.html">
            
                <a href="as_title.html">
            
                    
                    MIPS
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.16.3.1" data-path="CPU_MIPS_octeon地址空间和寄存器访问.html">
            
                <a href="CPU_MIPS_octeon地址空间和寄存器访问.html">
            
                    
                    octeon 地址空间和寄存器访问
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.3.2" data-path="CPU_MIPS_octeon操作记录.html">
            
                <a href="CPU_MIPS_octeon操作记录.html">
            
                    
                    octeon 操作记录
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.3.3" data-path="CPU_MIPS_octeon_包处理性能.html">
            
                <a href="CPU_MIPS_octeon_包处理性能.html">
            
                    
                    octeon 系列处理器包处理性能
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.3.4" data-path="CPU_MIPS_octeon_ddr调试记录.html">
            
                <a href="CPU_MIPS_octeon_ddr调试记录.html">
            
                    
                    octeon DDR调试
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.3.5" data-path="CPU_MIPS_octeon_BDK.html">
            
                <a href="CPU_MIPS_octeon_BDK.html">
            
                    
                    octeon CN78xx BDK
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.3.6" data-path="kernel_增加ECC中断.html">
            
                <a href="kernel_增加ECC中断.html">
            
                    
                    octeon 增加ECC中断
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.3.7" data-path="CPU_MIPS_octeon_hw-ddr2代码走读.html">
            
                <a href="CPU_MIPS_octeon_hw-ddr2代码走读.html">
            
                    
                    octeon hw-ddr2代码走读
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.3.8" data-path="CPU_MIPS_octeon_reboot调试和ddr中断.html">
            
                <a href="CPU_MIPS_octeon_reboot调试和ddr中断.html">
            
                    
                    octeon reboot调试和DDR中断
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.3.9" data-path="CPU_MIPS_octeon中断.html">
            
                <a href="CPU_MIPS_octeon中断.html">
            
                    
                    octeon 中断
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.3.10" data-path="CPU_MIPS_octeon原子操作.html">
            
                <a href="CPU_MIPS_octeon原子操作.html">
            
                    
                    octeon 原子操作
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.3.11" data-path="CPU_MIPS_octeon网口代码分析.html">
            
                <a href="CPU_MIPS_octeon网口代码分析.html">
            
                    
                    octeon 网口代码分析
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="" target="_blank" class="gitbook-link">
            Author: Bai Yingjie
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >docker操作记录</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div class="search-plus" id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <div id="anchor-navigation-ex-navbar"><i class="fa fa-navicon"></i><ul><li><span class="title-icon "></span><a href="#docker&#x52A0;proxy"><b>1. </b>docker&#x52A0;proxy</a></li><li><span class="title-icon "></span><a href="#docker&#x9650;&#x5236;cpu&#x548C;&#x5185;&#x5B58;"><b>2. </b>docker&#x9650;&#x5236;CPU&#x548C;&#x5185;&#x5B58;</a></li><li><span class="title-icon "></span><a href="#&#x4F7F;&#x7528;nsenter&#x8FDB;&#x5165;&#x5BB9;&#x5668;"><b>3. </b>&#x4F7F;&#x7528;nsenter&#x8FDB;&#x5165;&#x5BB9;&#x5668;</a></li><li><span class="title-icon "></span><a href="#&#x6E05;&#x9664;&#x4E0D;&#x7528;&#x7684;image"><b>4. </b>&#x6E05;&#x9664;&#x4E0D;&#x7528;&#x7684;image</a></li><li><span class="title-icon "></span><a href="#&#x6E05;&#x9664;&#x4E0D;&#x7528;&#x7684;container"><b>5. </b>&#x6E05;&#x9664;&#x4E0D;&#x7528;&#x7684;container</a></li><li><span class="title-icon "></span><a href="#&#x91CD;&#x8F7D;entrypoint&#x542F;&#x52A8;"><b>6. </b>&#x91CD;&#x8F7D;entrypoint&#x542F;&#x52A8;</a></li><li><span class="title-icon "></span><a href="#&#x89E3;&#x51B3;&#x8FDE;&#x63A5;varrundockersock&#x6743;&#x9650;&#x95EE;&#x9898;"><b>7. </b>&#x89E3;&#x51B3;&#x8FDE;&#x63A5;/var/run/docker.sock&#x6743;&#x9650;&#x95EE;&#x9898;</a></li><li><span class="title-icon "></span><a href="#docker&#x7528;root&#x767B;&#x9646;"><b>8. </b>docker&#x7528;root&#x767B;&#x9646;</a></li><li><span class="title-icon "></span><a href="#docker&#x56FD;&#x5185;&#x4EE3;&#x7406;"><b>9. </b>docker&#x56FD;&#x5185;&#x4EE3;&#x7406;</a></li><ul><li><span class="title-icon "></span><a href="#20210123&#x66F4;&#x65B0;"><b>9.1. </b>20210123&#x66F4;&#x65B0;</a></li><ul><li><span class="title-icon "></span><a href="#1&#x3001;&#x914D;&#x7F6E;&#x955C;&#x50CF;&#x5730;&#x5740;"><b>9.1.1. </b>1&#x3001;&#x914D;&#x7F6E;&#x955C;&#x50CF;&#x5730;&#x5740;</a></li><li><span class="title-icon "></span><a href="#2&#x3001;&#x56FD;&#x5185;&#x955C;&#x50CF;&#x5730;&#x5740;"><b>9.1.2. </b>2&#x3001;&#x56FD;&#x5185;&#x955C;&#x50CF;&#x5730;&#x5740;</a></li></ul><li><span class="title-icon "></span><a href="#2020-7&#x6708;"><b>9.2. </b>2020 7&#x6708;</a></li></ul><li><span class="title-icon "></span><a href="#docker-ubuntu-for-golang"><b>10. </b>docker ubuntu for golang</a></li><li><span class="title-icon "></span><a href="#gentoo-docker"><b>11. </b>gentoo docker</a></li><li><span class="title-icon "></span><a href="#&#x6E05;&#x7406;&#x7A7A;&#x95F4;"><b>12. </b>&#x6E05;&#x7406;&#x7A7A;&#x95F4;</a></li><li><span class="title-icon "></span><a href="#docker&#x4FDD;&#x5B58;&#x955C;&#x50CF;"><b>13. </b>docker&#x4FDD;&#x5B58;&#x955C;&#x50CF;</a></li><li><span class="title-icon "></span><a href="#history"><b>14. </b>history</a></li><li><span class="title-icon "></span><a href="#&#x8FDB;&#x5165;shell"><b>15. </b>&#x8FDB;&#x5165;shell</a></li><li><span class="title-icon "></span><a href="#&#x83B7;&#x53D6;&#x6BCF;&#x4E2A;container&#x7684;ip"><b>16. </b>&#x83B7;&#x53D6;&#x6BCF;&#x4E2A;container&#x7684;ip</a></li><li><span class="title-icon "></span><a href="#docker-run"><b>17. </b>docker run</a></li><li><span class="title-icon "></span><a href="#docker-commit"><b>18. </b>docker commit</a></li><li><span class="title-icon "></span><a href="#&#x5BB9;&#x6613;&#x6DF7;&#x6DC6;&#x7684;&#x6982;&#x5FF5;&#x5165;&#x95E8;&#x8BB2;&#x89E3;"><b>19. </b>&#x5BB9;&#x6613;&#x6DF7;&#x6DC6;&#x7684;&#x6982;&#x5FF5;&#x5165;&#x95E8;&#x8BB2;&#x89E3;</a></li><li><span class="title-icon "></span><a href="#docker-tag&#x53EF;&#x4EE5;push&#x5230;&#x79C1;&#x6709;&#x5E93;"><b>20. </b>docker tag&#x53EF;&#x4EE5;push&#x5230;&#x79C1;&#x6709;&#x5E93;?</a></li><li><span class="title-icon "></span><a href="#&#x5728;docker&#x91CC;&#x9762;&#x8D77;systemd"><b>21. </b>&#x5728;docker&#x91CC;&#x9762;&#x8D77;systemd?</a></li><li><span class="title-icon "></span><a href="#dockerfile-entrypoint-vs-cmd"><b>22. </b>Dockerfile: ENTRYPOINT vs CMD</a></li><li><span class="title-icon "></span><a href="#repository&#x548C;registry"><b>23. </b>Repository&#x548C;Registry</a></li><li><span class="title-icon "></span><a href="#&#x7528;&#x65B0;&#x7684;command&#x542F;&#x52A8;&#x4E00;&#x4E2A;container"><b>24. </b>&#x7528;&#x65B0;&#x7684;command&#x542F;&#x52A8;&#x4E00;&#x4E2A;container</a></li><li><span class="title-icon "></span><a href="#image&#x548C;container&#x7684;&#x533A;&#x522B;"><b>25. </b>image&#x548C;container&#x7684;&#x533A;&#x522B;?</a></li><ul><li><span class="title-icon "></span><a href="#whats-an-image"><b>25.1. </b>What&apos;s an Image?</a></li></ul></ul></div><a href="#docker&#x52A0;proxy" id="anchorNavigationExGoTop"><i class="fa fa-arrow-up"></i></a><ul>
<li><a href="#docker&#x52A0;proxy">docker&#x52A0;proxy</a></li>
<li><a href="#docker&#x9650;&#x5236;cpu&#x548C;&#x5185;&#x5B58;">docker&#x9650;&#x5236;CPU&#x548C;&#x5185;&#x5B58;</a></li>
<li><a href="#&#x4F7F;&#x7528;nsenter&#x8FDB;&#x5165;&#x5BB9;&#x5668;">&#x4F7F;&#x7528;nsenter&#x8FDB;&#x5165;&#x5BB9;&#x5668;</a></li>
<li><a href="#&#x6E05;&#x9664;&#x4E0D;&#x7528;&#x7684;image">&#x6E05;&#x9664;&#x4E0D;&#x7528;&#x7684;image</a></li>
<li><a href="#&#x6E05;&#x9664;&#x4E0D;&#x7528;&#x7684;container">&#x6E05;&#x9664;&#x4E0D;&#x7528;&#x7684;container</a></li>
<li><a href="#&#x91CD;&#x8F7D;entrypoint&#x542F;&#x52A8;">&#x91CD;&#x8F7D;entrypoint&#x542F;&#x52A8;</a></li>
<li><a href="#&#x89E3;&#x51B3;&#x8FDE;&#x63A5;varrundockersock&#x6743;&#x9650;&#x95EE;&#x9898;">&#x89E3;&#x51B3;&#x8FDE;&#x63A5;<code>/var/run/docker.sock</code>&#x6743;&#x9650;&#x95EE;&#x9898;</a></li>
<li><a href="#docker&#x7528;root&#x767B;&#x9646;">docker&#x7528;root&#x767B;&#x9646;</a></li>
<li><a href="#docker&#x56FD;&#x5185;&#x4EE3;&#x7406;">docker&#x56FD;&#x5185;&#x4EE3;&#x7406;</a><ul>
<li><a href="#20210123&#x66F4;&#x65B0;">20210123&#x66F4;&#x65B0;</a><ul>
<li><a href="#1&#x914D;&#x7F6E;&#x955C;&#x50CF;&#x5730;&#x5740;">1&#x3001;&#x914D;&#x7F6E;&#x955C;&#x50CF;&#x5730;&#x5740;</a></li>
<li><a href="#2&#x56FD;&#x5185;&#x955C;&#x50CF;&#x5730;&#x5740;">2&#x3001;&#x56FD;&#x5185;&#x955C;&#x50CF;&#x5730;&#x5740;</a></li>
</ul>
</li>
<li><a href="#2020-7&#x6708;">2020 7&#x6708;</a></li>
</ul>
</li>
<li><a href="#docker-ubuntu-for-golang">docker ubuntu for golang</a></li>
<li><a href="#gentoo-docker">gentoo docker</a></li>
<li><a href="#&#x6E05;&#x7406;&#x7A7A;&#x95F4;">&#x6E05;&#x7406;&#x7A7A;&#x95F4;</a></li>
<li><a href="#docker&#x4FDD;&#x5B58;&#x955C;&#x50CF;">docker&#x4FDD;&#x5B58;&#x955C;&#x50CF;</a></li>
<li><a href="#history">history</a></li>
<li><a href="#&#x8FDB;&#x5165;shell">&#x8FDB;&#x5165;shell</a></li>
<li><a href="#&#x83B7;&#x53D6;&#x6BCF;&#x4E2A;container&#x7684;ip">&#x83B7;&#x53D6;&#x6BCF;&#x4E2A;container&#x7684;ip</a></li>
<li><a href="#docker-run">docker run</a></li>
<li><a href="#docker-commit">docker commit</a></li>
<li><a href="#&#x5BB9;&#x6613;&#x6DF7;&#x6DC6;&#x7684;&#x6982;&#x5FF5;&#x5165;&#x95E8;&#x8BB2;&#x89E3;">&#x5BB9;&#x6613;&#x6DF7;&#x6DC6;&#x7684;&#x6982;&#x5FF5;&#x5165;&#x95E8;&#x8BB2;&#x89E3;</a></li>
<li><a href="#docker-tag&#x53EF;&#x4EE5;push&#x5230;&#x79C1;&#x6709;&#x5E93;">docker tag&#x53EF;&#x4EE5;push&#x5230;&#x79C1;&#x6709;&#x5E93;?</a></li>
<li><a href="#&#x5728;docker&#x91CC;&#x9762;&#x8D77;systemd">&#x5728;docker&#x91CC;&#x9762;&#x8D77;systemd?</a></li>
<li><a href="#dockerfile-entrypoint-vs-cmd">Dockerfile: ENTRYPOINT vs CMD</a></li>
<li><a href="#repository&#x548C;registry">Repository&#x548C;Registry</a></li>
<li><a href="#&#x7528;&#x65B0;&#x7684;command&#x542F;&#x52A8;&#x4E00;&#x4E2A;container">&#x7528;&#x65B0;&#x7684;command&#x542F;&#x52A8;&#x4E00;&#x4E2A;container</a></li>
<li><a href="#image&#x548C;container&#x7684;&#x533A;&#x522B;">image&#x548C;container&#x7684;&#x533A;&#x522B;?</a><ul>
<li><a href="#whats-an-image">What&apos;s an Image?</a></li>
</ul>
</li>
</ul>
<h1 id="docker&#x52A0;proxy"><a name="docker&#x52A0;proxy" class="anchor-navigation-ex-anchor" href="#docker&#x52A0;proxy"><i class="fa fa-link" aria-hidden="true"></i></a>1. docker&#x52A0;proxy</h1>
<p>&#x5728;docker run&#x547D;&#x4EE4;&#x884C;&#x52A0;:</p>
<pre><code class="lang-sh">--env http_proxy=&quot;http://10.158.100.6:8080/&quot;
</code></pre>
<h1 id="docker&#x9650;&#x5236;cpu&#x548C;&#x5185;&#x5B58;"><a name="docker&#x9650;&#x5236;cpu&#x548C;&#x5185;&#x5B58;" class="anchor-navigation-ex-anchor" href="#docker&#x9650;&#x5236;cpu&#x548C;&#x5185;&#x5B58;"><i class="fa fa-link" aria-hidden="true"></i></a>2. docker&#x9650;&#x5236;CPU&#x548C;&#x5185;&#x5B58;</h1>
<p>&#x9650;&#x5236;&#x53EA;&#x6709;2&#x4E2A;CPU, 2G&#x5185;&#x5B58;</p>
<pre><code class="lang-sh">docker run --cpus=2 -m 2g --rm --runtime=runsc -it --name=test centos:7 bash
</code></pre>
<p>&#x53C2;&#x8003;: <a href="https://docs.docker.com/config/containers/resource_constraints/" target="_blank">https://docs.docker.com/config/containers/resource_constraints/</a></p>
<p>&#x4E3E;&#x4F8B;:
If you have 1 CPU, each of the following commands guarantees the container at most 50% of the CPU every second.</p>
<pre><code class="lang-sh">$ docker run -it --cpus=&quot;.5&quot; ubuntu /bin/bash
</code></pre>
<p>Which is the equivalent to manually specifying <code>--cpu-period</code> and <code>--cpu-quota</code>;</p>
<pre><code class="lang-sh">$ docker run -it --cpu-period=100000 --cpu-quota=50000 ubuntu /bin/bash
</code></pre>
<h1 id="&#x4F7F;&#x7528;nsenter&#x8FDB;&#x5165;&#x5BB9;&#x5668;"><a name="&#x4F7F;&#x7528;nsenter&#x8FDB;&#x5165;&#x5BB9;&#x5668;" class="anchor-navigation-ex-anchor" href="#&#x4F7F;&#x7528;nsenter&#x8FDB;&#x5165;&#x5BB9;&#x5668;"><i class="fa fa-link" aria-hidden="true"></i></a>3. &#x4F7F;&#x7528;nsenter&#x8FDB;&#x5165;&#x5BB9;&#x5668;</h1>
<ol>
<li><code>docker ps</code>&#x627E;&#x5230;container ID, &#x6BD4;&#x5982;&#x662F;<code>908592cfba96</code></li>
<li>&#x627E;&#x5230;&#x8FD9;&#x4E2A;&#x5BB9;&#x5668;&#x7684;pid <code>docker inspect -f{ {.State.Pid} } 908592cfba96</code>, &#x6BD4;&#x5982;&#x5F97;&#x5230;10394</li>
<li>&#x8FDB;&#x5165;&#x5BB9;&#x5668;(&#x9700;&#x8981;root): <code>nsenter -m -t 10394 bash</code></li>
<li>&#x5BB9;&#x5668;&#x91CC;&#x770B;&#x5230;&#x7684;&#x548C;<code>docker exec -it 908592cfba96 bash</code>&#x4E00;&#x6837;
&#x6CE8;: &#x8FD9;&#x4E2A;10394&#x8FDB;&#x7A0B;&#x4E00;&#x822C;&#x5C31;&#x662F;&#x5BF9;&#x5E94;containerd-shim&#x7684;&#x5B50;&#x8FDB;&#x7A0B;.<blockquote>
<p>nsenter - run program with namespaces of other processes
&#x539F;&#x7406;&#x5927;&#x6982;&#x5C31;&#x662F;clone&#x5B50;&#x8FDB;&#x7A0B;&#x7684;&#x65F6;&#x5019;&#x52A0;&#x5404;&#x79CD;new&#x6807;&#x8BB0;, &#x6BD4;&#x5982;CLONE_NEWNS, CLONE_NEWIPC, CLONE_NEWPID&#x7B49;&#x7B49;.
&#x9ED8;&#x8BA4;&#x662F;&#x8FDB;&#x5165;&#x4E00;&#x4E2A;&#x65B0;&#x7684;name space, &#x5E76;&#x6267;&#x884C;&#x547D;&#x4EE4;. &#x540E;&#x9762;&#x6267;&#x884C;&#x7684;&#x547D;&#x4EE4;&#x5BF9;host&#x7684;&#x7A7A;&#x95F4;&#x6CA1;&#x5F71;&#x54CD;.
&#x7528;<code>-t</code>&#x9009;&#x9879;&#x53EF;&#x4EE5;&#x7406;&#x89E3;&#x4E3A;attach&#x5230;target pid&#x7684;name space.</p>
</blockquote>
</li>
</ol>
<h1 id="&#x6E05;&#x9664;&#x4E0D;&#x7528;&#x7684;image"><a name="&#x6E05;&#x9664;&#x4E0D;&#x7528;&#x7684;image" class="anchor-navigation-ex-anchor" href="#&#x6E05;&#x9664;&#x4E0D;&#x7528;&#x7684;image"><i class="fa fa-link" aria-hidden="true"></i></a>4. &#x6E05;&#x9664;&#x4E0D;&#x7528;&#x7684;image</h1>
<p>The <code>docker image prune</code> command allows you to clean up unused images. By default, <code>docker image prune</code> only cleans up <em>dangling</em> images. A dangling image is one that is not tagged and is not referenced by any container. To remove dangling images:</p>
<pre><code class="lang-sh">docker image prune
</code></pre>
<h1 id="&#x6E05;&#x9664;&#x4E0D;&#x7528;&#x7684;container"><a name="&#x6E05;&#x9664;&#x4E0D;&#x7528;&#x7684;container" class="anchor-navigation-ex-anchor" href="#&#x6E05;&#x9664;&#x4E0D;&#x7528;&#x7684;container"><i class="fa fa-link" aria-hidden="true"></i></a>5. &#x6E05;&#x9664;&#x4E0D;&#x7528;&#x7684;container</h1>
<p>When you stop a container, it is not automatically removed unless you started it with the <code>--rm</code> flag. To see all containers on the Docker host, including stopped containers, use <code>docker ps -a</code>. You may be surprised how many containers exist, especially on a development system! A stopped container&#x2019;s writable layers still take up disk space. To clean this up, you can use the <code>docker container prune</code> command.</p>
<pre><code>$ docker container prune
</code></pre><h1 id="&#x91CD;&#x8F7D;entrypoint&#x542F;&#x52A8;"><a name="&#x91CD;&#x8F7D;entrypoint&#x542F;&#x52A8;" class="anchor-navigation-ex-anchor" href="#&#x91CD;&#x8F7D;entrypoint&#x542F;&#x52A8;"><i class="fa fa-link" aria-hidden="true"></i></a>6. &#x91CD;&#x8F7D;entrypoint&#x542F;&#x52A8;</h1>
<p>&#x6709;&#x7684;docker image&#x8D77;&#x4E0D;&#x6765;, &#x662F;&#x56E0;&#x4E3A;&#x9ED8;&#x8BA4;&#x7684;entrypoint&#x542F;&#x52A8;&#x5931;&#x8D25;. &#x6B64;&#x65F6;&#x91CD;&#x8F7D;entrypoint&#x5230;bash&#x4E00;&#x822C;&#x53EF;&#x542F;&#x52A8;</p>
<pre><code class="lang-sh">docker run -itd --user $(id -u):$(id -g) -v /etc/passwd:/etc/passwd:ro -v /etc/group:/etc/group:ro -v /home/$(whoami):/home/$(whoami) -v /repo/$(whoami):/repo/$(whoami) -w /repo/$(whoami) --entrypoint=/bin/bash docker-registry-remote.artifactory-blr1.int.net.nokia.com/codercom/code-server
</code></pre>
<p>&#x5BF9;&#x4E8E;entrypoint&#x4E3A;&#x7A7A;&#x7684;docker</p>
<pre><code class="lang-sh">docker run --rm -itd --user $(id -u):$(id -g) -v /etc/passwd:/etc/passwd:ro -v /etc/group:/etc/group:ro -v /home/$(whoami):/home/$(whoami) -v /repo/$(whoami):/repo/$(whoami) -w /repo/$(whoami) godevsig/godev-tool /bin/bash
fef7fdacb79a78c2e8467e1ff6cfdd38ac0e7072eebfa30df33b8f2805faa020
docker attach fef7fdacb79a78c2e8467e1ff6cfdd38ac0e7072eebfa30df33b8f2805faa020
</code></pre>
<h1 id="&#x89E3;&#x51B3;&#x8FDE;&#x63A5;varrundockersock&#x6743;&#x9650;&#x95EE;&#x9898;"><a name="&#x89E3;&#x51B3;&#x8FDE;&#x63A5;varrundockersock&#x6743;&#x9650;&#x95EE;&#x9898;" class="anchor-navigation-ex-anchor" href="#&#x89E3;&#x51B3;&#x8FDE;&#x63A5;varrundockersock&#x6743;&#x9650;&#x95EE;&#x9898;"><i class="fa fa-link" aria-hidden="true"></i></a>7. &#x89E3;&#x51B3;&#x8FDE;&#x63A5;/var/run/docker.sock&#x6743;&#x9650;&#x95EE;&#x9898;</h1>
<p>&#x5C06;&#x7528;&#x6237;&#x52A0;&#x5165;&#x5230;docker &#x7EC4;</p>
<pre><code class="lang-sh">sudo usermod -a -G docker $USER
</code></pre>
<h1 id="docker&#x7528;root&#x767B;&#x9646;"><a name="docker&#x7528;root&#x767B;&#x9646;" class="anchor-navigation-ex-anchor" href="#docker&#x7528;root&#x767B;&#x9646;"><i class="fa fa-link" aria-hidden="true"></i></a>8. docker&#x7528;root&#x767B;&#x9646;</h1>
<p>&#x4E00;&#x822C;&#x7684;&#x57FA;&#x7840;&#x955C;&#x50CF;&#x6BD4;&#x5982;ubuntu, &#x4E0D;&#x77E5;&#x9053;root&#x5BC6;&#x7801;, &#x4F46;&#x53EF;&#x4EE5;&#x8FD9;&#x6837;&#x767B;&#x9646;</p>
<pre><code>docker exec -it -u root cf13ed39f0d9 bash
</code></pre><h1 id="docker&#x56FD;&#x5185;&#x4EE3;&#x7406;"><a name="docker&#x56FD;&#x5185;&#x4EE3;&#x7406;" class="anchor-navigation-ex-anchor" href="#docker&#x56FD;&#x5185;&#x4EE3;&#x7406;"><i class="fa fa-link" aria-hidden="true"></i></a>9. docker&#x56FD;&#x5185;&#x4EE3;&#x7406;</h1>
<h2 id="20210123&#x66F4;&#x65B0;"><a name="20210123&#x66F4;&#x65B0;" class="anchor-navigation-ex-anchor" href="#20210123&#x66F4;&#x65B0;"><i class="fa fa-link" aria-hidden="true"></i></a>9.1. 20210123&#x66F4;&#x65B0;</h2>
<p>&#x4F3C;&#x4E4E;&#x6211;&#x540E;&#x6765;&#x6539;&#x7528;&#x4E86;aliyun&#x7684;&#x955C;&#x50CF;...</p>
<pre><code class="lang-sh">cat /etc/docker/deamon.json
{
    &quot;registry-mirrors&quot;: [ &quot;https://ryh6l7pc.mirror.aliyuncs.com&quot; ]
}
</code></pre>
<h3 id="1&#x3001;&#x914D;&#x7F6E;&#x955C;&#x50CF;&#x5730;&#x5740;"><a name="1&#x3001;&#x914D;&#x7F6E;&#x955C;&#x50CF;&#x5730;&#x5740;" class="anchor-navigation-ex-anchor" href="#1&#x3001;&#x914D;&#x7F6E;&#x955C;&#x50CF;&#x5730;&#x5740;"><i class="fa fa-link" aria-hidden="true"></i></a>9.1.1. 1&#x3001;&#x914D;&#x7F6E;&#x955C;&#x50CF;&#x5730;&#x5740;</h3>
<p>Docker&#x5BA2;&#x6237;&#x7AEF;&#x7248;&#x672C;&#x5927;&#x4E8E; 1.10.0 &#x7684;&#x7528;&#x6237;
&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x4FEE;&#x6539;daemon&#x914D;&#x7F6E;&#x6587;&#x4EF6;<code>/etc/docker/daemon.json</code>&#x6765;&#x4F7F;&#x7528;&#x52A0;&#x901F;&#x5668;</p>
<pre><code class="lang-json">{
&quot;registry-mirrors&quot;: [ &quot;https://docker.mirrors.ustc.edu.cn&quot; ]
}
</code></pre>
<p>&#x91CD;&#x542F;docker&#x548C;deamon</p>
<pre><code class="lang-sh">sudo systemctl daemon-reload
sudo systemctl restart docker
</code></pre>
<h3 id="2&#x3001;&#x56FD;&#x5185;&#x955C;&#x50CF;&#x5730;&#x5740;"><a name="2&#x3001;&#x56FD;&#x5185;&#x955C;&#x50CF;&#x5730;&#x5740;" class="anchor-navigation-ex-anchor" href="#2&#x3001;&#x56FD;&#x5185;&#x955C;&#x50CF;&#x5730;&#x5740;"><i class="fa fa-link" aria-hidden="true"></i></a>9.1.2. 2&#x3001;&#x56FD;&#x5185;&#x955C;&#x50CF;&#x5730;&#x5740;</h3>
<p>&#x4E5F;&#x53EF;&#x4EE5;&#x514D;&#x8D39;&#x4F7F;&#x7528;&#x963F;&#x91CC;&#x4E91;&#x7684;&#x955C;&#x50CF;&#x3002;<br>&#x767B;&#x9646;&#x963F;&#x91CC;&#x4E91;&#xFF0C;&#x7136;&#x540E;&#x8BBF;&#x95EE;&#xFF1A;<a href="https://cr.console.aliyun.com/cn-hangzhou/instances/mirrors" target="_blank">https://cr.console.aliyun.com/cn-hangzhou/instances/mirrors</a>
&#x6309;&#x7167;&#x5B98;&#x65B9;&#x63D0;&#x4F9B;&#x7684;&#x6587;&#x6863;&#x8FDB;&#x884C;&#x64CD;&#x4F5C;&#x5373;&#x53EF;&#x3002;
&#x955C;&#x50CF;&#x5730;&#x5740;&#xFF1A;
1) &#x963F;&#x91CC;&#x4E91; docker hub mirror
<a href="https://registry.cn-hangzhou.aliyuncs.com" target="_blank">https://registry.cn-hangzhou.aliyuncs.com</a>
2) &#x817E;&#x8BAF;&#x4E91; docker hub mirror
<a href="https://mirror.ccs.tencentyun.com" target="_blank">https://mirror.ccs.tencentyun.com</a>
3) &#x534E;&#x4E3A;&#x4E91;
<a href="https://05f073ad3c0010ea0f4bc00b7105ec20.mirror.swr.myhuaweicloud.com" target="_blank">https://05f073ad3c0010ea0f4bc00b7105ec20.mirror.swr.myhuaweicloud.com</a>
4) docker&#x4E2D;&#x56FD;
<a href="https://registry.docker-cn.com" target="_blank">https://registry.docker-cn.com</a>
5) &#x7F51;&#x6613;
<a href="http://hub-mirror.c.163.com" target="_blank">http://hub-mirror.c.163.com</a>
6) daocloud
<a href="http://f1361db2.m.daocloud.io" target="_blank">http://f1361db2.m.daocloud.io</a></p>
<h2 id="2020-7&#x6708;"><a name="2020-7&#x6708;" class="anchor-navigation-ex-anchor" href="#2020-7&#x6708;"><i class="fa fa-link" aria-hidden="true"></i></a>9.2. 2020 7&#x6708;</h2>
<p>&#x6211;&#x7528;&#x5FAE;&#x8F6F;&#x7684;Azure&#x7684;&#x4EE3;&#x7406;(dockerhub.azk8s.cn)&#x4E0D;&#x9519;:
&#x8BE6;&#x89C1;: <a href="https://github.com/Azure/container-service-for-azure-china/blob/master/aks/README.md#22-container-registry-proxy" target="_blank">https://github.com/Azure/container-service-for-azure-china/blob/master/aks/README.md#22-container-registry-proxy</a></p>
<pre><code class="lang-sh">docker pull dockerhub.azk8s.cn/yingjieb/godev-vscode:latest
</code></pre>
<p>&#x6709;&#x4EBA;&#x603B;&#x7ED3;&#x7684;&#x56FD;&#x5185;&#x5217;&#x8868;:<a href="https://www.jianshu.com/p/5a911f20d93e" target="_blank">https://www.jianshu.com/p/5a911f20d93e</a></p>
<pre><code class="lang-sh">&#x955C;&#x50CF;&#x52A0;&#x901F;&#x5668;    &#x955C;&#x50CF;&#x52A0;&#x901F;&#x5668;&#x5730;&#x5740;    &#x4E13;&#x5C5E;&#x52A0;&#x901F;&#x5668;&#xFF1F;    &#x5176;&#x5B83;&#x52A0;&#x901F;&#xFF1F;
Docker &#x4E2D;&#x56FD;&#x5B98;&#x65B9;&#x955C;&#x50CF;    https://registry.docker-cn.com        Docker Hub
DaoCloud &#x955C;&#x50CF;&#x7AD9;    http://f1361db2.m.daocloud.io    &#x53EF;&#x767B;&#x5F55;&#xFF0C;&#x7CFB;&#x7EDF;&#x5206;&#x914D;    Docker Hub
Azure &#x4E2D;&#x56FD;&#x955C;&#x50CF;    https://dockerhub.azk8s.cn        Docker Hub&#x3001;GCR&#x3001;Quay
&#x79D1;&#x5927;&#x955C;&#x50CF;&#x7AD9;    https://docker.mirrors.ustc.edu.cn        Docker Hub&#x3001;GCR&#x3001;Quay
&#x963F;&#x91CC;&#x4E91;    https://&lt;your_code&gt;.mirror.aliyuncs.com    &#x9700;&#x767B;&#x5F55;&#xFF0C;&#x7CFB;&#x7EDF;&#x5206;&#x914D;    Docker Hub
&#x4E03;&#x725B;&#x4E91;    https://reg-mirror.qiniu.com        Docker Hub&#x3001;GCR&#x3001;Quay
&#x7F51;&#x6613;&#x4E91;    https://hub-mirror.c.163.com        Docker Hub
&#x817E;&#x8BAF;&#x4E91;    https://mirror.ccs.tencentyun.com        Docker Hub
</code></pre>
<h1 id="docker-ubuntu-for-golang"><a name="docker-ubuntu-for-golang" class="anchor-navigation-ex-anchor" href="#docker-ubuntu-for-golang"><i class="fa fa-link" aria-hidden="true"></i></a>10. docker ubuntu for golang</h1>
<p>godev </p>
<pre><code class="lang-sh">docker run --rm -itd --privileged -h yubuntu --name yubuntu -v /repo/yingjieb:/repo/$(whoami) -w /repo/$(whoami) yingjieb/godev/ubuntu
docker attach yubuntu
docker run --rm -itd -h yubuntu -v /repo/yingjieb:/repo/$(whoami) -w /repo/$(whoami) yingjieb/ubuntu-godev
docker run --privileged -itd -h yubuntu --name yubuntu -v /repo/yingjieb:/repo/$(whoami) -w /repo/$(whoami) yingjieb/ubuntu-godev
#&#x767B;&#x9646;docker&#x540E;
usermod -u 3030425 godev
groupmod -g 1155 godev
su godev
</code></pre>
<h1 id="gentoo-docker"><a name="gentoo-docker" class="anchor-navigation-ex-anchor" href="#gentoo-docker"><i class="fa fa-link" aria-hidden="true"></i></a>11. gentoo docker</h1>
<p>gentoo&#x7684;docker image&#x4E5F;&#x662F;&#x57FA;&#x4E8E;stage3&#x7684;&#x5305;, &#x4E0D;&#x540C;&#x7684;&#x662F;, &#x5B83;&#x4FEE;&#x6539;&#x4E86;/etc/rc.conf</p>
<p>&#x8BE6;&#x89C1;
<a href="https://github.com/gentoo/gentoo-docker-images/blob/master/stage3.Dockerfile" target="_blank">https://github.com/gentoo/gentoo-docker-images/blob/master/stage3.Dockerfile</a></p>
<pre><code class="lang-sh"># This is the subsystem type.
# It is used to match against keywords set by the keyword call in the
# depend function of service scripts.
#
# It should be set to the value representing the environment this file is
# PRESENTLY in, not the virtualization the environment is capable of.
# If it is commented out, automatic detection will be used.
#
# The list below shows all possible settings as well as the host
# operating systems where they can be used and autodetected.
#
# &quot;&quot;               - nothing special
# &quot;docker&quot;         - Docker container manager (Linux)
# &quot;jail&quot;           - Jail (DragonflyBSD or FreeBSD)
# &quot;lxc&quot;            - Linux Containers
# &quot;openvz&quot;         - Linux OpenVZ
# &quot;prefix&quot;         - Prefix
# &quot;rkt&quot;            - CoreOS container management system (Linux)
# &quot;subhurd&quot;        - Hurd subhurds (to be checked)
# &quot;systemd-nspawn&quot; - Container created by systemd-nspawn (Linux)
# &quot;uml&quot;            - Usermode Linux
# &quot;vserver&quot;        - Linux vserver
# &quot;xen0&quot;           - Xen0 Domain (Linux and NetBSD)
# &quot;xenU&quot;           - XenU Domain (Linux and NetBSD)
rc_sys=&quot;docker&quot;
</code></pre>
<h1 id="&#x6E05;&#x7406;&#x7A7A;&#x95F4;"><a name="&#x6E05;&#x7406;&#x7A7A;&#x95F4;" class="anchor-navigation-ex-anchor" href="#&#x6E05;&#x7406;&#x7A7A;&#x95F4;"><i class="fa fa-link" aria-hidden="true"></i></a>12. &#x6E05;&#x7406;&#x7A7A;&#x95F4;</h1>
<pre><code class="lang-sh">sudo systemctl stop docker
#&#x5220;&#x9664;&#x524D;&#x5148;&#x5907;&#x4EFD;
rm -rf /var/lib/docker
</code></pre>
<h1 id="docker&#x4FDD;&#x5B58;&#x955C;&#x50CF;"><a name="docker&#x4FDD;&#x5B58;&#x955C;&#x50CF;" class="anchor-navigation-ex-anchor" href="#docker&#x4FDD;&#x5B58;&#x955C;&#x50CF;"><i class="fa fa-link" aria-hidden="true"></i></a>13. docker&#x4FDD;&#x5B58;&#x955C;&#x50CF;</h1>
<ul>
<li><p>&#x5BF9;image</p>
<pre><code class="lang-sh">docker save 66389e4e65c5 -o centos-aarch64:7.4.tar
docker load -i arm64-gentoo.1.0.tar
docker tag f43a088c78f5 arm64-gentoo:1.0
</code></pre>
</li>
<li><p>&#x5BF9;container</p>
<pre><code class="lang-sh">docker export 239fc2b54d18 -o arm64-gentoo.2.0.tar
docker import -c &apos;CMD [&quot;/bin/bash&quot;]&apos; arm64-gentoo.1.2.0.tar
</code></pre>
</li>
<li><p>&#x4E8C;&#x8005;&#x533A;&#x522B;&#x662F;export&#x53EA;&#x5BFC;&#x51FA;rootfs, &#x4E22;&#x5931;&#x5143;&#x6570;&#x636E;&#x5C42;</p>
</li>
</ul>
<h1 id="history"><a name="history" class="anchor-navigation-ex-anchor" href="#history"><i class="fa fa-link" aria-hidden="true"></i></a>14. history</h1>
<pre><code class="lang-sh"># &#x6267;&#x884C;docker instance&#x91CC;&#x9762;&#x7684;&#x4E00;&#x4E2A;&#x547D;&#x4EE4;
sudo docker exec 080443f42a7d ip -s addr
docker pull docker-registry.qualcomm.com/yingjieb/centos-aarch64:7.4
docker login -u=&quot;yingjieb&quot; -p=&quot;ReU6z0UtlODAt210c9fn+gSMhszgMT/9Bkr4D6fMAsayPz6wmEKB0tFNN7xaIX2N&quot; docker-registry.qualcomm.com
docker commit bbacde9f6753 docker-registry.qualcomm.com/yingjieb/centos-aarch64:7.4
docker push docker-registry.qualcomm.com/yingjieb/centos-aarch64:7.4
docker run --privileged -ti -u qdt -h dcent docker-registry.qualcomm.com/yingjieb/centos-aarch64:7.4
docker run --privileged -it -u qdt -h dcent --name=ceph-mon1 docker-registry.qualcomm.com/yingjieb/centos-aarch64:7.4
docker run --privileged -dt -u qdt -h dcent --name=ceph-mon2 docker-registry.qualcomm.com/yingjieb/centos-aarch64:7.4
# &#x4E0A;&#x9762;&#x4E24;&#x4E2A;&#x547D;&#x4EE4;&#x53EA;&#x6709;-it&#x548C;-dt&#x4E0D;&#x4E00;&#x6837;, -t&#x662F;&#x8BF4;&#x8981;&#x521B;&#x5EFA;&#x4E2A;tty, &#x800C;i&#x662F;&#x8981;&#x8FDB;&#x5165;&#x4EA4;&#x4E92;&#x6A21;&#x5F0F;, d&#x662F;detach&#x6A21;&#x5F0F;(&#x540E;&#x53F0;&#x8FD0;&#x884C;); &#x9700;&#x8981;&#x6CE8;&#x610F;&#x7740;&#x90FD;&#x548C;command&#x6709;&#x5173;, &#x8FD9;&#x4E2A;image&#x9ED8;&#x8BA4;&#x7684;command&#x662F;/bin/bash, &#x662F;&#x4E0D;&#x9000;&#x51FA;&#x7684;(&#x4E0D;&#x52A0;&#x9009;&#x9879;t&#x4F1A;&#x9000;&#x51FA;, &#x56E0;&#x4E3A;bash&#x5FC5;&#x987B;&#x8FD0;&#x884C;&#x5728;tty&#x73AF;&#x5883;&#x4E0B;?), &#x6240;&#x4EE5;it&#x8FD8;&#x662F;dt&#x90FD;&#x4F1A;&#x4E00;&#x76F4;&#x8FD0;&#x884C;;
# &#x8FD9;&#x91CC;itd&#x53EF;&#x4EE5;&#x4E00;&#x8D77;&#x4F7F;&#x7528;, &#x8FD9;&#x6837;&#x65E2;&#x80FD;&#x5728;&#x540E;&#x53F0;&#x7EE7;&#x7EED;&#x8FD0;&#x884C;, &#x53C8;&#x4FDD;&#x7559;&#x7684;shell&#x4EA4;&#x4E92;&#x5165;&#x53E3;
docker run --privileged -itd -u qdt -h dcent --name=ceph-mon3 docker-registry.qualcomm.com/yingjieb/centos-aarch64:7.4
docker run -itd --privileged -u qdt -h dgentoo --name=dgentoo arm64-gentoo:2.0
docker attach ceph-mon3; &#x53EF;&#x4EE5;&#x8FDB;&#x5165;shell, &#x9000;&#x51FA;&#x65F6;ctrl+p ctrl+q
docker start -ai ceph-mon1 &#x542F;&#x52A8;&#x4E00;&#x4E2A;&#x521B;&#x5EFA;&#x597D;&#x7684;&#x5B9E;&#x4F8B;, attach&#x5E76;&#x8FDB;&#x5165;&#x4EA4;&#x4E92;&#x6A21;&#x5F0F;
docker cp linux-4.14.tar.xz agitated_wright:/root
</code></pre>
<h1 id="&#x8FDB;&#x5165;shell"><a name="&#x8FDB;&#x5165;shell" class="anchor-navigation-ex-anchor" href="#&#x8FDB;&#x5165;shell"><i class="fa fa-link" aria-hidden="true"></i></a>15. &#x8FDB;&#x5165;shell</h1>
<pre><code class="lang-sh">docker exec -it ceph-mon2 /bin/bash
</code></pre>
<h1 id="&#x83B7;&#x53D6;&#x6BCF;&#x4E2A;container&#x7684;ip"><a name="&#x83B7;&#x53D6;&#x6BCF;&#x4E2A;container&#x7684;ip" class="anchor-navigation-ex-anchor" href="#&#x83B7;&#x53D6;&#x6BCF;&#x4E2A;container&#x7684;ip"><i class="fa fa-link" aria-hidden="true"></i></a>16. &#x83B7;&#x53D6;&#x6BCF;&#x4E2A;container&#x7684;ip</h1>
<pre><code class="lang-sh">docker inspect -f &apos;{ {.Name} } - { {.NetworkSettings.IPAddress} }&apos; $(docker ps -aq)
</code></pre>
<h1 id="docker-run"><a name="docker-run" class="anchor-navigation-ex-anchor" href="#docker-run"><i class="fa fa-link" aria-hidden="true"></i></a>17. docker run</h1>
<p>docker run&#x6709;&#x9650;&#x5236;&#x8D44;&#x6E90;&#x4F7F;&#x7528;&#x7684;N&#x591A;&#x9009;&#x9879;
&#x6BD4;&#x8F83;&#x6709;&#x7528;&#x7684;&#x9009;&#x9879;</p>
<pre><code class="lang-sh">--cpuset-cpus=&quot;&quot;
          CPUs in which to allow execution (0-3, 0,1)
--cpuset-mems=&quot;&quot;
          Memory nodes (MEMs) in which to allow execution (0-3, 0,1). Only effective on NUMA systems.
--device=[]
          Add a host device to the container (e.g. --device=/dev/sdc:/dev/xvdc:rwm)
-h, --hostname=&quot;&quot;
          Container host name
--expose=[]
          Expose a port, or a range of ports (e.g. --expose=3300-3310) informs Docker that the container listens on the  specified  network  ports  at
       runtime. Docker uses this information to interconnect containers using links and to set up port redirection on the host system.
-e, --env=[]
          Set environment variables
       This  option  allows you to specify arbitrary environment variables that are available for the process that will be launched inside of the con&#x2010;
       tainer.
--entrypoint=&quot;&quot;
          Overwrite the default ENTRYPOINT of the image
--ip=&quot;&quot;
          Sets the container&apos;s interface IPv4 address (e.g. 172.23.0.9)
       It can only be used in conjunction with --net for user-defined networks
-m, --memory=&quot;&quot;
          Memory limit (format: &lt;number&gt;[&lt;unit&gt;], where unit = b, k, m or g)
--name=&quot;&quot;
          Assign a name to the container
--net=&quot;bridge&quot;
          Set the Network mode for the container
                                      &apos;bridge&apos;: create a network stack on the default Docker bridge
                                      &apos;none&apos;: no networking
                                      &apos;container:&lt;name|id&gt;&apos;: reuse another container&apos;s network stack
                                      &apos;host&apos;:  use  the Docker host network stack. Note: the host mode gives the container full access to local system
       services such as D-bus and is therefore considered insecure.
                                      &apos;&lt;network-name&gt;|&lt;network-id&gt;&apos;: connect to a user-defined network
-p, --publish=[]
          Publish a container&apos;s port, or range of ports, to the host.
       Format: ip:hostPort:containerPort | ip::containerPort | hostPort:containerPort | containerPort Both hostPort and containerPort can be specified
       as a range of ports.  When specifying ranges for both, the number of container ports in the range must match the number of host  ports  in  the
       range.   (e.g.,  docker run -p 1234-1236:1222-1224 --name thisWorks -t busybox but not docker run -p 1230-1236:1230-1240 --name RangeContainer&#x2010;
       PortsBiggerThanRangeHostPorts -t busybox) With ip: docker run -p 127.0.0.1:$HOSTPORT:$CONTAINERPORT --name CONTAINER -t  someimage  Use  docker
       port to see the actual mapping: docker port CONTAINER $CONTAINERPORT
--privileged=true|false
          Give extended privileges to this container. The default is false.
       By default, Docker containers are &#x201C;unprivileged&#x201D; (=false) and cannot, for example, run a Docker daemon inside the  Docker  container.  This  is
       because by default a container is not allowed to access any devices. A &#x201C;privileged&#x201D; container is given access to all devices.
       When  the  operator executes docker run --privileged, Docker will enable access to all devices on the host as well as set some configuration in
       AppArmor to allow the container nearly all the same access to the host as processes running outside of a container on the host.
-u, --user=&quot;&quot;
          Sets the username or UID used and optionally the groupname or GID for the specified command.
       The followings examples are all valid:
          --user [user | user:group | uid | uid:gid | user:gid | uid:group ]
       Without this argument the command will be run as root in the container.
-v|--volume[=[[HOST-DIR:]CONTAINER-DIR[:OPTIONS]]]
          Create a bind mount. If you specify, -v /HOST-DIR:/CONTAINER-DIR, Docker
          bind mounts /HOST-DIR in the host to /CONTAINER-DIR in the Docker
          container. If &apos;HOST-DIR&apos; is omitted,  Docker automatically creates the new
          volume on the host.  The OPTIONS are a comma delimited list and can be:
       0
              item [rw|ro] item [z|Z] item [[r]shared|[r]slave|[r]private] item [nocopy]
-w, --workdir=&quot;&quot;
          Working directory inside the container
       The default working directory for running binaries within a container is the root directory (/). The developer can set a different default with
       the Dockerfile WORKDIR instruction. The operator can override the working directory by using the -w option.
Mapping Ports for External Usage
       The  exposed port of an application can be mapped to a host port using the -p flag. For example, a httpd port 80 can be mapped to the host port
       8080 using the following:
              # docker run -p 8080:80 -d -i -t fedora/httpd
Creating and Mounting a Data Volume Container
       Many applications require the sharing of persistent data across several containers. Docker allows you to create a Data  Volume  Container  that
       other  containers can mount from. For example, create a named container that contains directories /var/volume1 and /tmp/volume2. The image will
       need to contain these directories so a couple of RUN mkdir instructions might be required for you fedora-data image:
              # docker run --name=data -v /var/volume1 -v /tmp/volume2 -i -t fedora-data true
              # docker run --volumes-from=data --name=fedora-container1 -i -t fedora bash
       Multiple --volumes-from parameters will bring together multiple data volumes from multiple containers. And it&apos;s possible to mount  the  volumes
       that  came  from  the DATA container in yet another container via the fedora-container1 intermediary container, allowing to abstract the actual
       data source from users of that data:
              # docker run --volumes-from=fedora-container1 --name=fedora-container2 -i -t fedora bash
Mounting External Volumes
       To mount a host directory as a container volume, specify the absolute path to the directory and the absolute path for the  container  directory
       separated by a colon:
              # docker run -v /var/db:/data1 -i -t fedora bash
</code></pre>
<h1 id="docker-commit"><a name="docker-commit" class="anchor-navigation-ex-anchor" href="#docker-commit"><i class="fa fa-link" aria-hidden="true"></i></a>18. docker commit</h1>
<p><a href="https://docs.docker.com/engine/reference/commandline/commit/" target="_blank">https://docs.docker.com/engine/reference/commandline/commit/</a></p>
<p>&#x53EF;&#x4EE5;&#x7528;container&#x751F;&#x6210;&#x4E00;&#x4E2A;image<br>&#x4E3E;&#x4F8B;:
&#x666E;&#x901A;&#x7684;commit, &#x540D;&#x5B57;&#x968F;&#x4FBF;&#x8D77;?</p>
<pre><code class="lang-sh">$ docker ps
CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS              NAMES
c3f279d17e0a        ubuntu:12.04        /bin/bash           7 days ago          Up 25 hours                            desperate_dubinsky
197387f1b436        ubuntu:12.04        /bin/bash           7 days ago          Up 25 hours                            focused_hamilton
$ docker commit c3f279d17e0a  svendowideit/testimage:version3
f5283438590d
$ docker images
REPOSITORY                        TAG                 ID                  CREATED             SIZE
svendowideit/testimage            version3            f5283438590d        16 seconds ago      335.7 MB
</code></pre>
<p>commit&#x7684;&#x65F6;&#x5019;&#x8FD8;&#x80FD;&#x987A;&#x4FBF;&#x66F4;&#x6539;&#x914D;&#x7F6E;</p>
<pre><code class="lang-sh">$ docker ps
CONTAINER ID       IMAGE               COMMAND             CREATED             STATUS              PORTS              NAMES
c3f279d17e0a        ubuntu:12.04        /bin/bash           7 days ago          Up 25 hours                            desperate_dubinsky
197387f1b436        ubuntu:12.04        /bin/bash           7 days ago          Up 25 hours                            focused_hamilton
$ docker inspect -f &quot;{ { .Config.Env } }&quot; c3f279d17e0a
[HOME=/ PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin]
$ docker commit --change &quot;ENV DEBUG true&quot; c3f279d17e0a  svendowideit/testimage:version3
f5283438590d
$ docker inspect -f &quot;{ { .Config.Env } }&quot; f5283438590d
[HOME=/ PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin DEBUG=true]
</code></pre>
<p>&#x66F4;&#x6539;CMD&#x548C;EXPOSE</p>
<pre><code class="lang-sh">$ docker ps
CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS              NAMES
c3f279d17e0a        ubuntu:12.04        /bin/bash           7 days ago          Up 25 hours                            desperate_dubinsky
197387f1b436        ubuntu:12.04        /bin/bash           7 days ago          Up 25 hours                            focused_hamilton
$ docker commit --change=&apos;CMD [&quot;apachectl&quot;, &quot;-DFOREGROUND&quot;]&apos; -c &quot;EXPOSE 80&quot; c3f279d17e0a  svendowideit/testimage:version4
f5283438590d
$ docker run -d svendowideit/testimage:version4
89373736e2e7f00bc149bd783073ac43d0507da250e999f3f1036e0db60817c0
$ docker ps
CONTAINER ID        IMAGE               COMMAND                 CREATED             STATUS              PORTS              NAMES
89373736e2e7        testimage:version4  &quot;apachectl -DFOREGROU&quot;  3 seconds ago       Up 2 seconds        80/tcp             distracted_fermat
c3f279d17e0a        ubuntu:12.04        /bin/bash               7 days ago          Up 25 hours                            desperate_dubinsky
197387f1b436        ubuntu:12.04        /bin/bash               7 days ago          Up 25 hours                            focused_hamilton
</code></pre>
<h1 id="&#x5BB9;&#x6613;&#x6DF7;&#x6DC6;&#x7684;&#x6982;&#x5FF5;&#x5165;&#x95E8;&#x8BB2;&#x89E3;"><a name="&#x5BB9;&#x6613;&#x6DF7;&#x6DC6;&#x7684;&#x6982;&#x5FF5;&#x5165;&#x95E8;&#x8BB2;&#x89E3;" class="anchor-navigation-ex-anchor" href="#&#x5BB9;&#x6613;&#x6DF7;&#x6DC6;&#x7684;&#x6982;&#x5FF5;&#x5165;&#x95E8;&#x8BB2;&#x89E3;"><i class="fa fa-link" aria-hidden="true"></i></a>19. &#x5BB9;&#x6613;&#x6DF7;&#x6DC6;&#x7684;&#x6982;&#x5FF5;&#x5165;&#x95E8;&#x8BB2;&#x89E3;</h1>
<p><a href="http://blog.thoward37.me/articles/where-are-docker-images-stored/" target="_blank">http://blog.thoward37.me/articles/where-are-docker-images-stored/</a></p>
<h1 id="docker-tag&#x53EF;&#x4EE5;push&#x5230;&#x79C1;&#x6709;&#x5E93;"><a name="docker-tag&#x53EF;&#x4EE5;push&#x5230;&#x79C1;&#x6709;&#x5E93;" class="anchor-navigation-ex-anchor" href="#docker-tag&#x53EF;&#x4EE5;push&#x5230;&#x79C1;&#x6709;&#x5E93;"><i class="fa fa-link" aria-hidden="true"></i></a>20. docker tag&#x53EF;&#x4EE5;push&#x5230;&#x79C1;&#x6709;&#x5E93;?</h1>
<p>Tagging an image for a private repository
To push an image to a private registry and not the central Docker registry you must tag it with the registry hostname and port (if needed).</p>
<pre><code class="lang-sh">docker tag 0e5574283393 myregistryhost:5000/fedora/httpd:version1.0
</code></pre>
<h1 id="&#x5728;docker&#x91CC;&#x9762;&#x8D77;systemd"><a name="&#x5728;docker&#x91CC;&#x9762;&#x8D77;systemd" class="anchor-navigation-ex-anchor" href="#&#x5728;docker&#x91CC;&#x9762;&#x8D77;systemd"><i class="fa fa-link" aria-hidden="true"></i></a>21. &#x5728;docker&#x91CC;&#x9762;&#x8D77;systemd?</h1>
<blockquote>
<p>A package with the systemd initialization system is included in the official Red Hat Enterprise Linux base images. This means that applications created to be managed with systemd can be started and managed inside a container. A container running systemd will:
NOTE
Previously, a modified version of the systemd initialization system called systemd-container was included in the Red Hat Enterprise Linux versions 7.2 base images. Now, the systemd package is the same across systems.
Start the /sbin/init process (the systemd service) to run as PID 1 within the container.
Start all systemd services that are installed and enabled within the container, in order of dependencies.
Allow systemd to restart services or kill zombie processes for services started within the container.
The general steps for building a container that is ready to be used as a systemd services is:
Install the package containing the systemd-enabled service inside the container. This can include dozens of services that come with RHEL, such as Apache Web Server (httpd), FTP server (vsftpd), Proxy server (squid), and many others. For this example, we simply install an Apache (httpd) Web server.
Use the systemctl command to enable the service inside the container.
Add data for the service to use in the container (in this example, we add a Web server test page). For a real deployment, you would probably connect to outside storage.
Expose any ports needed to access the service.
Set /sbin/init as the default process to start when the container runs
In this example, we build a container by creating a Dockerfile that installs and configures a Web server (httpd) to start automatically by the systemd service (/sbin/init) when the container is run on a host system.
1 Create Dockerfile: In a separate directory, create a file named Dockerfile with the following contents:</p>
</blockquote>
<pre><code class="lang-sh">FROM rhel7
RUN yum -y install httpd; yum clean all; systemctl enable httpd;
RUN echo &quot;Successful Web Server Test&quot; &gt; /var/www/html/index.html
RUN mkdir /etc/systemd/system/httpd.service.d/; echo -e &apos;[Service]\nRestart=always&apos; &gt; /etc/systemd/system/httpd.service.d/httpd.conf
EXPOSE 80
CMD [ &quot;/sbin/init&quot; ]
</code></pre>
<blockquote>
<p>The Dockerfile installs the httpd package, enables the httpd service to start at boot time (i.e. when the container starts), creates a test file (index.html), exposes the Web server to the host (port 80), and starts the systemd init service (/sbin/init) when the container starts.
2 Build the container: From the directory containing the Dockerfile, type the following:
<code># docker build -t mysysd .</code>
3 Run the container: Once the container is built and named mysysd, type the following to run the container:
<code># docker run -d --name=mysysd_run -p 80:80 mysysd</code>
From this command, the mysysd image runs as the mysysd_run container as a daemon process, with port 80 from the container exposed to port 80 on the host system.
4 Check that the container is running: To make sure that the container is running and that the service is working, type the following commands:</p>
<pre><code class="lang-sh"># docker ps | grep mysysd_run
de7bb15fc4d1   mysysd   &quot;/sbin/init&quot;   3 minutes ago   Up 2 minutes   0.0.0.0:80-&gt;80/tcp   mysysd_run
# curl localhost/index.html
Successful Web Server Test
</code></pre>
<p>At this point, you have a container that starts up a Web server as a systemd service inside the container. Install and run any services you like in this same way by modifying the Dockerfile and configuring data and opening ports as appropriate.</p>
</blockquote>
<h1 id="dockerfile-entrypoint-vs-cmd"><a name="dockerfile-entrypoint-vs-cmd" class="anchor-navigation-ex-anchor" href="#dockerfile-entrypoint-vs-cmd"><i class="fa fa-link" aria-hidden="true"></i></a>22. Dockerfile: ENTRYPOINT vs CMD</h1>
<p><a href="https://www.ctl.io/developers/blog/post/dockerfile-entrypoint-vs-cmd/" target="_blank">https://www.ctl.io/developers/blog/post/dockerfile-entrypoint-vs-cmd/</a></p>
<p>&#x7B80;&#x5355;&#x6765;&#x8BF4;, CMD&#x548C;ENTRYPOINT&#x90FD;&#x53EF;&#x4EE5;&#x6307;&#x5B9A;&#x8FDB;docker&#x4EE5;&#x540E;, &#x9ED8;&#x8BA4;&#x7684;&#x6267;&#x884C;&#x7A0B;&#x5E8F;, &#x4E24;&#x8005;&#x90FD;&#x53EF;&#x4EE5;&#x88AB;&#x91CD;&#x8F7D;, &#x91CD;&#x8F7D;CMD&#x66F4;&#x5BB9;&#x6613;. &#x91CD;&#x8F7D;ENTRYPOINT&#x9700;&#x8981;&#x52A0;&#x989D;&#x5916;&#x53C2;&#x6570;</p>
<h1 id="repository&#x548C;registry"><a name="repository&#x548C;registry" class="anchor-navigation-ex-anchor" href="#repository&#x548C;registry"><i class="fa fa-link" aria-hidden="true"></i></a>23. Repository&#x548C;Registry</h1>
<ul>
<li>Repository&#xFF1A;&#x672C;&#x8EAB;&#x662F;&#x4E00;&#x4E2A;&#x4ED3;&#x5E93;&#xFF0C;&#x8FD9;&#x4E2A;&#x4ED3;&#x5E93;&#x91CC;&#x9762;&#x53EF;&#x4EE5;&#x653E;&#x5177;&#x4F53;&#x7684;&#x955C;&#x50CF;&#xFF0C;&#x662F;&#x6307;&#x5177;&#x4F53;&#x7684;&#x67D0;&#x4E2A;&#x955C;&#x50CF;&#x7684;&#x4ED3;&#x5E93;&#xFF0C;&#x6BD4;&#x5982;Tomcat&#x4E0B;&#x9762;&#x6709;&#x5F88;&#x591A;&#x4E2A;&#x7248;&#x672C;&#x7684;&#x955C;&#x50CF;&#xFF0C;&#x5B83;&#x4EEC;&#x5171;&#x540C;&#x7EC4;&#x6210;&#x4E86;Tomcat&#x7684;Repository&#x3002;</li>
<li>Registry&#xFF1A;&#x955C;&#x50CF;&#x7684;&#x4ED3;&#x5E93;&#xFF0C;&#x6BD4;&#x5982;&#x5B98;&#x65B9;&#x7684;&#x662F;Docker Hub&#xFF0C;&#x5B83;&#x662F;&#x5F00;&#x6E90;&#x7684;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x81EA;&#x5DF1;&#x90E8;&#x7F72;&#x4E00;&#x4E2A;&#xFF0C;Registry&#x4E0A;&#x6709;&#x5F88;&#x591A;&#x7684;Repository&#xFF0C;Redis&#x3001;Tomcat&#x3001;MySQL&#x7B49;&#x7B49;Repository&#x7EC4;&#x6210;&#x4E86;Registry&#x3002;</li>
</ul>
<h1 id="&#x7528;&#x65B0;&#x7684;command&#x542F;&#x52A8;&#x4E00;&#x4E2A;container"><a name="&#x7528;&#x65B0;&#x7684;command&#x542F;&#x52A8;&#x4E00;&#x4E2A;container" class="anchor-navigation-ex-anchor" href="#&#x7528;&#x65B0;&#x7684;command&#x542F;&#x52A8;&#x4E00;&#x4E2A;container"><i class="fa fa-link" aria-hidden="true"></i></a>24. &#x7528;&#x65B0;&#x7684;command&#x542F;&#x52A8;&#x4E00;&#x4E2A;container</h1>
<p>Find your stopped container id
<code>docker ps -a</code></p>
<p>Commit the stopped container:
This command saves modified container state into a new image user/test_image
<code>docker commit $CONTAINER_ID user/test_image</code></p>
<p>Start/run with a different entry point:
<code>docker run -ti --entrypoint=sh user/test_image</code></p>
<h1 id="image&#x548C;container&#x7684;&#x533A;&#x522B;"><a name="image&#x548C;container&#x7684;&#x533A;&#x522B;" class="anchor-navigation-ex-anchor" href="#image&#x548C;container&#x7684;&#x533A;&#x522B;"><i class="fa fa-link" aria-hidden="true"></i></a>25. image&#x548C;container&#x7684;&#x533A;&#x522B;?</h1>
<p>container&#x662F;image&#x7684;&#x4E00;&#x4E2A;&#x5B9E;&#x4F8B;</p>
<h2 id="whats-an-image"><a name="whats-an-image" class="anchor-navigation-ex-anchor" href="#whats-an-image"><i class="fa fa-link" aria-hidden="true"></i></a>25.1. What&apos;s an Image?</h2>
<p>An image is an inert, immutable, file that&apos;s essentially a snapshot of a container. Images are created with the build command, and they&apos;ll produce a container when started with run. Images are stored in a Docker registry such as registry.hub.docker.com. Because they can become quite large, images are designed to be composed of layers of other images, allowing a miminal amount of data to be sent when transferring images over the network.
Local images can be listed by running docker images:</p>
<pre><code>REPOSITORY                TAG                 IMAGE ID            CREATED             VIRTUAL SIZE
ubuntu                    13.10               5e019ab7bf6d        2 months ago        180 MB
ubuntu                    14.04               99ec81b80c55        2 months ago        266 MB
ubuntu                    latest              99ec81b80c55        2 months ago        266 MB
ubuntu                    trusty              99ec81b80c55        2 months ago        266 MB
&lt;none&gt;                    &lt;none&gt;              4ab0d9120985        3 months ago        486.5 MB
</code></pre><p>Some things to note:</p>
<ul>
<li>IMAGE ID is the first 12 characters of the true identifier for an image. You can create many tags of a given image, but their IDs will all be the same (as above).</li>
<li>VIRTUAL SIZE is virtual because its adding up the sizes of all the distinct underlying layers. This means that the sum of all the values in that column is probably much larger than the disk space used by all of those images.</li>
<li>The value in the REPOSITORY column comes from the -t flag of the docker build command, or from docker tag-ing an existing image. You&apos;re free to tag images using a nomenclature that makes sense to you, but know that docker will use the tag as the registry location in a docker push or docker pull.</li>
<li>The full form of a tag is [REGISTRYHOST/][USERNAME/]NAME[:TAG]. For ubuntu above, REGISTRYHOST is inferred to be registry.hub.docker.com. So if you plan on storing your image called my-application in a registry at docker.example.com, you should tag that image docker.example.com/my-application.</li>
<li>The TAG column is just the [:TAG] part of the full tag. This is unfortunate terminology.</li>
<li>The latest tag is not magical, it&apos;s simply the default tag when you don&apos;t specify a tag.</li>
<li>You can have untagged images only identifiable by their IMAGE IDs. These will get the <none> TAG and REPOSITORY. It&apos;s easy to forget about them.
More info on images is available from the Docker docs and glossary.
What&apos;s a container?
To use a programming metaphor, if an image is a class, then a container is an instance of a class&#x2014;a runtime object. Containers are hopefully why you&apos;re using Docker; they&apos;re lightweight and portable encapsulations of an environment in which to run applications.
View local running containers with docker ps:<pre><code>CONTAINER ID        IMAGE                               COMMAND                CREATED             STATUS              PORTS                    NAMES
f2ff1af05450        samalba/docker-registry:latest      /bin/sh -c &apos;exec doc   4 months ago        Up 12 weeks         0.0.0.0:5000-&gt;5000/tcp   docker-registry
</code></pre>Here I&apos;m running a dockerized version of the docker registry, so that I have a private place to store my images. Again, some things to note:
Like IMAGE ID, CONTAINER ID is the true identifier for the container. It has the same form, but it identifies a different kind of object.
docker ps only outputs running containers. You can view all containers (running or stopped) with docker ps -a.
NAMES can be used to identify a started container via the --name flag.</none></li>
</ul>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="gitlab_ci.html" class="navigation navigation-prev " aria-label="Previous page: gitlab CI">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="centos_操作记录.html" class="navigation navigation-next " aria-label="Next page: centos操作记录">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"docker操作记录","level":"1.6.6","depth":2,"next":{"title":"centos操作记录","level":"1.6.7","depth":2,"path":"notes/centos_操作记录.md","ref":"notes/centos_操作记录.md","articles":[]},"previous":{"title":"gitlab CI","level":"1.6.5","depth":2,"path":"notes/gitlab_ci.md","ref":"notes/gitlab_ci.md","articles":[]},"dir":"ltr"},"config":{"plugins":["-sharing","-lunr","-search","search-plus","-highlight","theme-code","expandable-chapters-small","github","disqus","splitter","wide-page","hide-navigation-buttons","anchor-navigation-ex","sequence"],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"disqus":{"useIdentifier":false,"shortName":"bai-yingjie-notes"},"sequence":{"theme":"simple"},"github":{"url":"https://github.com/Bai-Yingjie/Bai-Yingjie.github.io"},"splitter":{},"wide-page":{},"theme-code":{"showLevel":false,"styles":{"ebook":"styles/ebook.css","epub":"styles/epub.css","mobi":"styles/mobi.css","pdf":"styles/pdf.css","print":"styles/print.css","website":"styles/website.css"}},"fontsettings":{"theme":"white","family":"sans","size":2},"hide-navigation-buttons":{},"anchor-navigation-ex":{"mode":"float","pageTop":{"level1Icon":"","level2Icon":"","level3Icon":"","showLevelIcon":false},"isRewritePageTitle":true,"showLevel":true,"tocLevel1Icon":"fa fa-hand-o-right","tocLevel2Icon":"fa fa-hand-o-right","tocLevel3Icon":"fa fa-hand-o-right","showGoTop":true,"isShowTocTitleIcon":true,"printLog":false,"multipleH1":true,"associatedWithSummary":true,"float":{"floatIcon":"fa fa-navicon","level1Icon":"","level2Icon":"","level3Icon":"","showLevelIcon":false}},"expandable-chapters-small":{},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false},"search-plus":{}},"theme":"default","author":"Bai Yingjie","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"My Notes","language":"zh-hans","gitbook":"*"},"file":{"path":"notes/docker_操作记录.md","mtime":"2022-10-11T15:10:42.530Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2022-10-11T15:11:40.551Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>


        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-search-plus/jquery.mark.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search-plus/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-expandable-chapters-small/expandable-chapters-small.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-github/plugin.js"></script>
        
    
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/URI.js/1.16.1/URI.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-disqus/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-splitter/splitter.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

        
    </body>
</html>


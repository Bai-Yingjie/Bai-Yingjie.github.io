
<!DOCTYPE HTML>
<html lang="zh-hans" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>networking杂记2 · My Notes</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        <meta name="author" content="Bai Yingjie">
        
        
    
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search-plus/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-prism/prism.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-code/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-chapter-fold/chapter-fold.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-splitter/splitter.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-wide-page/wide.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-hide-navigation-buttons/index.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-anchor-navigation-ex/style/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-mermaid-gb3/mermaid/mermaid.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-theme-comscore/test.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    


    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="networking_杂记1.html" />
    
    
    <link rel="prev" href="as_title_networking.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="输入并搜索" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    简介
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="as_title_kaiyuan.html">
            
                <a href="as_title_kaiyuan.html">
            
                    
                    开源
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="my_opensource.html">
            
                <a href="my_opensource.html">
            
                    
                    我的开源项目
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="my_upstream.html">
            
                <a href="my_upstream.html">
            
                    
                    我的upstream commit
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="as_title_system.html">
            
                <a href="as_title_system.html">
            
                    
                    系统分析和性能
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="as_title_perf_misc.html">
            
                <a href="as_title_perf_misc.html">
            
                    
                    调试和分析记录系列
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1.1" data-path="profiling_调试和分析记录5.html">
            
                <a href="profiling_调试和分析记录5.html">
            
                    
                    调试和分析记录5
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.2" data-path="profiling_调试和分析记录4.html">
            
                <a href="profiling_调试和分析记录4.html">
            
                    
                    调试和分析记录4
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.3" data-path="profiling_调试和分析记录3.html">
            
                <a href="profiling_调试和分析记录3.html">
            
                    
                    调试和分析记录3
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.4" data-path="profiling_调试和分析记录2.html">
            
                <a href="profiling_调试和分析记录2.html">
            
                    
                    调试和分析记录2
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.5" data-path="profiling_调试和分析记录1.html">
            
                <a href="profiling_调试和分析记录1.html">
            
                    
                    调试和分析记录1
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="调试和分析工具概览.html">
            
                <a href="调试和分析工具概览.html">
            
                    
                    profiling和debugging工具相关
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.2.1" data-path="profiling_Linux内核调试的方式以及工具集锦.html">
            
                <a href="profiling_Linux内核调试的方式以及工具集锦.html">
            
                    
                    Linux内核调试的方式以及工具集锦(网摘)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.2" data-path="profiling_user_space_Ptrace_Utrace_Uprobes.html">
            
                <a href="profiling_user_space_Ptrace_Utrace_Uprobes.html">
            
                    
                    Ptrace, Utrace, Uprobes: Lightweight, Dynamic Tracing of User Apps
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.3" data-path="debugging_gdb备忘录.html">
            
                <a href="debugging_gdb备忘录.html">
            
                    
                    gdb备忘录
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.4" data-path="profiling_perf命令备忘录.html">
            
                <a href="profiling_perf命令备忘录.html">
            
                    
                    perf命令备忘录
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.5" data-path="profiling_perf命令备忘录2.html">
            
                <a href="profiling_perf命令备忘录2.html">
            
                    
                    perf命令备忘录2
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.6" data-path="profiling_perf学习笔记之实战篇.html">
            
                <a href="profiling_perf学习笔记之实战篇.html">
            
                    
                    perf学习笔记之实战篇
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.7" data-path="profiling_perf学习笔记之入门篇.html">
            
                <a href="profiling_perf学习笔记之入门篇.html">
            
                    
                    perf学习笔记之入门篇
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.8" data-path="profiling_用kprobe和perf_记录函数参数.html">
            
                <a href="profiling_用kprobe和perf_记录函数参数.html">
            
                    
                    使用kprobe和perf结合记录函数参数
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.9" data-path="profiling_ftrace和trace-cmd记录.html">
            
                <a href="profiling_ftrace和trace-cmd记录.html">
            
                    
                    ftrace和trace-cmd记录
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.10" data-path="profiling_ftrace使用实例.html">
            
                <a href="profiling_ftrace使用实例.html">
            
                    
                    ftrace使用实例
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.11" data-path="profiling_systemtap实例.html">
            
                <a href="profiling_systemtap实例.html">
            
                    
                    systemtap实例
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.12" data-path="profiling_systemtap基础.html">
            
                <a href="profiling_systemtap基础.html">
            
                    
                    systemtap基础
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.13" data-path="profiling_perf-tools_example.html">
            
                <a href="profiling_perf-tools_example.html">
            
                    
                    perf-tools 系统tracing工具集
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.14" data-path="profiling_Comparing_SystemTap_and_bpftrace.html">
            
                <a href="profiling_Comparing_SystemTap_and_bpftrace.html">
            
                    
                    Comparing SystemTap and bpftrace(网摘)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.15" data-path="system_analysis_bcc和ebpf.html">
            
                <a href="system_analysis_bcc和ebpf.html">
            
                    
                    bcc和ebpf(starting)
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="as_title_os_perf.html">
            
                <a href="as_title_os_perf.html">
            
                    
                    profiling和debugging实例
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.3.1" data-path="profiling_调查ftrace显示调用栈全0问题.html">
            
                <a href="profiling_调查ftrace显示调用栈全0问题.html">
            
                    
                    调查ftrace显示调用栈全0问题
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3.2" data-path="profiling_eoe_filter写tap设备失败问题.html">
            
                <a href="profiling_eoe_filter写tap设备失败问题.html">
            
                    
                    eoe_filter写tap设备失败问题
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3.3" data-path="performance_ovs进程调查.html">
            
                <a href="performance_ovs进程调查.html">
            
                    
                    OVS进程调查
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3.4" data-path="performance_ping流程和函数调用解析.html">
            
                <a href="performance_ping流程和函数调用解析.html">
            
                    
                    ping流程和函数调用解析
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3.5" data-path="profiling_VM互相ping场景下的延迟分析.html">
            
                <a href="profiling_VM互相ping场景下的延迟分析.html">
            
                    
                    VM互相ping场景下的延迟分析
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3.6" data-path="debugging_ftrace_谁创建了bond0设备.html">
            
                <a href="debugging_ftrace_谁创建了bond0设备.html">
            
                    
                    谁创建了bond0设备: ftrace kprobe uprobe perf综合使用
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3.7" data-path="profiling_unixbench之filecopy分析.html">
            
                <a href="profiling_unixbench之filecopy分析.html">
            
                    
                    unixbench之file copy分析
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3.8" data-path="profiling_lmbench之lat_tcp分析.html">
            
                <a href="profiling_lmbench之lat_tcp分析.html">
            
                    
                    lmbench之lat_tcp分析
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.4" data-path="as_title_arch_perf.html">
            
                <a href="as_title_arch_perf.html">
            
                    
                    CPU ARCH相关
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.4.1" data-path="performance_CPU_microarchiteture_pmu.html">
            
                <a href="performance_CPU_microarchiteture_pmu.html">
            
                    
                    Top-down Microarchitecture Analysis Method(网摘)
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="as_title_cloud.html">
            
                <a href="as_title_cloud.html">
            
                    
                    Cloud和容器相关
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="cloud_杂记.html">
            
                <a href="cloud_杂记.html">
            
                    
                    云杂记
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="container_当代容器读书笔记.html">
            
                <a href="container_当代容器读书笔记.html">
            
                    
                    当代容器读书笔记
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="as_title_vdevice.html">
            
                <a href="as_title_vdevice.html">
            
                    
                    CPU和device虚拟化
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="as_title_gvisor.html">
            
                <a href="as_title_gvisor.html">
            
                    
                    gvisor
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1.1" data-path="golang_gvisor代码_KVM.html">
            
                <a href="golang_gvisor代码_KVM.html">
            
                    
                    gvisor KVM模式代码
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.1.2" data-path="golang_gvisor调试.html">
            
                <a href="golang_gvisor调试.html">
            
                    
                    gvisor调试
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.1.3" data-path="golang_gvisor_ptrace.html">
            
                <a href="golang_gvisor_ptrace.html">
            
                    
                    gvisor ptrace模式介绍(网摘)
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="rust_vmm_brief.html">
            
                <a href="rust_vmm_brief.html">
            
                    
                    rust VMM(virtual machine monitor)
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.2.1" data-path="rust_vmm_简介.html">
            
                <a href="rust_vmm_简介.html">
            
                    
                    rust-vmm简介
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2.2" data-path="rust_firecracker_代码.html">
            
                <a href="rust_firecracker_代码.html">
            
                    
                    firecracker代码
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2.3" data-path="rust_firecracker_使用.html">
            
                <a href="rust_firecracker_使用.html">
            
                    
                    firecracker使用
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2.4" data-path="rust_cloud-hypervisor_代码.html">
            
                <a href="rust_cloud-hypervisor_代码.html">
            
                    
                    cloud hypervisor代码
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2.5" data-path="rust_cloud-hypervisor_使用.html">
            
                <a href="rust_cloud-hypervisor_使用.html">
            
                    
                    cloud hypervisor使用
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2.6" data-path="rust_cloud-hypervisor_问题与解决.html">
            
                <a href="rust_cloud-hypervisor_问题与解决.html">
            
                    
                    cloud hypervisor问题与解决
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2.7" data-path="rust_virtiofsd_代码.html">
            
                <a href="rust_virtiofsd_代码.html">
            
                    
                    virtiofsd代码阅读
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2.8" data-path="rust_virtio_vhost_libs.html">
            
                <a href="rust_virtio_vhost_libs.html">
            
                    
                    vhost virtio相关的rust库
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5.3" data-path="virtualization_virtio规范阅读笔记.html">
            
                <a href="virtualization_virtio规范阅读笔记.html">
            
                    
                    virtio规范阅读笔记.md
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.4" data-path="qemu_ovs_虚拟化环境.html">
            
                <a href="qemu_ovs_虚拟化环境.html">
            
                    
                    qemu OVS 虚拟化环境准备
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.5" data-path="qemu使用.html">
            
                <a href="qemu使用.html">
            
                    
                    Qemu使用(old)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.6" data-path="qemu_binary_translation.html">
            
                <a href="qemu_binary_translation.html">
            
                    
                    QEMU 指令翻译
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="as_title_networking.html">
            
                <a href="as_title_networking.html">
            
                    
                    计算机网络相关
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter active" data-level="1.6.1" data-path="networking_杂记2.html">
            
                <a href="networking_杂记2.html">
            
                    
                    networking杂记2
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="networking_杂记1.html">
            
                <a href="networking_杂记1.html">
            
                    
                    networking杂记1
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3" data-path="networking_优化linux网络栈_接收路径.html">
            
                <a href="networking_优化linux网络栈_接收路径.html">
            
                    
                    优化linux网络栈: 接收路径(网摘)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.4" data-path="networking_优化linux网络栈_发送路径.html">
            
                <a href="networking_优化linux网络栈_发送路径.html">
            
                    
                    优化linux网络栈: 发送路径(网摘)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.5" data-path="networking_Potential_Performance_Bottleneck_in_Linux_TCP.html">
            
                <a href="networking_Potential_Performance_Bottleneck_in_Linux_TCP.html">
            
                    
                    Potential Performance Bottleneck in Linux TCP(网摘)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.6" data-path="networking_xdp入门.html">
            
                <a href="networking_xdp入门.html">
            
                    
                    Get started with XDP(网摘)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.7" data-path="networking_linux收包路径图解.html">
            
                <a href="networking_linux收包路径图解.html">
            
                    
                    linux收包路径图解(网摘)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.8" data-path="as_title_qemu_ovs.html">
            
                <a href="as_title_qemu_ovs.html">
            
                    
                    Qemu OVS和DPDK
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.8.1" data-path="OVS_DPDK_编译运行.html">
            
                <a href="OVS_DPDK_编译运行.html">
            
                    
                    OVS-DPDK编译运行
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.8.2" data-path="OVS_架构和代码.html">
            
                <a href="OVS_架构和代码.html">
            
                    
                    OVS架构和代码
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.8.3" data-path="OVS_DPDK_performance_HXT_ARM_server.html">
            
                <a href="OVS_DPDK_performance_HXT_ARM_server.html">
            
                    
                    OVS-DPDK for ARM server 性能测试环境
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.8.4" data-path="DPDK_Mellanox.html">
            
                <a href="DPDK_Mellanox.html">
            
                    
                    DPDK Mellanox
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.8.5" data-path="OVS_phy-vm-phy.html">
            
                <a href="OVS_phy-vm-phy.html">
            
                    
                    OVS PHY-VM-PHY
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.8.6" data-path="networking_网络虚拟化用例记录.html">
            
                <a href="networking_网络虚拟化用例记录.html">
            
                    
                    网络虚拟化用例记录
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.8.7" data-path="networking_网络虚拟化操作记录.html">
            
                <a href="networking_网络虚拟化操作记录.html">
            
                    
                    网络虚拟化操作记录
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6.9" data-path="as_title_virtnet.html">
            
                <a href="as_title_virtnet.html">
            
                    
                    虚拟化网络
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.9.1" data-path="networking_tc_filter_连接veth和tap.html">
            
                <a href="networking_tc_filter_连接veth和tap.html">
            
                    
                    Connecting a veth device to tap
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.9.2" data-path="networking_multicast_vxlan_flannel.html">
            
                <a href="networking_multicast_vxlan_flannel.html">
            
                    
                    multicast vxlan和flannel
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.9.3" data-path="networking_virtio网络介绍.html">
            
                <a href="networking_virtio网络介绍.html">
            
                    
                    virtio网络介绍(网摘): vhost-net virtio-net vhost-user SRIOV
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.9.4" data-path="networking_virtualization_杂记.html">
            
                <a href="networking_virtualization_杂记.html">
            
                    
                    虚拟化网络杂记
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.9.5" data-path="networking_linux虚拟网络接口.html">
            
                <a href="networking_linux虚拟网络接口.html">
            
                    
                    linux虚拟网络接口(网摘)
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="as_title_arm_server.html">
            
                <a href="as_title_arm_server.html">
            
                    
                    ARM server
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" data-path="arm_server_杂记.html">
            
                <a href="arm_server_杂记.html">
            
                    
                    Arm server 杂记
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.2" data-path="server_知识点.html">
            
                <a href="server_知识点.html">
            
                    
                    server知识点
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="as_title_embedded.html">
            
                <a href="as_title_embedded.html">
            
                    
                    嵌入式系统开发调试
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.1" data-path="embedded_debugging.html">
            
                <a href="embedded_debugging.html">
            
                    
                    嵌入式调试杂记
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2" data-path="uboot_杂记.html">
            
                <a href="uboot_杂记.html">
            
                    
                    uboot杂记
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.3" data-path="buildroot_杂记.html">
            
                <a href="buildroot_杂记.html">
            
                    
                    buildroot杂记
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.4" data-path="toolchain_升级gcc问题解决.html">
            
                <a href="toolchain_升级gcc问题解决.html">
            
                    
                    升级GCC7.3问题解决
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.5" data-path="kernel_异常打印分析实例.html">
            
                <a href="kernel_异常打印分析实例.html">
            
                    
                    kernel bug异常打印分析
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="as_title_linuxdaily.html">
            
                <a href="as_title_linuxdaily.html">
            
                    
                    Linux工程实践
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.9.1" data-path="linux_日常使用.html">
            
                <a href="linux_日常使用.html">
            
                    
                    日常linux使用
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2" data-path="git_日常使用.html">
            
                <a href="git_日常使用.html">
            
                    
                    日常git使用
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.3" data-path="向kernel提交补丁.html">
            
                <a href="向kernel提交补丁.html">
            
                    
                    向kernel提交补丁
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.4" data-path="linux_ssh_relay.html">
            
                <a href="linux_ssh_relay.html">
            
                    
                    ssh relay
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.5" data-path="gitlab_ci.html">
            
                <a href="gitlab_ci.html">
            
                    
                    gitlab CI
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.6" data-path="docker_操作记录.html">
            
                <a href="docker_操作记录.html">
            
                    
                    docker操作记录
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.7" data-path="centos_操作记录.html">
            
                <a href="centos_操作记录.html">
            
                    
                    centos操作记录
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="as_title_golang.html">
            
                <a href="as_title_golang.html">
            
                    
                    Golang
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.1" data-path="as_title_golang1.html">
            
                <a href="as_title_golang1.html">
            
                    
                    入门
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.1.1" data-path="golang_语法基础.html">
            
                <a href="golang_语法基础.html">
            
                    
                    Golang 语法基础
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.1.2" data-path="golang_json性能.html">
            
                <a href="golang_json性能.html">
            
                    
                    Golang json性能比较
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.10.2" data-path="golang_原理.html">
            
                <a href="golang_原理.html">
            
                    
                    Golang 原理相关
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.2.1" data-path="golang_interface原理.html">
            
                <a href="golang_interface原理.html">
            
                    
                    Golang interface原理(网摘)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.2.2" data-path="golang_内存分配.html">
            
                <a href="golang_内存分配.html">
            
                    
                    Golang 内存分配(网摘)
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.10.3" data-path="golang_标准库.html">
            
                <a href="golang_标准库.html">
            
                    
                    Golang 标准库
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.4" data-path="golang_泛型.html">
            
                <a href="golang_泛型.html">
            
                    
                    Golang 泛型
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.5" data-path="golang_我的反射代码.html">
            
                <a href="golang_我的反射代码.html">
            
                    
                    Golang 我的反射代码
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.6" data-path="golang_问答.html">
            
                <a href="golang_问答.html">
            
                    
                    Golang 问答
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.7" data-path="golang_高效go.html">
            
                <a href="golang_高效go.html">
            
                    
                    Golang 高效go
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.8" data-path="golang_进阶.html">
            
                <a href="golang_进阶.html">
            
                    
                    Golang 进阶
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.9" data-path="as_title_golang2.html">
            
                <a href="as_title_golang2.html">
            
                    
                    Golang 杂记
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.9.1" data-path="golang_杂记1.html">
            
                <a href="golang_杂记1.html">
            
                    
                    Golang 杂记1
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.9.2" data-path="golang_杂记2.html">
            
                <a href="golang_杂记2.html">
            
                    
                    Golang 杂记2
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.9.3" data-path="golang_杂记3.html">
            
                <a href="golang_杂记3.html">
            
                    
                    Golang 杂记3
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.9.4" data-path="golang_lib选型.html">
            
                <a href="golang_lib选型.html">
            
                    
                    Golang lib选型
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.9.5" data-path="golang_mod_proxy.html">
            
                <a href="golang_mod_proxy.html">
            
                    
                    go mod和go proxy
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.9.6" data-path="golang_汇编_arm64.html">
            
                <a href="golang_汇编_arm64.html">
            
                    
                    Golang 汇编语法
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.9.7" data-path="golang_cgo_swig.html">
            
                <a href="golang_cgo_swig.html">
            
                    
                    go调用c可以用swig
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.10.10" data-path="as_title_golang3.html">
            
                <a href="as_title_golang3.html">
            
                    
                    Golang 环境和工具链生成
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.10.1" data-path="golang_toolchain_ppc.html">
            
                <a href="golang_toolchain_ppc.html">
            
                    
                    go tools增加ppc32支持
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.10.2" data-path="golang_toolchain_compile_gccgo.html">
            
                <a href="golang_toolchain_compile_gccgo.html">
            
                    
                    编译gccgo
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.10.3" data-path="golang_go_on_mips.html">
            
                <a href="golang_go_on_mips.html">
            
                    
                    go on mips boards(not so updated)
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.10.3.1" data-path="golang_go_on_mips_part1.html">
            
                <a href="golang_go_on_mips_part1.html">
            
                    
                    part 1: cross compile go
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.10.3.2" data-path="golang_go_on_mips_part2.html">
            
                <a href="golang_go_on_mips_part2.html">
            
                    
                    part 2: build native go compiler
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.10.3.3" data-path="golang_go_on_mips_part3.html">
            
                <a href="golang_go_on_mips_part3.html">
            
                    
                    part 3: gccgo experiments
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.10.3.4" data-path="golang_go_on_mips_part4.html">
            
                <a href="golang_go_on_mips_part4.html">
            
                    
                    part 4: Golang json performance
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.10.3.5" data-path="golang_gentoo_on_mips_board_and_build_go.html">
            
                <a href="golang_gentoo_on_mips_board_and_build_go.html">
            
                    
                    Gentoo on mips board and build go
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.10.11" data-path="as_title_golang4.html">
            
                <a href="as_title_golang4.html">
            
                    
                    微服务
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.11.1" data-path="golang_micro.html">
            
                <a href="golang_micro.html">
            
                    
                    go-micro和micro
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.11.2" data-path="golang_微服务概念.html">
            
                <a href="golang_微服务概念.html">
            
                    
                    微服务概念
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.10.12" data-path="as_title_golang5.html">
            
                <a href="as_title_golang5.html">
            
                    
                    解释器和编解码
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.12.1" data-path="golang_yeagi.html">
            
                <a href="golang_yeagi.html">
            
                    
                    解释器yeagi
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.12.2" data-path="golang_tengo.html">
            
                <a href="golang_tengo.html">
            
                    
                    解释器tengo
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.12.3" data-path="golang_govaluate.html">
            
                <a href="golang_govaluate.html">
            
                    
                    解释器govaluate
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.12.4" data-path="golang_encoding_gotiny.html">
            
                <a href="golang_encoding_gotiny.html">
            
                    
                    gotiny编解码
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.12.5" data-path="golang_abs.html">
            
                <a href="golang_abs.html">
            
                    
                    解释器abs
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.10.13" data-path="as_title_golang6.html">
            
                <a href="as_title_golang6.html">
            
                    
                    调试和性能
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.13.1" data-path="golang_调试记录.html">
            
                <a href="golang_调试记录.html">
            
                    
                    Golang 调试记录
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.13.2" data-path="golang_topid性能优化.html">
            
                <a href="golang_topid性能优化.html">
            
                    
                    Golang topid性能优化
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.13.3" data-path="golang_gshell性能调试.html">
            
                <a href="golang_gshell性能调试.html">
            
                    
                    Golang gshell性能调试
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.10.14" data-path="as_title_golang7.html">
            
                <a href="as_title_golang7.html">
            
                    
                    网络和消息中间件
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.14.1" data-path="golang_zmq.html">
            
                <a href="golang_zmq.html">
            
                    
                    消息中间件基本概念和zero mq
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.14.2" data-path="golang_mango.html">
            
                <a href="golang_mango.html">
            
                    
                    消息中间件mango
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.14.3" data-path="golang_libp2p.html">
            
                <a href="golang_libp2p.html">
            
                    
                    Golang p2p网络
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.11" data-path="as_title_rust.html">
            
                <a href="as_title_rust.html">
            
                    
                    Rust
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.11.1" data-path="rust_入门_brief.html">
            
                <a href="rust_入门_brief.html">
            
                    
                    Rust 入门系列
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.11.1.1" data-path="rust_books.html">
            
                <a href="rust_books.html">
            
                    
                    Rust reference books
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.1.2" data-path="rust_入门1.html">
            
                <a href="rust_入门1.html">
            
                    
                    Rust 安装和基础语法
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.1.3" data-path="rust_入门2.html">
            
                <a href="rust_入门2.html">
            
                    
                    Rust 泛型和内存所有权
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.1.4" data-path="rust_入门3.html">
            
                <a href="rust_入门3.html">
            
                    
                    Rust 闭包 容器 迭代器 生成器 线程
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.1.5" data-path="rust_工程构建.html">
            
                <a href="rust_工程构建.html">
            
                    
                    Rust 工程构建
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.11.2" data-path="rust_coding_brief.html">
            
                <a href="rust_coding_brief.html">
            
                    
                    Rust 代码积累
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.11.2.1" data-path="rust_by_example_misc.html">
            
                <a href="rust_by_example_misc.html">
            
                    
                    Rust by example杂记
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.2.2" data-path="rust_序列化.html">
            
                <a href="rust_序列化.html">
            
                    
                    Rust 序列化原理
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.2.3" data-path="rust_知识点积累.html">
            
                <a href="rust_知识点积累.html">
            
                    
                    Rust 知识点更新
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.2.4" data-path="rust_adaptiveservice.html">
            
                <a href="rust_adaptiveservice.html">
            
                    
                    rust版本的adaptiveservice探索
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.2.5" data-path="rust_常用设施.html">
            
                <a href="rust_常用设施.html">
            
                    
                    Rust 常用设施
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.2.6" data-path="rust_代码小段.html">
            
                <a href="rust_代码小段.html">
            
                    
                    Rust 代码小段
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.11.3" data-path="others.html">
            
                <a href="others.html">
            
                    
                    其他
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.11.3.1" data-path="rust_mdbook_使用.html">
            
                <a href="rust_mdbook_使用.html">
            
                    
                    Rust 使用mdbook
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.12" data-path="as_title_scripts.html">
            
                <a href="as_title_scripts.html">
            
                    
                    脚本
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.12.1" data-path="shell_变量.html">
            
                <a href="shell_变量.html">
            
                    
                    shell变量
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.2" data-path="shell_基础篇.html">
            
                <a href="shell_基础篇.html">
            
                    
                    shell命令和脚本记录-基础篇
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.3" data-path="shell_高级篇.html">
            
                <a href="shell_高级篇.html">
            
                    
                    shell命令和脚本记录-高级篇
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.4" data-path="shell_脚本片段.html">
            
                <a href="shell_脚本片段.html">
            
                    
                    shell脚本片段
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.5" data-path="python_记录.html">
            
                <a href="python_记录.html">
            
                    
                    python记录
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.6" data-path="lua_记录.html">
            
                <a href="lua_记录.html">
            
                    
                    lua记录
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.7" data-path="shell_rds脚本阅读.html">
            
                <a href="shell_rds脚本阅读.html">
            
                    
                    RDS脚本阅读
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.8" data-path="Project_Euler.html">
            
                <a href="Project_Euler.html">
            
                    
                    Project Euler
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.13" data-path="as_title_app.html">
            
                <a href="as_title_app.html">
            
                    
                    应用相关
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.13.1" data-path="app_sysbench代码分析.html">
            
                <a href="app_sysbench代码分析.html">
            
                    
                    sysbench代码分析
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.14" data-path="as_title_algorithm.html">
            
                <a href="as_title_algorithm.html">
            
                    
                    算法相关
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.14.1" data-path="algorithm_radix_tree.html">
            
                <a href="algorithm_radix_tree.html">
            
                    
                    基数(radix)树(网摘)
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.15" data-path="as_title_cos.html">
            
                <a href="as_title_cos.html">
            
                    
                    C和Operating System
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.15.1" data-path="system_libc_part1.html">
            
                <a href="system_libc_part1.html">
            
                    
                    libc概览1
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.2" data-path="system_libc_part2.html">
            
                <a href="system_libc_part2.html">
            
                    
                    libc概览2
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.3" data-path="system_libc_part3.html">
            
                <a href="system_libc_part3.html">
            
                    
                    libc概览3
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.4" data-path="system_原理杂记.html">
            
                <a href="system_原理杂记.html">
            
                    
                    系统原理杂记
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.5" data-path="system_alpine.html">
            
                <a href="system_alpine.html">
            
                    
                    Alpine Linux
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.6" data-path="system_进程间通信.html">
            
                <a href="system_进程间通信.html">
            
                    
                    进程间通信
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.7" data-path="system_特殊功能fd.html">
            
                <a href="system_特殊功能fd.html">
            
                    
                    eventfd timerfd signalfd和fd共享
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.8" data-path="c_automake_autoconf.html">
            
                <a href="c_automake_autoconf.html">
            
                    
                    automake autoconf
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.9" data-path="makefile_原理和实践.html">
            
                <a href="makefile_原理和实践.html">
            
                    
                    makefile
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.10" data-path="c_编程杂记高级篇.html">
            
                <a href="c_编程杂记高级篇.html">
            
                    
                    C编程杂记高级篇
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.11" data-path="c_编程杂记基础篇.html">
            
                <a href="c_编程杂记基础篇.html">
            
                    
                    C编程杂记基础篇
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.12" data-path="c_networking_socket高阶用法.html">
            
                <a href="c_networking_socket高阶用法.html">
            
                    
                    网络编程: Advanced Socket Topics(网摘)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.13" data-path="c_protobuf介绍.html">
            
                <a href="c_protobuf介绍.html">
            
                    
                    序列化: protobuf介绍
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.14" data-path="c_进程间通信_共享文件和共享内存.html">
            
                <a href="c_进程间通信_共享文件和共享内存.html">
            
                    
                    进程间通信: 共享文件和共享内存(网摘)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.15" data-path="c_pthread_condition和mutex.html">
            
                <a href="c_pthread_condition和mutex.html">
            
                    
                    并发 任务 事件 和锁.md
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.16" data-path="kernel_user_space_howto.html">
            
                <a href="kernel_user_space_howto.html">
            
                    
                    kernel space和user space交互(网摘, linux2.6)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.17" data-path="CentOS_系统性能优化配置.html">
            
                <a href="CentOS_系统性能优化配置.html">
            
                    
                    CentOS 性能优化系统配置
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.18" data-path="OS_gentoo使用.html">
            
                <a href="OS_gentoo使用.html">
            
                    
                    gentoo使用记录
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.16" data-path="as_title_driver.html">
            
                <a href="as_title_driver.html">
            
                    
                    内核 设备和驱动相关
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.16.1" data-path="device_driver_地址空间类型和DMA.html">
            
                <a href="device_driver_地址空间类型和DMA.html">
            
                    
                    地址空间类型和DMA
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.2" data-path="platform_device_driver.html">
            
                <a href="platform_device_driver.html">
            
                    
                    平台驱动杂记
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.3" data-path="platform_device_driver2.html">
            
                <a href="platform_device_driver2.html">
            
                    
                    平台驱动杂记2
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.4" data-path="device_driver_pci驱动概述.html">
            
                <a href="device_driver_pci驱动概述.html">
            
                    
                    pci驱动概述
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.5" data-path="device_driver_内核中的时间和延迟操作.html">
            
                <a href="device_driver_内核中的时间和延迟操作.html">
            
                    
                    内核中的时间和延迟操作
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.6" data-path="device_driver_杂记.html">
            
                <a href="device_driver_杂记.html">
            
                    
                    驱动调试杂记
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.7" data-path="device_localbus_16bit读写.html">
            
                <a href="device_localbus_16bit读写.html">
            
                    
                    CPLD做8bit到16bit转换
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.8" data-path="driver_位域和大小端.html">
            
                <a href="driver_位域和大小端.html">
            
                    
                    位域和大小端
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.9" data-path="as_title_driver1.html">
            
                <a href="as_title_driver1.html">
            
                    
                    nand
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.16.9.1" data-path="device_driver_octeon_nand.html">
            
                <a href="device_driver_octeon_nand.html">
            
                    
                    octeon nand flash驱动
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.9.2" data-path="device_driver_nand概率写失败问题分析.html">
            
                <a href="device_driver_nand概率写失败问题分析.html">
            
                    
                    Nand flash概率写失败问题分析
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.16.10" data-path="octeon_remote_pci.html">
            
                <a href="octeon_remote_pci.html">
            
                    
                    octeon remote-pci.c阅读
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.11" data-path="Device_VFIO_notes.html">
            
                <a href="Device_VFIO_notes.html">
            
                    
                    VFIO简介
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.12" data-path="as_title_driver2.html">
            
                <a href="as_title_driver2.html">
            
                    
                    智能网卡和DPDK
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.16.12.1" data-path="smartNIC_智能网卡对比.html">
            
                <a href="smartNIC_智能网卡对比.html">
            
                    
                    智能网卡对比
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.12.2" data-path="octeon_pci_NIC.html">
            
                <a href="octeon_pci_NIC.html">
            
                    
                    octeon PCI NIC
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.12.3" data-path="as_title_driver3.html">
            
                <a href="as_title_driver3.html">
            
                    
                    octeon liquidIO
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.16.12.3.1" data-path="smartNIC_liquidIO_代码阅读app篇.html">
            
                <a href="smartNIC_liquidIO_代码阅读app篇.html">
            
                    
                    PCI-NIC 代码阅读 --app篇
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.12.3.2" data-path="smartNIC_liquidIO_代码阅读api篇.html">
            
                <a href="smartNIC_liquidIO_代码阅读api篇.html">
            
                    
                    PCI-NIC 代码阅读 --api篇
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.12.3.3" data-path="smartNIC_liquidIO_代码阅读driver篇之结构体.html">
            
                <a href="smartNIC_liquidIO_代码阅读driver篇之结构体.html">
            
                    
                    PCI-NIC 代码阅读 --driver篇之结构体
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.12.3.4" data-path="smartNIC_liquidIO_代码阅读driver篇.html">
            
                <a href="smartNIC_liquidIO_代码阅读driver篇.html">
            
                    
                    PCI-NIC 代码阅读 --driver篇
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.12.3.5" data-path="smartNIC_liquidIO_代码阅读真NIC篇.html">
            
                <a href="smartNIC_liquidIO_代码阅读真NIC篇.html">
            
                    
                    PCI-NIC 代码阅读 --真NIC篇
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.16.12.4" data-path="networking_dpdk使用_2014.html">
            
                <a href="networking_dpdk使用_2014.html">
            
                    
                    DPDK使用(2014)
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.16.13" data-path="device_nvme要点介绍.html">
            
                <a href="device_nvme要点介绍.html">
            
                    
                    nvme要点介绍
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.17" data-path="as_title_cpu.html">
            
                <a href="as_title_cpu.html">
            
                    
                    CPU Arch相关
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.17.1" data-path="CPU_interconnection_networks.html">
            
                <a href="CPU_interconnection_networks.html">
            
                    
                    CPU核互联模型
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.2" data-path="cache_CPU和cache一致性原理.html">
            
                <a href="cache_CPU和cache一致性原理.html">
            
                    
                    CPU和cache一致性原理
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.3" data-path="as_title_cpu1.html">
            
                <a href="as_title_cpu1.html">
            
                    
                    ARM64
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.17.3.1" data-path="CPU_ARM64_知识杂记.html">
            
                <a href="CPU_ARM64_知识杂记.html">
            
                    
                    aarch64架构知识杂记
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.3.2" data-path="CPU_ARM64_thunder_overview.html">
            
                <a href="CPU_ARM64_thunder_overview.html">
            
                    
                    thunder 概览
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.3.3" data-path="CPU_ARM64_thunder_开发板操作记录.html">
            
                <a href="CPU_ARM64_thunder_开发板操作记录.html">
            
                    
                    thunder 开发板操作记录
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.3.4" data-path="CPU_ARM64_thunder_bdk.html">
            
                <a href="CPU_ARM64_thunder_bdk.html">
            
                    
                    thunder BDK
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.3.5" data-path="CPU_ARM64_thunder_efi_rtc.html">
            
                <a href="CPU_ARM64_thunder_efi_rtc.html">
            
                    
                    thunder RTC时间和efi
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.3.6" data-path="CPU_ARM64_thunder_uefi_fdt.html">
            
                <a href="CPU_ARM64_thunder_uefi_fdt.html">
            
                    
                    thunder uefi和fdt
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.3.7" data-path="CPU_ARM64_thunder_atf.html">
            
                <a href="CPU_ARM64_thunder_atf.html">
            
                    
                    thunder atf
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.3.8" data-path="CPU_ARM64_thunder_kernel_boot.html">
            
                <a href="CPU_ARM64_thunder_kernel_boot.html">
            
                    
                    thunder kernel启动打印流程
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.17.4" data-path="as_title_cpu2.html">
            
                <a href="as_title_cpu2.html">
            
                    
                    PPC
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.17.4.1" data-path="CPU_PPC启动多核Linux_流程和内存映射.html">
            
                <a href="CPU_PPC启动多核Linux_流程和内存映射.html">
            
                    
                    PPC启动多核linux: 流程和内存映射
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.4.2" data-path="CPU_PPC_kernel升级记录.html">
            
                <a href="CPU_PPC_kernel升级记录.html">
            
                    
                    PPC kernel升级记录
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.17.5" data-path="as_title_cpu3.html">
            
                <a href="as_title_cpu3.html">
            
                    
                    MIPS
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.17.5.1" data-path="CPU_MIPS_octeon地址空间和寄存器访问.html">
            
                <a href="CPU_MIPS_octeon地址空间和寄存器访问.html">
            
                    
                    octeon 地址空间和寄存器访问
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.5.2" data-path="CPU_MIPS_octeon操作记录.html">
            
                <a href="CPU_MIPS_octeon操作记录.html">
            
                    
                    octeon 操作记录
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.5.3" data-path="CPU_MIPS_octeon_包处理性能.html">
            
                <a href="CPU_MIPS_octeon_包处理性能.html">
            
                    
                    octeon 系列处理器包处理性能
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.5.4" data-path="CPU_MIPS_octeon_ddr调试记录.html">
            
                <a href="CPU_MIPS_octeon_ddr调试记录.html">
            
                    
                    octeon DDR调试
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.5.5" data-path="CPU_MIPS_octeon_BDK.html">
            
                <a href="CPU_MIPS_octeon_BDK.html">
            
                    
                    octeon CN78xx BDK
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.5.6" data-path="kernel_增加ECC中断.html">
            
                <a href="kernel_增加ECC中断.html">
            
                    
                    octeon 增加ECC中断
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.5.7" data-path="CPU_MIPS_octeon_hw-ddr2代码走读.html">
            
                <a href="CPU_MIPS_octeon_hw-ddr2代码走读.html">
            
                    
                    octeon hw-ddr2代码走读
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.5.8" data-path="CPU_MIPS_octeon_reboot调试和ddr中断.html">
            
                <a href="CPU_MIPS_octeon_reboot调试和ddr中断.html">
            
                    
                    octeon reboot调试和DDR中断
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.5.9" data-path="CPU_MIPS_octeon中断.html">
            
                <a href="CPU_MIPS_octeon中断.html">
            
                    
                    octeon 中断
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.5.10" data-path="CPU_MIPS_octeon原子操作.html">
            
                <a href="CPU_MIPS_octeon原子操作.html">
            
                    
                    octeon 原子操作
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.5.11" data-path="CPU_MIPS_octeon网口代码分析.html">
            
                <a href="CPU_MIPS_octeon网口代码分析.html">
            
                    
                    octeon 网口代码分析
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            本书使用 GitBook 发布
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >networking杂记2</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div class="search-plus" id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <div id="anchor-navigation-ex-navbar"><i class="fa fa-navicon"></i><ul><li><span class="title-icon "></span><a href="#tc&#x547D;&#x4EE4;"><b>1. </b>tc&#x547D;&#x4EE4;</a></li><ul><li><span class="title-icon "></span><a href="#tc&#x547D;&#x4EE4;&#x5B9E;&#x8DF5;"><b>1.1. </b>tc&#x547D;&#x4EE4;&#x5B9E;&#x8DF5;</a></li><ul><li><span class="title-icon "></span><a href="#&#x4E0D;&#x540C;&#x7684;interface&#x6709;&#x4E0D;&#x540C;&#x7684;&#x9ED8;&#x8BA4;qdisc&#x914D;&#x7F6E;"><b>1.1.1. </b>&#x4E0D;&#x540C;&#x7684;interface&#x6709;&#x4E0D;&#x540C;&#x7684;&#x9ED8;&#x8BA4;qdisc&#x914D;&#x7F6E;</a></li><li><span class="title-icon "></span><a href="#&#x67E5;&#x770B;filter"><b>1.1.2. </b>&#x67E5;&#x770B;filter</a></li><li><span class="title-icon "></span><a href="#&#x5220;&#x9664;filter"><b>1.1.3. </b>&#x5220;&#x9664;filter</a></li><li><span class="title-icon "></span><a href="#tc-mirror"><b>1.1.4. </b>tc mirror</a></li></ul><li><span class="title-icon "></span><a href="#traffic-control&#x7406;&#x8BBA;"><b>1.2. </b>traffic control&#x7406;&#x8BBA;</a></li><ul><li><span class="title-icon "></span><a href="#classless-qdisc-&#x65E0;&#x7C7B;&#x578B;&#x7684;qdisc"><b>1.2.1. </b>classless qdisc &#x65E0;&#x7C7B;&#x578B;&#x7684;qdisc</a></li><li><span class="title-icon "></span><a href="#classfull-qdisc"><b>1.2.2. </b>classfull qdisc</a></li><li><span class="title-icon "></span><a href="#class&#x6811;"><b>1.2.3. </b>class&#x6811;</a></li><li><span class="title-icon "></span><a href="#&#x547D;&#x540D;&#x60EF;&#x4F8B;&#x548C;&#x53C2;&#x6570;&#x60EF;&#x4F8B;"><b>1.2.4. </b>&#x547D;&#x540D;&#x60EF;&#x4F8B;&#x548C;&#x53C2;&#x6570;&#x60EF;&#x4F8B;</a></li></ul></ul><li><span class="title-icon "></span><a href="#raw-socket"><b>2. </b>raw socket</a></li><li><span class="title-icon "></span><a href="#linux&#x62A5;&#x6587;&#x6D41;&#x7A0B;"><b>3. </b>linux&#x62A5;&#x6587;&#x6D41;&#x7A0B;</a></li><ul><li><span class="title-icon "></span><a href="#iptable&#x56DB;&#x8868;&#x4E94;&#x94FE;"><b>3.1. </b>iptable&#x56DB;&#x8868;&#x4E94;&#x94FE;</a></li><ul><li><span class="title-icon "></span><a href="#&#x56DB;&#x8868;"><b>3.1.1. </b>&#x56DB;&#x8868;</a></li><li><span class="title-icon "></span><a href="#&#x4E94;&#x94FE;"><b>3.1.2. </b>&#x4E94;&#x94FE;</a></li><li><span class="title-icon "></span><a href="#&#x5173;&#x7CFB;"><b>3.1.3. </b>&#x5173;&#x7CFB;</a></li></ul></ul><li><span class="title-icon "></span><a href="#ebtables"><b>4. </b>ebtables</a></li><li><span class="title-icon "></span><a href="#&#x8F6C;&#x53D1;&#x8868;fib&#x548C;&#x8DEF;&#x7531;&#x8868;&#x7684;&#x533A;&#x522B;"><b>5. </b>&#x8F6C;&#x53D1;&#x8868;(FIB)&#x548C;&#x8DEF;&#x7531;&#x8868;&#x7684;&#x533A;&#x522B;</a></li><li><span class="title-icon "></span><a href="#mpls"><b>6. </b>MPLS</a></li><ul><li><span class="title-icon "></span><a href="#mpls&#x5E27;&#x683C;&#x5F0F;"><b>6.1. </b>MPLS&#x5E27;&#x683C;&#x5F0F;</a></li><li><span class="title-icon "></span><a href="#&#x4F20;&#x7EDF;&#x8DEF;&#x7531;&#x5668;"><b>6.2. </b>&#x4F20;&#x7EDF;&#x8DEF;&#x7531;&#x5668;</a></li><li><span class="title-icon "></span><a href="#mpls&#x62D3;&#x6251;"><b>6.3. </b>MPLS&#x62D3;&#x6251;</a></li></ul><li><span class="title-icon "></span><a href="#&#x7F51;&#x53E3;&#x76F8;&#x5173;&#x7684;&#x7EDF;&#x8BA1;"><b>7. </b>&#x7F51;&#x53E3;&#x76F8;&#x5173;&#x7684;&#x7EDF;&#x8BA1;</a></li><ul><li><span class="title-icon "></span><a href="#ethtool--s"><b>7.1. </b>ethtool -S</a></li><li><span class="title-icon "></span><a href="#sysclassneteth0statistics"><b>7.2. </b>/sys/class/net/eth0/statistics/</a></li><li><span class="title-icon "></span><a href="#man-netstat"><b>7.3. </b>man netstat</a></li></ul><li><span class="title-icon "></span><a href="#&#x5982;&#x4F55;&#x627E;&#x5230;socket&#x7AEF;&#x53E3;&#x53F7;&#x5BF9;&#x5E94;&#x7684;&#x8FDB;&#x7A0B;2----&#x4F7F;&#x7528;ss&#x547D;&#x4EE4;"><b>8. </b>&#x5982;&#x4F55;&#x627E;&#x5230;socket&#x7AEF;&#x53E3;&#x53F7;&#x5BF9;&#x5E94;&#x7684;&#x8FDB;&#x7A0B;2 -- &#x4F7F;&#x7528;ss&#x547D;&#x4EE4;</a></li><li><span class="title-icon "></span><a href="#docker&#x5185;&#x4E0B;&#x8F7D;&#x5931;&#x8D25;&#x7684;&#x89E3;&#x51B3;"><b>9. </b>docker&#x5185;&#x4E0B;&#x8F7D;&#x5931;&#x8D25;&#x7684;&#x89E3;&#x51B3;</a></li><ul><li><span class="title-icon "></span><a href="#&#x73B0;&#x8C61;"><b>9.1. </b>&#x73B0;&#x8C61;</a></li><li><span class="title-icon "></span><a href="#&#x8C03;&#x67E5;"><b>9.2. </b>&#x8C03;&#x67E5;</a></li><li><span class="title-icon "></span><a href="#&#x6392;&#x67E5;"><b>9.3. </b>&#x6392;&#x67E5;</a></li><ul><li><span class="title-icon "></span><a href="#&#x6293;&#x5305;"><b>9.3.1. </b>&#x6293;&#x5305;</a></li><li><span class="title-icon "></span><a href="#&#x7591;&#x95EE;-&#x4E3A;&#x4EC0;&#x4E48;&#x6709;&#x5927;&#x4E8E;mtu&#x7684;&#x62A5;&#x6587;&#x51FA;&#x73B0;"><b>9.3.2. </b>&#x7591;&#x95EE; &#x4E3A;&#x4EC0;&#x4E48;&#x6709;&#x5927;&#x4E8E;MTU&#x7684;&#x62A5;&#x6587;&#x51FA;&#x73B0;?</a></li><li><span class="title-icon "></span><a href="#&#x4E3A;&#x4EC0;&#x4E48;&#x5927;&#x62A5;&#x6587;&#x4F1A;&#x4E22;"><b>9.3.3. </b>&#x4E3A;&#x4EC0;&#x4E48;&#x5927;&#x62A5;&#x6587;&#x4F1A;&#x4E22;?</a></li></ul><li><span class="title-icon "></span><a href="#&#x89E3;&#x51B3;"><b>9.4. </b>&#x89E3;&#x51B3;</a></li></ul><li><span class="title-icon "></span><a href="#&#x80FD;ping&#x901A;&#x4F46;tcp&#x4E0D;&#x80FD;&#x63E1;&#x624B;&#x73B0;&#x8C61;&#x7684;&#x89E3;&#x51B3;"><b>10. </b>&#x80FD;ping&#x901A;&#x4F46;tcp&#x4E0D;&#x80FD;&#x63E1;&#x624B;&#x73B0;&#x8C61;&#x7684;&#x89E3;&#x51B3;</a></li><ul><li><span class="title-icon "></span><a href="#&#x73B0;&#x8C61;_1"><b>10.1. </b>&#x73B0;&#x8C61;</a></li><li><span class="title-icon "></span><a href="#&#x6293;&#x5305;&#x53CA;&#x73B0;&#x8C61;"><b>10.2. </b>&#x6293;&#x5305;&#x53CA;&#x73B0;&#x8C61;</a></li><li><span class="title-icon "></span><a href="#&#x53EF;&#x80FD;&#x7684;&#x89E3;&#x91CA;"><b>10.3. </b>&#x53EF;&#x80FD;&#x7684;&#x89E3;&#x91CA;</a></li><li><span class="title-icon "></span><a href="#&#x89E3;&#x51B3;&#x65B9;&#x6848;"><b>10.4. </b>&#x89E3;&#x51B3;&#x65B9;&#x6848;</a></li><li><span class="title-icon "></span><a href="#&#x540E;&#x7EED;"><b>10.5. </b>&#x540E;&#x7EED;</a></li></ul><li><span class="title-icon "></span><a href="#tcp&#x63E1;&#x624B;&#x56FE;&#x793A;"><b>11. </b>tcp&#x63E1;&#x624B;&#x56FE;&#x793A;</a></li><li><span class="title-icon "></span><a href="#tcpdump&#x7684;filter&#x4F7F;&#x7528;"><b>12. </b>tcpdump&#x7684;filter&#x4F7F;&#x7528;</a></li><ul><li><span class="title-icon "></span><a href="#&#x7F51;&#x7EDC;&#x8FC7;&#x6EE4;"><b>12.1. </b>&#x7F51;&#x7EDC;&#x8FC7;&#x6EE4;</a></li><li><span class="title-icon "></span><a href="#&#x534F;&#x8BAE;&#x8FC7;&#x6EE4;"><b>12.2. </b>&#x534F;&#x8BAE;&#x8FC7;&#x6EE4;</a></li></ul><li><span class="title-icon "></span><a href="#iptable"><b>13. </b>iptable</a></li><ul><li><span class="title-icon "></span><a href="#iptable&#x67E5;&#x770B;&#x89C4;&#x5219;"><b>13.1. </b>iptable&#x67E5;&#x770B;&#x89C4;&#x5219;</a></li><li><span class="title-icon "></span><a href="#iptable-&#x6E05;&#x9664;&#x6240;&#x6709;&#x7684;rule-&#x5141;&#x8BB8;&#x6240;&#x6709;traffic"><b>13.2. </b>iptable &#x6E05;&#x9664;&#x6240;&#x6709;&#x7684;rule, &#x5141;&#x8BB8;&#x6240;&#x6709;traffic</a></li></ul><li><span class="title-icon "></span><a href="#&#x591A;&#x7EBF;&#x7A0B;&#x80FD;&#x4E0D;&#x80FD;&#x540C;&#x65F6;&#x5199;&#x540C;&#x4E00;&#x4E2A;socket"><b>14. </b>&#x591A;&#x7EBF;&#x7A0B;&#x80FD;&#x4E0D;&#x80FD;&#x540C;&#x65F6;&#x5199;&#x540C;&#x4E00;&#x4E2A;socket?</a></li><ul><li><span class="title-icon "></span><a href="#&#x8001;&#x5916;&#x7684;&#x95EE;&#x7B54;"><b>14.1. </b>&#x8001;&#x5916;&#x7684;&#x95EE;&#x7B54;</a></li><li><span class="title-icon "></span><a href="#&#x77E5;&#x4E4E;&#x7684;&#x89E3;&#x91CA;"><b>14.2. </b>&#x77E5;&#x4E4E;&#x7684;&#x89E3;&#x91CA;</a></li></ul><li><span class="title-icon "></span><a href="#eoe-filter"><b>15. </b>eoe filter</a></li><li><span class="title-icon "></span><a href="#tcpdump&#x6807;&#x8BB0;&#x7684;&#x542B;&#x4E49;"><b>16. </b>tcpdump&#x6807;&#x8BB0;&#x7684;&#x542B;&#x4E49;</a></li><li><span class="title-icon "></span><a href="#&#x4E00;&#x6B21;ssh&#x767B;&#x5F55;&#x7684;tcpdump"><b>17. </b>&#x4E00;&#x6B21;ssh&#x767B;&#x5F55;&#x7684;tcpdump</a></li><ul><li><span class="title-icon "></span><a href="#&#x5EFA;&#x7ACB;&#x8FDE;&#x63A5;&#x63E1;&#x624B;"><b>17.1. </b>&#x5EFA;&#x7ACB;&#x8FDE;&#x63A5;&#x63E1;&#x624B;</a></li><li><span class="title-icon "></span><a href="#&#x7ED3;&#x675F;&#x8FDE;&#x63A5;&#x63E1;&#x624B;"><b>17.2. </b>&#x7ED3;&#x675F;&#x8FDE;&#x63A5;&#x63E1;&#x624B;</a></li><li><span class="title-icon "></span><a href="#&#x8865;&#x5145;&#x89C2;&#x5BDF;"><b>17.3. </b>&#x8865;&#x5145;&#x89C2;&#x5BDF;</a></li></ul><li><span class="title-icon "></span><a href="#&#x5982;&#x4F55;&#x627E;&#x5230;socket&#x7AEF;&#x53E3;&#x53F7;&#x5BF9;&#x5E94;&#x7684;&#x8FDB;&#x7A0B;"><b>18. </b>&#x5982;&#x4F55;&#x627E;&#x5230;socket&#x7AEF;&#x53E3;&#x53F7;&#x5BF9;&#x5E94;&#x7684;&#x8FDB;&#x7A0B;</a></li><ul><li><span class="title-icon "></span><a href="#&#x601D;&#x8DEF;"><b>18.1. </b>&#x601D;&#x8DEF;</a></li><ul><li><span class="title-icon "></span><a href="#inode&#x548C;&#x8FDB;&#x7A0B;&#x7684;fd&#x6709;&#x5BF9;&#x5E94;&#x5173;&#x7CFB;"><b>18.1.1. </b>inode&#x548C;&#x8FDB;&#x7A0B;&#x7684;fd&#x6709;&#x5BF9;&#x5E94;&#x5173;&#x7CFB;</a></li><li><span class="title-icon "></span><a href="#&#x811A;&#x672C;"><b>18.1.2. </b>&#x811A;&#x672C;</a></li></ul></ul><li><span class="title-icon "></span><a href="#iproute2&#x5BF9;&#x5E94;&#x8868;"><b>19. </b>iproute2&#x5BF9;&#x5E94;&#x8868;</a></li><li><span class="title-icon "></span><a href="#linux&#x7684;&#x7F51;&#x7EDC;&#x62A5;&#x6587;&#x7EDF;&#x8BA1;"><b>20. </b>linux&#x7684;&#x7F51;&#x7EDC;&#x62A5;&#x6587;&#x7EDF;&#x8BA1;</a></li><ul><li><span class="title-icon "></span><a href="#&#x9A71;&#x52A8;&#x5C42;"><b>20.1. </b>&#x9A71;&#x52A8;&#x5C42;</a></li><li><span class="title-icon "></span><a href="#&#x534F;&#x8BAE;&#x5C42;"><b>20.2. </b>&#x534F;&#x8BAE;&#x5C42;</a></li><ul><li><span class="title-icon "></span><a href="#netstat--s"><b>20.2.1. </b>netstat -s</a></li><li><span class="title-icon "></span><a href="#nstat&#x66FF;&#x4EE3;netstat"><b>20.2.2. </b>nstat&#x66FF;&#x4EE3;netstat</a></li><li><span class="title-icon "></span><a href="#netstat&#x548C;nstat&#x90FD;&#x662F;&#x7528;procnet&#x4E0B;&#x9762;&#x7684;&#x7EDF;&#x8BA1;"><b>20.2.3. </b>netstat&#x548C;nstat&#x90FD;&#x662F;&#x7528;/proc/net&#x4E0B;&#x9762;&#x7684;&#x7EDF;&#x8BA1;</a></li></ul></ul></ul></div><a href="#tc&#x547D;&#x4EE4;" id="anchorNavigationExGoTop"><i class="fa fa-arrow-up"></i></a><ul>
<li><a href="#tc&#x547D;&#x4EE4;">tc&#x547D;&#x4EE4;</a><ul>
<li><a href="#tc&#x547D;&#x4EE4;&#x5B9E;&#x8DF5;">tc&#x547D;&#x4EE4;&#x5B9E;&#x8DF5;</a><ul>
<li><a href="#&#x4E0D;&#x540C;&#x7684;interface&#x6709;&#x4E0D;&#x540C;&#x7684;&#x9ED8;&#x8BA4;qdisc&#x914D;&#x7F6E;">&#x4E0D;&#x540C;&#x7684;interface&#x6709;&#x4E0D;&#x540C;&#x7684;&#x9ED8;&#x8BA4;qdisc&#x914D;&#x7F6E;</a></li>
<li><a href="#&#x67E5;&#x770B;filter">&#x67E5;&#x770B;filter</a></li>
<li><a href="#&#x5220;&#x9664;filter">&#x5220;&#x9664;filter</a></li>
<li><a href="#tc-mirror">tc mirror</a><ul>
<li><a href="#&#x95EE;&#x9898;&#x89E3;&#x51B3;">&#x95EE;&#x9898;&#x89E3;&#x51B3;</a></li>
<li><a href="#tc-mirror&#x7279;&#x70B9;">tc mirror&#x7279;&#x70B9;</a></li>
<li><a href="#&#x7406;&#x8BBA;&#x57FA;&#x7840;">&#x7406;&#x8BBA;&#x57FA;&#x7840;</a></li>
<li><a href="#&#x53C2;&#x8003;">&#x53C2;&#x8003;</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#traffic-control&#x7406;&#x8BBA;">traffic control&#x7406;&#x8BBA;</a><ul>
<li><a href="#classless-qdisc-&#x65E0;&#x7C7B;&#x578B;&#x7684;qdisc">classless qdisc &#x65E0;&#x7C7B;&#x578B;&#x7684;qdisc</a></li>
<li><a href="#classfull-qdisc">classfull qdisc</a></li>
<li><a href="#class&#x6811;">class&#x6811;</a></li>
<li><a href="#&#x547D;&#x540D;&#x60EF;&#x4F8B;&#x548C;&#x53C2;&#x6570;&#x60EF;&#x4F8B;">&#x547D;&#x540D;&#x60EF;&#x4F8B;&#x548C;&#x53C2;&#x6570;&#x60EF;&#x4F8B;</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#raw-socket">raw socket</a></li>
<li><a href="#linux&#x62A5;&#x6587;&#x6D41;&#x7A0B;">linux&#x62A5;&#x6587;&#x6D41;&#x7A0B;</a><ul>
<li><a href="#iptable&#x56DB;&#x8868;&#x4E94;&#x94FE;">iptable&#x56DB;&#x8868;&#x4E94;&#x94FE;</a><ul>
<li><a href="#&#x56DB;&#x8868;">&#x56DB;&#x8868;</a></li>
<li><a href="#&#x4E94;&#x94FE;">&#x4E94;&#x94FE;</a></li>
<li><a href="#&#x5173;&#x7CFB;">&#x5173;&#x7CFB;</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#ebtables">ebtables</a></li>
<li><a href="#&#x8F6C;&#x53D1;&#x8868;fib&#x548C;&#x8DEF;&#x7531;&#x8868;&#x7684;&#x533A;&#x522B;">&#x8F6C;&#x53D1;&#x8868;(FIB)&#x548C;&#x8DEF;&#x7531;&#x8868;&#x7684;&#x533A;&#x522B;</a></li>
<li><a href="#mpls">MPLS</a><ul>
<li><a href="#mpls&#x5E27;&#x683C;&#x5F0F;">MPLS&#x5E27;&#x683C;&#x5F0F;</a></li>
<li><a href="#&#x4F20;&#x7EDF;&#x8DEF;&#x7531;&#x5668;">&#x4F20;&#x7EDF;&#x8DEF;&#x7531;&#x5668;</a></li>
<li><a href="#mpls&#x62D3;&#x6251;">MPLS&#x62D3;&#x6251;</a></li>
</ul>
</li>
<li><a href="#&#x7F51;&#x53E3;&#x76F8;&#x5173;&#x7684;&#x7EDF;&#x8BA1;">&#x7F51;&#x53E3;&#x76F8;&#x5173;&#x7684;&#x7EDF;&#x8BA1;</a><ul>
<li><a href="#ethtool--s">ethtool -S</a></li>
<li><a href="#sysclassneteth0statistics">/sys/class/net/eth0/statistics/</a></li>
<li><a href="#man-netstat">man netstat</a></li>
</ul>
</li>
<li><a href="#&#x5982;&#x4F55;&#x627E;&#x5230;socket&#x7AEF;&#x53E3;&#x53F7;&#x5BF9;&#x5E94;&#x7684;&#x8FDB;&#x7A0B;2----&#x4F7F;&#x7528;ss&#x547D;&#x4EE4;">&#x5982;&#x4F55;&#x627E;&#x5230;socket&#x7AEF;&#x53E3;&#x53F7;&#x5BF9;&#x5E94;&#x7684;&#x8FDB;&#x7A0B;2 -- &#x4F7F;&#x7528;ss&#x547D;&#x4EE4;</a></li>
<li><a href="#docker&#x5185;&#x4E0B;&#x8F7D;&#x5931;&#x8D25;&#x7684;&#x89E3;&#x51B3;">docker&#x5185;&#x4E0B;&#x8F7D;&#x5931;&#x8D25;&#x7684;&#x89E3;&#x51B3;</a><ul>
<li><a href="#&#x73B0;&#x8C61;">&#x73B0;&#x8C61;</a></li>
<li><a href="#&#x8C03;&#x67E5;">&#x8C03;&#x67E5;</a></li>
<li><a href="#&#x6392;&#x67E5;">&#x6392;&#x67E5;</a><ul>
<li><a href="#&#x6293;&#x5305;">&#x6293;&#x5305;</a><ul>
<li><a href="#docker&#x5185;&#x6267;&#x884C;curl-host&#x4E0A;&#x6293;&#x5305;">docker&#x5185;&#x6267;&#x884C;curl, host&#x4E0A;&#x6293;&#x5305;</a></li>
<li><a href="#&#x672C;&#x5730;host&#x76F4;&#x63A5;&#x6267;&#x884C;">&#x672C;&#x5730;host&#x76F4;&#x63A5;&#x6267;&#x884C;</a></li>
<li><a href="#&#x5BF9;&#x6BD4;&#x673A;&#x5668;&#x7684;docker&#x5185;&#x662F;&#x597D;&#x7684;">&#x5BF9;&#x6BD4;&#x673A;&#x5668;&#x7684;docker&#x5185;&#x662F;&#x597D;&#x7684;</a></li>
<li><a href="#&#x5BF9;&#x6BD4;&#x673A;&#x5668;&#x7684;host&#x4E0A;&#x4E5F;&#x662F;&#x597D;&#x7684;">&#x5BF9;&#x6BD4;&#x673A;&#x5668;&#x7684;host&#x4E0A;&#x4E5F;&#x662F;&#x597D;&#x7684;</a></li>
</ul>
</li>
<li><a href="#&#x7591;&#x95EE;-&#x4E3A;&#x4EC0;&#x4E48;&#x6709;&#x5927;&#x4E8E;mtu&#x7684;&#x62A5;&#x6587;&#x51FA;&#x73B0;">&#x7591;&#x95EE; &#x4E3A;&#x4EC0;&#x4E48;&#x6709;&#x5927;&#x4E8E;MTU&#x7684;&#x62A5;&#x6587;&#x51FA;&#x73B0;?</a></li>
<li><a href="#&#x4E3A;&#x4EC0;&#x4E48;&#x5927;&#x62A5;&#x6587;&#x4F1A;&#x4E22;">&#x4E3A;&#x4EC0;&#x4E48;&#x5927;&#x62A5;&#x6587;&#x4F1A;&#x4E22;?</a></li>
</ul>
</li>
<li><a href="#&#x89E3;&#x51B3;">&#x89E3;&#x51B3;</a></li>
</ul>
</li>
<li><a href="#&#x80FD;ping&#x901A;&#x4F46;tcp&#x4E0D;&#x80FD;&#x63E1;&#x624B;&#x73B0;&#x8C61;&#x7684;&#x89E3;&#x51B3;">&#x80FD;ping&#x901A;&#x4F46;tcp&#x4E0D;&#x80FD;&#x63E1;&#x624B;&#x73B0;&#x8C61;&#x7684;&#x89E3;&#x51B3;</a><ul>
<li><a href="#&#x73B0;&#x8C61;-1">&#x73B0;&#x8C61;</a></li>
<li><a href="#&#x6293;&#x5305;&#x53CA;&#x73B0;&#x8C61;">&#x6293;&#x5305;&#x53CA;&#x73B0;&#x8C61;</a></li>
<li><a href="#&#x53EF;&#x80FD;&#x7684;&#x89E3;&#x91CA;">&#x53EF;&#x80FD;&#x7684;&#x89E3;&#x91CA;</a></li>
<li><a href="#&#x89E3;&#x51B3;&#x65B9;&#x6848;">&#x89E3;&#x51B3;&#x65B9;&#x6848;</a></li>
<li><a href="#&#x540E;&#x7EED;">&#x540E;&#x7EED;</a></li>
</ul>
</li>
<li><a href="#tcp&#x63E1;&#x624B;&#x56FE;&#x793A;">tcp&#x63E1;&#x624B;&#x56FE;&#x793A;</a></li>
<li><a href="#tcpdump&#x7684;filter&#x4F7F;&#x7528;">tcpdump&#x7684;filter&#x4F7F;&#x7528;</a><ul>
<li><a href="#&#x7F51;&#x7EDC;&#x8FC7;&#x6EE4;">&#x7F51;&#x7EDC;&#x8FC7;&#x6EE4;</a></li>
<li><a href="#&#x534F;&#x8BAE;&#x8FC7;&#x6EE4;">&#x534F;&#x8BAE;&#x8FC7;&#x6EE4;</a></li>
</ul>
</li>
<li><a href="#iptable">iptable</a><ul>
<li><a href="#iptable&#x67E5;&#x770B;&#x89C4;&#x5219;">iptable&#x67E5;&#x770B;&#x89C4;&#x5219;</a></li>
<li><a href="#iptable-&#x6E05;&#x9664;&#x6240;&#x6709;&#x7684;rule-&#x5141;&#x8BB8;&#x6240;&#x6709;traffic">iptable &#x6E05;&#x9664;&#x6240;&#x6709;&#x7684;rule, &#x5141;&#x8BB8;&#x6240;&#x6709;traffic</a></li>
</ul>
</li>
<li><a href="#&#x591A;&#x7EBF;&#x7A0B;&#x80FD;&#x4E0D;&#x80FD;&#x540C;&#x65F6;&#x5199;&#x540C;&#x4E00;&#x4E2A;socket">&#x591A;&#x7EBF;&#x7A0B;&#x80FD;&#x4E0D;&#x80FD;&#x540C;&#x65F6;&#x5199;&#x540C;&#x4E00;&#x4E2A;socket?</a><ul>
<li><a href="#&#x8001;&#x5916;&#x7684;&#x95EE;&#x7B54;">&#x8001;&#x5916;&#x7684;&#x95EE;&#x7B54;</a></li>
<li><a href="#&#x77E5;&#x4E4E;&#x7684;&#x89E3;&#x91CA;">&#x77E5;&#x4E4E;&#x7684;&#x89E3;&#x91CA;</a></li>
</ul>
</li>
<li><a href="#eoe-filter">eoe filter</a></li>
<li><a href="#tcpdump&#x6807;&#x8BB0;&#x7684;&#x542B;&#x4E49;">tcpdump&#x6807;&#x8BB0;&#x7684;&#x542B;&#x4E49;</a></li>
<li><a href="#&#x4E00;&#x6B21;ssh&#x767B;&#x5F55;&#x7684;tcpdump">&#x4E00;&#x6B21;ssh&#x767B;&#x5F55;&#x7684;tcpdump</a><ul>
<li><a href="#&#x5EFA;&#x7ACB;&#x8FDE;&#x63A5;&#x63E1;&#x624B;">&#x5EFA;&#x7ACB;&#x8FDE;&#x63A5;&#x63E1;&#x624B;</a></li>
<li><a href="#&#x7ED3;&#x675F;&#x8FDE;&#x63A5;&#x63E1;&#x624B;">&#x7ED3;&#x675F;&#x8FDE;&#x63A5;&#x63E1;&#x624B;</a></li>
<li><a href="#&#x8865;&#x5145;&#x89C2;&#x5BDF;">&#x8865;&#x5145;&#x89C2;&#x5BDF;</a></li>
</ul>
</li>
<li><a href="#&#x5982;&#x4F55;&#x627E;&#x5230;socket&#x7AEF;&#x53E3;&#x53F7;&#x5BF9;&#x5E94;&#x7684;&#x8FDB;&#x7A0B;">&#x5982;&#x4F55;&#x627E;&#x5230;socket&#x7AEF;&#x53E3;&#x53F7;&#x5BF9;&#x5E94;&#x7684;&#x8FDB;&#x7A0B;</a><ul>
<li><a href="#&#x601D;&#x8DEF;">&#x601D;&#x8DEF;</a><ul>
<li><a href="#inode&#x548C;&#x8FDB;&#x7A0B;&#x7684;fd&#x6709;&#x5BF9;&#x5E94;&#x5173;&#x7CFB;">inode&#x548C;&#x8FDB;&#x7A0B;&#x7684;fd&#x6709;&#x5BF9;&#x5E94;&#x5173;&#x7CFB;</a></li>
<li><a href="#&#x811A;&#x672C;">&#x811A;&#x672C;</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#iproute2&#x5BF9;&#x5E94;&#x8868;">iproute2&#x5BF9;&#x5E94;&#x8868;</a></li>
<li><a href="#linux&#x7684;&#x7F51;&#x7EDC;&#x62A5;&#x6587;&#x7EDF;&#x8BA1;">linux&#x7684;&#x7F51;&#x7EDC;&#x62A5;&#x6587;&#x7EDF;&#x8BA1;</a><ul>
<li><a href="#&#x9A71;&#x52A8;&#x5C42;">&#x9A71;&#x52A8;&#x5C42;</a></li>
<li><a href="#&#x534F;&#x8BAE;&#x5C42;">&#x534F;&#x8BAE;&#x5C42;</a><ul>
<li><a href="#netstat--s">netstat -s</a></li>
<li><a href="#nstat&#x66FF;&#x4EE3;netstat">nstat&#x66FF;&#x4EE3;netstat</a></li>
<li><a href="#netstat&#x548C;nstat&#x90FD;&#x662F;&#x7528;procnet&#x4E0B;&#x9762;&#x7684;&#x7EDF;&#x8BA1;">netstat&#x548C;nstat&#x90FD;&#x662F;&#x7528;/proc/net&#x4E0B;&#x9762;&#x7684;&#x7EDF;&#x8BA1;</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<h1 id="tc&#x547D;&#x4EE4;"><a name="tc&#x547D;&#x4EE4;" class="anchor-navigation-ex-anchor" href="#tc&#x547D;&#x4EE4;"><i class="fa fa-link" aria-hidden="true"></i></a>1. tc&#x547D;&#x4EE4;</h1>
<p>tc&#x547D;&#x4EE4;&#x662F;iproute2&#x91CC;&#x9762;&#x7684;&#x7528;&#x6237;&#x6001;&#x6D41;&#x91CF;&#x63A7;&#x5236;&#x5DE5;&#x5177;, tc&#x662F;traffic control&#x7684;&#x610F;&#x601D;.</p>
<h2 id="tc&#x547D;&#x4EE4;&#x5B9E;&#x8DF5;"><a name="tc&#x547D;&#x4EE4;&#x5B9E;&#x8DF5;" class="anchor-navigation-ex-anchor" href="#tc&#x547D;&#x4EE4;&#x5B9E;&#x8DF5;"><i class="fa fa-link" aria-hidden="true"></i></a>1.1. tc&#x547D;&#x4EE4;&#x5B9E;&#x8DF5;</h2>
<h3 id="&#x4E0D;&#x540C;&#x7684;interface&#x6709;&#x4E0D;&#x540C;&#x7684;&#x9ED8;&#x8BA4;qdisc&#x914D;&#x7F6E;"><a name="&#x4E0D;&#x540C;&#x7684;interface&#x6709;&#x4E0D;&#x540C;&#x7684;&#x9ED8;&#x8BA4;qdisc&#x914D;&#x7F6E;" class="anchor-navigation-ex-anchor" href="#&#x4E0D;&#x540C;&#x7684;interface&#x6709;&#x4E0D;&#x540C;&#x7684;&#x9ED8;&#x8BA4;qdisc&#x914D;&#x7F6E;"><i class="fa fa-link" aria-hidden="true"></i></a>1.1.1. &#x4E0D;&#x540C;&#x7684;interface&#x6709;&#x4E0D;&#x540C;&#x7684;&#x9ED8;&#x8BA4;qdisc&#x914D;&#x7F6E;</h3>
<pre class="language-"><code class="lang-sh"><span class="token comment"># eth0&#x662F;VM&#x7684;&#x4E3B;&#x7F51;&#x53E3;, &#x914D;&#x4E86;&#x9ED8;&#x8BA4;&#x7684;pfifo_fast</span>
$ tc qdisc show dev eth0
qdisc pfifo_fast <span class="token number">0</span>: root refcnt <span class="token number">2</span> bands <span class="token number">3</span> priomap  <span class="token number">1</span> <span class="token number">2</span> <span class="token number">2</span> <span class="token number">2</span> <span class="token number">1</span> <span class="token number">2</span> <span class="token number">0</span> <span class="token number">0</span> <span class="token number">1</span> <span class="token number">1</span> <span class="token number">1</span> <span class="token number">1</span> <span class="token number">1</span> <span class="token number">1</span> <span class="token number">1</span> <span class="token number">1</span>

<span class="token comment"># docker0&#x662F;docker&#x7684;&#x9ED8;&#x8BA4;&#x7F51;&#x6865;</span>
$ tc qdisc show dev docker0
qdisc noqueue <span class="token number">0</span>: root refcnt <span class="token number">2</span>

<span class="token comment"># &#x4E0B;&#x9762;&#x4E24;&#x4E2A;&#x547D;&#x4EE4;&#x90FD;&#x6CA1;&#x6709;&#x8F93;&#x51FA;, &#x8BF4;&#x660E;&#x9ED8;&#x8BA4;&#x90FD;&#x6CA1;&#x6709;classful &#x7684;qdisc</span>
tc class show dev docker0
tc class show dev eth0
</code></pre>
<h3 id="&#x67E5;&#x770B;filter"><a name="&#x67E5;&#x770B;filter" class="anchor-navigation-ex-anchor" href="#&#x67E5;&#x770B;filter"><i class="fa fa-link" aria-hidden="true"></i></a>1.1.2. &#x67E5;&#x770B;filter</h3>
<p>&#x547D;&#x4EE4;&#x683C;&#x5F0F;<code>tc filter show [ dev STRING ] [ root | ingress | egress | parent CLASSID ]</code></p>
<pre class="language-"><code class="lang-sh"><span class="token comment"># &#x8FD9;&#x6837;&#x6CA1;&#x8F93;&#x51FA;</span>
tc filter show dev eth-mgnt

<span class="token comment"># &#x540E;&#x9762;&#x5E26;root | ingress | egress | parent CLASSI &#x624D;&#x6709;&#x8F93;&#x51FA;</span>
<span class="token comment"># &#x5F88;&#x5947;&#x602A;&#x5728;&#x6211;&#x7684;&#x73AF;&#x5883;&#x4E0B;root/ingress/egress&#x90FD;&#x4E00;&#x6837;</span>
/work <span class="token comment"># tc filter show dev eth-mgnt root</span>
filter parent ffff: protocol all pref <span class="token number">49152</span> u32 chain <span class="token number">0</span>
filter parent ffff: protocol all pref <span class="token number">49152</span> u32 chain <span class="token number">0</span> fh <span class="token number">800</span>: ht divisor <span class="token number">1</span>
filter parent ffff: protocol all pref <span class="token number">49152</span> u32 chain <span class="token number">0</span> fh <span class="token number">800</span>::800 order <span class="token number">2048</span> key ht <span class="token number">800</span> bkt
 <span class="token number">0</span> terminal flowid ??? not_in_hw
  match 00000000/00000000 at <span class="token number">0</span>
        action order <span class="token number">1</span>: mirred <span class="token punctuation">(</span>Egress Redirect to device vmtap0<span class="token punctuation">)</span> stolen
        index <span class="token number">1</span> ref <span class="token number">1</span> <span class="token builtin class-name">bind</span> <span class="token number">1</span>
</code></pre>
<h3 id="&#x5220;&#x9664;filter"><a name="&#x5220;&#x9664;filter" class="anchor-navigation-ex-anchor" href="#&#x5220;&#x9664;filter"><i class="fa fa-link" aria-hidden="true"></i></a>1.1.3. &#x5220;&#x9664;filter</h3>
<p>&#x4E0A;&#x9762;&#x521B;&#x5EFA;&#x7684;ingress&#x7684;filter&#x597D;&#x50CF;&#x6CA1;&#x529E;&#x6CD5;&#x5220;, &#x4F46;&#x53EF;&#x4EE5;&#x5220;&#x9664;&#x6574;&#x4E2A;ingress qdisc</p>
<pre class="language-"><code class="lang-sh">/work <span class="token comment"># tc qdisc show dev eth-mgnt</span>
qdisc noqueue <span class="token number">0</span>: root refcnt <span class="token number">2</span>
qdisc ingress ffff: parent ffff:fff1 ----------------

<span class="token comment"># &#x5220;&#x9664;&#x6574;&#x4E2A;qdisc</span>
/work <span class="token comment"># tc qdisc del dev eth-mgnt ingress</span>

<span class="token comment"># &#x5220;&#x9664;&#x540E;filter&#x4E5F;&#x6CA1;&#x4E86;, &#x4E0B;&#x9762;&#x547D;&#x4EE4;&#x8F93;&#x51FA;&#x4E3A;&#x7A7A;</span>
/work <span class="token comment"># tc filter show dev eth-mgnt root</span>
</code></pre>
<h3 id="tc-mirror"><a name="tc-mirror" class="anchor-navigation-ex-anchor" href="#tc-mirror"><i class="fa fa-link" aria-hidden="true"></i></a>1.1.4. tc mirror</h3>
<p>&#x8FD9;&#x91CC;&#x6211;&#x8981;&#x7528;tc mirror&#x529F;&#x80FD;, &#x5728;docker&#x4E2D;, &#x8FDE;&#x63A5;<code>eth-mgnt</code>&#x548C;<code>vmtap0</code></p>
<ul>
<li><code>eth-mgnt</code>&#x662F;docker&#x7684;&#x4E00;&#x4E2A;interface, &#x7C7B;&#x578B;&#x662F;veth</li>
<li><code>vmtap0</code>&#x662F;&#x4E2A;tap, &#x7528;&#x6765;&#x8FDE;&#x63A5;VM</li>
</ul>
<pre class="language-"><code class="lang-sh">tc qdisc <span class="token function">add</span> dev eth-mgnt ingress
tc filter <span class="token function">add</span> dev eth-mgnt parent ffff: protocol all u32 match u8 <span class="token number">0</span> <span class="token number">0</span> action mirred egress redirect dev vmtap0
tc qdisc <span class="token function">add</span> dev vmtap0 ingress
tc filter <span class="token function">add</span> dev vmtap0 parent ffff: protocol all u32 match u8 <span class="token number">0</span> <span class="token number">0</span> action mirred egress redirect dev eth-mgnt
</code></pre>
<h4 id="&#x95EE;&#x9898;&#x89E3;&#x51B3;"><a name="&#x95EE;&#x9898;&#x89E3;&#x51B3;" class="anchor-navigation-ex-anchor" href="#&#x95EE;&#x9898;&#x89E3;&#x51B3;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x95EE;&#x9898;&#x89E3;&#x51B3;</h4>
<p><code>tc qdisc add dev eth-mgnt ingress</code>&#x51FA;&#x9519;, &#x663E;&#x793A;<code>RTNETLINK answers: No such file or directory</code></p>
<p>&#x7F51;&#x4E0A;&#x666E;&#x904D;&#x7684;&#x8BF4;&#x6CD5;&#x662F;<code>modprobe sch_htb</code>&#x6216;&#x8005;<code>modprobe sch_red</code>&#x7B49;, &#x4F46;&#x8BD5;&#x4E86;&#x90FD;&#x4E0D;&#x7BA1;&#x7528;. &#x770B;&#x5230;&#x90FD;&#x662F;<code>sch_*</code>&#x683C;&#x5F0F;&#x7684;, &#x6211;&#x5C31;&#x7D22;&#x6027;&#x505A;&#x4E86;&#x4E2A;&#x641C;&#x7D22;:</p>
<p><img src="img/networking_&#x6742;&#x8BB0;2_20221024153650.png" alt=""><br>&#x53D1;&#x73B0;<code>sch_*</code>&#x8FD8;&#x633A;&#x591A;, &#x603B;&#x4E0D;&#x80FD;&#x4E00;&#x4E2A;&#x4E00;&#x4E2A;&#x8BD5;&#x5427;? &#x540E;&#x8BB0;, &#x6BCF;&#x4E2A;sch&#x90FD;&#x5BF9;&#x5E94;&#x4E00;&#x4E2A;qdisc&#x7684;&#x7B97;&#x6CD5;.</p>
<p>&#x89C2;&#x5BDF;&#x5230;&#x547D;&#x4EE4;&#x91CC;&#x9762;&#x7684;ingress&#x5173;&#x952E;&#x5B57;, &#x770B;&#x5230;&#x8FD8;&#x6709;&#x4E2A;<code>sch_ingress</code>, &#x4E8E;&#x662F;&#x8BD5;&#x8BD5;<code>modprobe sch_ingress</code>, &#x518D;<code>tc qdisc add dev eth-mgnt ingress</code>&#x6210;&#x529F;.</p>
<p>&#x6240;&#x4EE5;, &#x89E3;&#x51B3;&#x65B9;&#x6CD5;:
&#x9700;&#x8981;<code>modprobe sch_ingress</code></p>
<p>&#x540E;&#x9762;&#x7684;&#x547D;&#x4EE4;&#x8FD8;&#x662F;&#x51FA;&#x9519;, <code>tc filter add dev eth-mgnt parent ffff: protocol all u32 match u8 0 0 action mirred egress redirect dev vmtap0</code>, &#x540C;&#x6837;&#x663E;&#x793A;<code>RTNETLINK answers: No such file or directory</code></p>
<p>sch_ingress&#x5DF2;&#x7ECF;&#x52A0;&#x8F7D;, &#x4F46;&#x8FD8;&#x662F;&#x51FA;&#x9519;. &#x90A3;&#x4E48;&#x5E94;&#x8BE5;&#x8FD8;&#x662F;&#x6709;module&#x6CA1;&#x52A0;&#x8F7D;. &#x8FD9;&#x6B21;&#x6765;&#x4E2A;&#x66B4;&#x529B;&#x7684;:</p>
<pre class="language-"><code class="lang-sh"><span class="token comment"># &#x628A;/kernel/net/sched&#x7684;&#x6240;&#x6709;ko&#x90FD;&#x52A0;&#x8F7D;</span>
<span class="token keyword">for</span> <span class="token for-or-select variable">f</span> <span class="token keyword">in</span> /lib/modules/<span class="token variable"><span class="token variable">`</span><span class="token function">uname</span> <span class="token parameter variable">-r</span><span class="token variable">`</span></span>/kernel/net/sched/*<span class="token punctuation">;</span><span class="token keyword">do</span> modprobe <span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">echo</span> <span class="token punctuation">$(</span>basename $f<span class="token punctuation">)</span> <span class="token operator">|</span> <span class="token function">cut</span> <span class="token parameter variable">-d</span> <span class="token string">&apos;.&apos;</span> <span class="token parameter variable">-f1</span><span class="token variable">)</span></span><span class="token punctuation">;</span> <span class="token keyword">done</span>
</code></pre>
<p>&#x518D;&#x6B21;&#x6267;&#x884C;tc filter&#x547D;&#x4EE4;&#x6210;&#x529F;, &#x8BF4;&#x660E;&#x4E4B;&#x524D;&#x786E;&#x5B9E;&#x662F;&#x6709;&#x7684;module&#x6CA1;&#x52A0;&#x8F7D;, &#x8BF4;&#x660E;tc&#x547D;&#x4EE4;&#x9700;&#x8981;&#x591A;&#x4E2A;kernel module.</p>
<p>&#x4F46;&#x603B;&#x4E0D;&#x80FD;&#x628A;&#x6709;&#x7684;&#x6CA1;&#x7684;module&#x90FD;&#x52A0;&#x8F7D;&#x653E;&#x5728;&#x90A3;&#x5427;? &#x6709;&#x6CA1;&#x6709;&#x529E;&#x6CD5;&#x53EA;&#x52A0;&#x8F7D;&#x9700;&#x8981;&#x7684;ko&#x5462;?<br>&#x6709;, &#x5982;&#x4E0B;:</p>
<pre class="language-"><code class="lang-sh"><span class="token comment"># &#x628A;/kernel/net/sched&#x7684;&#x6240;&#x6709;ko&#x90FD;&#x5378;&#x8F7D;, &#x90A3;&#x4E9B;&#x5378;&#x8F7D;&#x4E0D;&#x6389;&#x7684;&#x5C31;&#x662F;&#x9700;&#x8981;&#x7684;.</span>
<span class="token keyword">for</span> <span class="token for-or-select variable">f</span> <span class="token keyword">in</span> /lib/modules/<span class="token variable"><span class="token variable">`</span><span class="token function">uname</span> <span class="token parameter variable">-r</span><span class="token variable">`</span></span>/kernel/net/sched/*<span class="token punctuation">;</span><span class="token keyword">do</span> modprobe <span class="token parameter variable">-r</span> <span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">echo</span> <span class="token punctuation">$(</span>basename $f<span class="token punctuation">)</span> <span class="token operator">|</span> <span class="token function">cut</span> <span class="token parameter variable">-d</span> <span class="token string">&apos;.&apos;</span> <span class="token parameter variable">-f1</span><span class="token variable">)</span></span><span class="token punctuation">;</span> <span class="token keyword">done</span>
</code></pre>
<p>&#x4E0A;&#x9762;&#x547D;&#x4EE4;&#x8F93;&#x51FA;:</p>
<pre class="language-"><code class="lang-sh">modprobe: FATAL: Module act_ife is <span class="token keyword">in</span> use.
modprobe: FATAL: Module act_mirred is <span class="token keyword">in</span> use.
modprobe: FATAL: Module cls_u32 is <span class="token keyword">in</span> use.
modprobe: FATAL: Module sch_ingress is <span class="token keyword">in</span> use.
</code></pre>
<p>&#x6211;&#x4EEC;&#x770B;&#x5230;<code>sch_ingress cls_u32 act_mirred act_ife</code>&#x6B63;&#x5728;&#x88AB;&#x4F7F;&#x7528;, &#x9664;&#x4E86;ife, &#x5176;&#x4ED6;&#x90FD;&#x662F;&#x547D;&#x4EE4;&#x91CC;&#x7684;&#x5173;&#x952E;&#x5B57;.</p>
<p>&#x8865;&#x5145;:&#x5185;&#x6838;&#x9009;&#x9879;:</p>
<pre class="language-"><code class="lang-sh"><span class="token comment">#</span>
<span class="token comment"># QoS and/or fair queueing</span>
<span class="token comment">#</span>
<span class="token assign-left variable">CONFIG_NET_SCHED</span><span class="token operator">=</span>y
<span class="token assign-left variable">CONFIG_NET_SCH_CBQ</span><span class="token operator">=</span>m
<span class="token assign-left variable">CONFIG_NET_SCH_HTB</span><span class="token operator">=</span>m
<span class="token assign-left variable">CONFIG_NET_SCH_CSZ</span><span class="token operator">=</span>m
<span class="token assign-left variable">CONFIG_NET_SCH_PRIO</span><span class="token operator">=</span>m
<span class="token assign-left variable">CONFIG_NET_SCH_RED</span><span class="token operator">=</span>m
<span class="token assign-left variable">CONFIG_NET_SCH_SFQ</span><span class="token operator">=</span>m
<span class="token assign-left variable">CONFIG_NET_SCH_TEQL</span><span class="token operator">=</span>m
<span class="token assign-left variable">CONFIG_NET_SCH_TBF</span><span class="token operator">=</span>m
<span class="token assign-left variable">CONFIG_NET_SCH_GRED</span><span class="token operator">=</span>m
<span class="token assign-left variable">CONFIG_NET_SCH_DSMARK</span><span class="token operator">=</span>m
<span class="token assign-left variable">CONFIG_NET_SCH_INGRESS</span><span class="token operator">=</span>m
<span class="token assign-left variable">CONFIG_NET_QOS</span><span class="token operator">=</span>y
<span class="token assign-left variable">CONFIG_NET_ESTIMATOR</span><span class="token operator">=</span>y
<span class="token assign-left variable">CONFIG_NET_CLS</span><span class="token operator">=</span>y
<span class="token assign-left variable">CONFIG_NET_CLS_TCINDEX</span><span class="token operator">=</span>m
<span class="token assign-left variable">CONFIG_NET_CLS_ROUTE4</span><span class="token operator">=</span>m
<span class="token assign-left variable">CONFIG_NET_CLS_ROUTE</span><span class="token operator">=</span>y
<span class="token assign-left variable">CONFIG_NET_CLS_FW</span><span class="token operator">=</span>m
<span class="token assign-left variable">CONFIG_NET_CLS_U32</span><span class="token operator">=</span>m
<span class="token assign-left variable">CONFIG_NET_CLS_RSVP</span><span class="token operator">=</span>m
<span class="token assign-left variable">CONFIG_NET_CLS_RSVP6</span><span class="token operator">=</span>m
<span class="token assign-left variable">CONFIG_NET_CLS_POLICE</span><span class="token operator">=</span>y
</code></pre>
<h4 id="tc-mirror&#x7279;&#x70B9;"><a name="tc-mirror&#x7279;&#x70B9;" class="anchor-navigation-ex-anchor" href="#tc-mirror&#x7279;&#x70B9;"><i class="fa fa-link" aria-hidden="true"></i></a>tc mirror&#x7279;&#x70B9;</h4>
<p>&#x6211;&#x4EEC;&#x8FD9;&#x91CC;&#x7528;&#x7684;&#x5176;&#x5B9E;&#x4E0D;&#x662F;mirror, &#x800C;&#x662F;redirect.</p>
<pre class="language-"><code>docker0(bridge, 172.100.0.1) <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>--</span><span class="token punctuation">&gt;</span></span> eth-mgmt(veth, no ip, low up) <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>--tc</span> <span class="token attr-name">redirect--</span><span class="token punctuation">&gt;</span></span> vmtap0(tap, no ip, low up) <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>--vmm</span> <span class="token attr-name">forwarding--</span><span class="token punctuation">&gt;</span></span> eth0(in VM, virt-net, 172.100.0.5)
</code></pre><p>&#x6211;&#x5728;VM&#x7684;eth0&#x914D;&#x4E86;IP 172.100.0.5, ping 172.100.0.1&#x53EF;&#x4EE5;ping&#x901A;.<br>&#x4E0B;&#x9762;&#x6211;&#x60F3;&#x770B;&#x770B;tcpdump&#x80FD;&#x4E0D;&#x80FD;&#x5728;<code>eth-mgmt</code>&#x6216;&#x8005;<code>vmtap0</code>&#x4E0A;&#x6293;&#x5230;&#x5305;.<br>&#x6211;&#x731C;&#x4F1A;.</p>
<p>-- &#x6CA1;&#x9519;, tcpdump&#x5728;<code>eth-mgmt</code>&#x548C;<code>vmtap0</code>&#x90FD;&#x80FD;&#x6293;&#x5230;&#x5305;.<br>&#x8BF4;&#x660E;tc ingress&#x4E5F;&#x4F5C;&#x7528;&#x5728;pcap&#x4E4B;&#x540E;.</p>
<p>&#x6211;&#x611F;&#x89C9;&#x7528;socat&#x5728;&#x4E24;&#x4E2A;interface&#x4E4B;&#x95F4;&#x5EFA;&#x7ACB;&#x53CC;&#x5411;&#x8FDE;&#x63A5;&#x4E5F;&#x80FD;&#x8FBE;&#x5230;&#x7C7B;&#x4F3C;&#x6548;&#x679C;. &#x4F46;socat&#x4F1A;&#x5728;&#x7528;&#x6237;&#x6001;&#x8F6C;&#x53D1;&#x4E00;&#x4E0B;, &#x800C;tc mirror&#x662F;&#x5728;&#x5185;&#x6838;&#x6001;&#x76F4;&#x63A5;&#x8F6C;&#x53D1;.</p>
<h4 id="&#x7406;&#x8BBA;&#x57FA;&#x7840;"><a name="&#x7406;&#x8BBA;&#x57FA;&#x7840;" class="anchor-navigation-ex-anchor" href="#&#x7406;&#x8BBA;&#x57FA;&#x7840;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x7406;&#x8BBA;&#x57FA;&#x7840;</h4>
<p>&#x53C2;&#x8003;:</p>
<ul>
<li><code>man tc-mirred</code></li>
<li><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/configuring_and_managing_networking/linux-traffic-control_configuring-and-managing-networking#doc-wrapper" target="_blank">https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/configuring_and_managing_networking/linux-traffic-control_configuring-and-managing-networking#doc-wrapper</a></li>
</ul>
<blockquote>
<p>The mirred action allows packet mirroring (copying) or redirecting (stealing) the packet it receives.</p>
</blockquote>
<p><img src="img/networking_&#x6742;&#x8BB0;2_20221024153841.png" alt="">  </p>
<h4 id="&#x53C2;&#x8003;"><a name="&#x53C2;&#x8003;" class="anchor-navigation-ex-anchor" href="#&#x53C2;&#x8003;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x53C2;&#x8003;</h4>
<p><a href="https://gist.github.com/mcastelino/7d85f4164ffdaf48242f9281bb1d0f9b#file-tc-mirroring-md" target="_blank">https://gist.github.com/mcastelino/7d85f4164ffdaf48242f9281bb1d0f9b#file-tc-mirroring-md</a></p>
<pre class="language-"><code>tc qdisc add dev eth0 ingress
tc filter add dev eth0 parent ffff: protocol all u32 match u8 0 0 action mirred egress redirect dev tap0
tc qdisc add dev tap0 ingress
tc filter add dev tap0 parent ffff: protocol all u32 match u8 0 0 action mirred egress redirect dev eth0
</code></pre><p><code>tc qdisc add dev eth0 ingress</code></p>
<ul>
<li>Add a queuing discipline</li>
<li>on <code>dev eth0</code></li>
<li>attach the <code>ingress qdisc</code> Here the handle defaults to ffff:</li>
</ul>
<p><code>tc filter add dev eth0 parent ffff: protocol all u32 match u8 0 0 action mirred egress redirect dev tap0</code></p>
<ul>
<li>Add a filter</li>
<li>to device <code>dev eth0</code></li>
<li>to parent (class) handle to which we are attaching, ffff: i.e. ingress which we created before (there is no need for <code>tc class add</code> in the ingress case as it does not support classful queuing discplines).</li>
<li>protocol all</li>
<li>classifier u32</li>
<li>parameters to the classifier u8 0 0, and the first byte of the packet with 0 and if the result is 0 (which it always will be) (i.e. always true)</li>
<li>action mirred egress redirect dev eth0, redirect the packet to egress of dev eth0</li>
</ul>
<blockquote>
<p>create a new qdisc called &quot;ingress&quot;. qdiscs normally don&apos;t work on ingress so this is really a special qdisc that you can consider an &quot;alternate root&quot; for inbound packets
add a new filter, and attach it to node &quot;ffff:&quot;. The ID &quot;ffff:&quot; is the fixed ID of the ingress qdisc
we use the &quot;u32&quot; matcher, with arguments &quot;u8 0 0&quot;. This means match any packet where the first byte, when ANDed with the value 0, returns 0. In other words, all packets are selected</p>
<p><a href="https://www.tldp.org/HOWTO/html_single/Traffic-Control-HOWTO/" target="_blank">https://www.tldp.org/HOWTO/html_single/Traffic-Control-HOWTO/</a></p>
<p>A source of terminology confusion is the usage of the terms root qdisc and ingress qdisc. These are not really queuing disciplines, but rather locations onto which traffic control structures can be attached for egress (outbound traffic) and ingress (inbound traffic).</p>
<p>Each interface contains both. The primary and more common is the egress qdisc, known as the root qdisc. It can contain any of the queuing disciplines (qdiscs) with potential classes and class structures. The overwhelming majority of documentation applies to the root qdisc and its children. Traffic transmitted on an interface traverses the egress or root qdisc.</p>
<p>For traffic accepted on an interface, the ingress qdisc is traversed. With its limited utility, it allows no child class to be created, and only exists as an object onto which a filter can be attached. For practical purposes, the ingress qdisc is merely a convenient object onto which to attach a policer to limit the amount of traffic accepted on a network interface.</p>
</blockquote>
<h2 id="traffic-control&#x7406;&#x8BBA;"><a name="traffic-control&#x7406;&#x8BBA;" class="anchor-navigation-ex-anchor" href="#traffic-control&#x7406;&#x8BBA;"><i class="fa fa-link" aria-hidden="true"></i></a>1.2. traffic control&#x7406;&#x8BBA;</h2>
<p>&#x6D41;&#x91CF;&#x63A7;&#x5236;&#x5305;&#x62EC;:</p>
<ul>
<li>&#x6574;&#x5F62;SHAPING: &#x53EA;&#x4F5C;&#x7528;&#x4E8E;egress, &#x63A7;&#x5236;&#x53D1;&#x9001;&#x901F;&#x7387;</li>
<li>&#x8C03;&#x5EA6;SCHEDULING: &#x53EA;&#x4F5C;&#x7528;&#x4E8E;egress, &#x5305;&#x62EC;reordering&#x6216;&#x8005;&#x53EB;prioritizing</li>
<li>&#x7B56;&#x7565;POLICING: &#x53EA;&#x4F5C;&#x7528;&#x4E8E;ingress</li>
<li>&#x4E22;&#x5F03;DROPPING: &#x53EF;&#x4EE5;&#x4F5C;&#x7528;&#x4E8E;ingress&#x548C;egress</li>
</ul>
<p>&#x5177;&#x4F53;&#x6765;&#x8BF4;, tc&#x901A;&#x8FC7;qdisc, class&#x548C;filter&#x6765;&#x63A7;&#x5236;&#x6D41;&#x91CF;</p>
<ul>
<li>qdisc<br>&#x662F;queueing discipline&#x7684;&#x7F29;&#x5199;, &#x662F;tc&#x7684;&#x6838;&#x5FC3;. &#x6BCF;&#x5F53;kernel&#x8981;&#x53D1;&#x9001;&#x4E00;&#x4E2A;&#x62A5;&#x6587;&#x5230;interface, &#x5C31;&#x4F1A;&#x628A;&#x4ED6;&#x653E;&#x5230;&#x4E3A;&#x8FD9;&#x4E2A;interface&#x914D;&#x7F6E;&#x7684;qdisc. &#x968F;&#x540E;kernel&#x9A6C;&#x4E0A;&#x4ECE;&#x8FD9;&#x4E2A;qdisc&#x62FF;&#x5C3D;&#x53EF;&#x80FD;&#x591A;&#x7684;packet, &#x653E;&#x5230;interface&#x7684;&#x9A71;&#x52A8;&#x91CC;.<br>&#x6700;&#x7B80;&#x5355;&#x7684;qdisc&#x662F;pfifo, &#x5148;&#x8FDB;&#x5148;&#x51FA;&#x7684;&#x961F;&#x5217;.</li>
<li>class<br>qdisc&#x53EF;&#x4EE5;&#x5305;&#x62EC;class, class&#x4E0B;&#x9762;&#x53C8;&#x5305;&#x62EC;qdisc, &#x5F62;&#x6210;&#x4E24;&#x7EA7;&#x751A;&#x81F3;&#x591A;&#x7EA7;&#x7684;qdisc. &#x6BD4;&#x5982;&#x4F18;&#x5148;&#x7EA7;&#x7B56;&#x7565;case&#x4E0B;, qdisc&#x53EF;&#x4EE5;&#x5305;&#x62EC;&#x591A;&#x4E2A;class, kernel dequeue(&#x5373;&#x4ECE;qdisc&#x62FF;&#x62A5;&#x6587;&#x53D1;&#x9001;&#x5230;&#x63A5;&#x53E3;)&#x7684;&#x65F6;&#x5019;, &#x6839;&#x636E;&#x914D;&#x7F6E;, &#x53EF;&#x4EE5;&#x5148;&#x4ECE;&#x67D0;&#x4E9B;class&#x4E0B;&#x6302;&#x7684;qdisc&#x62FF;&#x62A5;&#x6587;.</li>
<li>filter<br>&#x5728;&#x6709;class&#x7684;qdisc&#x60C5;&#x51B5;&#x4E0B;, filter&#x51B3;&#x5B9A;&#x4E00;&#x4E2A;&#x62A5;&#x6587;&#x5E94;&#x8BE5;&#x88AB;&#x653E;&#x5230;&#x54EA;&#x4E2A;class. filter&#x53EF;&#x4EE5;&#x6709;&#x591A;&#x4E2A;, &#x6309;&#x987A;&#x5E8F;&#x5339;&#x914D;, &#x76F4;&#x5230;&#x6709;&#x4E2A;filter&#x547D;&#x4E2D;. filter&#x4ECE;&#x5C5E;&#x4E8E;qdisc, &#x7C7B;&#x578B;&#x5305;&#x62EC;:<ul>
<li>basic: &#x57FA;&#x4E8E;&#x8868;&#x8FBE;&#x5F0F;&#x5339;&#x914D;. &#x8BE6;&#x89C1;<code>man tc-ematch</code></li>
<li>bpf: &#x7528;(e)BPF. &#x8BE6;&#x89C1;<code>man tc-bpf</code></li>
<li>cgroup: &#x57FA;&#x4E8E;&#x8FDB;&#x7A0B;&#x7684;cgroup. &#x8BE6;&#x89C1;<code>man tc-cgroup</code></li>
<li>flow, flower: &#x57FA;&#x4E8E;&#x6D41;&#x7684;key. &#x8BE6;&#x89C1;<code>man tc-flow</code> <code>man tc-flower</code></li>
<li>fw: &#x57FA;&#x4E8E;fwmark. &#x8BE6;&#x89C1;<code>man tc-fw</code></li>
<li>route: &#x57FA;&#x4E8E;&#x8DEF;&#x7531;&#x8868;. &#x8BE6;&#x89C1;<code>man tc-route</code></li>
<li>rsvp: Resource Reservation Protocol (RSVP)</li>
<li>tcindex: &#x57FA;&#x4E8E;traffic control index. &#x8BE6;&#x89C1;<code>man tc-tcindex</code></li>
<li>u32: &#x901A;&#x7528;&#x7684;&#x57FA;&#x4E8E;&#x62A5;&#x6587;data&#x7684;&#x8FC7;&#x6EE4;. &#x8BE6;&#x89C1;<code>man tc-u32</code></li>
<li>matchall: &#x5339;&#x914D;&#x4EFB;&#x4F55;&#x4E00;&#x4E2A;&#x62A5;&#x6587;. &#x8BE6;&#x89C1;<code>man tc-matchall</code></li>
</ul>
</li>
</ul>
<h3 id="classless-qdisc-&#x65E0;&#x7C7B;&#x578B;&#x7684;qdisc"><a name="classless-qdisc-&#x65E0;&#x7C7B;&#x578B;&#x7684;qdisc" class="anchor-navigation-ex-anchor" href="#classless-qdisc-&#x65E0;&#x7C7B;&#x578B;&#x7684;qdisc"><i class="fa fa-link" aria-hidden="true"></i></a>1.2.1. classless qdisc &#x65E0;&#x7C7B;&#x578B;&#x7684;qdisc</h3>
<p>qdisc&#x53EF;&#x4EE5;&#x6709;class, &#x4E5F;&#x53EF;&#x4EE5;&#x6CA1;&#x6709;. &#x6CA1;&#x6709;class&#x7684;qdisc&#x6709;&#x5982;&#x4E0B;&#x7C7B;&#x578B;:</p>
<ul>
<li>choke: &#x662F;RED&#x7B97;&#x6CD5;&#x7684;&#x53D8;&#x79CD;. &#x4FDD;&#x7559;&#x6D3B;&#x52A8;&#x7684;flow, kill&#x4E0D;&#x6D3B;&#x8DC3;&#x7684;flow</li>
<li>codel: &#x4E5F;&#x662F;RED&#x7B97;&#x6CD5;&#x7684;&#x53D8;&#x79CD;.</li>
<li>[p|b]fifo: &#x5148;&#x8FDB;&#x5148;&#x51FA;&#x7684;fifo</li>
<li>fq: Fair Queue Scheduler</li>
<li>fq_codel: &#x7ED3;&#x5408;&#x4E86;codel&#x7684;fq</li>
<li>gred: Generalized Random Early Detection, &#x548C;RED&#x7ED3;&#x5408;&#x5B9E;&#x73B0;&#x4E22;&#x5F03;&#x4F18;&#x5148;&#x7EA7;</li>
<li>hhf: Heavy-Hitter  Filter. &#x68C0;&#x6D4B;small flow&#x548C;heavy flow. &#x8BA9;heavy&#x7684;flow&#x4F7F;&#x7528;&#x5355;&#x72EC;&#x7684;queue, &#x4ECE;&#x800C;&#x51CF;&#x5C0F;&#x5BF9;&#x5EF6;&#x8FDF;&#x654F;&#x611F;&#x7684;small flow&#x7684;&#x5EF6;&#x8FDF;.</li>
<li>ingress: ingress&#x662F;&#x4E2A;&#x7279;&#x6B8A;&#x7684;qdisc, &#x5B83;&#x4F5C;&#x7528;&#x4E8E;&#x5230;interface&#x7684;incoming&#x62A5;&#x6587;</li>
<li>mqprio: Multiqueue Priority Qdisc. 1:1&#x7684;&#x4F18;&#x5148;&#x7EA7;&#x961F;&#x5217;mapping&#x5230;&#x786C;&#x4EF6;&#x7684;queue</li>
<li>multiq: &#x4F5C;&#x7528;&#x4E8E;&#x6709;&#x591A;tx queue&#x7684;&#x786C;&#x4EF6;</li>
<li>netem: Network Emulator, &#x53EF;&#x4EE5;&#x52A0;delay, &#x4E22;&#x5305;, &#x590D;&#x5236;&#x7B49;&#x52A8;&#x4F5C;&#x5230;&#x51FA;&#x7AEF;&#x53E3;</li>
<li>pfifo_fast: Standard qdisc for &apos;Advanced Router&apos; enabled kernels</li>
<li>pie: Proportional Integral controller-Enhanced (PIE). &#x76EE;&#x6807;&#x662F;&#x63A7;&#x5236;delay</li>
<li>red: Random  Early  Detection. &#x5F53;&#x5FEB;&#x63A5;&#x8FD1;&#x914D;&#x7F6E;&#x7684;&#x5E26;&#x5BBD;&#x65F6;&#x968F;&#x673A;&#x4E22;&#x5305;</li>
<li>sfb: &#x548C;red&#x7B97;&#x6CD5;&#x4E0D;&#x540C;&#x4F46;&#x4E5F;&#x662F;&#x4E3A;&#x4E86;&#x5E26;&#x5BBD;&#x63A7;&#x5236;&#x7684;&#x4E00;&#x4E2A;&#x7B97;&#x6CD5;.</li>
<li>sfq: Stochastic Fairness Queueing</li>
<li>tbf: Token Bucket Filter. &#x63A7;&#x5236;rate&#x7684;.</li>
</ul>
<p>&#x65E0;&#x7C7B;&#x578B;&#x7684;qdisc&#x53EA;&#x80FD;&#x88AB;&#x6DFB;&#x52A0;&#x5230;&#x8BBE;&#x5907;&#x7684;root. &#x8BED;&#x6CD5;&#x662F;</p>
<pre class="language-"><code class="lang-sh">tc qdisc <span class="token function">add</span> dev DEV root QDISC QDISC-PARAMETERS
tc qdisc del dev DEV root
</code></pre>
<p>default&#x662F;pfifo_fast.
&#x6CE8;: &#x6211;&#x5728;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x7528;<code>tc qdisc</code>&#x770B;&#x5230;&#x4E00;&#x822C;&#x7684;qdisc&#x9ED8;&#x8BA4;&#x662F;noqueue.</p>
<h3 id="classfull-qdisc"><a name="classfull-qdisc" class="anchor-navigation-ex-anchor" href="#classfull-qdisc"><i class="fa fa-link" aria-hidden="true"></i></a>1.2.2. classfull qdisc</h3>
<p>&#x6709;&#x7C7B;&#x578B;&#x7684;qdisc&#x4E5F;&#x6709;&#x5F88;&#x591A;&#x7C7B;&#x578B;:</p>
<ul>
<li>ATM: Map flows to virtual circuits</li>
<li>CBQ: Class Based Queueing. &#x57FA;&#x4E8E;&#x5C42;&#x7EA7;&#x7684;class. &#x652F;&#x6301;shaping&#x548C;&#x4F18;&#x5148;&#x7EA7;&#x5C5E;&#x6027;.</li>
<li>DRR: Deficit  Round  Robin Scheduler</li>
<li>DSMARK: Classify packets based on TOS field</li>
<li>HFSC:  Hierarchical  Fair  Service  Curve. &#x5C42;&#x7EA7;&#x7684;&#x5BF9;&#x6BCF;&#x4E2A;&#x8282;&#x70B9;&#x5E26;&#x5BBD;&#x63A7;&#x5236;&#x7684;&#x7B97;&#x6CD5;</li>
<li>HTB: Hierarchy Token Bucket</li>
<li>PRIO: &#x4F18;&#x5148;&#x7EA7;</li>
<li>QFQ: Quick Fair Queueing. &#x7B97;&#x6CD5;&#x590D;&#x6742;&#x5EA6;O(1)</li>
</ul>
<h3 id="class&#x6811;"><a name="class&#x6811;" class="anchor-navigation-ex-anchor" href="#class&#x6811;"><i class="fa fa-link" aria-hidden="true"></i></a>1.2.3. class&#x6811;</h3>
<p>class&#x662F;&#x4E2A;&#x591A;&#x53C9;&#x6811;. &#x6709;&#x4E9B;&#x7B97;&#x6CD5;&#x652F;&#x6301;&#x52A8;&#x6001;&#x6DFB;&#x52A0;&#x5220;&#x9664;class, &#x6BD4;&#x5982;CBQ,  HTB; &#x6709;&#x7684;&#x7B97;&#x6CD5;&#x53EA;&#x80FD;&#x9884;&#x5B9A;&#x4E49;&#x6811;, &#x6BD4;&#x5982;PRIO<br>When a packet enters a classful qdisc it can be classified to one of the classes within.<br>&#x7528;&#x5982;&#x4E0B;3&#x79CD;&#x65B9;&#x5F0F;&#x6765;&#x505A;&#x5206;&#x7C7B;</p>
<ul>
<li>tc filters: &#x5982;&#x679C;&#x8FD9;&#x4E2A;class&#x6709;tc filter, &#x9996;&#x5148;&#x505A;tc filter&#x5206;&#x7C7B;</li>
<li>Type of Service: &#x6709;&#x4E9B;&#x7B97;&#x6CD5;&#x6709;&#x5185;&#x7F6E;&#x7684;&#x89C4;&#x5219;classifying packets based on the TOS field</li>
<li>skb-&gt;priority: &#x7528;&#x6237;&#x7A0B;&#x5E8F;&#x53EF;&#x4EE5;&#x7528;SO_PRIORITY&#x7ED9;&#x62A5;&#x6587;&#x6DFB;&#x52A0;&#x4F18;&#x5148;&#x7EA7;</li>
</ul>
<h3 id="&#x547D;&#x540D;&#x60EF;&#x4F8B;&#x548C;&#x53C2;&#x6570;&#x60EF;&#x4F8B;"><a name="&#x547D;&#x540D;&#x60EF;&#x4F8B;&#x548C;&#x53C2;&#x6570;&#x60EF;&#x4F8B;" class="anchor-navigation-ex-anchor" href="#&#x547D;&#x540D;&#x60EF;&#x4F8B;&#x548C;&#x53C2;&#x6570;&#x60EF;&#x4F8B;"><i class="fa fa-link" aria-hidden="true"></i></a>1.2.4. &#x547D;&#x540D;&#x60EF;&#x4F8B;&#x548C;&#x53C2;&#x6570;&#x60EF;&#x4F8B;</h3>
<p>qdiscs, classes and filters&#x90FD;&#x6709;&#x6307;&#x5B9A;&#x6216;&#x8005;&#x81EA;&#x52A8;&#x5206;&#x914D;&#x7684;ID, &#x683C;&#x5F0F;major:minor</p>
<ul>
<li>qdisc&#x53EF;&#x80FD;&#x6709;&#x5B69;&#x5B50;&#x8282;&#x70B9;, &#x5B83;&#x7684;ID&#x88AB;&#x79F0;&#x4E3A;handle</li>
<li>&#x5728;&#x540C;&#x4E00;&#x4E2A;qdisc&#x4E0B;&#x9762;&#x7684;class&#x5171;&#x4EAB;&#x4E00;&#x4E2A;major ID, &#x4F46;minor ID&#x4E0D;&#x540C;</li>
</ul>
<p>tc&#x5E38;&#x7528;&#x7684;&#x53C2;&#x6570;&#x60EF;&#x4F8B;:
&#x6BD4;&#x5982;, kbit mbit gbit mbps ms&#x7B49;</p>
<h1 id="raw-socket"><a name="raw-socket" class="anchor-navigation-ex-anchor" href="#raw-socket"><i class="fa fa-link" aria-hidden="true"></i></a>2. raw socket</h1>
<p><code>man packet</code></p>
<ul>
<li><p>&#x7EAF;&#x6B63;&#x7684;raw socket. SOCK_RAW&#x662F;&#x8981;&#x81EA;&#x5DF1;&#x7EC4;&#x4E8C;&#x5C42;&#x5934;&#x7684;, &#x9A71;&#x52A8;&#x4E0D;&#x4F1A;&#x68C0;&#x67E5;&#x62A5;&#x6587;, &#x76F4;&#x63A5;&#x53D1;&#x9001;&#x51FA;&#x53BB;.<br><code>packet_socket = socket(AF_PACKET, SOCK_RAW, int protocol)</code></p>
</li>
<li><p>&#x4E5F;&#x53EF;&#x4EE5;&#x7528;SOCK_DGRAM, &#x4E8C;&#x5C42;&#x5934;&#x4F1A;&#x88AB;&#x81EA;&#x52A8;&#x52A0;&#x4E0A;&#x5728;&#x53D1;&#x9001;.<br><code>packet_socket = socket(AF_PACKET, SOCK_DGRAM, int protocol)</code></p>
</li>
<li><p>AF_INET&#x7C7B;&#x578B;&#x7684;raw socket&#x662F;&#x9700;&#x8981;IP&#x7684;<br><code>raw_socket = socket(AF_INET, SOCK_RAW, int protocol);</code></p>
</li>
</ul>
<h1 id="linux&#x62A5;&#x6587;&#x6D41;&#x7A0B;"><a name="linux&#x62A5;&#x6587;&#x6D41;&#x7A0B;" class="anchor-navigation-ex-anchor" href="#linux&#x62A5;&#x6587;&#x6D41;&#x7A0B;"><i class="fa fa-link" aria-hidden="true"></i></a>3. linux&#x62A5;&#x6587;&#x6D41;&#x7A0B;</h1>
<p><img src="img/networking_&#x6742;&#x8BB0;2_20221024154027.png" alt="">  </p>
<h2 id="iptable&#x56DB;&#x8868;&#x4E94;&#x94FE;"><a name="iptable&#x56DB;&#x8868;&#x4E94;&#x94FE;" class="anchor-navigation-ex-anchor" href="#iptable&#x56DB;&#x8868;&#x4E94;&#x94FE;"><i class="fa fa-link" aria-hidden="true"></i></a>3.1. iptable&#x56DB;&#x8868;&#x4E94;&#x94FE;</h2>
<h3 id="&#x56DB;&#x8868;"><a name="&#x56DB;&#x8868;" class="anchor-navigation-ex-anchor" href="#&#x56DB;&#x8868;"><i class="fa fa-link" aria-hidden="true"></i></a>3.1.1. &#x56DB;&#x8868;</h3>
<ul>
<li>Raw&#x8868;&#x2014;&#x2014;&#x5173;&#x95ED;&#x8FDE;&#x63A5;&#x8FFD;&#x8E2A;&#x673A;&#x5236;&#x3002;&#x7528;&#x5728;prerouting&#xFF0C;output&#x94FE;&#x4E0A;&#x3002;</li>
<li>Mangle&#x8868;&#x2014;&#x2014;&#x62C6;&#x89E3;&#x62A5;&#x6587;&#xFF0C;&#x5206;&#x6790;&#x62A5;&#x6587;&#xFF0C;&#x4FEE;&#x6539;&#x62A5;&#x6587;&#x3002;&#x7528;&#x5728;prerouting&#xFF0C;input&#xFF0C;forward&#xFF0C;output&#xFF0C;postrouting&#x94FE;&#x8DEF;&#x4E0A;&#x3002;</li>
<li>Nat&#x8868;&#x2014;&#x2014;&#x7F51;&#x7EDC;&#x5730;&#x5740;&#x8F6C;&#x6362;&#xFF0C;&#x7528;&#x5728;prerouting&#xFF0C;output&#xFF0C;postrouting&#x94FE;&#x8DEF;&#x4E0A;&#x3002;</li>
<li>Filter&#x8868;&#x2014;&#x2014;&#x8D1F;&#x8D23;&#x8FC7;&#x6EE4;&#x529F;&#x80FD;&#xFF0C;&#x7528;&#x5728;input&#xFF0C;forward&#xFF0C;output&#x94FE;&#x8DEF;&#x4E0A;&#x3002;</li>
</ul>
<p><strong>&#x6BCF;&#x4E2A;&#x8868;&#x4F18;&#x5148;&#x7EA7;&#xFF1A;</strong>
<strong>Raw&#x2014;&gt;Mangle&#x2014;&gt;Nat&#x2014;&gt;Filter</strong></p>
<h3 id="&#x4E94;&#x94FE;"><a name="&#x4E94;&#x94FE;" class="anchor-navigation-ex-anchor" href="#&#x4E94;&#x94FE;"><i class="fa fa-link" aria-hidden="true"></i></a>3.1.2. &#x4E94;&#x94FE;</h3>
<ul>
<li>input&#x2014;&#x2014;&#x8FDB;&#x6765;&#x7684;&#x6570;&#x636E;&#x5305;&#x5E94;&#x7528;&#x6B64;&#x89C4;&#x5219;&#x94FE;&#x4E2D;&#x7684;&#x7B56;&#x7565;&#xFF08;&#x7ECF;&#x8FC7;&#x4E86;&#x7B2C;&#x4E00;&#x6B21;&#x8DEF;&#x7531;&#x9009;&#x62E9;&#x7684;&#x6570;&#x636E;&#x5305;&#xFF09;&#x76EE;&#x7684;IP&#x5728;&#x8DEF;&#x7531;&#x5668;&#x4E0A;</li>
<li>output&#x2014;&#x2014;&#x5916;&#x51FA;&#x7684;&#x6570;&#x636E;&#x5305;&#x5E94;&#x7528;&#x6B64;&#x89C4;&#x5219;&#x94FE;&#x4E2D;&#x7684;&#x7B56;&#x7565;&#xFF08;&#x7ECF;&#x8FC7;&#x4E86;&#x7B2C;&#x4E8C;&#x6B21;&#x8DEF;&#x7531;&#x9009;&#x62E9;&#x7684;&#x6570;&#x636E;&#x5305;&#xFF09;&#x4ECE;&#x8DEF;&#x7531;&#x5668;&#x51FA;&#x53BB;&#x7684;</li>
<li>forward&#x2014;&#x2014;&#x8F6C;&#x53D1;&#x6570;&#x636E;&#x5305;&#x65F6;&#x5E94;&#x7528;&#x6B64;&#x89C4;&#x5219;&#x94FE;&#x4E2D;&#x7684;&#x7B56;&#x7565;&#xFF08;&#x7ECF;&#x8FC7;&#x4E86;&#x7B2C;&#x4E00;&#x6B21;&#x8DEF;&#x7531;&#x9009;&#x62E9;&#x7684;&#x6570;&#x636E;&#x5305;&#xFF09;&#x6570;&#x636E;&#x5305;&#x6E90;IP&#x548C;&#x76EE;&#x7684;IP&#x90FD;&#x4E0D;&#x5728;&#x8DEF;&#x7531;&#x5668;&#x4E0A;&#x7684;</li>
<li>prerouting&#x2014;&#x2014;&#x5BF9;&#x8FDB;&#x6765;&#x7684;&#x6570;&#x636E;&#x5305;&#x4F5C;&#x8DEF;&#x7531;&#x9009;&#x62E9;&#x524D;&#x5E94;&#x7528;&#x6B64;&#x94FE;&#x4E2D;&#x7684;&#x89C4;&#x5219;&#xFF08;&#x8FD8;&#x6CA1;&#x6709;&#x7ECF;&#x8FC7;&#x4EFB;&#x4F55;&#x8DEF;&#x7531;&#x9009;&#x62E9;&#x7684;&#x6240;&#x6709;&#x6570;&#x636E;&#x5305;&#x8FDB;&#x6765;&#x7684;&#x65F6;&#x4FAF;&#x90FD;&#x5148;&#x7531;&#x8FD9;&#x4E2A;&#x94FE;&#x5904;&#x7406;&#xFF09;&#x5916;&#x9762;&#x8FDB;&#x6765;&#x8DEF;&#x7531;&#x5668;&#x63A5;&#x53E3;&#x7684;&#x6570;&#x636E;&#x5305;</li>
<li>postrouting&#x2014;&#x2014;&#x5BF9;&#x51FA;&#x53BB;&#x7684;&#x6570;&#x636E;&#x5305;&#x4F5C;&#x8DEF;&#x7531;&#x9009;&#x62E9;&#x540E;&#x5E94;&#x7528;&#x6B64;&#x94FE;&#x4E2D;&#x7684;&#x89C4;&#x5219;&#xFF08;&#x7ECF;&#x8FC7;&#x4E86;&#x6240;&#x6709;&#x7684;&#x8DEF;&#x7531;&#x9009;&#x62E9;&#x7684;&#x6240;&#x6709;&#x6570;&#x636E;&#x5305;&#x51FA;&#x6765;&#x7684;&#x65F6;&#x4FAF;&#x90FD;&#x5148;&#x7531;&#x8FD9;&#x4E2A;&#x94FE;&#x5904;&#x7406;&#xFF09;&#x8DEF;&#x7531;&#x5668;&#x4ECE;&#x63A5;&#x53E3;&#x9001;&#x51FA;&#x53BB;&#x7684;&#x6570;&#x636E;&#x5305;</li>
</ul>
<h3 id="&#x5173;&#x7CFB;"><a name="&#x5173;&#x7CFB;" class="anchor-navigation-ex-anchor" href="#&#x5173;&#x7CFB;"><i class="fa fa-link" aria-hidden="true"></i></a>3.1.3. &#x5173;&#x7CFB;</h3>
<p><img src="img/networking_&#x6742;&#x8BB0;2_20221024154102.png" alt=""><br><strong>&#x4E3A;&#x4EC0;&#x4E48;&#x8981;&#x5224;&#x65AD;&#x4E24;&#x6B21;&#x8DEF;&#x7531;&#x5462;&#xFF1F;</strong></p>
<p>&#x5176;&#x5B9E;&#x8DEF;&#x7531;&#x662F;&#x5224;&#x65AD;&#x8FD9;&#x4E2A;&#x6570;&#x636E;&#x4ECE;&#x54EA;&#x91CC;&#x6765;&#x5230;&#x54EA;&#x91CC;&#x53BB;&#xFF0C;&#x8981;&#x4E0D;&#x8981;&#x8DEF;&#x7531;&#x5668;&#x51FA;&#x624B;&#x5E72;&#x6D3B;&#xFF0C;&#x53EF;&#x4EE5;&#x8FD9;&#x4E48;&#x7406;&#x89E3;:</p>
<p>A.&#x7F51;&#x5173;IP&#x662F;&#x8DEF;&#x7531;&#x5668;&#xFF0C;&#x4F46;&#x662F;&#x4E0D;&#x9700;&#x8981;&#x5185;&#x6838;&#x5904;&#x7406;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x5982;&#x5185;&#x7F51;&#x5BF9;&#x5185;&#x7F51;&#xFF0C;&#x53EA;&#x8981;&#x7ECF;&#x8FC7;&#x4E00;&#x6B21;&#x5224;&#x65AD;&#x5C31;&#x4E00;&#x6761;&#x76F4;&#x7EBF;&#x4F20;&#x51FA;&#x53BB;&#x4E86;&#x3002;</p>
<p>B.&#x76EE;&#x7684;IP&#x662F;&#x8DEF;&#x7531;&#x5668;&#xFF0C;&#x4E14;&#x9700;&#x8981;&#x5185;&#x6838;&#x5904;&#x7406;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x5982;&#x5185;&#x7F51;&#x5BF9;&#x516C;&#x7F51;&#x3001;&#x516C;&#x7F51;&#x5BF9;&#x5185;&#x7F51;&#xFF0C;&#x90FD;&#x8981;&#x62D0;&#x4E2A;&#x5F2F;&#x5904;&#x7406;&#x3002;&#x56E0;&#x4E3A;&#x6D89;&#x53CA;&#x4FEE;&#x6539;IP&#x6570;&#x636E;&#x7684;&#x5904;&#x7406;&#x3002;</p>
<p>&#x6240;&#x4EE5;&#xFF0C;&#x7B2C;&#x4E00;&#x6B21;&#x662F;&#x5224;&#x65AD;&#x662F;&#x5426;&#x8981;&#x8DEF;&#x7531;&#x5668;&#x51FA;&#x624B;&#x5904;&#x7406;&#xFF0C;&#x7B2C;&#x4E8C;&#x6B21;&#x662F;&#x4FEE;&#x6539;&#x5B8C;IP&#x6570;&#x636E;&#x4E4B;&#x540E;&#x51B3;&#x5B9A;&#x5F80;&#x54EA;&#x4E2A;&#x63A5;&#x53E3;&#xFF08;&#x7F51;&#x5173;&#xFF09;&#x4E0A;&#x9762;&#x9001;&#x6570;&#x636E;.</p>
<h1 id="ebtables"><a name="ebtables" class="anchor-navigation-ex-anchor" href="#ebtables"><i class="fa fa-link" aria-hidden="true"></i></a>4. ebtables</h1>
<p>ebtables&#x662F;&#x914D;&#x7F6E;&#x7F51;&#x6865;&#x89C4;&#x5219;&#x7684;, &#x548C;iptable&#x7C7B;&#x4F3C;. &#x597D;&#x50CF;&#x9ED8;&#x8BA4;&#x662F;&#x7A7A;&#x89C4;&#x5219;</p>
<p><a href="http://www.microhowto.info/troubleshooting/troubleshooting_ethernet_bridging_on_linux.html" title="http://www.microhowto.info/troubleshooting/troubleshooting_ethernet_bridging_on_linux.html" target="_blank">http://www.microhowto.info/troubleshooting/troubleshooting_ethernet_bridging_on_linux.html</a></p>
<h1 id="&#x8F6C;&#x53D1;&#x8868;fib&#x548C;&#x8DEF;&#x7531;&#x8868;&#x7684;&#x533A;&#x522B;"><a name="&#x8F6C;&#x53D1;&#x8868;fib&#x548C;&#x8DEF;&#x7531;&#x8868;&#x7684;&#x533A;&#x522B;" class="anchor-navigation-ex-anchor" href="#&#x8F6C;&#x53D1;&#x8868;fib&#x548C;&#x8DEF;&#x7531;&#x8868;&#x7684;&#x533A;&#x522B;"><i class="fa fa-link" aria-hidden="true"></i></a>5. &#x8F6C;&#x53D1;&#x8868;(FIB)&#x548C;&#x8DEF;&#x7531;&#x8868;&#x7684;&#x533A;&#x522B;</h1>
<p>1.&#x8DEF;&#x7531;&#x8868;<br>&#x3000;&#x3000;&#x8DEF;&#x7531;&#x4FE1;&#x606F;&#x6700;&#x7EC8;&#x8981;&#x5B58;&#x50A8;&#x5728;&#x7528;&#x4E8E;&#x8DEF;&#x7531;&#x5668;&#x7684;&#x4E3B;&#x673A;&#x6216;&#x8005;&#x4E13;&#x4E1A;&#x8DEF;&#x7531;&#x5668;&#x4E0A;&#xFF0C;&#x5B58;&#x653E;&#x8FD9;&#x4E9B;&#x4FE1;&#x606F;&#x7684;&#x5730;&#x65B9;&#x79F0;&#x4E3A;&#x8DEF;&#x7531;&#x8868;&#x3002;&#x5176;&#x4E2D;&#x5305;&#x542B;&#x4E09;&#x5143;&#x7D20;&#xFF1A;&#x76EE;&#x6807;&#x5730;&#x5740;&#xFF0C;&#x63A9;&#x7801;&#xFF0C;&#x4E0B;&#x4E00;&#x8DF3;&#x3002;<br>&#x3000;&#x3000;1.1.&#x67E5;&#x8BE2;&#x8DEF;&#x7531;&#x8868;&#x7684;&#x5F00;&#x9500;<br>&#x3000;&#x3000;&#x6709;&#x4EBA;&#x8BA4;&#x4E3A;&#x67E5;&#x8BE2;&#x8DEF;&#x7531;&#x8868;&#x662F;&#x4E00;&#x4EF6;&#x548C;&#x4EA4;&#x6362;&#x673A;&#x67E5;&#x8BE2;MAC&#x5730;&#x5740;&#x4E00;&#x6837;&#x7684;&#x4E8B;&#xFF0C;&#x90A3;&#x5C31;&#x5927;&#x9519;&#x7279;&#x9519;&#x4E86;&#xFF0C;&#x67E5;&#x8BE2;MAC&#x5730;&#x5740;/&#x7AEF;&#x53E3;&#x5BF9;&#x662F;&#x4E00;&#x79CD;&#x56FA;&#x5B9A;&#x7684;&#x6570;&#x636E;&#x67E5;&#x627E;&#xFF0C;MAC&#x5730;&#x5740;&#x90FD;&#x662F;&#x56FA;&#x5B9A;&#x7684;48&#x5B57;&#x8282;&#xFF0C;&#x800C;IP&#x5730;&#x5740;&#x5462;&#xFF0C;&#x81EA;&#x4ECE;CIDR&#x51FA;&#x73B0;&#x4EE5;&#x540E;&#xFF0C;&#x5730;&#x5740;&#x6210;&#x4E86;&#x201C;&#x65E0;&#x7C7B;&#x201D;&#x7684;&#x4E86;&#xFF0C;&#x56E0;&#x6B64;&#x4EFB;&#x610F;&#x4F4D;&#x7684;&#x63A9;&#x7801;&#x90FD;&#x80FD;&#x6210;&#x4E3A;&#x6B63;&#x786E;&#x7684;&#x63A9;&#x7801;&#xFF0C;&#x53E6;&#x5916;&#xFF0C;&#x806A;&#x660E;&#x7684;&#x7BA1;&#x7406;&#x5458;&#x60F3;&#x51FA;&#x4E86;&#x8DEF;&#x7531;&#x6C47;&#x805A;&#xFF0C;&#x8FD9;&#x4E9B;&#x5BB6;&#x4F19;&#x5C06;&#x8D1F;&#x62C5;&#x8F6C;&#x5AC1;&#x7ED9;&#x4E86;&#x7CFB;&#x7EDF;&#x7684;&#x5B9E;&#x73B0;&#x8005;&#xFF0C;&#x4ECE;&#x800C;&#x7CFB;&#x7EDF;&#x5B9E;&#x73B0;&#x8005;&#x5FC5;&#x987B;&#x5B9E;&#x73B0;&#x201C;&#x6700;&#x957F;&#x63A9;&#x7801;&#x201D;&#x5339;&#x914D;&#xFF0C;&#x65E2;&#x7136;&#x63A9;&#x7801;&#x662F;&#x4E0D;&#x56FA;&#x5B9A;&#x7684;&#xFF0C;&#x56E0;&#x6B64;&#x67E5;&#x8BE2;&#x5C31;&#x662F;&#x4E0D;&#x56FA;&#x5B9A;&#x7684;&#xFF0C;&#x8FD9;&#x662F;&#x5F88;&#x9EBB;&#x70E6;&#x7684;&#x4E8B;&#x3002;<br>&#x3000;&#x3000;2.&#x8F6C;&#x53D1;&#x8868;<br>&#x3000;&#x3000;&#x6570;&#x636E;&#x5305;&#x5230;&#x8FBE;&#x8DEF;&#x7531;&#x5668;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x8981;&#x6839;&#x636E;&#x201C;&#x6307;&#x793A;&#x201D;&#x524D;&#x5F80;&#x7279;&#x5B9A;&#x7684;&#x7AEF;&#x53E3;&#xFF0C;&#x7C7B;&#x4F3C;&#x4EA4;&#x6362;&#x673A;&#x7684;&#x5730;&#x5740;&#x4FE1;&#x606F;&#x8868;&#xFF0C;&#x8DEF;&#x7531;&#x5668;&#x4E0A;&#x5B58;&#x653E;&#x8FD9;&#x4E2A;&#x201C;&#x6307;&#x793A;&#x201D;&#x7684;&#x5730;&#x65B9;&#x53EB;&#x505A;&#x8F6C;&#x53D1;&#x8868;<br>&#x3000;&#x3000;3.&#x4E24;&#x4E2A;&#x8868;&#x7684;&#x5173;&#x7CFB;<br>&#x3000;&#x3000;3.1.&#x8054;&#x7CFB;<br>&#x3000;&#x3000;&#x8F6C;&#x53D1;&#x8868;&#x76F4;&#x63A5;&#x4F5C;&#x7528;&#x4E8E;&#x6570;&#x636E;&#x5305;&#xFF0C;&#x800C;&#x8DEF;&#x7531;&#x8868;&#x662F;&#x8F6C;&#x53D1;&#x8868;&#x751F;&#x6210;&#x7684;&#x4F9D;&#x636E;&#xFF0C;&#x8F6C;&#x53D1;&#x8868;&#x901A;&#x8FC7;&#x8DEF;&#x7531;&#x8868;&#x751F;&#x6210;&#x3002;&#x4E00;&#x4E2A;&#x7279;&#x5B9A;&#x7684;&#x8FDB;&#x7A0B;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x4F7F;&#x7528;&#x8DEF;&#x7531;&#x8868;&#x4E2D;&#x7684;&#x4FE1;&#x606F;&#xFF0C;&#x52A0;&#x4E0A;&#x81EA;&#x8EAB;&#x7684;&#x4E3B;&#x673A;&#x65B9;&#x9762;&#x7684;&#x4FE1;&#x606F;-&#x6BD4;&#x5982;&#x7F51;&#x5361;&#x7B49;&#x4FE1;&#x606F;-&#x52A0;&#x4EE5;&#x7EFC;&#x5408;&#xFF0C;&#x5F97;&#x5230;&#x4E00;&#x5F20;&#x8F6C;&#x53D1;&#x8868;&#x3002;&#x8DEF;&#x7531;&#x4FE1;&#x606F;&#x548C;&#x4E3B;&#x673A;&#x662F;&#x6CA1;&#x6709;&#x4EFB;&#x4F55;&#x5173;&#x7CFB;&#x7684;&#xFF0C;&#x5B83;&#x53EA;&#x63CF;&#x8FF0;&#x7F51;&#x7EDC;&#x94FE;&#x8DEF;&#x72B6;&#x6001;&#x548C;&#x65B9;&#x5411;&#x3002;<br>&#x3000;&#x3000;3.2.&#x533A;&#x522B;<br>&#x3000;&#x3000;&#x4E24;&#x8868;&#x5B58;&#x50A8;&#x7684;&#x4FE1;&#x606F;&#x662F;&#x4E0D;&#x540C;&#x7684;&#xFF0C;&#x8DEF;&#x7531;&#x8868;&#x53EA;&#x5B58;&#x50A8;&#x4E09;&#x5143;&#x7D20;-&#x76EE;&#x6807;&#xFF0C;&#x63A9;&#x7801;&#xFF0C;&#x4E0B;&#x4E00;&#x8DF3;&#xFF1B;&#x800C;&#x8F6C;&#x53D1;&#x8868;&#x5B58;&#x50A8;&#x66F4;&#x8BE6;&#x7EC6;&#x7684;&#x4FE1;&#x606F;&#xFF0C;&#x6BD4;&#x5982;&#x8F93;&#x51FA;&#x7AEF;&#x53E3;&#x4FE1;&#x606F;&#xFF0C;&#x6BD4;&#x5982;&#x6807;&#x8BB0;&#x4FE1;&#x606F;&#x7B49;&#x3002;&#x8F6C;&#x53D1;&#x8868;&#x63CF;&#x8FF0;&#x4E86;&#x4E3B;&#x673A;&#x65B9;&#x9762;&#x7684;&#x4FE1;&#x606F;&#xFF0C;&#x5728;&#x4E3B;&#x673A;&#x5185;&#x90E8;&#x5C06;&#x4E00;&#x4E2A;&#x6570;&#x636E;&#x5305;&#x4ECE;&#x4E00;&#x4E2A;&#x7AEF;&#x53E3;&#x5BFC;&#x5411;&#x53E6;&#x4E00;&#x7AEF;&#x53E3;&#xFF0C;&#x800C;&#x8DEF;&#x7531;&#x8868;&#x63CF;&#x8FF0;&#x7F51;&#x7EDC;&#x4FE1;&#x606F;&#xFF0C;&#x5C06;&#x6570;&#x636E;&#x5305;&#x4ECE;&#x4E00;&#x4E2A;&#x673A;&#x5668;&#x5BFC;&#x5411;&#x53E6;&#x4E00;&#x673A;&#x5668;&#x3002;<br>&#x3000;&#x3000;4.&#x8BEF;&#x533A;<br>&#x3000;&#x3000;&#x5F53;&#x524D;&#x5F88;&#x591A;&#x4EBA;&#x90FD;&#x61C2;&#x4E00;&#x4E2A;&#x7CFB;&#x7EDF;&#x7684;&#x5B9E;&#x73B0;&#xFF0C;&#x8FD9;&#x4E9B;&#x4EBA;&#x4E0D;&#x5916;&#x4E4E;3&#x7C7B;&#xFF0C;&#x7B2C;&#x4E00;&#x7C7B;&#x7CBE;&#x901A;linux&#x5185;&#x6838;&#xFF0C;&#x7B2C;&#x4E8C;&#x7C7B;&#x7CBE;&#x901A;Cisco&#x8BBE;&#x5907;&#x7684;&#x914D;&#x7F6E;&#xFF0C;&#x7B2C;&#x4E09;&#x7C7B;&#x7CBE;&#x901A;Windows&#x7F51;&#x7EDC;&#x7F16;&#x7A0B;&#x4EE5;&#x53CA;NDIS&#x3002;&#x4E09;&#x7C7B;&#x4EBA;&#x4E00;&#x822C;&#x7684;&#x4EA4;&#x96C6;&#x5F88;&#x5C11;&#xFF0C;&#x56E0;&#x6B64;&#x5927;&#x90E8;&#x5206;&#x719F;&#x6089;Linux&#x5185;&#x6838;&#x7684;&#x4EBA;&#x90FD;&#x4E0D;&#x4F1A;&#x53BB;&#x533A;&#x5206;&#x8DEF;&#x7531;&#x8868;&#x548C;&#x8F6C;&#x53D1;&#x8868;&#xFF0C;&#x56E0;&#x4E3A;Linux&#x5185;&#x6838;&#x672C;&#x8EAB;&#x5C31;&#x4E0D;&#x533A;&#x5206;&#x8FD9;&#x4E24;&#x4E2A;&#x8868;&#xFF0C;&#x6BCF;&#x5230;&#x4E00;&#x4E2A;&#x6570;&#x636E;&#x5305;&#x90FD;&#x4F1A;&#x67E5;&#x8DEF;&#x7531;&#x8868;(&#x5F53;&#x7136;&#x524D;&#x9762;&#x8FD8;&#x6709;&#x4E00;&#x4E2A;&#x7F13;&#x5B58;...&#x4F46;&#x8FD9;&#x4E0D;&#x662F;&#x8F6C;&#x53D1;&#x8868;)&#xFF1B;&#x56E0;&#x6B64;&#x719F;&#x6089;Cisco&#x7684;&#x5BB6;&#x4F19;&#x4F1A;&#x8BA4;&#x4E3A;&#x4E24;&#x4E2A;&#x8868;&#x662F;&#x4E00;&#x5B9A;&#x8981;&#x533A;&#x5206;&#x7684;&#xFF0C;&#x5426;&#x5219;MPLS&#x600E;&#x4E48;&#x5B9E;&#x73B0;&#xFF1F;&#x719F;&#x6089;Windows&#x6838;&#x5FC3;&#x7684;&#x4EBA;&#x5462;&#xFF1F;&#x53EF;&#x80FD;&#x5E76;&#x4E0D;&#x5173;&#x5FC3;&#x8FD9;&#x4E9B;&#xFF0C;&#x56E0;&#x4E3A;Windows&#x51E0;&#x4E4E;&#x4E0D;&#x7528;&#x4E8E;&#x8DEF;&#x7531;&#x5668;&#x3002;<br>&#x3000;&#x3000;5.&#x533A;&#x5206;&#x4E8C;&#x8868;&#x7684;&#x597D;&#x5904;&#x4E4B;&#x5B9E;&#x4F8B;<br>&#x3000;&#x3000;MPLS&#x662F;&#x533A;&#x5206;&#x8DEF;&#x7531;&#x8868;&#x548C;&#x8F6C;&#x53D1;&#x8868;&#x7684;&#x4E00;&#x4E2A;&#x660E;&#x663E;&#x7684;&#x4F8B;&#x5B50;&#xFF0C;&#x9996;&#x5148;&#x58F0;&#x660E;&#xFF0C;MPLS&#x662F;&#x4E00;&#x4E2A;&#x7F51;&#x7EDC;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x8FD0;&#x884C;&#x7279;&#x5B9A;&#x534F;&#x8BAE;&#x7684;&#x4E00;&#x4E2A;&#x8282;&#x70B9;&#x3002;&#x5728;MPLS&#x4E2D;&#xFF0C;&#x5B8C;&#x5168;&#x901A;&#x8FC7;&#x6807;&#x7B7E;&#x8FDB;&#x884C;&#x6570;&#x636E;&#x5305;&#x8F6C;&#x53D1;&#xFF0C;&#x5728;MPLS&#x7F51;&#x7EDC;&#x53EF;&#x7528;&#x4E8E;&#x6570;&#x636E;&#x4E1A;&#x52A1;&#x4E4B;&#x524D;(&#x4E2D;&#x95F4;&#x4E5F;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x6807;&#x7B7E;&#x5206;&#x53D1;&#x534F;&#x8BAE;&#x52A8;&#x6001;&#x8C03;&#x6574;)&#xFF0C;MPLS&#x8F6C;&#x53D1;&#x8868;&#x5C31;&#x5EFA;&#x597D;&#x4E86;&#xFF0C;&#x5B83;&#x7684;&#x8868;&#x9879;&#x5305;&#x542B;&#x4E09;&#x5143;&#x7D20;&#xFF1A;&#x6765;&#x6E90;&#x6570;&#x636E;&#x81EA;&#x5E26;&#x6807;&#x7B7E;/&#x8F6C;&#x53D1;&#x5230;&#x7684;&#x7AEF;&#x53E3;/&#x8F6C;&#x53D1;&#x51FA;&#x53BB;&#x643A;&#x5E26;&#x7684;&#x6807;&#x7B7E;&#x3002;&#x8FD9;&#x4E2A;&#x8868;&#x9879;&#x662F;&#x901A;&#x8FC7;&#x8DEF;&#x7531;&#x8868;&#x5EFA;&#x7ACB;&#x7684;&#xFF0C;&#x6211;&#x4EEC;&#x5C06;&#x4E4B;&#x89C6;&#x4E3A;&#x8F6C;&#x53D1;&#x8868;&#x3002;&#x5B9E;&#x73B0;MPLS&#x9700;&#x8981;&#x5728;&#x5165;&#x53E3;&#x8DEF;&#x7531;&#x5668;&#x4E0A;&#x4E3A;&#x6570;&#x636E;&#x5305;&#x5355;&#x72EC;&#x6253;&#x4E0A;&#x4E00;&#x4E2A;&#x6807;&#x7B7E;&#xFF0C;&#x8FD9;&#x6837;&#x76F4;&#x5230;&#x51FA;&#x53BB;MPLS&#x7F51;&#x7EDC;&#xFF0C;&#x6570;&#x636E;&#x5305;&#x5C31;&#x53EF;&#x4EE5;&#x5FEB;&#x901F;&#x88AB;&#x8F6C;&#x53D1;&#x4E86;&#xFF0C;&#x7701;&#x53BB;&#x4E86;&#x76F4;&#x63A5;&#x67E5;&#x8BE2;&#x8DEF;&#x7531;&#x8868;&#x7684;&#x5F00;&#x9500;&#x3002;</p>
<h1 id="mpls"><a name="mpls" class="anchor-navigation-ex-anchor" href="#mpls"><i class="fa fa-link" aria-hidden="true"></i></a>6. MPLS</h1>
<h2 id="mpls&#x5E27;&#x683C;&#x5F0F;"><a name="mpls&#x5E27;&#x683C;&#x5F0F;" class="anchor-navigation-ex-anchor" href="#mpls&#x5E27;&#x683C;&#x5F0F;"><i class="fa fa-link" aria-hidden="true"></i></a>6.1. MPLS&#x5E27;&#x683C;&#x5F0F;</h2>
<p><img src="img/networking_&#x6742;&#x8BB0;2_20221024154206.png" alt="">  </p>
<h2 id="&#x4F20;&#x7EDF;&#x8DEF;&#x7531;&#x5668;"><a name="&#x4F20;&#x7EDF;&#x8DEF;&#x7531;&#x5668;" class="anchor-navigation-ex-anchor" href="#&#x4F20;&#x7EDF;&#x8DEF;&#x7531;&#x5668;"><i class="fa fa-link" aria-hidden="true"></i></a>6.2. &#x4F20;&#x7EDF;&#x8DEF;&#x7531;&#x5668;</h2>
<p>&#x53C2;&#x8003;: <a href="https://zhuanlan.zhihu.com/p/27232535" target="_blank">https://zhuanlan.zhihu.com/p/27232535</a>  </p>
<p>&#x4F20;&#x7EDF;&#x8DEF;&#x7531;&#x5668;&#x5BF9;&#x6BCF;&#x4E2A;&#x6570;&#x636E;&#x5305;&#x90FD;&#x72EC;&#x7ACB;&#x7684;&#x8FDB;&#x884C;&#x8DEF;&#x7531;&#x8F6C;&#x53D1;.<br>&#x4EE5;IP&#x534F;&#x8BAE;&#x62A5;&#x6587;&#x4E3A;&#x4F8B;&#xFF0C;&#x8DEF;&#x7531;&#x51B3;&#x7B56;&#x662F;&#x57FA;&#x4E8E;&#x76EE;&#x7684;IP&#x5730;&#x5740;&#xFF0C;&#x8DEF;&#x7531;&#x5668;&#x6839;&#x636E;&#x76EE;&#x7684;IP&#x5730;&#x5740;&#xFF0C;&#x9009;&#x62E9;&#x8DEF;&#x7531;&#x6761;&#x76EE;&#xFF0C;&#x518D;&#x505A;&#x8F6C;&#x53D1;&#x3002;&#x8DEF;&#x7531;&#x51B3;&#x7B56;&#x53EF;&#x4EE5;&#x8BA4;&#x4E3A;&#x662F;&#x7531;&#x4E24;&#x90E8;&#x5206;&#x7EC4;&#x6210;&#xFF1A;</p>
<ul>
<li>&#x5206;&#x7C7B;&#xFF0C;&#x5C06;&#x7279;&#x5B9A;&#x7684;&#x6570;&#x636E;&#x5305;&#x5F52;&#x5C5E;&#x4E3A;&#x4E00;&#x4E2A;&#x7B49;&#x4EF7;&#x8F6C;&#x53D1;&#x7C7B;&#xFF08;Forwarding Equivalence Classes&#xFF0C;FECs&#xFF09;</li>
<li>&#x67E5;&#x627E;&#xFF0C;&#x67E5;&#x627E;FEC&#x5BF9;&#x5E94;&#x7684;<a href="https://www.zhihu.com/search?q=next+hop&amp;search_source=Entity&amp;hybrid_search_source=Entity&amp;hybrid_search_extra=%7B%22sourceType%22%3A%22article%22%2C%22sourceId%22%3A27232535%7D" target="_blank">next hop</a></li>
</ul>
<p>&#x5177;&#x4F53;&#x5230;<a href="https://www.zhihu.com/search?q=IP%E5%8D%8F%E8%AE%AE%E6%8A%A5%E6%96%87&amp;search_source=Entity&amp;hybrid_search_source=Entity&amp;hybrid_search_extra=%7B%22sourceType%22%3A%22article%22%2C%22sourceId%22%3A27232535%7D" target="_blank">IP&#x534F;&#x8BAE;&#x62A5;&#x6587;</a>&#xFF0C;&#x5F53;&#x591A;&#x4E2A;IP&#x534F;&#x8BAE;&#x62A5;&#x6587;&#x7684;&#x76EE;&#x7684;&#x5730;&#x5740;&#x90FD;&#x5BF9;&#x5E94;&#x8DEF;&#x7531;&#x5668;&#x7684;&#x4E00;&#x6761;&#x8DEF;&#x7531;&#xFF0C;&#x4E14;&#x8FD9;&#x6761;&#x8DEF;&#x7531;&#x662F;&#x6240;&#x6709;&#x8DEF;&#x7531;&#x91CC;&#x9762;&#x6700;&#x957F;&#x5339;&#x914D;&#xFF08;longest match&#xFF09;&#x7684;&#x8DEF;&#x7531;&#xFF0C;&#x90A3;&#x4E48;&#x5BF9;&#x4E8E;&#x8FD9;&#x4E2A;&#x8DEF;&#x7531;&#x5668;&#x6765;&#x8BF4;&#xFF0C;&#x5C31;&#x4F1A;&#x8BA4;&#x4E3A;&#x8FD9;&#x4E24;&#x4E2A;IP&#x534F;&#x8BAE;&#x62A5;&#x6587;&#x5C5E;&#x4E8E;&#x4E00;&#x4E2A;FEC&#x3002;&#x56E0;&#x6B64;&#xFF0C;&#x8FD9;&#x4E24;&#x4E2A;&#x6570;&#x636E;&#x5305;&#x5C31;&#x4F1A;&#x8D70;&#x540C;&#x4E00;&#x6761;&#x8DEF;&#x5F84;&#x51FA;&#x8FD9;&#x4E2A;&#x8DEF;&#x7531;&#x5668;&#x3002;&#x8FD9;&#x5C31;&#x662F;&#x6211;&#x4EEC;&#x6700;&#x5E38;&#x89C1;&#x5230;&#x7684;&#x8DEF;&#x7531;&#x8F6C;&#x53D1;&#x3002;</p>
<p>&#x9700;&#x8981;&#x6CE8;&#x610F;&#x7684;&#x662F;&#xFF0C;&#x8FD9;&#x91CC;&#x7684;FEC&#x662F;&#x9488;&#x5BF9;&#x8DEF;&#x7531;&#x5668;&#x7684;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x5168;&#x5C40;&#x7684;&#x3002;&#x4E3E;&#x4E2A;&#x4F8B;&#x5B50;&#xFF0C;&#x76EE;&#x7684;&#x5730;&#x5740;&#x4E3A;192.168.31.1&#x548C;192.168.31.100&#x7684;&#x4E24;&#x4E2A;IP&#x534F;&#x8BAE;&#x62A5;&#x6587;&#xFF0C;&#x7B2C;&#x4E00;&#x4E2A;&#x8DEF;&#x7531;&#x5668;&#x5177;&#x6709;192.168.31.0/24&#x8FD9;&#x6761;&#x8DEF;&#x7531;&#xFF0C;&#x90A3;&#x4E48;&#x5728;&#x7B2C;&#x4E00;&#x4E2A;&#x8DEF;&#x7531;&#x5668;&#x5B83;&#x4EEC;&#x5C5E;&#x4E8E;&#x540C;&#x4E00;&#x4E2A;FEC&#xFF0C;&#x90FD;&#x4F1A;&#x88AB;&#x8F6C;&#x53D1;&#x5230;&#x7B2C;&#x4E8C;&#x4E2A;&#x8DEF;&#x7531;&#x5668;&#x3002;&#x7B2C;&#x4E8C;&#x4E2A;&#x8DEF;&#x7531;&#x5668;&#x5177;&#x6709;192.168.31.0/26&#x548C;192.168.31.0/24&#x4E24;&#x6761;&#x8DEF;&#x7531;&#xFF0C;&#x5E76;&#x4E14;&#x4E24;&#x6761;&#x8DEF;&#x7531;&#x7684;next hop&#x4E0D;&#x4E00;&#x6837;&#x3002;&#x56E0;&#x4E3A;192.168.31.0/26&#x80FD;&#x66F4;&#x7CBE;&#x786E;&#x7684;&#x5339;&#x914D;192.168.31.1&#xFF0C;&#x6240;&#x4EE5;192.168.31.1&#x5339;&#x914D;&#x7B2C;&#x4E00;&#x6761;&#x8DEF;&#x7531;&#xFF0C;&#x800C;192.168.31.100&#x5339;&#x914D;&#x7B2C;&#x4E8C;&#x6761;&#x8DEF;&#x7531;&#xFF0C;&#x6700;&#x7EC8;&#xFF0C;&#x8FD9;&#x4E24;&#x4E2A;IP&#x534F;&#x8BAE;&#x62A5;&#x6587;&#x5728;&#x7B2C;&#x4E8C;&#x4E2A;&#x8DEF;&#x7531;&#x5668;&#x88AB;&#x8BA4;&#x4E3A;&#x662F;&#x4E0D;&#x540C;&#x7684;FEC&#xFF0C;&#x4ECE;&#x4E0D;&#x540C;&#x7684;&#x8DEF;&#x5F84;&#x51FA;&#x53BB;&#x3002;&#x8FD9;&#x5C31;&#x662F;&#x6BCF;&#x4E2A;&#x8DEF;&#x7531;&#x5668;&#x90FD;&#x9700;&#x8981;&#x72EC;&#x7ACB;&#x7684;&#x505A;&#x8DEF;&#x7531;&#x51B3;&#x7B56;&#x7684;&#x539F;&#x56E0;&#x4E4B;&#x4E00;&#x3002;</p>
<p><img src="img/networking_&#x6742;&#x8BB0;2_20221024154239.png" alt="">  </p>
<p>&#x7531;&#x4E8E;&#x6BCF;&#x4E2A;&#x8DEF;&#x7531;&#x5668;&#x90FD;&#x9700;&#x8981;&#x72EC;&#x7ACB;&#x7684;&#x8DEF;&#x7531;&#x51B3;&#x7B56;&#xFF08;&#x867D;&#x7136;&#x4F1A;&#x6709;&#x8FD9;&#x6837;&#x90A3;&#x6837;&#x7684;&#x7F13;&#x5B58;&#x673A;&#x5236;&#x52A0;&#x901F;&#x51B3;&#x7B56;&#xFF09;&#xFF0C;&#x800C;&#x8DEF;&#x7531;&#x5668;&#x7684;&#x6536;&#x53D1;&#x961F;&#x5217;&#x4E00;&#x65E6;&#x6EE1;&#x4E86;&#xFF0C;&#x5C31;&#x4F1A;&#x4E22;&#x5305;&#x3002;&#x6240;&#x4EE5;&#x5728;&#x4E00;&#x4E2A;&#x9AD8;&#x6D41;&#x91CF;&#xFF0C;&#x9AD8;&#x5BB9;&#x91CF;&#x7684;&#x7F51;&#x7EDC;&#x91CC;&#x9762;&#xFF0C;&#x65E0;&#x7591;&#x5BF9;&#x6BCF;&#x4E2A;&#x8DEF;&#x7531;&#x5668;&#x7684;&#x8981;&#x6C42;&#x90FD;&#x5F88;&#x9AD8;&#xFF08;&#x5426;&#x5219;&#x5C31;&#x4F1A;&#x4E22;&#x5305;&#x4E86;&#xFF01;&#xFF09;</p>
<p>&#x9488;&#x5BF9;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#xFF0C;MPLS&#x63D0;&#x51FA;&#x4E86;&#x7C7B;&#x4F3C;&#x7684;&#xFF0C;&#x4F46;&#x662F;&#x66F4;&#x7B80;&#x5355;&#x7684;&#x53E6;&#x5916;&#x4E00;&#x79CD;&#x8DEF;&#x7531;&#x51B3;&#x7B56;&#x7684;&#x65B9;&#x6CD5;&#x3002;</p>
<p>&#x4F20;&#x7EDF;&#x7684;&#x8DEF;&#x7531;&#x51B3;&#x7B56;&#xFF0C;&#x8DEF;&#x7531;&#x5668;&#x9700;&#x8981;&#x5BF9;&#x7F51;&#x7EDC;&#x6570;&#x636E;&#x5305;&#x8FDB;&#x884C;&#x89E3;&#x5305;&#xFF0C;&#x518D;&#x6839;&#x636E;&#x76EE;&#x7684;IP&#x5730;&#x5740;&#x8BA1;&#x7B97;&#x5F52;&#x5C5E;&#x7684;FEC&#x3002;&#x800C;MPLS&#x63D0;&#x51FA;&#xFF0C;&#x5F53;&#x7F51;&#x7EDC;&#x6570;&#x636E;&#x5305;&#x8FDB;&#x5165;MPLS&#x7F51;&#x7EDC;&#x65F6;&#xFF0C;&#x5BF9;&#x7F51;&#x7EDC;&#x6570;&#x636E;&#x5305;&#x8FDB;&#x884C;&#x89E3;&#x5305;&#xFF0C;&#x8BA1;&#x7B97;&#x5F52;&#x5C5E;&#x7684;FEC&#xFF0C;&#x751F;&#x6210;&#x6807;&#x7B7E;&#xFF08;Label&#xFF09;&#x3002;&#x5F53;&#x7F51;&#x7EDC;&#x6570;&#x636E;&#x5305;&#x5728;MPLS&#x7F51;&#x7EDC;&#x4E2D;&#x4F20;&#x8F93;&#x65F6;&#xFF0C;&#x8DEF;&#x7531;&#x51B3;&#x7B56;&#x90FD;&#x662F;&#x57FA;&#x4E8E;Label&#xFF0C;&#x8DEF;&#x7531;&#x5668;&#x4E0D;&#x518D;&#x9700;&#x8981;&#x5BF9;&#x7F51;&#x7EDC;&#x6570;&#x636E;&#x5305;&#x8FDB;&#x884C;&#x89E3;&#x5305;&#x3002;&#x5E76;&#x4E14;Label&#x662F;&#x4E2A;&#x6574;&#x6570;&#xFF0C;&#x4EE5;&#x6574;&#x6570;&#x4F5C;&#x4E3A;key&#xFF0C;&#x53EF;&#x4EE5;&#x8FBE;&#x5230;O(1)&#x7684;&#x67E5;&#x627E;&#x65F6;&#x95F4;&#x3002;&#x5927;&#x5927;&#x51CF;&#x5C11;&#x4E86;&#x8DEF;&#x7531;&#x51B3;&#x7B56;&#x7684;&#x65F6;&#x95F4;&#x3002;&#x8FD9;&#x91CC;&#x7684;Label&#x5C31;&#x662F;MPLS&#x91CC;&#x9762;&#x7684;L&#x3002;&#x9700;&#x8981;&#x6CE8;&#x610F;&#x7684;&#x662F;Label&#x5728;MPLS&#x7F51;&#x7EDC;&#x91CC;&#x9762;&#xFF0C;&#x662F;&#x4F5C;&#x4E3A;&#x7F51;&#x7EDC;&#x6570;&#x636E;&#x5305;&#x7684;&#x4E00;&#x90E8;&#x5206;&#xFF0C;&#x968F;&#x7740;&#x7F51;&#x7EDC;&#x6570;&#x636E;&#x5305;&#x4F20;&#x8F93;&#x7684;&#x3002;</p>
<p>&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#xFF0C;&#x5728;<a href="https://www.zhihu.com/search?q=MPLS%E7%BD%91%E7%BB%9C&amp;search_source=Entity&amp;hybrid_search_source=Entity&amp;hybrid_search_extra=%7B%22sourceType%22%3A%22article%22%2C%22sourceId%22%3A27232535%7D" target="_blank">MPLS&#x7F51;&#x7EDC;</a>&#x91CC;&#x9762;&#xFF0C;&#x6570;&#x636E;&#x88AB;&#x5C01;&#x88C5;&#x5728;&#x4E86;&#x76D2;&#x5B50;&#x91CC;&#xFF0C;&#x4E0A;&#x9762;&#x8D34;&#x4E86;&#x6807;&#x7B7E;&#xFF0C;&#x6BCF;&#x4E2A;&#x7ECF;&#x624B;&#x7684;&#x4EBA;&#x53EA;&#x9700;&#x8981;&#x8BFB;&#x6807;&#x7B7E;&#x5C31;&#x77E5;&#x9053;&#x76D2;&#x5B50;&#x8BE5;&#x9001;&#x5230;&#x54EA;&#x3002;&#x800C;&#x4F20;&#x7EDF;&#x7684;&#x8DEF;&#x7531;&#x7F51;&#x7EDC;&#x91CC;&#x9762;&#xFF0C;&#x6BCF;&#x4E2A;&#x7ECF;&#x624B;&#x7684;&#x4EBA;&#x90FD;&#x9700;&#x8981;&#x6253;&#x5F00;&#x76D2;&#x5B50;&#xFF0C;&#x770B;&#x770B;&#x91CC;&#x9762;&#x7684;&#x5185;&#x5BB9;&#xFF0C;&#x518D;&#x51B3;&#x5B9A;&#x9001;&#x5F80;&#x54EA;&#x3002;</p>
<p>&#x8FD9;&#x91CC;&#x63D0;&#x5230;&#x4E86;MPLS&#x7F51;&#x7EDC;&#xFF0C;&#x8FD9;&#x662F;&#x4E00;&#x4E2A;&#x7531;&#x76F8;&#x8FDE;&#x7684;&#xFF0C;&#x652F;&#x6301;MPLS&#x7684;&#x8BBE;&#x5907;&#x7EC4;&#x6210;&#x7684;&#x7F51;&#x7EDC;&#x3002;&#x6253;&#x4E0A;MPLS&#x6807;&#x7B7E;&#x7684;&#x6570;&#x636E;&#x53EF;&#x4EE5;&#x5728;&#x8FD9;&#x4E2A;&#x7F51;&#x7EDC;&#x91CC;&#x9762;&#x4F20;&#x8F93;&#x3002;MPLS&#x7684;&#x6838;&#x5FC3;&#x5C31;&#x662F;&#xFF0C;<strong>&#x4E00;&#x65E6;&#x8FDB;&#x5165;&#x4E86;MPLS&#x7F51;&#x7EDC;&#xFF0C;&#x90A3;&#x4E48;&#x7F51;&#x7EDC;&#x6570;&#x636E;&#x5305;&#x7684;&#x5185;&#x5BB9;&#x5C31;&#x4E0D;&#x518D;&#x91CD;&#x8981;&#xFF0C;&#x8DEF;&#x7531;&#x51B3;&#x7B56;&#xFF08;&#x5305;&#x62EC;FEC&#x5F52;&#x5C5E;&#x7684;&#x8BA1;&#x7B97;&#xFF0C;next hop&#x7684;&#x67E5;&#x627E;&#xFF09;&#x90FD;&#x662F;&#x57FA;&#x4E8E;Label&#x6765;&#x8FDB;&#x884C;&#x7684;&#x3002;</strong></p>
<p>&#x4ECE;&#x76EE;&#x524D;&#x770B;&#xFF0C;MPLS&#x5E26;&#x6765;&#x7684;&#x597D;&#x5904;&#x662F;&#xFF0C;&#x5728;MPLS&#x7F51;&#x7EDC;&#x91CC;&#x9762;&#xFF0C;&#x9664;&#x4E86;<a href="https://www.zhihu.com/search?q=%E8%BE%B9%E7%95%8C%E8%B7%AF%E7%94%B1%E5%99%A8&amp;search_source=Entity&amp;hybrid_search_source=Entity&amp;hybrid_search_extra=%7B%22sourceType%22%3A%22article%22%2C%22sourceId%22%3A27232535%7D" target="_blank">&#x8FB9;&#x754C;&#x8DEF;&#x7531;&#x5668;</a>&#xFF0C;&#x5176;&#x4ED6;&#x8DEF;&#x7531;&#x5668;&#x53EF;&#x4EE5;&#x7531;&#x4E00;&#x4E9B;&#x652F;&#x6301;Label&#x67E5;&#x627E;&#x66FF;&#x6362;&#x7684;&#x4F4E;&#x6027;&#x80FD;&#x7684;&#x4EA4;&#x6362;&#x673A;&#xFF0C;&#x6216;&#x8005;&#x8DEF;&#x7531;&#x5668;&#x6765;&#x5B8C;&#x6210;&#x3002;&#x8FD9;&#x4E00;&#x65B9;&#x9762;&#x964D;&#x4F4E;&#x4E86;&#x7EC4;&#x7F51;&#x7684;&#x6210;&#x672C;&#xFF0C;&#x53E6;&#x4E00;&#x65B9;&#x9762;&#x63D0;&#x5347;&#x4E86;&#x540C;&#x6837;&#x6027;&#x80FD;&#x8BBE;&#x5907;&#x7684;&#x8F6C;&#x53D1;&#x6548;&#x7387;&#x3002;&#x4E0D;&#x8FC7;&#xFF0C;&#x968F;&#x7740;&#x8DEF;&#x7531;&#x5668;&#x7684;&#x53D1;&#x5C55;&#xFF0C;&#x8FD9;&#x65B9;&#x9762;&#x7684;&#x4F18;&#x52BF;&#x5F31;&#x5316;&#x4E86;&#xFF0C;&#x800C;&#x4E14;&#xFF0C;&#x7C7B;&#x4F3C;&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x4E5F;&#x4E0D;&#x4E00;&#x5B9A;&#x9700;&#x8981;MPLS&#x6765;&#x89E3;&#x51B3;&#x3002;<strong>MPLS&#x7684;&#x4EF7;&#x503C;&#x66F4;&#x591A;&#x7684;&#x5728;&#x4E8E;&#x5176;&#x4ED6;&#x65B9;&#x9762;&#x3002;</strong> &#x4E0D;&#x8FC7;&#x521D;&#x6B65;&#x7406;&#x89E3;MPLS&#xFF0C;&#x5C31;&#x5148;&#x8BF4;&#x8FD9;&#x4E9B;&#x3002;&#x5230;&#x76EE;&#x524D;&#x4E3A;&#x6B62;&#xFF0C;MPLS&#x91CC;&#x9762;&#x7684;M&#xFF0C;P&#xFF0C;L&#x90FD;&#x4ECB;&#x7ECD;&#x8FC7;&#xFF0C;S&#x5176;&#x5B9E;&#x4E5F;&#x9690;&#x542B;&#x7684;&#x4ECB;&#x7ECD;&#x8FC7;&#xFF0C;S&#x662F;Switching&#x7684;&#x610F;&#x601D;&#xFF0C;&#x5373;&#x57FA;&#x4E8E;Label&#x505A;&#x8DEF;&#x7531;&#x51B3;&#x7B56;&#x7684;&#x610F;&#x601D;&#xFF0C;&#x6216;&#x8005;&#x8BF4;&#x6807;&#x7B7E;&#x4EA4;&#x6362;&#x91CC;&#x9762;&#x7684;&#x4EA4;&#x6362;&#x3002;&#x76F8;&#x4FE1;&#x5927;&#x5BB6;&#x4E5F;&#x660E;&#x767D;&#x4E86;&#x4E3A;&#x4EC0;&#x4E48;&#x8BF4;MPLS&#x662F;&#x4E00;&#x79CD;&#x9AD8;&#x6548;&#x7684;&#x6570;&#x636E;&#x4F20;&#x8F93;&#x7684;&#x6280;&#x672F;&#x3002;</p>
<h2 id="mpls&#x62D3;&#x6251;"><a name="mpls&#x62D3;&#x6251;" class="anchor-navigation-ex-anchor" href="#mpls&#x62D3;&#x6251;"><i class="fa fa-link" aria-hidden="true"></i></a>6.3. MPLS&#x62D3;&#x6251;</h2>
<p><img src="img/networking_&#x6742;&#x8BB0;2_20221024154317.png" alt=""><br>CE&#xFF1A;&#x524D;&#x9762;&#x6CA1;&#x6709;&#x4ECB;&#x7ECD;&#x8FC7;&#xFF0C;&#x5176;&#x5B9E;&#x5C31;&#x662F;&#x4F20;&#x7EDF;&#x8DEF;&#x7531;&#x7F51;&#x7EDC;&#x4E2D;&#x4E0E;LER&#x8FDE;&#x63A5;&#x7684;&#x8DEF;&#x7531;&#x5668;&#xFF0C;&#x53EF;&#x4EE5;&#x7406;&#x89E3;&#x6210;&#x5BA2;&#x6237;&#x7F51;&#x7EDC;&#x7684;<a href="https://www.zhihu.com/search?q=%E8%BE%B9%E7%BC%98%E8%B7%AF%E7%94%B1%E5%99%A8&amp;search_source=Entity&amp;hybrid_search_source=Entity&amp;hybrid_search_extra=%7B%22sourceType%22%3A%22article%22%2C%22sourceId%22%3A27232535%7D" target="_blank">&#x8FB9;&#x7F18;&#x8DEF;&#x7531;&#x5668;</a>&#x3002;<br>PE&#xFF1A;&#x670D;&#x52A1;&#x63D0;&#x4F9B;&#x5546;&#x7684;&#x8FB9;&#x7F18;&#x8DEF;&#x7531;&#x5668;&#xFF0C;&#x5BF9;&#x5E94;LER&#x3002;<br>P&#xFF1A;&#x670D;&#x52A1;&#x63D0;&#x4F9B;&#x5546;&#x7684;&#x8DEF;&#x7531;&#x5668;&#xFF0C;&#x5BF9;&#x5E94;LSR&#x3002;  </p>
<p>&#x4E3A;&#x4EC0;&#x4E48;&#x4F1A;&#x6709;&#x8FD9;&#x4E9B;&#x672F;&#x8BED;&#x4E0A;&#x7684;&#x4E0D;&#x540C;&#xFF0C;MPLS&#x7684;&#x63D0;&#x51FA;&#x672C;&#x8EAB;&#x662F;&#x4E2D;&#x7ACB;&#x7684;&#xFF0C;&#x4F46;&#x662F;&#x968F;&#x7740;&#x53D1;&#x5C55;&#xFF0C;&#x73B0;&#x5728;&#x5E94;&#x7528;&#x6700;&#x591A;&#x7684;&#x662F;&#x7535;&#x4FE1;&#x7F51;&#x7EDC;&#xFF0C;&#x6240;&#x4EE5;&#x624D;&#x6709;&#x4E86;<a href="https://www.zhihu.com/search?q=customer+provider&amp;search_source=Entity&amp;hybrid_search_source=Entity&amp;hybrid_search_extra=%7B%22sourceType%22%3A%22article%22%2C%22sourceId%22%3A27232535%7D" target="_blank">customer provider</a>&#x8FD9;&#x4E9B;&#x6982;&#x5FF5;&#xFF0C;&#x5176;&#x5B9E;&#x90FD;&#x662F;&#x5BF9;&#x5E94;&#x7535;&#x4FE1;&#x8FD0;&#x8425;&#x5546;&#x7F51;&#x7EDC;&#x4E2D;&#x7684;&#x8BBE;&#x5907;&#x3002;&#x4E0A;&#x56FE;&#x4E2D;&#x95F4;&#x90E8;&#x5206;&#x5C31;&#x662F;&#x4E2A;MPLS&#x7F51;&#x7EDC;&#xFF0C;&#x524D;&#x9762;&#x4ECB;&#x7ECD;&#x8FC7;&#xFF0C;MPLS&#x7F51;&#x7EDC;&#x4E2D;&#x7684;IP&#x62A5;&#x6587;&#x90FD;&#x662F;&#x5E26;&#x6709;MPLS&#x6807;&#x7B7E;&#x7684;&#x3002;&#x4E0B;&#x9762;&#x6765;&#x8FC7;&#x4E00;&#x4E0B;&#x5DE5;&#x4F5C;&#x8FC7;&#x7A0B;&#xFF1A;</p>
<ol>
<li>&#x5728;&#x6240;&#x6709;&#x7684;&#x7F51;&#x7EDC;&#x6D41;&#x91CF;&#x4E4B;&#x524D;&#xFF0C;PE&#x8DEF;&#x7531;&#x5668;&#x9700;&#x8981;&#x901A;&#x8FC7;MPLS&#x7F51;&#x7EDC;&#x4E0E;&#x8FDC;&#x7AEF;PE&#x8DEF;&#x7531;&#x5668;&#x5EFA;&#x7ACB;LSP&#x3002;</li>
<li>&#x5BA2;&#x6237;&#x7F51;&#x7EDC;&#x4ECE;CE&#x53D1;&#x6765;&#x7684;&#x975E;MPLS &#x62A5;&#x6587;&#xFF0C;&#x53D1;&#x9001;&#x5230;&#x4E86;ingress PE&#x8DEF;&#x7531;&#x5668;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;MPLS <a href="https://www.zhihu.com/search?q=ingress+edge+node&amp;search_source=Entity&amp;hybrid_search_source=Entity&amp;hybrid_search_extra=%7B%22sourceType%22%3A%22article%22%2C%22sourceId%22%3A27232535%7D" target="_blank">ingress edge node</a>&#x3002;</li>
<li>ingress PE &#x8DEF;&#x7531;&#x5668;&#x901A;&#x8FC7;&#x8FD0;&#x7B97;&#x5F97;&#x51FA;IP&#x534F;&#x8BAE;&#x62A5;&#x6587;&#x5F52;&#x5C5E;&#x4E8E;&#x54EA;&#x4E2A;FEC&#xFF0C;&#x5E76;&#x628A;&#x76F8;&#x5E94;&#x7684;Label&#x52A0;&#x5230;&#x4E86;IP&#x534F;&#x8BAE;&#x62A5;&#x6587;&#x3002;</li>
<li>IP&#x534F;&#x8BAE;&#x62A5;&#x6587;&#x6CBF;&#x7740;LSP&#x4F20;&#x8F93;&#xFF0C;&#x6BCF;&#x4E2A;P&#x8DEF;&#x7531;&#x5668;&#x90FD;&#x6839;&#x636E;&#x81EA;&#x8EAB;&#x7684;NHLFE&#xFF0C;&#x66FF;&#x6362;Label&#xFF0C;&#x518D;&#x628A;&#x62A5;&#x6587;&#x4F20;&#x7ED9;&#x4E0B;&#x4E00;&#x8DF3;&#x3002;</li>
<li>&#x5728;egress PE&#x8DEF;&#x7531;&#x5668;&#xFF0C;Label&#x88AB;&#x4ECE;IP&#x534F;&#x8BAE;&#x62A5;&#x6587;&#x4E2D;&#x5220;&#x9664;&#xFF0C;&#x4E00;&#x4E2A;&#x4F20;&#x7EDF;&#x7684;IP&#x534F;&#x8BAE;&#x62A5;&#x6587;&#x53C8;&#x4EA7;&#x751F;&#x4E86;&#x3002;</li>
<li>IP&#x534F;&#x8BAE;&#x62A5;&#x6587;&#x88AB;&#x53D1;&#x9001;&#x5230;&#x4E86;&#x5BF9;&#x7AEF;&#x7684;CE&#x8DEF;&#x7531;&#x5668;&#xFF0C;&#x6700;&#x7EC8;&#x8FDB;&#x5165;&#x4E86;&#x53E6;&#x4E00;&#x4E2A;<a href="https://www.zhihu.com/search?q=%E5%AE%A2%E6%88%B7%E7%BD%91%E7%BB%9C&amp;search_source=Entity&amp;hybrid_search_source=Entity&amp;hybrid_search_extra=%7B%22sourceType%22%3A%22article%22%2C%22sourceId%22%3A27232535%7D" target="_blank">&#x5BA2;&#x6237;&#x7F51;&#x7EDC;</a>&#x3002;</li>
</ol>
<h1 id="&#x7F51;&#x53E3;&#x76F8;&#x5173;&#x7684;&#x7EDF;&#x8BA1;"><a name="&#x7F51;&#x53E3;&#x76F8;&#x5173;&#x7684;&#x7EDF;&#x8BA1;" class="anchor-navigation-ex-anchor" href="#&#x7F51;&#x53E3;&#x76F8;&#x5173;&#x7684;&#x7EDF;&#x8BA1;"><i class="fa fa-link" aria-hidden="true"></i></a>7. &#x7F51;&#x53E3;&#x76F8;&#x5173;&#x7684;&#x7EDF;&#x8BA1;</h1>
<h2 id="ethtool--s"><a name="ethtool--s" class="anchor-navigation-ex-anchor" href="#ethtool--s"><i class="fa fa-link" aria-hidden="true"></i></a>7.1. ethtool -S</h2>
<h2 id="sysclassneteth0statistics"><a name="sysclassneteth0statistics" class="anchor-navigation-ex-anchor" href="#sysclassneteth0statistics"><i class="fa fa-link" aria-hidden="true"></i></a>7.2. /sys/class/net/eth0/statistics/</h2>
<p>&#x6CE8;&#x610F;&#x5230;<code>/sys/class/net</code>&#x4E0B;&#x9762;&#x6709;&#x5F88;&#x591A;&#x8BE6;&#x7EC6;&#x7684;&#x63A5;&#x53E3;&#x4FE1;&#x606F;</p>
<pre class="language-"><code class="lang-sh">~ <span class="token comment"># cat /sys/class/net/eth0/statistics/rx_packets</span>
<span class="token number">23671787</span>
~ <span class="token comment"># cat /sys/class/net/eth0/statistics/rx_dropped</span>
<span class="token number">0</span>
</code></pre>
<h2 id="man-netstat"><a name="man-netstat" class="anchor-navigation-ex-anchor" href="#man-netstat"><i class="fa fa-link" aria-hidden="true"></i></a>7.3. man netstat</h2>
<p>&#x63D0;&#x5230;&#x8BF4;&#x5982;&#x4E0B;proc&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x4E0B;&#x7684;&#x6587;&#x4EF6;:</p>
<pre class="language-"><code class="lang-sh">       /proc/net/dev -- device information
       /proc/net/raw -- raw socket information
       /proc/net/tcp -- TCP socket information
       /proc/net/udp -- UDP socket information
       /proc/net/udplite -- UDPLite socket information
       /proc/net/igmp -- IGMP multicast information
       /proc/net/unix -- Unix domain socket information
       /proc/net/ipx -- IPX socket information
       /proc/net/ax25 -- AX25 socket information
       /proc/net/appletalk -- DDP <span class="token punctuation">(</span>appletalk<span class="token punctuation">)</span> socket information
       /proc/net/nr -- NET/ROM socket information
       /proc/net/route -- IP routing information
       /proc/net/ax25_route -- AX25 routing information
       /proc/net/ipx_route -- IPX routing information
       /proc/net/nr_nodes -- NET/ROM nodelist
       /proc/net/nr_neigh -- NET/ROM neighbours
       /proc/net/ip_masquerade -- masqueraded connections
       /sys/kernel/debug/bluetooth/l2cap -- Bluetooth L2CAP information
       /sys/kernel/debug/bluetooth/rfcomm -- Bluetooth serial connections
       /proc/net/snmp -- statistics
</code></pre>
<p>&#x6BD4;&#x5982;:</p>
<pre class="language-"><code class="lang-sh">~ <span class="token comment"># cat /proc/net/snmp</span>
Ip: Forwarding DefaultTTL InReceives InHdrErrors InAddrErrors ForwDatagrams InUnknownProtos InDiscards InDelivers OutRequests OutDiscards OutNoRoutes ReasmTimeout ReasmReqds ReasmOKs ReasmFails FragOKs FragFails FragCreates
Ip: <span class="token number">1</span> <span class="token number">64</span> <span class="token number">27939461</span> <span class="token number">0</span> <span class="token number">3</span> <span class="token number">0</span> <span class="token number">0</span> <span class="token number">0</span> <span class="token number">27939458</span> <span class="token number">27949181</span> <span class="token number">1</span> <span class="token number">4</span> <span class="token number">0</span> <span class="token number">0</span> <span class="token number">0</span> <span class="token number">0</span> <span class="token number">0</span> <span class="token number">0</span> <span class="token number">0</span>
Icmp: InMsgs InErrors InCsumErrors InDestUnreachs InTimeExcds InParmProbs InSrcQuenchs InRedirects InEchos InEchoReps InTimestamps InTimestampReps InAddrMasks InAddrMaskReps OutMsgs OutErrors OutDestUnreachs OutTimeExcds OutParmProbs OutSrcQuenchs OutRedirects OutEchos OutEchoReps OutTimestamps OutTimestampReps OutAddrMasks OutAddrMaskReps
Icmp: <span class="token number">13600191</span> <span class="token number">24</span> <span class="token number">0</span> <span class="token number">13574229</span> <span class="token number">0</span> <span class="token number">0</span> <span class="token number">0</span> <span class="token number">0</span> <span class="token number">0</span> <span class="token number">25962</span> <span class="token number">0</span> <span class="token number">0</span> <span class="token number">0</span> <span class="token number">0</span> <span class="token number">13600247</span> <span class="token number">0</span> <span class="token number">13574229</span> <span class="token number">0</span> <span class="token number">0</span> <span class="token number">0</span> <span class="token number">0</span> <span class="token number">26018</span> <span class="token number">0</span> <span class="token number">0</span> <span class="token number">0</span> <span class="token number">0</span> <span class="token number">0</span>
IcmpMsg: InType0 InType3 OutType3 OutType8
IcmpMsg: <span class="token number">25962</span> <span class="token number">13574229</span> <span class="token number">13574229</span> <span class="token number">26018</span>
Tcp: RtoAlgorithm RtoMin RtoMax MaxConn ActiveOpens PassiveOpens AttemptFails EstabResets CurrEstab InSegs OutSegs RetransSegs InErrs OutRsts InCsumErrors
Tcp: <span class="token number">1</span> <span class="token number">200</span> <span class="token number">120000</span> <span class="token parameter variable">-1</span> <span class="token number">27400</span> <span class="token number">3068</span> <span class="token number">27015</span> <span class="token number">4</span> <span class="token number">497</span> <span class="token number">765163</span> <span class="token number">785175</span> <span class="token number">434</span> <span class="token number">0</span> <span class="token number">150</span> <span class="token number">0</span>
Udp: InDatagrams NoPorts InErrors OutDatagrams RcvbufErrors SndbufErrors InCsumErrors IgnoredMulti
Udp: <span class="token number">9</span> <span class="token number">13574095</span> <span class="token number">0</span> <span class="token number">13574104</span> <span class="token number">0</span> <span class="token number">0</span> <span class="token number">0</span> <span class="token number">0</span>
UdpLite: InDatagrams NoPorts InErrors OutDatagrams RcvbufErrors SndbufErrors InCsumErrors IgnoredMulti
UdpLite: <span class="token number">0</span> <span class="token number">0</span> <span class="token number">0</span> <span class="token number">0</span> <span class="token number">0</span> <span class="token number">0</span> <span class="token number">0</span> <span class="token number">0</span>
</code></pre>
<h1 id="&#x5982;&#x4F55;&#x627E;&#x5230;socket&#x7AEF;&#x53E3;&#x53F7;&#x5BF9;&#x5E94;&#x7684;&#x8FDB;&#x7A0B;2----&#x4F7F;&#x7528;ss&#x547D;&#x4EE4;"><a name="&#x5982;&#x4F55;&#x627E;&#x5230;socket&#x7AEF;&#x53E3;&#x53F7;&#x5BF9;&#x5E94;&#x7684;&#x8FDB;&#x7A0B;2----&#x4F7F;&#x7528;ss&#x547D;&#x4EE4;" class="anchor-navigation-ex-anchor" href="#&#x5982;&#x4F55;&#x627E;&#x5230;socket&#x7AEF;&#x53E3;&#x53F7;&#x5BF9;&#x5E94;&#x7684;&#x8FDB;&#x7A0B;2----&#x4F7F;&#x7528;ss&#x547D;&#x4EE4;"><i class="fa fa-link" aria-hidden="true"></i></a>8. &#x5982;&#x4F55;&#x627E;&#x5230;socket&#x7AEF;&#x53E3;&#x53F7;&#x5BF9;&#x5E94;&#x7684;&#x8FDB;&#x7A0B;2 -- &#x4F7F;&#x7528;ss&#x547D;&#x4EE4;</h1>
<p><code>ss -ap</code>&#x547D;&#x4EE4;&#x53EF;&#x4EE5;&#x6253;&#x5370;&#x6240;&#x6709;socket&#x7684;&#x4FE1;&#x606F;, <code>-p</code>&#x8868;&#x793A;&#x6253;&#x5370;&#x8FDB;&#x7A0B;&#x540D;</p>
<pre class="language-"><code class="lang-sh">~ <span class="token comment"># ss -h</span>
Usage: ss <span class="token punctuation">[</span> OPTIONS <span class="token punctuation">]</span>
       ss <span class="token punctuation">[</span> OPTIONS <span class="token punctuation">]</span> <span class="token punctuation">[</span> FILTER <span class="token punctuation">]</span>
   -h, <span class="token parameter variable">--help</span>          this message
   -V, <span class="token parameter variable">--version</span>       output version information
   -n, <span class="token parameter variable">--numeric</span>       don<span class="token string">&apos;t resolve service names
   -r, --resolve       resolve host names
   -a, --all           display all sockets
   -l, --listening     display listening sockets
   -o, --options       show timer information
   -e, --extended      show detailed socket information
   -m, --memory        show socket memory usage
   -p, --processes     show process using socket
   -i, --info          show internal TCP information
       --tipcinfo      show internal tipc socket information
   -s, --summary       show socket usage summary
       --tos           show tos and priority information
   -b, --bpf           show bpf filter socket information
   -E, --events        continually display sockets as they are destroyed
   -Z, --context       display process SELinux security contexts
   -z, --contexts      display process and socket SELinux security contexts
   -N, --net           switch to the specified network namespace name

   -4, --ipv4          display only IP version 4 sockets
   -6, --ipv6          display only IP version 6 sockets
   -0, --packet        display PACKET sockets
   -t, --tcp           display only TCP sockets
   -S, --sctp          display only SCTP sockets
   -u, --udp           display only UDP sockets
   -d, --dccp          display only DCCP sockets
   -w, --raw           display only RAW sockets
   -x, --unix          display only Unix domain sockets
       --tipc          display only TIPC sockets
       --vsock         display only vsock sockets
   -f, --family=FAMILY display sockets of type FAMILY
       FAMILY := {inet|inet6|link|unix|netlink|vsock|tipc|xdp|help}

   -K, --kill          forcibly close sockets, display what was closed
   -H, --no-header     Suppress header line
   -O, --oneline       socket&apos;</span>s data printed on a single line

   -A, <span class="token parameter variable">--query</span><span class="token operator">=</span>QUERY, <span class="token parameter variable">--socket</span><span class="token operator">=</span>QUERY
       QUERY :<span class="token operator">=</span> <span class="token punctuation">{</span>all<span class="token operator">|</span>inet<span class="token operator">|</span>tcp<span class="token operator">|</span>udp<span class="token operator">|</span>raw<span class="token operator">|</span>unix<span class="token operator">|</span>unix_dgram<span class="token operator">|</span>unix_stream<span class="token operator">|</span>unix_seqpacket<span class="token operator">|</span>packet<span class="token operator">|</span>netlink<span class="token operator">|</span>vsock_stream<span class="token operator">|</span>vsock_dgram<span class="token operator">|</span>tipc<span class="token punctuation">}</span><span class="token punctuation">[</span>,QUERY<span class="token punctuation">]</span>

   -D, <span class="token parameter variable">--diag</span><span class="token operator">=</span>FILE     Dump raw information about TCP sockets to FILE
   -F, <span class="token parameter variable">--filter</span><span class="token operator">=</span>FILE   <span class="token builtin class-name">read</span> filter information from FILE
       FILTER :<span class="token operator">=</span> <span class="token punctuation">[</span> state STATE-FILTER <span class="token punctuation">]</span> <span class="token punctuation">[</span> EXPRESSION <span class="token punctuation">]</span>
       STATE-FILTER :<span class="token operator">=</span> <span class="token punctuation">{</span>all<span class="token operator">|</span>connected<span class="token operator">|</span>synchronized<span class="token operator">|</span>bucket<span class="token operator">|</span>big<span class="token operator">|</span>TCP-STATES<span class="token punctuation">}</span>
         TCP-STATES :<span class="token operator">=</span> <span class="token punctuation">{</span>established<span class="token operator">|</span>syn-sent<span class="token operator">|</span>syn-recv<span class="token operator">|</span>fin-wait-<span class="token punctuation">{</span><span class="token number">1,2</span><span class="token punctuation">}</span><span class="token operator">|</span>time-wait<span class="token operator">|</span>closed<span class="token operator">|</span>close-wait<span class="token operator">|</span>last-ack<span class="token operator">|</span>listening<span class="token operator">|</span>closing<span class="token punctuation">}</span>
          connected :<span class="token operator">=</span> <span class="token punctuation">{</span>established<span class="token operator">|</span>syn-sent<span class="token operator">|</span>syn-recv<span class="token operator">|</span>fin-wait-<span class="token punctuation">{</span><span class="token number">1,2</span><span class="token punctuation">}</span><span class="token operator">|</span>time-wait<span class="token operator">|</span>close-wait<span class="token operator">|</span>last-ack<span class="token operator">|</span>closing<span class="token punctuation">}</span>
       synchronized :<span class="token operator">=</span> <span class="token punctuation">{</span>established<span class="token operator">|</span>syn-recv<span class="token operator">|</span>fin-wait-<span class="token punctuation">{</span><span class="token number">1,2</span><span class="token punctuation">}</span><span class="token operator">|</span>time-wait<span class="token operator">|</span>close-wait<span class="token operator">|</span>last-ack<span class="token operator">|</span>closing<span class="token punctuation">}</span>
             bucket :<span class="token operator">=</span> <span class="token punctuation">{</span>syn-recv<span class="token operator">|</span>time-wait<span class="token punctuation">}</span>
                big :<span class="token operator">=</span> <span class="token punctuation">{</span>established<span class="token operator">|</span>syn-sent<span class="token operator">|</span>fin-wait-<span class="token punctuation">{</span><span class="token number">1,2</span><span class="token punctuation">}</span><span class="token operator">|</span>closed<span class="token operator">|</span>close-wait<span class="token operator">|</span>last-ack<span class="token operator">|</span>listening<span class="token operator">|</span>closing<span class="token punctuation">}</span>
</code></pre>
<h1 id="docker&#x5185;&#x4E0B;&#x8F7D;&#x5931;&#x8D25;&#x7684;&#x89E3;&#x51B3;"><a name="docker&#x5185;&#x4E0B;&#x8F7D;&#x5931;&#x8D25;&#x7684;&#x89E3;&#x51B3;" class="anchor-navigation-ex-anchor" href="#docker&#x5185;&#x4E0B;&#x8F7D;&#x5931;&#x8D25;&#x7684;&#x89E3;&#x51B3;"><i class="fa fa-link" aria-hidden="true"></i></a>9. docker&#x5185;&#x4E0B;&#x8F7D;&#x5931;&#x8D25;&#x7684;&#x89E3;&#x51B3;</h1>
<h2 id="&#x73B0;&#x8C61;"><a name="&#x73B0;&#x8C61;" class="anchor-navigation-ex-anchor" href="#&#x73B0;&#x8C61;"><i class="fa fa-link" aria-hidden="true"></i></a>9.1. &#x73B0;&#x8C61;</h2>
<p>docker&#x5185;&#x4E0B;&#x8F7D;&#x5931;&#x8D25;, git clone&#x5931;&#x8D25;<br>&#x547D;&#x4EE4;:</p>
<pre class="language-"><code class="lang-sh"><span class="token assign-left variable">http_proxy</span><span class="token operator">=</span><span class="token string">&quot;&quot;</span> <span class="token function">curl</span> <span class="token parameter variable">-s</span> http://10.182.105.179:8088/godevtools/godevtool
<span class="token comment">#&#x6216;&#x8005;</span>
<span class="token function">git</span> clone https://gitlabe1.ext.net.nokia.com/godevsig/compatible.git/
</code></pre>
<p>&#x90FD;&#x5361;&#x4F4F;, &#x957F;&#x65F6;&#x95F4;&#x540E;&#x8005;&#x8FD8;&#x4F1A;&#x663E;&#x793A;
<code>OpenSSL SSL_connect: Connection reset by peer in connection to gitlabe1.ext.net.nokia.com:443</code></p>
<h2 id="&#x8C03;&#x67E5;"><a name="&#x8C03;&#x67E5;" class="anchor-navigation-ex-anchor" href="#&#x8C03;&#x67E5;"><i class="fa fa-link" aria-hidden="true"></i></a>9.2. &#x8C03;&#x67E5;</h2>
<h2 id="&#x6392;&#x67E5;"><a name="&#x6392;&#x67E5;" class="anchor-navigation-ex-anchor" href="#&#x6392;&#x67E5;"><i class="fa fa-link" aria-hidden="true"></i></a>9.3. &#x6392;&#x67E5;</h2>
<p>&#x4F7F;&#x7528;<code>http_proxy=&quot;&quot; curl -s http://10.182.105.179:8088/godevtools/godevtool</code>&#x6765;&#x590D;&#x73B0;&#x548C;&#x8C03;&#x67E5;  </p>
<ul>
<li>host&#x4E24;&#x4E2A;&#x547D;&#x4EE4;&#x90FD;&#x80FD;&#x6210;&#x529F;&#x6267;&#x884C;<br>-- &#x6240;&#x6709;&#x7684;&#x62A5;&#x6587;&#x90FD;&#x80FD;&#x8FDB;&#x51FA;host, &#x6392;&#x9664;&#x4E86;host&#x4FA7;&#x7684;&#x9632;&#x706B;&#x5899;&#x914D;&#x7F6E;&#x95EE;&#x9898;</li>
<li>docker&#x5185;&#x80FD;ping&#x901A;<br>-- &#x4E0D;&#x662F;dns&#x548C;&#x7B80;&#x5355;&#x7684;docker&#x7F51;&#x7EDC;&#x4E0D;&#x901A;&#x95EE;&#x9898;</li>
<li>docker&#x5185;&#x6267;&#x884C;<code>http_proxy=&quot;&quot; curl -s http://10.182.105.179:8088/</code>&#x547D;&#x4EE4;&#x5F88;&#x610F;&#x5916;&#x7684;&#x662F;&#x6B63;&#x5E38;&#x7684;</li>
<li>docker&#x91CC;&#x9762;<code>curl google.com</code>&#x662F;&#x6B63;&#x5E38;&#x7684;</li>
<li>docker&#x91CC;&#x9762;&#x52A0;&#x4E0D;&#x52A0;<code>http_proxy</code>&#x90FD;&#x80FD;&#x590D;&#x73B0;&#x95EE;&#x9898;</li>
</ul>
<p>&#x5230;&#x8FD9;&#x91CC;, &#x603B;&#x7ED3;&#x5982;&#x4E0B;:
docker&#x91CC;&#x9762;&#x57FA;&#x672C;&#x7F51;&#x7EDC;&#x6B63;&#x5E38;, &#x548C;&#x76EE;&#x6807;&#x80FD;&#x8FDE;&#x63A5;. &#x4F46;&#x4E0D;&#x77E5;&#x9053;&#x4EC0;&#x4E48;&#x539F;&#x56E0;, &#x4E0B;&#x8F7D;&#x548C;git clone&#x5931;&#x8D25;, &#x611F;&#x89C9;&#x597D;&#x50CF;&#x662F;&#x7C7B;&#x4F3C;&quot;&#x6587;&#x4EF6;&#x4E0B;&#x8F7D;&quot;&#x7684;&#x64CD;&#x4F5C;&#x5C31;&#x4E0D;&#x884C;</p>
<h3 id="&#x6293;&#x5305;"><a name="&#x6293;&#x5305;" class="anchor-navigation-ex-anchor" href="#&#x6293;&#x5305;"><i class="fa fa-link" aria-hidden="true"></i></a>9.3.1. &#x6293;&#x5305;</h3>
<p>&#x7528;&#x8FD9;&#x4E2A;&#x547D;&#x4EE4;&#x6293;&#x5305;:</p>
<pre class="language-"><code class="lang-sh"><span class="token function">sudo</span> tcpdump <span class="token parameter variable">-n</span> <span class="token string">&apos;(host 10.182.105.179) or (host 10.158.100.6)&apos;</span>
</code></pre>
<p><code>10.182.105.179</code>&#x5C31;&#x662F;<code>curl -s</code>&#x7684;&#x76EE;&#x6807;ip, <code>10.158.100.6</code>&#x662F;&#x4E2A;&#x4EE3;&#x7406;ip, &#x5728;&#x8FD9;&#x91CC;&#x6CA1;&#x6709;&#x4F7F;&#x7528;, &#x53EF;&#x4EE5;&#x5FFD;&#x7565;</p>
<p>&#x73B0;&#x8C61;:</p>
<h4 id="docker&#x5185;&#x6267;&#x884C;curl-host&#x4E0A;&#x6293;&#x5305;"><a name="docker&#x5185;&#x6267;&#x884C;curl-host&#x4E0A;&#x6293;&#x5305;" class="anchor-navigation-ex-anchor" href="#docker&#x5185;&#x6267;&#x884C;curl-host&#x4E0A;&#x6293;&#x5305;"><i class="fa fa-link" aria-hidden="true"></i></a>docker&#x5185;&#x6267;&#x884C;curl, host&#x4E0A;&#x6293;&#x5305;</h4>
<p><img src="img/networking_&#x6742;&#x8BB0;2_20221024154513.png" alt=""><br>&#x5B9E;&#x9645;&#x4E0A;, &#x8FD9;&#x4E2A;tcpdump&#x51E0;&#x4E4E;&#x5DF2;&#x7ECF;&#x663E;&#x793A;&#x4E86;&#x95EE;&#x9898;:</p>
<ul>
<li><code>192.168.0.16.60718</code>&#x5148;&#x7ED9;<code>10.182.105.179.8088</code>&#x53D1;SYNC</li>
<li>8088&#x56DE;SYNC&#x7684;ACK</li>
<li>60718&#x518D;&#x56DE;ACK, &#x81F3;&#x6B64;&#x63E1;&#x624B;&#x6210;&#x529F;(TCP&#x4E09;&#x6B21;&#x63E1;&#x624B;)</li>
<li>60718&#x5F00;&#x59CB;&#x53D1;PUSH&#x8BF7;&#x6C42;, seq&#x53F7;&#x4ECE;1&#x91CD;&#x65B0;&#x5F00;&#x59CB;, 1:104, &#x5171;103&#x5B57;&#x8282;</li>
<li>8080&#x56DE;ACK 104, &#x8868;&#x793A;&#x7B2C;104&#x53F7;&#x5B57;&#x8282;&#x6536;&#x5230;</li>
<li>8088&#x53D1;seq 1:18&#x5B57;&#x8282;</li>
<li>60718 ACK&#x5B57;&#x8282;18</li>
<li>8088<strong>&#x7A81;&#x7136;</strong>&#x53D1;seq 5810:6513&#x5B57;&#x8282;. &#x5373;19:5810&#x4E22;&#x5931;</li>
<li>60718&#x53D1;&#x73B0;seq&#x53F7;&#x8DF3;&#x53D8;&#x4E86;, &#x6CA1;&#x6709;&#x6536;&#x5230;18:5810&#x4E4B;&#x95F4;&#x7684;&#x5B57;&#x8282;, &#x53EA;&#x80FD;ACK&#x79FB;&#x690D;&#x6536;&#x5230;&#x7684;&#x5B57;&#x8282;18
&#x540C;&#x65F6;sack 5810:6514, sack&#x53EF;&#x4EE5;&#x907F;&#x514D;&#x53D1;&#x9001;&#x65B9;&#x91CD;&#x4F20;&#x5DF2;&#x7ECF;&#x6536;&#x5230;&#x7684;&#x62A5;&#x6587;</li>
<li>8088&#x80AF;&#x5B9A;&#x6536;&#x5230;&#x4E86;&#x8FD9;&#x4E2A;ack&#x62A5;&#x6587;, &#x5E76;&#x4E14;&#x5DF2;&#x7ECF;&#x77E5;&#x9053;&#x9700;&#x8981;&#x91CD;&#x4F20;. &#x53EF;&#x80FD;&#x5DF2;&#x7ECF;&#x91CD;&#x4F20;&#x4E86;, &#x4F46;&#x5728;60718&#x770B;&#x6765;, &#x4EC0;&#x4E48;&#x4E5F;&#x6CA1;&#x6536;&#x5230;.
&#x62A5;&#x6587;&#x80AF;&#x5B9A;&#x5728;&#x4E2D;&#x95F4;&#x73AF;&#x8282;&#x88AB;&#x4E22;&#x5F03;&#x4E86;.</li>
<li>18&#x79D2;&#x540E;, 60718&#x51B3;&#x5B9A;&#x4E0D;&#x518D;&#x7B49;&#x5F85;, &#x53D1;FIN; seq&#x53F7;&#x8FD8;&#x662F;&#x63A5;&#x7740;&#x81EA;&#x5DF1;&#x5DF2;&#x7ECF;&#x53D1;&#x9001;&#x7684;&#x5B57;&#x8282;&#x6570;&#x6765;, &#x540C;&#x65F6;&#x518D;&#x6B21;ack 18</li>
<li>8088&#x6536;&#x5230;FIN, &#x56DE;ack, &#x540E;&#x9762;&#x6CA1;&#x6293;&#x4E86;, &#x5E94;&#x8BE5;&#x662F;4&#x6B21;&#x6325;&#x624B;&#x540E;&#x65AD;&#x5F00;&#x8FDE;&#x63A5;</li>
</ul>
<p>&#x95EE;&#x9898;&#x5728;&#x4E8E;, 18:5810&#x5B57;&#x8282;&#x4E22;&#x5931;, &#x5171;5792&#x4E2A;&#x5B57;&#x8282;&#x4E22;&#x5931;&#x4E86;.</p>
<h4 id="&#x672C;&#x5730;host&#x76F4;&#x63A5;&#x6267;&#x884C;"><a name="&#x672C;&#x5730;host&#x76F4;&#x63A5;&#x6267;&#x884C;" class="anchor-navigation-ex-anchor" href="#&#x672C;&#x5730;host&#x76F4;&#x63A5;&#x6267;&#x884C;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x672C;&#x5730;host&#x76F4;&#x63A5;&#x6267;&#x884C;</h4>
<p>&#x5728;host&#x4E0A;&#x76F4;&#x63A5;&#x6267;&#x884C;curl&#x547D;&#x4EE4;, &#x4E00;&#x5207;&#x6B63;&#x5E38;<br><img src="img/networking_&#x6742;&#x8BB0;2_20221024154608.png" alt=""><br>&#x6CE8;&#x610F;&#x8FD9;&#x4E2A;mss&#x5B57;&#x6BB5;, &#x662F;&#x901A;&#x4FE1;&#x53CC;&#x65B9;&#x534F;&#x5546;mss&#x7528;&#x7684;. mss&#x6BD4;mtu&#x7565;&#x5C0F;&#x4E00;&#x70B9;, &#x57FA;&#x672C;&#x80FD;&#x53CD;&#x5E94;mtu&#x7684;&#x60C5;&#x51B5;.</p>
<p>&#x8FD9;&#x4E2A;&#x503C;&#x540E;&#x9762;&#x4F1A;&#x7528;&#x5230;.<br>host&#x4E0A;, curl&#x547D;&#x4EE4;&#x80FD;&#x63A5;&#x6536;8088&#x53D1;&#x7684;&quot;&#x6570;&#x636E;&quot;&#x62A5;&#x6587;, &#x4F9D;&#x6B21;&#x662F;&#x957F;&#x5EA6;&#x4E3A;2796, 1398, 2301&#x5B57;&#x8282;&#x7684;&#x62A5;&#x6587;.</p>
<p>&#x8FD9;&#x91CC;&#x518D;&#x8BB0;&#x4E00;&#x4E2A;&#x95EE;&#x9898;:<br>&#x4E3A;&#x4EC0;&#x4E48;&#x4F1A;&#x6709;&#x8FD9;&#x4E9B;&#x5927;&#x4E8E;MTU&#x7684;&#x62A5;&#x6587;? &#x540E;&#x9762;&#x4F1A;&#x8BB2;&#x5230;</p>
<p>&#x540E;&#x9762;&#x518D;&#x591A;&#x5BF9;&#x6BD4;&#x4E00;&#x7EC4;&#x6570;&#x636E;, &#x5C31;&#x80FD;&#x66F4;&#x6E05;&#x695A;</p>
<h4 id="&#x5BF9;&#x6BD4;&#x673A;&#x5668;&#x7684;docker&#x5185;&#x662F;&#x597D;&#x7684;"><a name="&#x5BF9;&#x6BD4;&#x673A;&#x5668;&#x7684;docker&#x5185;&#x662F;&#x597D;&#x7684;" class="anchor-navigation-ex-anchor" href="#&#x5BF9;&#x6BD4;&#x673A;&#x5668;&#x7684;docker&#x5185;&#x662F;&#x597D;&#x7684;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x5BF9;&#x6BD4;&#x673A;&#x5668;&#x7684;docker&#x5185;&#x662F;&#x597D;&#x7684;</h4>
<p>&#x53E6;&#x4E00;&#x4E2A;host&#x4E0A;, docker&#x5185;&#x6267;&#x884C;curl&#x662F;&#x597D;&#x7684;, &#x6293;&#x5305;&#x5982;&#x4E0B;<br><img src="img/networking_&#x6742;&#x8BB0;2_20221024154632.png" alt=""><br>&#x6B63;&#x597D;&#x6709;&#x8FD9;&#x4E2A;5792&#x4E2A;&#x5B57;&#x8282;&#x7684;&#x6570;&#x636E;</p>
<h4 id="&#x5BF9;&#x6BD4;&#x673A;&#x5668;&#x7684;host&#x4E0A;&#x4E5F;&#x662F;&#x597D;&#x7684;"><a name="&#x5BF9;&#x6BD4;&#x673A;&#x5668;&#x7684;host&#x4E0A;&#x4E5F;&#x662F;&#x597D;&#x7684;" class="anchor-navigation-ex-anchor" href="#&#x5BF9;&#x6BD4;&#x673A;&#x5668;&#x7684;host&#x4E0A;&#x4E5F;&#x662F;&#x597D;&#x7684;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x5BF9;&#x6BD4;&#x673A;&#x5668;&#x7684;host&#x4E0A;&#x4E5F;&#x662F;&#x597D;&#x7684;</h4>
<p><img src="img/networking_&#x6742;&#x8BB0;2_20221024154659.png" alt="">  </p>
<h3 id="&#x7591;&#x95EE;-&#x4E3A;&#x4EC0;&#x4E48;&#x6709;&#x5927;&#x4E8E;mtu&#x7684;&#x62A5;&#x6587;&#x51FA;&#x73B0;"><a name="&#x7591;&#x95EE;-&#x4E3A;&#x4EC0;&#x4E48;&#x6709;&#x5927;&#x4E8E;mtu&#x7684;&#x62A5;&#x6587;&#x51FA;&#x73B0;" class="anchor-navigation-ex-anchor" href="#&#x7591;&#x95EE;-&#x4E3A;&#x4EC0;&#x4E48;&#x6709;&#x5927;&#x4E8E;mtu&#x7684;&#x62A5;&#x6587;&#x51FA;&#x73B0;"><i class="fa fa-link" aria-hidden="true"></i></a>9.3.2. &#x7591;&#x95EE; &#x4E3A;&#x4EC0;&#x4E48;&#x6709;&#x5927;&#x4E8E;MTU&#x7684;&#x62A5;&#x6587;&#x51FA;&#x73B0;?</h3>
<p>&#x9996;&#x5148;&#x8981;&#x590D;&#x4E60;&#x4E00;&#x4E0B;tcpdump&#x7684;&#x539F;&#x7406;: <a href="https://jgsun.github.io/2019/01/21/linux-tcpdump" target="_blank">jianguo&#x7684;tcpdump&#x539F;&#x7406;&#x5206;&#x6790;</a></p>
<p>tcpdump&#x4E00;&#x822C;&#x4F7F;&#x7528;pcap_mmap&#x6A21;&#x5F0F;, &#x57FA;&#x672C;&#x4E0A;, &#x5728;driver&#x6536;&#x62A5;&#x4E4B;&#x540E;, &#x7ECF;&#x8FC7;bpf filter&#x540E;, &#x62A5;&#x6587;&#x62F7;&#x8D1D;&#x4E00;&#x4EFD;&#x7ED9;tcpdump</p>
<p><img src="img/networking_&#x6742;&#x8BB0;2_20221024154725.png" alt=""><br>tcpdump&#x5728;&#x7528;&#x6237;&#x6001;poll&#x7B49;&#x5F85;&#x88AB;&#x5524;&#x9192;, &#x62A5;&#x6587;ready&#x7684;&#x65F6;&#x5019;&#x5185;&#x6838;&#x5524;&#x9192;&#x7528;&#x6237;&#x6001;&#x8FDB;&#x7A0B;, &#x6B64;&#x65F6;&#x62A5;&#x6587;&#x5DF2;&#x7ECF;&#x88AB;mmap&#x4E86;, &#x7528;&#x6237;&#x6001;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x8BFB;, &#x8FD9;&#x6BD4;&#x4F20;&#x7EDF;&#x7684;recv&#x7B49;&#x7CFB;&#x7EDF;&#x8C03;&#x7528;&#x51CF;&#x5C11;&#x4E86;&#x4E00;&#x6B21;&#x62A5;&#x6587;&#x62F7;&#x8D1D;.</p>
<p>tcpdump&#x6BCF;&#x6B21;&#x6253;&#x5370;&#x4E00;&#x4E2A;packet, &#x8FD9;&#x4E2A;packet&#x5C31;&#x662F;&quot;&#x539F;&#x59CB;&#x7684;&quot;&#x62A5;&#x6587;. 
&#x90A3;&#x4E3A;&#x4EC0;&#x4E48;&#x62A5;&#x6587;&#x957F;&#x5EA6;&#x5927;&#x4E8E;MTU&#x4E86;&#x5462;?
-- &#x8FD9;&#x548C;&#x7F51;&#x5361;&#x7684;offload&#x529F;&#x80FD;&#x6709;&#x5173;. &#x89C1;&#x7B14;&#x8BB0;<code>Linux&#x4E0B;&#x7F51;&#x7EDC;&#x6027;&#x80FD;&#x4F18;&#x5316;&#x65B9;&#x6CD5;&#x7B80;&#x6790;</code></p>
<p>&#x4E00;&#x822C;offload&#x5305;&#x62EC;:&#x8FD9;&#x4E9B;&#x662F;&#x7F51;&#x5361;&#x7279;&#x6027;, &#x7531;&#x7F51;&#x5361;&#x9A71;&#x52A8;&#x58F0;&#x660E;&#x652F;&#x6301;.</p>
<ul>
<li>TSO (TCP Segmentation Offload&#xFF09;</li>
<li>GSO (Generic Segmentation Offload)</li>
<li>LRO (Large Receive Offload)</li>
<li>GRO (Generic Receive Offload)</li>
</ul>
<p>&#x5728;&#x63A5;&#x6536;&#x8DEF;&#x5F84;&#x4E0A;, &#x7269;&#x7406;&#x7EBF;&#x8DEF;&#x4E0A;&#x7684;&#x62A5;&#x6587;&#x8FD8;&#x662F;&#x6309;&#x7167;MTU&#x7684;, &#x5373;&#x4E00;&#x822C;&#x662F;1500; &#x4F46;&#x5230;&#x7F51;&#x5361;, &#x786C;&#x4EF6;&#x4F1A;&#x81EA;&#x52A8;&#x505A;LRO, &#x628A;&#x5206;&#x7247;&#x7684;&#x62A5;&#x6587;&#x91CD;&#x7EC4;, &#x8FD9;&#x6837;&#x4E0A;&#x5C42;&#x534F;&#x8BAE;&#x6808;&#x5C31;&#x80FD;&#x51CF;&#x5C11;&#x70B9;&#x8D1F;&#x62C5;.<br>&#x53D1;&#x9001;&#x8DEF;&#x5F84;&#x4E5F;&#x4E00;&#x6837;, &#x534F;&#x8BAE;&#x6808;&#x77E5;&#x9053;&#x7F51;&#x5361;&#x786C;&#x4EF6;&#x652F;&#x6301;TSO, &#x5C31;&#x4E0D;&#x5728;&#x534F;&#x8BAE;&#x6808;&#x5206;&#x7247;&#x4E86;, &#x5206;&#x7247;&#x63A8;&#x8FDF;&#x5230;&#x7F51;&#x5361;&#x4E0A;&#x8FDB;&#x884C;, &#x63D0;&#x9AD8;&#x6027;&#x80FD;.</p>
<p>tcpdump&#x770B;&#x5230;&#x7684;&#x62A5;&#x6587;, &#x662F;&#x7F51;&#x5361;&#x786C;&#x4EF6;&#x5DF2;&#x7ECF;&#x91CD;&#x7EC4;&#x540E;&#x7684;&#x62A5;&#x6587;, &#x8D85;&#x51FA;&#x4E86;mtu&#x4E5F;&#x662F;&#x5BF9;&#x7684;. &#x4F46;&#x6CE8;&#x610F;, &#x5BF9;&#x7AEF;&#x4E0D;&#x77E5;&#x9053;&#x7F51;&#x5361;&#x7684;offload&#x529F;&#x80FD;, &#x8FD8;&#x662F;&#x6309;&#x7167;MTU&#x5728;&#x53D1;. &#x5E94;&#x8BE5;&#x8BF4;, &#x7269;&#x7406;&#x7EBF;&#x8DEF;&#x4E0A;&#x8D70;&#x7684;&#x8FD8;&#x662F;MTU.</p>
<p><a href="https://packetbomb.com/how-can-the-packet-size-be-greater-than-the-mtu/" target="_blank">&#x53C2;&#x8003;&#x89E3;&#x91CA;</a></p>
<p>&#x8FD9;&#x56DE;&#x7B54;&#x4E86;&#x4E0A;&#x9762;&#x7684;&#x95EE;&#x9898;.</p>
<h3 id="&#x4E3A;&#x4EC0;&#x4E48;&#x5927;&#x62A5;&#x6587;&#x4F1A;&#x4E22;"><a name="&#x4E3A;&#x4EC0;&#x4E48;&#x5927;&#x62A5;&#x6587;&#x4F1A;&#x4E22;" class="anchor-navigation-ex-anchor" href="#&#x4E3A;&#x4EC0;&#x4E48;&#x5927;&#x62A5;&#x6587;&#x4F1A;&#x4E22;"><i class="fa fa-link" aria-hidden="true"></i></a>9.3.3. &#x4E3A;&#x4EC0;&#x4E48;&#x5927;&#x62A5;&#x6587;&#x4F1A;&#x4E22;?</h3>
<p>&#x5176;&#x5B9E;&#x662F;MTU.</p>
<p>&#x6CE8;&#x610F;&#x5230;, &#x95EE;&#x9898;docker&#x4E2D;&#x7684;MTU&#x662F;1500, host&#x4E0A;&#x662F;1450. </p>
<p>&#x5728;docker&#x5185;, curl&#x7A0B;&#x5E8F;&#x548C;8088&#x63E1;&#x624B;&#x7684;&#x65F6;&#x5019;, &#x534F;&#x5546;&#x7684;mss&#x4E3A;1460, &#x5DF2;&#x7ECF;&#x6BD4;host&#x7684;MTU&#x5927;. 8088&#x53D1;&#x8FC7;&#x6765;&#x7684;&#x62A5;&#x6587;&#x8D85;&#x8FC7;MTU&#x4F1A;&#x88AB;host driver&#x4E22;&#x5F03;.</p>
<h2 id="&#x89E3;&#x51B3;"><a name="&#x89E3;&#x51B3;" class="anchor-navigation-ex-anchor" href="#&#x89E3;&#x51B3;"><i class="fa fa-link" aria-hidden="true"></i></a>9.4. &#x89E3;&#x51B3;</h2>
<p>&#x4FEE;&#x6539;host MTU</p>
<pre class="language-"><code class="lang-sh"><span class="token function">man</span> <span class="token function">ip</span> <span class="token function">link</span>
<span class="token function">ip</span> <span class="token function">link</span> <span class="token builtin class-name">set</span> dev eth0 mtu <span class="token number">1500</span>
</code></pre>
<p>&#x7ED3;&#x679C;, &#x914D;&#x7F6E;&#x5931;&#x8D25;, &#x9A71;&#x52A8;&#x8FD4;&#x56DE;&#x4E0D;&#x652F;&#x6301;.</p>
<p>&#x5728;docker&#x91CC;&#x9762;&#x4E5F;&#x914D;&#x4E0D;&#x4E86;mtu, &#x4F1A;&#x62A5;netlink&#x9519;&#x8BEF;.</p>
<p>&#x5B9E;&#x9645;&#x4E0A;, docker&#x7684;mtu&#x662F;docker deamon&#x7BA1;&#x7684;.</p>
<p>&#x4FEE;&#x6539;&#x65B9;&#x6CD5;&#x5982;&#x4E0B;:<br>&#x589E;&#x52A0;docker&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;, &#x6307;&#x5B9A;mtu</p>
<pre class="language-"><code class="lang-sh">yingjieb@cloud-server-1:~$ <span class="token function">cat</span> /etc/docker/daemon.json
<span class="token punctuation">{</span>
  <span class="token string">&quot;mtu&quot;</span><span class="token builtin class-name">:</span> <span class="token number">1400</span>
<span class="token punctuation">}</span>
</code></pre>
<p>&#x7136;&#x540E;&#x91CD;&#x542F;docker daemon<br><code>sudo systemctl restart docker</code></p>
<p>&#x5B9E;&#x9645;&#x4E0A;, &#x8FD9;&#x4E2A;mtu&#x662F;&#x914D;&#x5728;docker0&#x7F51;&#x6865;&#x4E0A;&#x7684;</p>
<pre class="language-"><code class="lang-sh">yingjieb@cloud-server-2:~$ <span class="token function">ip</span> <span class="token function">link</span> show
<span class="token number">1</span>: lo: <span class="token operator">&lt;</span>LOOPBACK,UP,LOWER_UP<span class="token operator">&gt;</span> mtu <span class="token number">65536</span> qdisc noqueue state UNKNOWN mode DEFAULT group default qlen <span class="token number">1000</span>
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
<span class="token number">2</span>: eth0: <span class="token operator">&lt;</span>BROADCAST,MULTICAST,UP,LOWER_UP<span class="token operator">&gt;</span> mtu <span class="token number">1450</span> qdisc fq_codel state UP mode DEFAULT group default qlen <span class="token number">1000</span>
    link/ether fa:16:3e:2d:47:a6 brd ff:ff:ff:ff:ff:ff
<span class="token number">3</span>: docker0: <span class="token operator">&lt;</span>BROADCAST,MULTICAST,UP,LOWER_UP<span class="token operator">&gt;</span> mtu <span class="token number">1400</span> qdisc noqueue state UP mode DEFAULT group default
    link/ether 02:42:16:b8:42:bf brd ff:ff:ff:ff:ff:ff
<span class="token number">27</span>: veth3195c8e@if26: <span class="token operator">&lt;</span>BROADCAST,MULTICAST,UP,LOWER_UP<span class="token operator">&gt;</span> mtu <span class="token number">1400</span> qdisc noqueue master docker0 state UP mode DEFAULT group default
    link/ether <span class="token number">46</span>:f2:76:de:50:00 brd ff:ff:ff:ff:ff:ff link-netnsid <span class="token number">0</span>
</code></pre>
<h1 id="&#x80FD;ping&#x901A;&#x4F46;tcp&#x4E0D;&#x80FD;&#x63E1;&#x624B;&#x73B0;&#x8C61;&#x7684;&#x89E3;&#x51B3;"><a name="&#x80FD;ping&#x901A;&#x4F46;tcp&#x4E0D;&#x80FD;&#x63E1;&#x624B;&#x73B0;&#x8C61;&#x7684;&#x89E3;&#x51B3;" class="anchor-navigation-ex-anchor" href="#&#x80FD;ping&#x901A;&#x4F46;tcp&#x4E0D;&#x80FD;&#x63E1;&#x624B;&#x73B0;&#x8C61;&#x7684;&#x89E3;&#x51B3;"><i class="fa fa-link" aria-hidden="true"></i></a>10. &#x80FD;ping&#x901A;&#x4F46;tcp&#x4E0D;&#x80FD;&#x63E1;&#x624B;&#x73B0;&#x8C61;&#x7684;&#x89E3;&#x51B3;</h1>
<h2 id="&#x73B0;&#x8C61;_1"><a name="&#x73B0;&#x8C61;_1" class="anchor-navigation-ex-anchor" href="#&#x73B0;&#x8C61;_1"><i class="fa fa-link" aria-hidden="true"></i></a>10.1. &#x73B0;&#x8C61;</h2>
<p>&#x677F;&#x5B50;(miniolt): 10.242.29.181
&#x670D;&#x52A1;&#x5668;: 10.182.105.138</p>
<p>&#x677F;&#x5B50;&#x653E;&#x5728;&#x5DE5;&#x4F4D;&#x684C;&#x5B50;&#x4E0A;, &#x548C;&#x6211;&#x7684;PC&#x901A;&#x8FC7;&#x7F51;&#x7EBF;&#x8FDE;&#x63A5;&#x5C0F;&#x4EA4;&#x6362;&#x673A;&#x7684;&#x65B9;&#x5F0F;, &#x8FDE;&#x5230;&#x529E;&#x516C;&#x5927;&#x7F51;.
&#x677F;&#x5B50;&#x4E0A;&#x7528;dhclient&#x83B7;&#x53D6;&#x7684;IP&#x5730;&#x5740;, ip&#x548C;PC&#x673A;&#x540C;&#x7F51;&#x6BB5;.</p>
<p>&#x4F7F;&#x7528;&#x65F6;, &#x677F;&#x5B50;&#x80FD;&#x591F;ping&#x901A;&#x670D;&#x52A1;&#x5668;, &#x4F46;wget, ssh&#x7B49;&#x90FD;&#x4E0D;&#x901A;.</p>
<pre class="language-"><code class="lang-sh">~ <span class="token comment"># wget http://10.182.105.138:8088/release/latest/mips/topid</span>
Connecting to <span class="token number">10.182</span>.105.138:8088 <span class="token punctuation">(</span><span class="token number">10.182</span>.105.138:8088<span class="token punctuation">)</span>
wget: can&apos;t connect to remote <span class="token function">host</span> <span class="token punctuation">(</span><span class="token number">10.182</span>.105.138<span class="token punctuation">)</span>: Connection refused
</code></pre>
<h2 id="&#x6293;&#x5305;&#x53CA;&#x73B0;&#x8C61;"><a name="&#x6293;&#x5305;&#x53CA;&#x73B0;&#x8C61;" class="anchor-navigation-ex-anchor" href="#&#x6293;&#x5305;&#x53CA;&#x73B0;&#x8C61;"><i class="fa fa-link" aria-hidden="true"></i></a>10.2. &#x6293;&#x5305;&#x53CA;&#x73B0;&#x8C61;</h2>
<p>&#x5728;&#x677F;&#x5B50;&#x4E0A;&#x548C;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x5206;&#x522B;&#x6293;&#x5305;<br>&#x677F;&#x5B50;&#x4E0A;&#x6293;&#x548C;&#x670D;&#x52A1;&#x5668;IP&#x7684;&#x4EA4;&#x4E92;&#x7684;&#x5305;</p>
<pre class="language-"><code>tcpdump -nevvxx host 10.182.105.138
</code></pre><p>&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x6293;&#x548C;&#x677F;&#x5B50;IP&#x4EA4;&#x4E92;&#x7684;&#x5305;</p>
<pre class="language-"><code>tcpdump -nevvxx host 10.242.29.181
</code></pre><p>&#x5728;&#x670D;&#x52A1;&#x5668;&#x4E0A;, &#x80FD;&#x591F;&#x6293;&#x5230;&#x5305;, &#x8BF4;&#x660E;&#x62A5;&#x6587;&#x80FD;&#x591F;&#x5230;&#x8FBE;, &#x8FD9;&#x548C;ping&#x7684;&#x7ED3;&#x679C;&#x662F;&#x4E00;&#x81F4;&#x7684;.<br>&#x4F46;TCP&#x5EFA;&#x7ACB;&#x8FDE;&#x63A5;&#x7684;3&#x6B21;&#x63E1;&#x624B;&#x4E0D;&#x6B63;&#x5E38;. &#x670D;&#x52A1;&#x5668;&#x8BA4;&#x4E3A;&#x5BF9;&#x7AEF;&#x6700;&#x540E;&#x53D1;&#x4E86;RESET, &#x7EC8;&#x6B62;&#x8FDE;&#x63A5;.</p>
<pre class="language-"><code class="lang-sh"><span class="token comment">#&#x5BF9;&#x7AEF;&#x53D1;&#x7684;&#x63E1;&#x624B;&#x8BF7;&#x6C42;: Flags  [S]</span>
07:18:58.264471 fa:16:3e:36:da:c0 <span class="token operator">&gt;</span> fa:16:3e:cf:b4:34, ethertype IPv4 <span class="token punctuation">(</span>0x0800<span class="token punctuation">)</span>, length <span class="token number">74</span>: <span class="token punctuation">(</span>tos 0x48, ttl <span class="token number">50</span>, <span class="token function">id</span> <span class="token number">1104</span>, offset <span class="token number">0</span>, flags <span class="token punctuation">[</span>DF<span class="token punctuation">]</span>, proto TCP <span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span>, length <span class="token number">60</span><span class="token punctuation">)</span>
    <span class="token number">10.242</span>.29.181.39672 <span class="token operator">&gt;</span> <span class="token number">192.168</span>.0.14.8088: Flags <span class="token punctuation">[</span>S<span class="token punctuation">]</span>, <span class="token function">cksum</span> 0xbcab <span class="token punctuation">(</span>correct<span class="token punctuation">)</span>, <span class="token function">seq</span> <span class="token number">2058190441</span>, win <span class="token number">29200</span>, options <span class="token punctuation">[</span>mss <span class="token number">1460</span>,sackOK,TS val <span class="token number">33978937</span> ecr <span class="token number">0</span>,nop,wscale <span class="token number">7</span><span class="token punctuation">]</span>, length <span class="token number">0</span>

<span class="token comment">#&#x63E1;&#x624B;&#x56DE;&#x5E94;: Flags  [S.]</span>
07:18:58.264555 fa:16:3e:cf:b4:34 <span class="token operator">&gt;</span> fa:16:3e:36:da:c0, ethertype IPv4 <span class="token punctuation">(</span>0x0800<span class="token punctuation">)</span>, length <span class="token number">74</span>: <span class="token punctuation">(</span>tos 0x0, ttl <span class="token number">64</span>, <span class="token function">id</span> <span class="token number">0</span>, offset <span class="token number">0</span>, flags <span class="token punctuation">[</span>DF<span class="token punctuation">]</span>, proto TCP <span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span>, length <span class="token number">60</span><span class="token punctuation">)</span>
    <span class="token number">192.168</span>.0.14.8088 <span class="token operator">&gt;</span> <span class="token number">10.242</span>.29.181.39672: Flags <span class="token punctuation">[</span>S.<span class="token punctuation">]</span>, <span class="token function">cksum</span> 0xe98b <span class="token punctuation">(</span>incorrect -<span class="token operator">&gt;</span> 0x22e1<span class="token punctuation">)</span>, <span class="token function">seq</span> <span class="token number">3461531035</span>, ack <span class="token number">2058190442</span>, win <span class="token number">64720</span>, options <span class="token punctuation">[</span>mss <span class="token number">8102</span>,sackOK,TS val <span class="token number">3513094066</span> ecr <span class="token number">33978937</span>,nop,wscale <span class="token number">7</span><span class="token punctuation">]</span>, length <span class="token number">0</span>

<span class="token comment">#&#x5BF9;&#x7AEF;&#x53D1;&#x6765;RESET&#x6D88;&#x606F;, &#x8FDE;&#x63A5;&#x4E2D;&#x65AD;</span>
07:18:58.270345 fa:16:3e:36:da:c0 <span class="token operator">&gt;</span> fa:16:3e:cf:b4:34, ethertype IPv4 <span class="token punctuation">(</span>0x0800<span class="token punctuation">)</span>, length <span class="token number">54</span>: <span class="token punctuation">(</span>tos 0x48, ttl <span class="token number">50</span>, <span class="token function">id</span> <span class="token number">29613</span>, offset <span class="token number">0</span>, flags <span class="token punctuation">[</span>DF<span class="token punctuation">]</span>, proto TCP <span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span>, length <span class="token number">40</span><span class="token punctuation">)</span>
    <span class="token number">10.242</span>.29.181.39672 <span class="token operator">&gt;</span> <span class="token number">192.168</span>.0.14.8088: Flags <span class="token punctuation">[</span>R<span class="token punctuation">]</span>, <span class="token function">cksum</span> 0x12db <span class="token punctuation">(</span>correct<span class="token punctuation">)</span>, <span class="token function">seq</span> <span class="token number">2058190442</span>, win <span class="token number">0</span>, length <span class="token number">0</span>
</code></pre>
<p>&#x90A3;&#x677F;&#x5B50;&#x662F;&#x5426;&#x53D1;&#x4E86;RESET&#x6D88;&#x606F;? &#x4E0B;&#x9762;&#x662F;&#x677F;&#x5B50;&#x7684;&#x6293;&#x5305;</p>
<pre class="language-"><code class="lang-sh"><span class="token comment">#&#x677F;&#x5B50;&#x53D1;SYN, &#x63E1;&#x624B;&#x8BF7;&#x6C42;</span>
<span class="token number">12</span>:58:08.892054 c8:f8:6d:b7:0e:24 <span class="token operator">&gt;</span> 00:00:5e:00:01:02, ethertype IPv4 <span class="token punctuation">(</span>0x0800<span class="token punctuation">)</span>, length <span class="token number">74</span>: <span class="token punctuation">(</span>tos 0x0, ttl <span class="token number">64</span>, <span class="token function">id</span> <span class="token number">1104</span>, offset <span class="token number">0</span>, flags <span class="token punctuation">[</span>DF<span class="token punctuation">]</span>, proto TCP <span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span>, length <span class="token number">60</span><span class="token punctuation">)</span>
    <span class="token number">10.242</span>.29.181.39672 <span class="token operator">&gt;</span> <span class="token number">10.182</span>.105.138.8088: Flags <span class="token punctuation">[</span>S<span class="token punctuation">]</span>, <span class="token function">cksum</span> 0x9d15 <span class="token punctuation">(</span>incorrect -<span class="token operator">&gt;</span> 0x0922<span class="token punctuation">)</span>, <span class="token function">seq</span> <span class="token number">2058190441</span>, win <span class="token number">29200</span>, options <span class="token punctuation">[</span>mss <span class="token number">1460</span>,sackOK,TS val <span class="token number">33978937</span> ecr <span class="token number">0</span>,nop,wscale <span class="token number">7</span><span class="token punctuation">]</span>, length <span class="token number">0</span>

<span class="token comment">#&#x677F;&#x5B50;&#x6536;&#x5230;&#x8FDE;&#x7EED;2&#x6B21;RESET, &#x8BF7;&#x6C42;&#x8FDE;&#x63A5;&#x65AD;&#x5F00;; &#x4F46;&#x5BF9;&#x7AEF;&#x5176;&#x5B9E;&#x5E76;&#x6CA1;&#x6709;&#x53D1;RESET</span>
<span class="token number">12</span>:58:08.892221 2c:fa:a2:3a:88:75 <span class="token operator">&gt;</span> c8:f8:6d:b7:0e:24, ethertype IPv4 <span class="token punctuation">(</span>0x0800<span class="token punctuation">)</span>, length <span class="token number">60</span>: <span class="token punctuation">(</span>tos 0x0, ttl <span class="token number">120</span>, <span class="token function">id</span> <span class="token number">64765</span>, offset <span class="token number">0</span>, flags <span class="token punctuation">[</span>none<span class="token punctuation">]</span>, proto TCP <span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span>, length <span class="token number">40</span><span class="token punctuation">)</span>
    <span class="token number">10.182</span>.105.138.8088 <span class="token operator">&gt;</span> <span class="token number">10.242</span>.29.181.39672: Flags <span class="token punctuation">[</span>R.<span class="token punctuation">]</span>, <span class="token function">cksum</span> 0x5f41 <span class="token punctuation">(</span>correct<span class="token punctuation">)</span>, <span class="token function">seq</span> <span class="token number">0</span>, ack <span class="token number">2058190442</span>, win <span class="token number">0</span>, length <span class="token number">0</span>

<span class="token number">12</span>:58:08.892283 2c:fa:a2:3a:88:75 <span class="token operator">&gt;</span> c8:f8:6d:b7:0e:24, ethertype IPv4 <span class="token punctuation">(</span>0x0800<span class="token punctuation">)</span>, length <span class="token number">60</span>: <span class="token punctuation">(</span>tos 0x0, ttl <span class="token number">120</span>, <span class="token function">id</span> <span class="token number">64765</span>, offset <span class="token number">0</span>, flags <span class="token punctuation">[</span>none<span class="token punctuation">]</span>, proto TCP <span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span>, length <span class="token number">40</span><span class="token punctuation">)</span>
    <span class="token number">10.182</span>.105.138.8088 <span class="token operator">&gt;</span> <span class="token number">10.242</span>.29.181.39672: Flags <span class="token punctuation">[</span>R.<span class="token punctuation">]</span>, <span class="token function">cksum</span> 0x5965 <span class="token punctuation">(</span>correct<span class="token punctuation">)</span>, <span class="token function">seq</span> <span class="token number">1500</span>, ack <span class="token number">1</span>, win <span class="token number">0</span>, length <span class="token number">0</span>

<span class="token comment">#&#x677F;&#x5B50;&#x6536;&#x5230;&#x5BF9;&#x7AEF;&#x53D1;&#x6765;&#x7684;SYN&#x54CD;&#x5E94;, &#x4F46;&#x4E3A;&#x65F6;&#x5DF2;&#x665A;</span>
<span class="token number">12</span>:58:08.898020 2c:fa:a2:3a:88:75 <span class="token operator">&gt;</span> c8:f8:6d:b7:0e:24, ethertype IPv4 <span class="token punctuation">(</span>0x0800<span class="token punctuation">)</span>, length <span class="token number">74</span>: <span class="token punctuation">(</span>tos 0x48, ttl <span class="token number">50</span>, <span class="token function">id</span> <span class="token number">0</span>, offset <span class="token number">0</span>, flags <span class="token punctuation">[</span>DF<span class="token punctuation">]</span>, proto TCP <span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span>, length <span class="token number">60</span><span class="token punctuation">)</span>
    <span class="token number">10.182</span>.105.138.8088 <span class="token operator">&gt;</span> <span class="token number">10.242</span>.29.181.39672: Flags <span class="token punctuation">[</span>S.<span class="token punctuation">]</span>, <span class="token function">cksum</span> 0x6f57 <span class="token punctuation">(</span>correct<span class="token punctuation">)</span>, <span class="token function">seq</span> <span class="token number">3461531035</span>, ack <span class="token number">2058190442</span>, win <span class="token number">64720</span>, options <span class="token punctuation">[</span>mss <span class="token number">8102</span>,sackOK,TS val <span class="token number">3513094066</span> ecr <span class="token number">33978937</span>,nop,wscale <span class="token number">7</span><span class="token punctuation">]</span>, length <span class="token number">0</span>

<span class="token comment">#&#x677F;&#x5B50;&#x7ED9;&#x5BF9;&#x7AEF;&#x53D1;RESET, &#x56E0;&#x4E3A;&#x677F;&#x5B50;&#x8BA4;&#x4E3A;&#x8FDE;&#x63A5;&#x9700;&#x8981;abort.</span>
<span class="token number">12</span>:58:08.898076 c8:f8:6d:b7:0e:24 <span class="token operator">&gt;</span> 00:00:5e:00:01:02, ethertype IPv4 <span class="token punctuation">(</span>0x0800<span class="token punctuation">)</span>, length <span class="token number">54</span>: <span class="token punctuation">(</span>tos 0x48, ttl <span class="token number">64</span>, <span class="token function">id</span> <span class="token number">29613</span>, offset <span class="token number">0</span>, flags <span class="token punctuation">[</span>DF<span class="token punctuation">]</span>, proto TCP <span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span>, length <span class="token number">40</span><span class="token punctuation">)</span>
    <span class="token number">10.242</span>.29.181.39672 <span class="token operator">&gt;</span> <span class="token number">10.182</span>.105.138.8088: Flags <span class="token punctuation">[</span>R<span class="token punctuation">]</span>, <span class="token function">cksum</span> 0x5f51 <span class="token punctuation">(</span>correct<span class="token punctuation">)</span>, <span class="token function">seq</span> <span class="token number">2058190442</span>, win <span class="token number">0</span>, length <span class="token number">0</span>

<span class="token comment">#&#x677F;&#x5B50;&#x53C8;&#x6536;&#x5230;&#x8FDE;&#x7EED;4&#x6B21;&#x7684;RESET</span>
<span class="token number">12</span>:58:08.898085 2c:fa:a2:3a:88:75 <span class="token operator">&gt;</span> c8:f8:6d:b7:0e:24, ethertype IPv4 <span class="token punctuation">(</span>0x0800<span class="token punctuation">)</span>, length <span class="token number">60</span>: <span class="token punctuation">(</span>tos 0x0, ttl <span class="token number">123</span>, <span class="token function">id</span> <span class="token number">64765</span>, offset <span class="token number">0</span>, flags <span class="token punctuation">[</span>none<span class="token punctuation">]</span>, proto TCP <span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span>, length <span class="token number">40</span><span class="token punctuation">)</span>
    <span class="token number">10.182</span>.105.138.8088 <span class="token operator">&gt;</span> <span class="token number">10.242</span>.29.181.39672: Flags <span class="token punctuation">[</span>R.<span class="token punctuation">]</span>, <span class="token function">cksum</span> 0xcb51 <span class="token punctuation">(</span>correct<span class="token punctuation">)</span>, <span class="token function">seq</span> <span class="token number">1</span>, ack <span class="token number">1</span>, win <span class="token number">0</span>, length <span class="token number">0</span>

<span class="token number">12</span>:58:08.898100 2c:fa:a2:3a:88:75 <span class="token operator">&gt;</span> c8:f8:6d:b7:0e:24, ethertype IPv4 <span class="token punctuation">(</span>0x0800<span class="token punctuation">)</span>, length <span class="token number">60</span>: <span class="token punctuation">(</span>tos 0x0, ttl <span class="token number">123</span>, <span class="token function">id</span> <span class="token number">64765</span>, offset <span class="token number">0</span>, flags <span class="token punctuation">[</span>none<span class="token punctuation">]</span>, proto TCP <span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span>, length <span class="token number">40</span><span class="token punctuation">)</span>
    <span class="token number">10.182</span>.105.138.8088 <span class="token operator">&gt;</span> <span class="token number">10.242</span>.29.181.39672: Flags <span class="token punctuation">[</span>R.<span class="token punctuation">]</span>, <span class="token function">cksum</span> 0xc575 <span class="token punctuation">(</span>correct<span class="token punctuation">)</span>, <span class="token function">seq</span> <span class="token number">1501</span>, ack <span class="token number">1</span>, win <span class="token number">0</span>, length <span class="token number">0</span>

<span class="token number">12</span>:58:08.898119 2c:fa:a2:3a:88:75 <span class="token operator">&gt;</span> c8:f8:6d:b7:0e:24, ethertype IPv4 <span class="token punctuation">(</span>0x0800<span class="token punctuation">)</span>, length <span class="token number">60</span>: <span class="token punctuation">(</span>tos 0x0, ttl <span class="token number">123</span>, <span class="token function">id</span> <span class="token number">48059</span>, offset <span class="token number">0</span>, flags <span class="token punctuation">[</span>none<span class="token punctuation">]</span>, proto TCP <span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span>, length <span class="token number">40</span><span class="token punctuation">)</span>
    <span class="token number">10.182</span>.105.138.8088 <span class="token operator">&gt;</span> <span class="token number">10.242</span>.29.181.39672: Flags <span class="token punctuation">[</span>R.<span class="token punctuation">]</span>, <span class="token function">cksum</span> 0xcb51 <span class="token punctuation">(</span>correct<span class="token punctuation">)</span>, <span class="token function">seq</span> <span class="token number">1</span>, ack <span class="token number">1</span>, win <span class="token number">0</span>, length <span class="token number">0</span>

<span class="token number">12</span>:58:08.898132 2c:fa:a2:3a:88:75 <span class="token operator">&gt;</span> c8:f8:6d:b7:0e:24, ethertype IPv4 <span class="token punctuation">(</span>0x0800<span class="token punctuation">)</span>, length <span class="token number">60</span>: <span class="token punctuation">(</span>tos 0x0, ttl <span class="token number">123</span>, <span class="token function">id</span> <span class="token number">48059</span>, offset <span class="token number">0</span>, flags <span class="token punctuation">[</span>none<span class="token punctuation">]</span>, proto TCP <span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span>, length <span class="token number">40</span><span class="token punctuation">)</span>
    <span class="token number">10.182</span>.105.138.8088 <span class="token operator">&gt;</span> <span class="token number">10.242</span>.29.181.39672: Flags <span class="token punctuation">[</span>R.<span class="token punctuation">]</span>, <span class="token function">cksum</span> 0xc575 <span class="token punctuation">(</span>correct<span class="token punctuation">)</span>, <span class="token function">seq</span> <span class="token number">1501</span>, ack <span class="token number">1</span>, win <span class="token number">0</span>, length <span class="token number">0</span>
</code></pre>
<h2 id="&#x53EF;&#x80FD;&#x7684;&#x89E3;&#x91CA;"><a name="&#x53EF;&#x80FD;&#x7684;&#x89E3;&#x91CA;" class="anchor-navigation-ex-anchor" href="#&#x53EF;&#x80FD;&#x7684;&#x89E3;&#x91CA;"><i class="fa fa-link" aria-hidden="true"></i></a>10.3. &#x53EF;&#x80FD;&#x7684;&#x89E3;&#x91CA;</h2>
<p>&#x677F;&#x5B50;&#x6536;&#x5230;&#x7684;RESET&#x62A5;&#x6587;&#x4E0D;&#x662F;&#x670D;&#x52A1;&#x5668;&#x53D1;&#x7684;. &#x4ECE;&#x65F6;&#x95F4;&#x4E0A;&#x6765;&#x8BF4;, &#x677F;&#x5B50;&#x5148;&#x6536;&#x5230;RESET, &#x518D;&#x6536;&#x5230;&#x771F;&#x6B63;&#x7684;&#x5BF9;&#x7AEF;&#x53D1;&#x6765;&#x7684;SYN&#x54CD;&#x5E94;. &#x90A3;&#x5F88;&#x53EF;&#x80FD;&#x662F;&#x4E2D;&#x95F4;&#x7684;&#x8DEF;&#x7531;&#x5668;&#x6216;&#x9632;&#x706B;&#x5899;&#x53D1;&#x7ED9;&#x677F;&#x5B50;&#x7684;, &#x53EF;&#x80FD;&#x677F;&#x5B50;&#x7684;mac&#x4E0D;&#x5728;&#x529E;&#x516C;&#x7F51;&#x7EDC;&#x7684;&#x767D;&#x540D;&#x5355;&#x91CC;&#x9762;. &#x4F46;&#x9632;&#x706B;&#x5899;&#x7684;&#x8FD9;&#x79CD;&#x7B56;&#x7565;, &#x53EA;&#x662F;&#x591A;&#x53D1;&#x4E86;RESET&quot;&#x5E72;&#x6270;&quot;&#x62A5;&#x6587;, &#x4ECE;&#x6293;&#x5305;&#x60C5;&#x51B5;&#x6765;&#x770B;, &#x6B63;&#x5E38;&#x7684;&#x62A5;&#x6587;&#x8FD8;&#x662F;&#x80FD;&#x591F;&#x5728;&#x677F;&#x5B50;&#x548C;&#x670D;&#x52A1;&#x5668;&#x4E4B;&#x95F4;&#x6D41;&#x52A8;.</p>
<h2 id="&#x89E3;&#x51B3;&#x65B9;&#x6848;"><a name="&#x89E3;&#x51B3;&#x65B9;&#x6848;" class="anchor-navigation-ex-anchor" href="#&#x89E3;&#x51B3;&#x65B9;&#x6848;"><i class="fa fa-link" aria-hidden="true"></i></a>10.4. &#x89E3;&#x51B3;&#x65B9;&#x6848;</h2>
<p>&#x56E0;&#x4E3A;<code>Flags [R.]</code>&#x662F;&#x4E2D;&#x95F4;&#x9632;&#x706B;&#x5899;/&#x8DEF;&#x7531;&#x5668;&#x53D1;&#x7684;, &#x662F;&quot;&#x591A;&#x51FA;&#x6765;&quot;&#x7684;&#x62A5;&#x6587;. &#x90A3;&#x53EF;&#x4EE5;&#x8BBE;&#x7F6E;iptables&#x89C4;&#x5219;&#x628A;&#x8FD9;&#x4E9B;&#x62A5;&#x6587;&#x8FC7;&#x6EE4;&#x6389;:</p>
<pre class="language-"><code class="lang-sh"><span class="token comment">#&#x5BF9;&#x9ED8;&#x8BA4;&#x7684;filter&#x8868;, &#x589E;&#x52A0;&#x89C4;&#x5219;&#x5230;INPUT&#x94FE;(-A), &#x5BF9;tcp&#x534F;&#x8BAE;, &#x6709;RST&#x6807;&#x8BB0;&#x7684;&#x62A5;&#x6587;, jump&#x5230;target DROP(-j)</span>
iptables <span class="token parameter variable">-A</span> INPUT <span class="token parameter variable">-p</span> tcp --tcp-flags RST RST <span class="token parameter variable">-j</span> DROP
</code></pre>
<p>&#x5177;&#x4F53;&#x53EF;&#x67E5;&#x9605;<code>man iptables</code></p>
<pre class="language-"><code>-p tcp --tcp-flags LIST1 LIST2    
      &#x5339;&#x914D;&#x6307;&#x5B9A;&#x7684;TCP&#x6807;&#x8BB0;&#xFF0C;&#x6709;&#x4E24;&#x4E2A;&#x53C2;&#x6570;&#x5217;&#x8868;&#xFF0C;&#x5217;&#x8868;&#x5185;&#x90E8;&#x7528;&#x9017;&#x53F7;&#x4E3A;&#x5206;&#x9694;&#x7B26;&#xFF0C;&#x4E24;&#x4E2A;&#x5217;&#x8868;&#x4E4B;&#x95F4;&#x7528;&#x7A7A;&#x683C;&#x5206;&#x5F00;,
      LIST1&#x7528;&#x4F5C;&#x53C2;&#x6570;&#x68C0;&#x67E5;&#xFF0C;LIST2&#x7528;&#x4F5C;&#x53C2;&#x6570;&#x5339;&#x914D;&#x3002;&#x53EF;&#x7528;&#x6807;&#x5FD7;&#x6709;&#xFF1A;
           SYN( &#x540C;&#x6B65;; &#x8868;&#x793A;&#x5F00;&#x59CB;&#x4F1A;&#x8BDD;&#x8BF7;&#x6C42; ), ACK&#xFF08;&#x5E94;&#x7B54;&#xFF09;,
           FIN&#xFF08;&#x7ED3;&#x675F;; &#x7ED3;&#x675F;&#x4F1A;&#x8BDD;&#xFF09;&#xFF0C;RST(&#x590D;&#x4F4D;;&#x4E2D;&#x65AD;&#x4E00;&#x4E2A;&#x8FDE;&#x63A5;) &#xFF0C;
           PSH&#xFF08;&#x63A8;&#x9001;; &#x6570;&#x636E;&#x5305;&#x7ACB;&#x5373;&#x53D1;&#x9001;&#xFF09;&#xFF0C;URG&#xFF08;&#x7D27;&#x6025; &#xFF09;&#xFF0C; 
           ALL&#xFF08;&#x6307;&#x9009;&#x5B9A;&#x6240;&#x6709;&#x7684;&#x6807;&#x8BB0;&#xFF09;&#xFF0C;NONE&#xFF08;&#x6307;&#x672A;&#x9009;&#x5B9A;&#x4EFB;&#x4F55;&#x6807;&#x8BB0;&#xFF09;
</code></pre><p>&#x7ECF;&#x9A8C;&#x8BC1;, &#x914D;&#x597D;iptables&#x89C4;&#x5219;&#x540E;, &#x4ECE;&#x670D;&#x52A1;&#x5668;&#x4E0B;&#x8F7D;&#x7684;wget&#x547D;&#x4EE4;&#x53EF;&#x4EE5;&#x6B63;&#x5E38;&#x5DE5;&#x4F5C;&#x4E86;.</p>
<h2 id="&#x540E;&#x7EED;"><a name="&#x540E;&#x7EED;" class="anchor-navigation-ex-anchor" href="#&#x540E;&#x7EED;"><i class="fa fa-link" aria-hidden="true"></i></a>10.5. &#x540E;&#x7EED;</h2>
<p>&#x4F46;&#x4E2D;&#x95F4;&#x8DEF;&#x7531;/&#x9632;&#x706B;&#x5899;&#x53D1;&#x8FC7;&#x6765;&#x7684;RESET&#x62A5;&#x6587;&#x8FD8;&#x662F;&#x5F88;&#x591A;, &#x6293;&#x5305;&#x80FD;&#x6293;&#x5230;&#x5927;&#x91CF;&#x7684;&#x53D1;&#x5230;&#x677F;&#x5B50;&#x7684;<code>Flags [R.]</code>&#x62A5;&#x6587;. &#x8FD9;&#x4E9B;&#x62A5;&#x6587;&#x6839;&#x636E;&#x89C4;&#x5219;&#x90FD;&#x88AB;&#x4E22;&#x5F03;&#x4E86;.</p>
<pre class="language-"><code class="lang-sh"><span class="token number">12</span>:45:15.602124 2c:fa:a2:3a:88:75 <span class="token operator">&gt;</span> c8:f8:6d:b7:0e:24, ethertype IPv4 <span class="token punctuation">(</span>0x0800<span class="token punctuation">)</span>, length <span class="token number">60</span>: <span class="token punctuation">(</span>tos 0x0, ttl <span class="token number">123</span>, <span class="token function">id</span> <span class="token number">63223</span>, offset <span class="token number">0</span>, flags <span class="token punctuation">[</span>none<span class="token punctuation">]</span>, proto TCP <span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span>, length <span class="token number">40</span><span class="token punctuation">)</span>
    <span class="token number">10.182</span>.105.138.8088 <span class="token operator">&gt;</span> <span class="token number">10.242</span>.29.181.39658: Flags <span class="token punctuation">[</span>R.<span class="token punctuation">]</span>, <span class="token function">cksum</span> 0x02b2 <span class="token punctuation">(</span>correct<span class="token punctuation">)</span>, <span class="token function">seq</span> <span class="token number">3873418</span>, ack <span class="token number">108</span>, win <span class="token number">0</span>, length <span class="token number">0</span>

<span class="token number">12</span>:45:15.602265 2c:fa:a2:3a:88:75 <span class="token operator">&gt;</span> c8:f8:6d:b7:0e:24, ethertype IPv4 <span class="token punctuation">(</span>0x0800<span class="token punctuation">)</span>, length <span class="token number">60</span>: <span class="token punctuation">(</span>tos 0x0, ttl <span class="token number">120</span>, <span class="token function">id</span> <span class="token number">31869</span>, offset <span class="token number">0</span>, flags <span class="token punctuation">[</span>none<span class="token punctuation">]</span>, proto TCP <span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span>, length <span class="token number">40</span><span class="token punctuation">)</span>
    <span class="token number">10.182</span>.105.138.8088 <span class="token operator">&gt;</span> <span class="token number">10.242</span>.29.181.39658: Flags <span class="token punctuation">[</span>R.<span class="token punctuation">]</span>, <span class="token function">cksum</span> 0x3b0e <span class="token punctuation">(</span>correct<span class="token punctuation">)</span>, <span class="token function">seq</span> <span class="token number">3858990</span>, ack <span class="token number">108</span>, win <span class="token number">0</span>, length <span class="token number">0</span>

<span class="token number">12</span>:45:15.602406 2c:fa:a2:3a:88:75 <span class="token operator">&gt;</span> c8:f8:6d:b7:0e:24, ethertype IPv4 <span class="token punctuation">(</span>0x0800<span class="token punctuation">)</span>, length <span class="token number">60</span>: <span class="token punctuation">(</span>tos 0x0, ttl <span class="token number">123</span>, <span class="token function">id</span> <span class="token number">48831</span>, offset <span class="token number">0</span>, flags <span class="token punctuation">[</span>none<span class="token punctuation">]</span>, proto TCP <span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span>, length <span class="token number">40</span><span class="token punctuation">)</span>
    <span class="token number">10.182</span>.105.138.8088 <span class="token operator">&gt;</span> <span class="token number">10.242</span>.29.181.39658: Flags <span class="token punctuation">[</span>R.<span class="token punctuation">]</span>, <span class="token function">cksum</span> 0x9705 <span class="token punctuation">(</span>correct<span class="token punctuation">)</span>, <span class="token function">seq</span> <span class="token number">3900982</span>, ack <span class="token number">108</span>, win <span class="token number">0</span>, length <span class="token number">0</span>

<span class="token punctuation">..</span>.&#x5F88;&#x591A;
</code></pre>
<h1 id="tcp&#x63E1;&#x624B;&#x56FE;&#x793A;"><a name="tcp&#x63E1;&#x624B;&#x56FE;&#x793A;" class="anchor-navigation-ex-anchor" href="#tcp&#x63E1;&#x624B;&#x56FE;&#x793A;"><i class="fa fa-link" aria-hidden="true"></i></a>11. tcp&#x63E1;&#x624B;&#x56FE;&#x793A;</h1>
<p><img src="img/networking_&#x6742;&#x8BB0;2_20221024155054.png" alt="">  </p>
<p>&#x6458;&#x81EA;: <a href="https://blog.csdn.net/u014721096/article/details/78626729" target="_blank">https://blog.csdn.net/u014721096/article/details/78626729</a></p>
<h1 id="tcpdump&#x7684;filter&#x4F7F;&#x7528;"><a name="tcpdump&#x7684;filter&#x4F7F;&#x7528;" class="anchor-navigation-ex-anchor" href="#tcpdump&#x7684;filter&#x4F7F;&#x7528;"><i class="fa fa-link" aria-hidden="true"></i></a>12. tcpdump&#x7684;filter&#x4F7F;&#x7528;</h1>
<pre class="language-"><code class="lang-c"><span class="token comment">//&#x6240;&#x6709;&#x7ECF;&#x8FC7;eth-mgnt, &#x76EE;&#x7684;&#x6216;&#x6E90;ip&#x662F;10.182.105.138&#x7684;&#x62A5;&#x6587;</span>
tcpdump <span class="token operator">-</span>i eth<span class="token operator">-</span>mgnt <span class="token operator">-</span>nevvxx host <span class="token number">10.182</span><span class="token number">.105</span><span class="token number">.138</span>

<span class="token comment">//&#x76EE;&#x7684;&#x6216;&#x6E90;&#x7AEF;&#x53E3;&#x662F;22</span>
tcpdump <span class="token operator">-</span>i enp0s3 port <span class="token number">22</span>
<span class="token comment">//&#x76EE;&#x7684;&#x7AEF;&#x53E3;&#x662F;22</span>
tcpdump <span class="token operator">-</span>i enp0s3 dst port <span class="token number">22</span>

<span class="token comment">//&#x6293;&#x53D6;&#x76EE;&#x7684;&#x5730;&#x5740;&#x662F;192.168.1.254&#x6216;192.168.1.200&#x7AEF;&#x53E3;&#x662F;80&#x7684;TCP&#x6570;&#x636E;</span>
tcpdump &apos;<span class="token punctuation">(</span><span class="token punctuation">(</span>tcp<span class="token punctuation">)</span> <span class="token function">and</span> <span class="token punctuation">(</span>port <span class="token number">80</span><span class="token punctuation">)</span> <span class="token function">and</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>dst host <span class="token number">192.168</span><span class="token number">.1</span><span class="token number">.254</span><span class="token punctuation">)</span> <span class="token function">or</span> <span class="token punctuation">(</span>dst host <span class="token number">192.168</span><span class="token number">.1</span><span class="token number">.200</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>&apos;

<span class="token comment">//&#x6293;&#x53D6;&#x76EE;&#x6807;MAC&#x5730;&#x5740;&#x662F;00:01:02:03:04:05&#x7684;ICMP&#x6570;&#x636E;</span>
tcpdump &apos;<span class="token punctuation">(</span><span class="token punctuation">(</span>icmp<span class="token punctuation">)</span> <span class="token function">and</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>ether dst host <span class="token number">00</span><span class="token operator">:</span><span class="token number">01</span><span class="token operator">:</span><span class="token number">02</span><span class="token operator">:</span><span class="token number">03</span><span class="token operator">:</span><span class="token number">04</span><span class="token operator">:</span><span class="token number">05</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>&apos;

<span class="token comment">//&#x6293;&#x53D6;&#x76EE;&#x7684;&#x7F51;&#x7EDC;&#x662F;192.168&#xFF0C;&#x4F46;&#x76EE;&#x7684;&#x4E3B;&#x673A;&#x4E0D;&#x662F;192.168.1.200&#x7684;TCP&#x6570;&#x636E;</span>
tcpdump &apos;<span class="token punctuation">(</span><span class="token punctuation">(</span>tcp<span class="token punctuation">)</span> <span class="token function">and</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>dst net <span class="token number">192.168</span><span class="token punctuation">)</span> <span class="token function">and</span> <span class="token punctuation">(</span>not dst host <span class="token number">192.168</span><span class="token number">.1</span><span class="token number">.200</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>&apos;
</code></pre>
<h2 id="&#x7F51;&#x7EDC;&#x8FC7;&#x6EE4;"><a name="&#x7F51;&#x7EDC;&#x8FC7;&#x6EE4;" class="anchor-navigation-ex-anchor" href="#&#x7F51;&#x7EDC;&#x8FC7;&#x6EE4;"><i class="fa fa-link" aria-hidden="true"></i></a>12.1. &#x7F51;&#x7EDC;&#x8FC7;&#x6EE4;</h2>
<pre class="language-"><code>tcpdump -i enp0s3 net 192.168
tcpdump -i enp0s3 src net 192.168
tcpdump -i enp0s3 dst net 192.168
</code></pre><h2 id="&#x534F;&#x8BAE;&#x8FC7;&#x6EE4;"><a name="&#x534F;&#x8BAE;&#x8FC7;&#x6EE4;" class="anchor-navigation-ex-anchor" href="#&#x534F;&#x8BAE;&#x8FC7;&#x6EE4;"><i class="fa fa-link" aria-hidden="true"></i></a>12.2. &#x534F;&#x8BAE;&#x8FC7;&#x6EE4;</h2>
<pre class="language-"><code>tcpdump -i enp0s3 arp
tcpdump -i enp0s3 ip
tcpdump -i enp0s3 tcp
tcpdump -i enp0s3 udp
tcpdump -i enp0s3 icmp
</code></pre><h1 id="iptable"><a name="iptable" class="anchor-navigation-ex-anchor" href="#iptable"><i class="fa fa-link" aria-hidden="true"></i></a>13. iptable</h1>
<p>iptables [-t table] &#x6307;&#x5B9A;&#x89C4;&#x5219;&#x8868;
-t &#x53C2;&#x6570;&#x7528;&#x6765;&#xFF0C;&#x5185;&#x5EFA;&#x7684;&#x89C4;&#x5219;&#x8868;&#x6709;&#x4E09;&#x4E2A;&#xFF0C;&#x5206;&#x522B;&#x662F;&#xFF1A;nat&#x3001;mangle &#x548C; filter&#xFF0C;&#x5F53;&#x672A;&#x6307;&#x5B9A;&#x89C4;&#x5219;&#x8868;&#x65F6;&#xFF0C;&#x5219;&#x4E00;&#x5F8B;&#x89C6;&#x4E3A;&#x662F; filter&#x3002;&#x4E2A;&#x89C4;&#x5219;&#x8868;&#x7684;&#x529F;&#x80FD;&#x5982;&#x4E0B;&#xFF1A;</p>
<ul>
<li><p>nat&#xFF1A;&#x6B64;&#x89C4;&#x5219;&#x8868;&#x62E5;&#x6709; PREROUTING &#x548C; POSTROUTING &#x4E24;&#x4E2A;&#x89C4;&#x5219;&#x94FE;&#xFF0C;&#x4E3B;&#x8981;&#x529F;&#x80FD;&#x4E3A;&#x8FDB;&#x884C;&#x4E00;&#x5BF9;&#x4E00;&#x3001;&#x4E00;&#x5BF9;&#x591A;&#x3001;&#x591A;&#x5BF9;&#x591A;&#x7B49;&#x7F51;&#x5740;&#x8F6C;&#x6362;&#x5DE5;&#x4F5C;&#xFF08;SNAT&#x3001;DNAT&#xFF09;&#xFF0C;&#x8FD9;&#x4E2A;&#x89C4;&#x5219;&#x8868;&#x9664;&#x4E86;&#x4F5C;&#x7F51;&#x5740;&#x8F6C;&#x6362;&#x5916;&#xFF0C;&#x8BF7;&#x4E0D;&#x8981;&#x505A;&#x5176;&#x5B83;&#x7528;&#x9014;&#x3002;</p>
</li>
<li><p>mangle&#xFF1A;&#x6B64;&#x89C4;&#x5219;&#x8868;&#x62E5;&#x6709; PREROUTING&#x3001;FORWARD &#x548C; POSTROUTING &#x4E09;&#x4E2A;&#x89C4;&#x5219;&#x94FE;&#x3002;&#x9664;&#x4E86;&#x8FDB;&#x884C;&#x7F51;&#x5740;&#x8F6C;&#x6362;&#x5DE5;&#x4F5C;&#x4F1A;&#x6539;&#x5199;&#x5C01;&#x5305;&#x5916;&#xFF0C;&#x5728;&#x67D0;&#x4E9B;&#x7279;&#x6B8A;&#x5E94;&#x7528;&#x53EF;&#x80FD;&#x4E5F;&#x5FC5;&#x987B;&#x53BB;&#x6539;&#x5199;&#x5C01;&#x5305;&#xFF08;TTL&#x3001;TOS&#xFF09;&#x6216;&#x8005;&#x662F;&#x8BBE;&#x5B9A; MARK&#xFF08;&#x5C06;&#x5C01;&#x5305;&#x4F5C;&#x8BB0;&#x53F7;&#xFF0C;&#x4EE5;&#x8FDB;&#x884C;&#x540E;&#x7EED;&#x7684;&#x8FC7;&#x6EE4;&#xFF09;&#xFF0C;&#x8FD9;&#x65F6;&#x5C31;&#x5FC5;&#x987B;&#x5C06;&#x8FD9;&#x4E9B;&#x5DE5;&#x4F5C;&#x5B9A;&#x4E49;&#x5728; mangle &#x89C4;&#x5219;&#x8868;&#x4E2D;&#xFF0C;&#x7531;&#x4E8E;&#x4F7F;&#x7528;&#x7387;&#x4E0D;&#x9AD8;&#xFF0C;&#x6211;&#x4EEC;&#x4E0D;&#x6253;&#x7B97;&#x5728;&#x8FD9;&#x91CC;&#x8BA8;&#x8BBA; mangle &#x7684;&#x7528;&#x6CD5;&#x3002;</p>
</li>
<li><p>filter&#xFF1A; &#x8FD9;&#x4E2A;&#x89C4;&#x5219;&#x8868;&#x662F;&#x9ED8;&#x8BA4;&#x89C4;&#x5219;&#x8868;&#xFF0C;&#x62E5;&#x6709; INPUT&#x3001;FORWARD &#x548C; OUTPUT &#x4E09;&#x4E2A;&#x89C4;&#x5219;&#x94FE;&#xFF0C;&#x8FD9;&#x4E2A;&#x89C4;&#x5219;&#x8868;&#x987E;&#x540D;&#x601D;&#x4E49;&#x662F;&#x7528;&#x6765;&#x8FDB;&#x884C;&#x5C01;&#x5305;&#x8FC7;&#x6EE4;&#x7684;&#x5904;&#x7406;&#x52A8;&#x4F5C;&#xFF08;&#x4F8B;&#x5982;&#xFF1A;DROP&#x3001; LOG&#x3001; ACCEPT &#x6216; REJECT&#xFF09;&#xFF0C;&#x6211;&#x4EEC;&#x4F1A;&#x5C06;&#x57FA;&#x672C;&#x89C4;&#x5219;&#x90FD;&#x5EFA;&#x7ACB;&#x5728;&#x6B64;&#x89C4;&#x5219;&#x8868;&#x4E2D;&#x3002;</p>
</li>
</ul>
<p>&#x6CE8;:&#x8FD8;&#x6709;&#x4E2A;raw&#x8868;</p>
<h2 id="iptable&#x67E5;&#x770B;&#x89C4;&#x5219;"><a name="iptable&#x67E5;&#x770B;&#x89C4;&#x5219;" class="anchor-navigation-ex-anchor" href="#iptable&#x67E5;&#x770B;&#x89C4;&#x5219;"><i class="fa fa-link" aria-hidden="true"></i></a>13.1. iptable&#x67E5;&#x770B;&#x89C4;&#x5219;</h2>
<pre class="language-"><code>iptables -nvL
iptables -nvL -t raw
iptables -nvL -t nat
iptables -nvL -t mangle
</code></pre><h2 id="iptable-&#x6E05;&#x9664;&#x6240;&#x6709;&#x7684;rule-&#x5141;&#x8BB8;&#x6240;&#x6709;traffic"><a name="iptable-&#x6E05;&#x9664;&#x6240;&#x6709;&#x7684;rule-&#x5141;&#x8BB8;&#x6240;&#x6709;traffic" class="anchor-navigation-ex-anchor" href="#iptable-&#x6E05;&#x9664;&#x6240;&#x6709;&#x7684;rule-&#x5141;&#x8BB8;&#x6240;&#x6709;traffic"><i class="fa fa-link" aria-hidden="true"></i></a>13.2. iptable &#x6E05;&#x9664;&#x6240;&#x6709;&#x7684;rule, &#x5141;&#x8BB8;&#x6240;&#x6709;traffic</h2>
<p>First, set the default policies for each of the built-in chains to <code>ACCEPT</code>. The main reason to do this is to ensure that you won&#x2019;t be locked out from your server via SSH:</p>
<pre class="language-"><code>iptables -P INPUT ACCEPT
iptables -P FORWARD ACCEPT
iptables -P OUTPUT ACCEPT
</code></pre><p>Then flush the <code>nat</code> and <code>mangle</code> tables, flush all chains (<code>-F</code>), and delete all non-default chains (<code>-X</code>):</p>
<pre class="language-"><code>iptables -t nat -F
iptables -t nat -X
iptables -t mangle -F
iptables -t mangle -X
iptables -F
iptables -X
iptables -t raw -F
iptables -t raw -X
</code></pre><p>Your firewall will now allow all network traffic. If you list your rules now, you will will see there are none, and only the three default chains (INPUT, FORWARD, and OUTPUT) remain
&#x53C2;&#x8003;: <a href="https://www.digitalocean.com/community/tutorials/how-to-list-and-delete-iptables-firewall-rules" target="_blank">https://www.digitalocean.com/community/tutorials/how-to-list-and-delete-iptables-firewall-rules</a></p>
<h1 id="&#x591A;&#x7EBF;&#x7A0B;&#x80FD;&#x4E0D;&#x80FD;&#x540C;&#x65F6;&#x5199;&#x540C;&#x4E00;&#x4E2A;socket"><a name="&#x591A;&#x7EBF;&#x7A0B;&#x80FD;&#x4E0D;&#x80FD;&#x540C;&#x65F6;&#x5199;&#x540C;&#x4E00;&#x4E2A;socket" class="anchor-navigation-ex-anchor" href="#&#x591A;&#x7EBF;&#x7A0B;&#x80FD;&#x4E0D;&#x80FD;&#x540C;&#x65F6;&#x5199;&#x540C;&#x4E00;&#x4E2A;socket"><i class="fa fa-link" aria-hidden="true"></i></a>14. &#x591A;&#x7EBF;&#x7A0B;&#x80FD;&#x4E0D;&#x80FD;&#x540C;&#x65F6;&#x5199;&#x540C;&#x4E00;&#x4E2A;socket?</h1>
<p>&#x5148;&#x516C;&#x5E03;&#x7B54;&#x6848;: golang&#x548C;java&#x53EF;&#x4EE5;, &#x4F46;c&#x548C;python&#x4E0D;&#x80FD;</p>
<p>&#x8BE6;&#x89C1;&#x7B14;&#x8BB0;: &#x4E00;&#x4E2A;Socket&#x80FD;&#x5426;&#x88AB;&#x591A;&#x7EBF;&#x7A0B;&#x5199;&#x5165;</p>
<p>&#x591A;&#x7EBF;&#x7A0B;&#x540C;&#x65F6;&#x5199;&#x5165;&#x4E00;&#x4E2A;socket, &#x4E00;&#x4E2A;&#x5199;data1, &#x4E00;&#x4E2A;&#x5199;data2, &#x5185;&#x6838;&#x7684;send_buffer&#x53EF;&#x80FD;&#x4F1A;&#x628A;data1&#x548C;data2&#x4EA4;&#x9519;.<br>&#x89E3;&#x91CA;: &#x5728;write&#x7CFB;&#x7EDF;&#x8C03;&#x7528;&#x91CC;, &#x53EF;&#x80FD;&#x53D1;&#x751F;short write&#x73B0;&#x8C61;, &#x5373;&#x53EA;&#x5199;&#x4E86;&#x4E00;&#x90E8;&#x5206;&#x7528;&#x6237;&#x6570;&#x636E;&#x5230;&#x5185;&#x6838;buffer, write&#x5373;&#x8FD4;&#x56DE;&#x5E76;&#x544A;&#x77E5;&#x5B9E;&#x9645;&#x7684;&#x5199;&#x5165;&#x5B57;&#x8282;&#x6570;; &#x90A3;&#x4E48;&#x53E6;&#x5916;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x7684;write&#x5C31;&#x6709;&#x673A;&#x4F1A;&#x5199;&#x5165;&#x53E6;&#x5916;&#x7684;data.</p>
<p>golang&#x7684;write&#x5B9E;&#x73B0;&#x91CC;, &#x5E94;&#x8BE5;&#x662F;&#x5BF9;&#x7CFB;&#x7EDF;&#x8C03;&#x7528;write&#x52A0;&#x4E86;&#x9501;; &#x4F46;&#x5982;&#x4F55;&#x5904;&#x7406;shot write&#x95EE;&#x9898;&#x5462;? -- &#x8981;&#x770B;&#x770B;&#x6E90;&#x7801;<br>golang&#x7684;net/Conn&#x7684;api&#x8BF4;&#x660E;&#x91CC;, &#x76F4;&#x63A5;&#x8BF4;&#x4E86;  </p>
<blockquote>
<p>Multiple goroutines may invoke methods on a Conn simultaneously.</p>
</blockquote>
<h2 id="&#x8001;&#x5916;&#x7684;&#x95EE;&#x7B54;"><a name="&#x8001;&#x5916;&#x7684;&#x95EE;&#x7B54;" class="anchor-navigation-ex-anchor" href="#&#x8001;&#x5916;&#x7684;&#x95EE;&#x7B54;"><i class="fa fa-link" aria-hidden="true"></i></a>14.1. &#x8001;&#x5916;&#x7684;&#x95EE;&#x7B54;</h2>
<p>&#x4E0B;&#x9762;&#x7684;&#x95EE;&#x7B54;&#x4E5F;&#x6709;&#x5177;&#x4F53;&#x7684;&#x4EE3;&#x7801;&#x548C;&#x5B9E;&#x9A8C;&#x8BC1;&#x660E;&#x8FD9;&#x4E2A;&#x73B0;&#x8C61;:<br><a href="https://unix.stackexchange.com/questions/364396/concurrently-reading-writing-to-the-same-unix-socket" target="_blank">https://unix.stackexchange.com/questions/364396/concurrently-reading-writing-to-the-same-unix-socket</a><br>&#x4ED6;&#x7528;pythong&#x5199;&#x4E86;&#x5B9E;&#x9A8C;&#x4EE3;&#x7801;, &#x7ED3;&#x679C;&#x53D1;&#x751F;&#x4E86;&#x6570;&#x636E;incomplete </p>
<blockquote>
<p>You can see that payload in some cases (<code>b</code>, <code>d</code>) is incomplete, however missing fragments are received later (<code>c</code>)<br>Therefore simultaneous writing to <code>unix sockets</code> is <em><del>OK</del></em> NOT OK</p>
</blockquote>
<h2 id="&#x77E5;&#x4E4E;&#x7684;&#x89E3;&#x91CA;"><a name="&#x77E5;&#x4E4E;&#x7684;&#x89E3;&#x91CA;" class="anchor-navigation-ex-anchor" href="#&#x77E5;&#x4E4E;&#x7684;&#x89E3;&#x91CA;"><i class="fa fa-link" aria-hidden="true"></i></a>14.2. &#x77E5;&#x4E4E;&#x7684;&#x89E3;&#x91CA;</h2>
<ul>
<li>&#x5BF9;&#x4E8E; UDP&#xFF0C;&#x591A;&#x7EBF;&#x7A0B;&#x8BFB;&#x5199;&#x540C;&#x4E00;&#x4E2A; socket &#x4E0D;&#x7528;&#x52A0;&#x9501;&#xFF0C;&#x4E0D;&#x8FC7;&#x66F4;&#x597D;&#x7684;&#x505A;&#x6CD5;&#x662F;&#x6BCF;&#x4E2A;&#x7EBF;&#x7A0B;&#x6709;&#x81EA;&#x5DF1;&#x7684; socket&#xFF0C;&#x907F;&#x514D; contention&#xFF0C;&#x53EF;&#x4EE5;&#x7528; SO_REUSEPORT &#x6765;&#x5B9E;&#x73B0;&#x8FD9;&#x4E00;&#x70B9;&#x3002;</li>
<li>&#x5BF9;&#x4E8E; TCP&#xFF0C;&#x901A;&#x5E38;&#x591A;&#x7EBF;&#x7A0B;&#x8BFB;&#x5199;&#x540C;&#x4E00;&#x4E2A; socket &#x662F;&#x9519;&#x8BEF;&#x7684;&#x8BBE;&#x8BA1;&#xFF0C;&#x56E0;&#x4E3A;&#x6709; short write &#x7684;&#x53EF;&#x80FD;&#x3002;&#x5047;&#x5982;&#x4F60;&#x52A0;&#x9501;&#xFF0C;&#x800C;&#x53C8;&#x53D1;&#x751F; short write&#xFF0C;&#x4F60;&#x662F;&#x4E0D;&#x662F;&#x8981;&#x4E00;&#x76F4;&#x7B49;&#x5230;&#x6574;&#x6761;&#x6D88;&#x606F;&#x53D1;&#x9001;&#x5B8C;&#x624D;&#x89E3;&#x9501;&#xFF08;&#x65E0;&#x8BBA;&#x963B;&#x585E;IO&#x8FD8;&#x662F;&#x975E;&#x963B;&#x585E;IO&#xFF09;&#xFF1F;&#x5982;&#x679C;&#x8FD9;&#x6837;&#xFF0C;&#x4F60;&#x7684;&#x4E34;&#x754C;&#x533A;&#x957F;&#x5EA6;&#x7531;&#x5BF9;&#x65B9;&#x4EC0;&#x4E48;&#x65F6;&#x5019;&#x63A5;&#x6536;&#x6570;&#x636E;&#x6765;&#x51B3;&#x5B9A;&#xFF0C;&#x4E00;&#x4E2A;&#x6162;&#x7684; peer &#x5C31;&#x628A;&#x4F60;&#x7684;&#x7A0B;&#x5E8F;&#x641E;&#x6B7B;&#x4E86;&#x3002;</li>
</ul>
<p>&#x603B;&#x7ED3;&#xFF1A;&#x5BF9;&#x4E8E; UDP&#xFF0C;&#x52A0;&#x9501;&#x662F;&#x591A;&#x4F59;&#x7684;&#xFF1B;&#x5BF9;&#x4E8E; TCP&#xFF0C;&#x52A0;&#x9501;&#x662F;&#x9519;&#x8BEF;&#x7684;</p>
<p>&#x4F5C;&#x8005;&#xFF1A;&#x9648;&#x7855;
&#x94FE;&#x63A5;&#xFF1A;<a href="https://www.zhihu.com/question/56899596/answer/150926723" target="_blank">https://www.zhihu.com/question/56899596/answer/150926723</a>
&#x6765;&#x6E90;&#xFF1A;&#x77E5;&#x4E4E;
&#x8457;&#x4F5C;&#x6743;&#x5F52;&#x4F5C;&#x8005;&#x6240;&#x6709;&#x3002;&#x5546;&#x4E1A;&#x8F6C;&#x8F7D;&#x8BF7;&#x8054;&#x7CFB;&#x4F5C;&#x8005;&#x83B7;&#x5F97;&#x6388;&#x6743;&#xFF0C;&#x975E;&#x5546;&#x4E1A;&#x8F6C;&#x8F7D;&#x8BF7;&#x6CE8;&#x660E;&#x51FA;&#x5904;&#x3002;</p>
<h1 id="eoe-filter"><a name="eoe-filter" class="anchor-navigation-ex-anchor" href="#eoe-filter"><i class="fa fa-link" aria-hidden="true"></i></a>15. eoe filter</h1>
<p>isam&#x7684;eoe filter&#x8D1F;&#x8D23;&#x8BFB;&#x7269;&#x7406;&#x53E3;, &#x53BB;eoe&#x5934;, &#x53D1;&#x7ED9;tap&#x53E3;;<br>&#x8BFB;tap&#x53E3;, &#x52A0;eoe&#x5934;, &#x518D;&#x53D1;&#x7ED9;&#x7269;&#x7406;&#x53E3;.<br>&#x4F7F;&#x7528;<code>AF_PACKT</code>&#x7C7B;&#x578B;&#x7684;raw socket, &#x4E0D;&#x8D70;&#x534F;&#x8BAE;&#x6808;.</p>
<p>&#x5176;&#x4E2D;, &#x8981;&#x8F6C;&#x53D1;&#x7684;&#x62A5;&#x6587;, &#x6709;&#x4E2A;&#x8FC7;&#x6EE4;&#x7684;&#x52A8;&#x4F5C;:<br><code>setsockopt(itf, SOL_SOCKET, SO_ATTACH_FILTER, (void *)&amp;Filter, sizeof(Filter)</code><br>&#x5176;&#x4E2D;&#x7684;filter&#x662F;&#x8FD9;&#x4E2A;&#x6837;&#x5B50;:<br><img src="img/networking_&#x6742;&#x8BB0;2_20221024155309.png" alt="">  </p>
<p>&#x8FD9;&#x4E2A;<code>sock_filter</code>&#x53EF;&#x4EE5;&#x901A;&#x8FC7;tcpdump&#x7684;-dd&#x529F;&#x80FD;&#x5F97;&#x5230;</p>
<p><img src="img/networking_&#x6742;&#x8BB0;2_20221024155323.png" alt="">  </p>
<p>&#x5177;&#x4F53;&#x4EC0;&#x4E48;&#x610F;&#x601D;&#x4EE5;&#x540E;&#x7528;&#x5230;&#x518D;&#x8BF4;.  </p>
<p>&#x53C2;&#x8003;:
<a href="https://wirelessr.gitbooks.io/working-life/content/sockraw_with_tcpdump.html" target="_blank">https://wirelessr.gitbooks.io/working-life/content/sockraw_with_tcpdump.html</a></p>
<h1 id="tcpdump&#x6807;&#x8BB0;&#x7684;&#x542B;&#x4E49;"><a name="tcpdump&#x6807;&#x8BB0;&#x7684;&#x542B;&#x4E49;" class="anchor-navigation-ex-anchor" href="#tcpdump&#x6807;&#x8BB0;&#x7684;&#x542B;&#x4E49;"><i class="fa fa-link" aria-hidden="true"></i></a>16. tcpdump&#x6807;&#x8BB0;&#x7684;&#x542B;&#x4E49;</h1>
<p><img src="img/networking_&#x6742;&#x8BB0;2_20221024155359.png" alt="">  </p>
<h1 id="&#x4E00;&#x6B21;ssh&#x767B;&#x5F55;&#x7684;tcpdump"><a name="&#x4E00;&#x6B21;ssh&#x767B;&#x5F55;&#x7684;tcpdump" class="anchor-navigation-ex-anchor" href="#&#x4E00;&#x6B21;ssh&#x767B;&#x5F55;&#x7684;tcpdump"><i class="fa fa-link" aria-hidden="true"></i></a>17. &#x4E00;&#x6B21;ssh&#x767B;&#x5F55;&#x7684;tcpdump</h1>
<p>&#x6211;&#x4E3B;&#x8981;&#x60F3;&#x770B;&#x770B;tcp&#x63E1;&#x624B;&#x7684;&#x8FC7;&#x7A0B;.<br>&#x80CC;&#x666F;: &#x677F;&#x5B50;&#x4E0A;&#x5F00;&#x542F;&#x4E86;dropbear&#x670D;&#x52A1;, &#x7F51;&#x7EDC;&#x8D70;agl0(192.168.2.12), &#x5728;&#x6211;&#x7684;PC(192.168.2.11)&#x4E0A;&#x7528;ssh&#x547D;&#x4EE4;&#x767B;&#x5F55;, &#x767B;&#x5F55;&#x540E;&#x6572;exit&#x9000;&#x51FA;.<br>&#x5728;&#x677F;&#x5B50;&#x4E0A;&#x6293;&#x5305;: <code>tcpdump -i agl0 -nevvxx</code></p>
<h2 id="&#x5EFA;&#x7ACB;&#x8FDE;&#x63A5;&#x63E1;&#x624B;"><a name="&#x5EFA;&#x7ACB;&#x8FDE;&#x63A5;&#x63E1;&#x624B;" class="anchor-navigation-ex-anchor" href="#&#x5EFA;&#x7ACB;&#x8FDE;&#x63A5;&#x63E1;&#x624B;"><i class="fa fa-link" aria-hidden="true"></i></a>17.1. &#x5EFA;&#x7ACB;&#x8FDE;&#x63A5;&#x63E1;&#x624B;</h2>
<p>&#x7B2C;1&#x4E2A;&#x62A5;&#x6587;&#x662F;PC&#x53D1;&#x7ED9;&#x677F;&#x5B50;&#x7684;SYN&#x62A5;&#x6587;, 74&#x5B57;&#x8282;, Flags [S]<br>&#x7B2C;2&#x4E2A;&#x62A5;&#x6587;&#x662F;&#x677F;&#x5B50;&#x7ED9;PC&#x53D1;&#x7684;ACK, 74&#x5B57;&#x8282;, Flags [S.]<br>&#x7B2C;3&#x4E2A;&#x662F;PC&#x53D1;&#x7ED9;&#x677F;&#x5B50;&#x7684;&#x54CD;&#x5E94;ACK&#x7684;ACK, 66&#x5B57;&#x8282;, Flags [.]<br>&#x5230;&#x8FD9;&#x91CC;&#x63E1;&#x624B;&#x7ED3;&#x675F;.<br><img src="img/networking_&#x6742;&#x8BB0;2_20221024155425.png" alt="">  </p>
<h2 id="&#x7ED3;&#x675F;&#x8FDE;&#x63A5;&#x63E1;&#x624B;"><a name="&#x7ED3;&#x675F;&#x8FDE;&#x63A5;&#x63E1;&#x624B;" class="anchor-navigation-ex-anchor" href="#&#x7ED3;&#x675F;&#x8FDE;&#x63A5;&#x63E1;&#x624B;"><i class="fa fa-link" aria-hidden="true"></i></a>17.2. &#x7ED3;&#x675F;&#x8FDE;&#x63A5;&#x63E1;&#x624B;</h2>
<p><img src="img/networking_&#x6742;&#x8BB0;2_20221024155438.png" alt="">  </p>
<h2 id="&#x8865;&#x5145;&#x89C2;&#x5BDF;"><a name="&#x8865;&#x5145;&#x89C2;&#x5BDF;" class="anchor-navigation-ex-anchor" href="#&#x8865;&#x5145;&#x89C2;&#x5BDF;"><i class="fa fa-link" aria-hidden="true"></i></a>17.3. &#x8865;&#x5145;&#x89C2;&#x5BDF;</h2>
<p>&#x5373;&#x4F7F;&#x767B;&#x5F55;&#x540E;&#x9A6C;&#x4E0A;exit, &#x4E24;&#x4E2A;&#x8BBE;&#x5907;&#x4E4B;&#x95F4;&#x8FD8;&#x662F;&#x6709;&#x6BD4;&#x8F83;&#x5927;&#x7684;&#x62A5;&#x6587;&#x4EA4;&#x4E92;, &#x6BD4;&#x5982;&#x540E;&#x9762;&#x6709;508&#x5927;&#x5C0F;&#x7684;, &#x751A;&#x81F3;1426&#x5927;&#x5C0F;&#x7684;&#x62A5;&#x6587;.</p>
<p>&#x4F30;&#x8BA1;&#x662F;ssh&#x534F;&#x8BAE;&#x8981;&#x534F;&#x5546;&#x4E00;&#x4E9B;&#x914D;&#x7F6E;.</p>
<h1 id="&#x5982;&#x4F55;&#x627E;&#x5230;socket&#x7AEF;&#x53E3;&#x53F7;&#x5BF9;&#x5E94;&#x7684;&#x8FDB;&#x7A0B;"><a name="&#x5982;&#x4F55;&#x627E;&#x5230;socket&#x7AEF;&#x53E3;&#x53F7;&#x5BF9;&#x5E94;&#x7684;&#x8FDB;&#x7A0B;" class="anchor-navigation-ex-anchor" href="#&#x5982;&#x4F55;&#x627E;&#x5230;socket&#x7AEF;&#x53E3;&#x53F7;&#x5BF9;&#x5E94;&#x7684;&#x8FDB;&#x7A0B;"><i class="fa fa-link" aria-hidden="true"></i></a>18. &#x5982;&#x4F55;&#x627E;&#x5230;socket&#x7AEF;&#x53E3;&#x53F7;&#x5BF9;&#x5E94;&#x7684;&#x8FDB;&#x7A0B;</h1>
<p>&#x901A;&#x5E38;&#x7528;<code>netstat -apn</code>, <code>-p</code>&#x5C31;&#x80FD;&#x6253;&#x5370;&#x8FDB;&#x7A0B;&#x540D;</p>
<p>&#x4F46;&#x677F;&#x5B50;&#x4E0A;&#x7684;netstat&#x662F;busybox&#x63D0;&#x4F9B;&#x7684;, &#x529F;&#x80FD;&#x5F88;&#x6709;&#x9650;, &#x6CA1;&#x6709;<code>-p</code>, &#x53EA;&#x80FD;&#x770B;&#x5230;socket&#x72B6;&#x6001;<br><img src="img/networking_&#x6742;&#x8BB0;2_20221024155513.png" alt=""><br>&#x54EA;&#x4E2A;&#x8FDB;&#x7A0B;&#x62E5;&#x6709;&#x8FD9;&#x4E2A;socket, &#x8981;&#x81EA;&#x5DF1;&#x627E;.<br>&#x6211;&#x4EEC;&#x8FD9;&#x91CC;&#x4EE5;&#x7AEF;&#x53E3;22&#x4E3A;&#x4F8B;, &#x627E;&#x5230;&#x5B83;&#x5C5E;&#x4E8E;&#x54EA;&#x4E2A;&#x8FDB;&#x7A0B;. &#x5047;&#x88C5;&#x6211;&#x4EEC;&#x4E0D;&#x77E5;&#x9053;&#x8FD9;&#x4E2A;&#x662F;ssh&#x670D;&#x52A1;&#x7A0B;&#x5E8F;dropbear&#x7684;.</p>
<h2 id="&#x601D;&#x8DEF;"><a name="&#x601D;&#x8DEF;" class="anchor-navigation-ex-anchor" href="#&#x601D;&#x8DEF;"><i class="fa fa-link" aria-hidden="true"></i></a>18.1. &#x601D;&#x8DEF;</h2>
<p>&#x6BCF;&#x4E2A;&#x8FDB;&#x7A0B;&#x7684;proc&#x4E0B;&#x9762;, &#x90FD;&#x6709;net&#x76EE;&#x5F55;; &#x4F46;&#x4F3C;&#x4E4E;&#x90FD;&#x662F;&#x4E00;&#x6837;&#x7684;. <code>/proc/net</code>&#x770B;&#x4F3C;&#x662F;&#x603B;&#x7684;&#x5165;&#x53E3;, &#x4F46;&#x5B9E;&#x9645;&#x662F;&#x5230;<code>/proc/self/net</code>&#x7684;&#x94FE;&#x63A5;.<br>&#x800C;<code>/proc/self</code>&#x53C8;&#x662F;&#x5F53;&#x524D;&#x8FDB;&#x7A0B;&#x7684;&#x94FE;&#x63A5;<br><img src="img/networking_&#x6742;&#x8BB0;2_20221024155538.png" alt=""><br>&#x7EFC;&#x4E0A;: &#x867D;&#x7136;&#x6BCF;&#x4E2A;&#x8FDB;&#x7A0B;&#x90FD;&#x6709;/proc/pid/net, &#x4F46;&#x672C;&#x8D28;&#x4E0A;&#x4ED6;&#x4EEC;&#x90FD;&#x662F;common&#x7684;, &#x90FD;&#x662F;&#x4E00;&#x6837;&#x7684;.</p>
<p>&#x672C;&#x6587;&#x53EA;&#x7528;<code>/proc/net/tcp</code>, &#x5176;&#x683C;&#x5F0F;&#x89C1;<code>Documentation/networking/proc_net_tcp.txt</code><br><img src="img/networking_&#x6742;&#x8BB0;2_20221024155617.png" alt=""><br>local_address&#x4E0B;&#x9762;&#x7684;0016&#x5C31;&#x662F;&#x7AEF;&#x53E3;&#x53F7;, 0x16&#x5C31;&#x662F;22&#x53F7;&#x7AEF;&#x53E3;.<br>&#x8FD9;&#x91CC;&#x6709;&#x4E24;&#x4E2A;socket, &#x90FD;&#x662F;&#x7528;&#x7684;22&#x53F7;&#x7AEF;&#x53E3;; inode&#x5206;&#x522B;&#x662F;149&#x548C;15753, &#x540E;&#x9762;&#x6211;&#x4EEC;&#x8981;&#x7528;inode&#x53F7;&#x627E;&#x5230;pid</p>
<h3 id="inode&#x548C;&#x8FDB;&#x7A0B;&#x7684;fd&#x6709;&#x5BF9;&#x5E94;&#x5173;&#x7CFB;"><a name="inode&#x548C;&#x8FDB;&#x7A0B;&#x7684;fd&#x6709;&#x5BF9;&#x5E94;&#x5173;&#x7CFB;" class="anchor-navigation-ex-anchor" href="#inode&#x548C;&#x8FDB;&#x7A0B;&#x7684;fd&#x6709;&#x5BF9;&#x5E94;&#x5173;&#x7CFB;"><i class="fa fa-link" aria-hidden="true"></i></a>18.1.1. inode&#x548C;&#x8FDB;&#x7A0B;&#x7684;fd&#x6709;&#x5BF9;&#x5E94;&#x5173;&#x7CFB;</h3>
<p><code>/proc/*/fd/*</code>&#x76EE;&#x5F55;&#x4E0B;, &#x662F;fd&#x7684;&#x94FE;&#x63A5;:<br><img src="img/networking_&#x6742;&#x8BB0;2_20221024155643.png" alt="">  </p>
<p>&#x77E5;&#x9053;inode, &#x5C31;&#x80FD;&#x627E;&#x5230;fd, &#x5C31;&#x80FD;&#x627E;&#x5230;pid<br><img src="img/networking_&#x6742;&#x8BB0;2_20221024155658.png" alt=""><br>&#x5230;&#x8FD9;&#x91CC;&#x5C31;&#x80FD;&#x770B;&#x5230;, 342&#x8FDB;&#x7A0B;&#x62E5;&#x6709;inode&#x662F;149&#x7684;socket, &#x8FDB;&#x7A0B;2811&#x62E5;&#x6709;inode&#x662F;15753&#x7684;socket.</p>
<p>&#x6211;&#x8FD9;&#x91CC;&#x7684;&#x73AF;&#x5883;, pid 342&#x662F;ssh&#x670D;&#x52A1;&#x7AEF;, 2811&#x662F;&#x4E00;&#x4E2A;ssh&#x8FDE;&#x63A5;.<br><img src="img/networking_&#x6742;&#x8BB0;2_20221024155717.png" alt="">  </p>
<h3 id="&#x811A;&#x672C;"><a name="&#x811A;&#x672C;" class="anchor-navigation-ex-anchor" href="#&#x811A;&#x672C;"><i class="fa fa-link" aria-hidden="true"></i></a>18.1.2. &#x811A;&#x672C;</h3>
<p>&#x8FD9;&#x4E2A;&#x811A;&#x672C;&#x80FD;&#x591F;&#x81EA;&#x52A8;&#x627E;&#x5230;&#x7AEF;&#x53E3;&#x53F7;&#x548C;pid&#x7684;&#x5173;&#x7CFB;.</p>
<pre class="language-"><code class="lang-sh"><span class="token shebang important">#!/bin/bash</span>

<span class="token keyword">for</span> <span class="token for-or-select variable">protocol</span> <span class="token keyword">in</span> tcp udp <span class="token punctuation">;</span> 
<span class="token keyword">do</span> 
    <span class="token comment">#echo &quot;protocol $protocol&quot; ; </span>
    <span class="token keyword">for</span> <span class="token for-or-select variable">ipportinode</span> <span class="token keyword">in</span> <span class="token variable"><span class="token variable">`</span><span class="token function">cat</span> /proc/net/tcp <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">&apos;/.*:.*:.*/{print $2&quot;|&quot;$3&quot;|&quot;$10 ;}&apos;</span><span class="token variable">`</span></span> <span class="token punctuation">;</span> 
    <span class="token keyword">do</span> 
        <span class="token comment">#echo &quot;#ipportinode=$ipportinode&quot;</span>
        <span class="token assign-left variable">inode</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$ipportinode</span>&quot;</span> <span class="token operator">|</span> <span class="token function">cut</span> -d<span class="token string">&quot;|&quot;</span> <span class="token parameter variable">-f3</span><span class="token variable">`</span></span> <span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token string">&quot;#<span class="token variable">$inode</span>&quot;</span> <span class="token operator">=</span> <span class="token string">&quot;#&quot;</span> <span class="token punctuation">]</span> <span class="token punctuation">;</span> <span class="token keyword">then</span> <span class="token builtin class-name">continue</span> <span class="token punctuation">;</span> <span class="token keyword">fi</span> 
        <span class="token assign-left variable">lspid</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">ls</span> <span class="token parameter variable">-l</span> /proc/*/fd/* <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span>/dev/null <span class="token operator">|</span> <span class="token function">grep</span> <span class="token string">&quot;socket:\[<span class="token variable">$inode</span>\]&quot;</span> <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span>/dev/null<span class="token variable">`</span></span> <span class="token punctuation">;</span> 
        <span class="token assign-left variable">pid</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">echo</span> <span class="token string">&quot;lspid=<span class="token variable">$lspid</span>&quot;</span> <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">&apos;BEGIN{FS=&quot;/&quot;} /socket/{print $3}&apos;</span><span class="token variable">`</span></span> <span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token string">&quot;#<span class="token variable">$pid</span>&quot;</span> <span class="token operator">=</span> <span class="token string">&quot;#&quot;</span> <span class="token punctuation">]</span> <span class="token punctuation">;</span> <span class="token keyword">then</span> <span class="token builtin class-name">continue</span> <span class="token punctuation">;</span> <span class="token keyword">fi</span>
        <span class="token assign-left variable">exefile</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">ls</span> <span class="token parameter variable">-l</span> /proc/$pid/exe <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">&apos;BEGIN{FS=&quot; -&gt; &quot;}/-&gt;/{print $2;}&apos;</span><span class="token variable">`</span></span>
        <span class="token comment">#echo &quot;$protocol|$pid|$ipportinode&quot; </span>
        <span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$protocol</span>|<span class="token variable">$pid</span>|<span class="token variable">$ipportinode</span>|<span class="token variable">$exefile</span>&quot;</span> <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">&apos;
            BEGIN{FS=&quot;|&quot;}
            function iphex2dec(ipport){ 
                ret=sprintf(&quot;%d.%d.%d.%d: %d&quot;,&quot;0x&quot;substr(ipport,1,2),&quot;0x&quot;substr(ipport,3,2),
                &quot;0x&quot;substr(ipport,5,2),&quot;0x&quot;substr(ipport,7,2),&quot;0x&quot;substr(ipport,10,4)) ;
                if( ret == &quot;0.0.0.0:0&quot; ) #compatibility others awk versions 
                {
                    ret= strtonum(&quot;0x&quot;substr(ipport,1,2)) ;
                    ret=ret &quot;.&quot; strtonum(&quot;0x&quot;substr(ipport,3,2)) ;
                    ret=ret &quot;.&quot; strtonum(&quot;0x&quot;substr(ipport,5,2)) ;
                    ret=ret &quot;.&quot; strtonum(&quot;0x&quot;substr(ipport,7,2)) ;
                    ret=ret &quot;:&quot; strtonum(&quot;0x&quot;substr(ipport,10)) ;
                }
                return ret ;
            }
            { 
            print $1&quot; pid:&quot;$2&quot; local=&quot;iphex2dec($3)&quot; remote=&quot;iphex2dec($4)&quot; inode:&quot;$5&quot; exe=&quot; $6 ;  
            }
            &apos;</span> <span class="token punctuation">;</span> 
        <span class="token comment">#ls -l /proc/$pid/exe ; </span>
    <span class="token keyword">done</span> <span class="token punctuation">;</span> 
<span class="token keyword">done</span>
</code></pre>
<p>&#x7ED3;&#x679C;:<br><img src="img/networking_&#x6742;&#x8BB0;2_20221024155737.png" alt="">  </p>
<h1 id="iproute2&#x5BF9;&#x5E94;&#x8868;"><a name="iproute2&#x5BF9;&#x5E94;&#x8868;" class="anchor-navigation-ex-anchor" href="#iproute2&#x5BF9;&#x5E94;&#x8868;"><i class="fa fa-link" aria-hidden="true"></i></a>19. iproute2&#x5BF9;&#x5E94;&#x8868;</h1>
<pre class="language-"><code>arp         =&gt; ip n (ip neighbor)
ifconfig    =&gt; ip a (ip addr), ip link, ip -s (ip -stats)
iptunnel    =&gt; ip tunnel
iwconfig    =&gt; iw
nameif      =&gt; ip link, ifrename
netstat     =&gt; ss, ip route (for netstat-r), ip -s link (for netstat -i), ip maddr (for netstat-g)
</code></pre><h1 id="linux&#x7684;&#x7F51;&#x7EDC;&#x62A5;&#x6587;&#x7EDF;&#x8BA1;"><a name="linux&#x7684;&#x7F51;&#x7EDC;&#x62A5;&#x6587;&#x7EDF;&#x8BA1;" class="anchor-navigation-ex-anchor" href="#linux&#x7684;&#x7F51;&#x7EDC;&#x62A5;&#x6587;&#x7EDF;&#x8BA1;"><i class="fa fa-link" aria-hidden="true"></i></a>20. linux&#x7684;&#x7F51;&#x7EDC;&#x62A5;&#x6587;&#x7EDF;&#x8BA1;</h1>
<h2 id="&#x9A71;&#x52A8;&#x5C42;"><a name="&#x9A71;&#x52A8;&#x5C42;" class="anchor-navigation-ex-anchor" href="#&#x9A71;&#x52A8;&#x5C42;"><i class="fa fa-link" aria-hidden="true"></i></a>20.1. &#x9A71;&#x52A8;&#x5C42;</h2>
<ul>
<li><code>ethtool -S</code> &#x7EDF;&#x8BA1;: &#x8FD9;&#x4E2A;&#x6BEB;&#x65E0;&#x7591;&#x95EE;&#x662F;&#x9A71;&#x52A8;&#x5C42;&#x7684;&#x7EDF;&#x8BA1;</li>
<li><code>ifconfig</code> &#x7EDF;&#x8BA1;: &#x6211;&#x611F;&#x89C9;&#x8FD9;&#x4E2A;&#x662F;&#x9A71;&#x52A8;&#x5C42;&#x7684;&#x7EDF;&#x8BA1;
&#x89E3;&#x91CA;: ifconfig&#x4F7F;&#x7528;&#x7684;&#x662F;<code>/proc/net/dev</code>&#x7EDF;&#x8BA1;, &#x662F;&#x5185;&#x6838;&#x7ED9;&#x51FA;&#x7684;
&#x8FD9;&#x91CC;&#x9762;&#x7684;&#x62A5;&#x6587;dropped&#x5305;&#x62EC;:<ul>
<li>Softnet backlog full</li>
<li>Bad/unintended VLAN tags</li>
<li>Unknown/unregistered protocols</li>
<li>IPv6 frames when the server isn&apos;t configured for it</li>
</ul>
</li>
</ul>
<h2 id="&#x534F;&#x8BAE;&#x5C42;"><a name="&#x534F;&#x8BAE;&#x5C42;" class="anchor-navigation-ex-anchor" href="#&#x534F;&#x8BAE;&#x5C42;"><i class="fa fa-link" aria-hidden="true"></i></a>20.2. &#x534F;&#x8BAE;&#x5C42;</h2>
<h3 id="netstat--s"><a name="netstat--s" class="anchor-navigation-ex-anchor" href="#netstat--s"><i class="fa fa-link" aria-hidden="true"></i></a>20.2.1. netstat -s</h3>
<p>netstat -s&#x53EF;&#x4EE5;&#x770B;&#x5404;&#x4E2A;&#x534F;&#x8BAE;&#x5C42;&#x7684;&#x7EDF;&#x8BA1;: &#x6BD4;&#x5982; IP ICMP TCP UDP</p>
<ul>
<li>Ip: &#x8F6C;&#x53D1;&#x4E86;&#x591A;&#x5C11;&#x62A5;&#x6587;, &#x4E22;&#x5F03;&#x4E86;&#x591A;&#x5C11;, &#x63A5;&#x6536;&#x4E86;&#x591A;&#x5C11;, &#x53D1;&#x9001;&#x4E86;&#x591A;&#x5C11;, &#x591A;&#x5C11;ip&#x5206;&#x7247;(fragments)</li>
<li>IpExt: &#x66F4;&#x8BE6;&#x7EC6;&#x7684;IP&#x62A5;&#x6587;&#x7EDF;&#x8BA1;</li>
<li>Icmp: &#x63A5;&#x6536;&#x7EDF;&#x8BA1;, &#x53D1;&#x9001;&#x7EDF;&#x8BA1;</li>
<li>Tcp: &#x8FDE;&#x63A5;&#x6570;&#x7EDF;&#x8BA1;, tcp&#x5206;&#x7247;(segments)&#x53D1;&#x9001;&#x63A5;&#x6536;&#x6570;&#x7EDF;&#x8BA1;</li>
<li>TcpExt: &#x66F4;&#x8BE6;&#x7EC6;&#x7684;TCP&#x7EDF;&#x8BA1;</li>
<li>Udp: &#x53D1;&#x9001;&#x63A5;&#x6536;&#x6570;&#x7EDF;&#x8BA1;, error&#x6570;&#x7EDF;&#x8BA1;</li>
</ul>
<p>&#x6211;&#x9047;&#x5230;&#x8FC7;&#x7531;&#x4E8E;UDP&#x7684;checksum&#x9519;&#x8BEF;, &#x62A5;&#x6587;&#x88AB;&#x5185;&#x6838;&#x534F;&#x8BAE;&#x6808;&#x4E22;&#x5F03;&#x4E86;, &#x8FD9;&#x91CC;&#x80FD;&#x770B;&#x5230;; &#x4F46;ifconfig&#x7684;&#x7EDF;&#x8BA1;&#x91CC;&#x9762;&#x6CA1;&#x6709;&#x53CD;&#x5E94;&#x51FA;&#x6765;</p>
<h3 id="nstat&#x66FF;&#x4EE3;netstat"><a name="nstat&#x66FF;&#x4EE3;netstat" class="anchor-navigation-ex-anchor" href="#nstat&#x66FF;&#x4EE3;netstat"><i class="fa fa-link" aria-hidden="true"></i></a>20.2.2. nstat&#x66FF;&#x4EE3;netstat</h3>
<p>netstat&#x5C5E;&#x4E8E;&#x88AB;&#x5E9F;&#x5F03;&#x7684;net-tools, &#x540C;&#x5C5E;&#x4E8E;&#x8FD9;&#x4E2A;&#x7CFB;&#x5217;&#x7684;&#x662F;ifconfig route arp&#x7B49;.</p>
<p>&#x65B0;&#x7684;iproute2&#x7528;<code>nstat</code>&#x6765;&#x4EE3;&#x66FF;<code>netstat -s</code>, &#x7528;<code>ss</code>&#x6765;&#x4EE3;&#x66FF;netstat&#x7684;socket&#x7EDF;&#x8BA1;&#x529F;&#x80FD;</p>
<ul>
<li>&#x9ED8;&#x8BA4;&#x662F;&#x589E;&#x91CF;&#x7EDF;&#x8BA1;, &#x7528;-a&#x4F7F;&#x7528;&#x7EDD;&#x5BF9;&#x503C;</li>
<li>0&#x503C;&#x88AB;&#x5FFD;&#x7565;, &#x7528;-z&#x6253;&#x5F00;0&#x503C;&#x6253;&#x5370;</li>
<li>&#x7B2C;&#x4E09;&#x5217;&#x662F;&#x5E73;&#x5747;&#x503C;&#x7EDF;&#x8BA1;, &#x5728;-d3&#x6A21;&#x5F0F;&#x4E0B;, &#x6253;&#x5370;3&#x79D2;&#x5185;&#x7684;&#x5E73;&#x5747;&#x503C;</li>
<li>&#x4E00;&#x822C;&#x7528;<code>nstat -asz</code>: -a: &#x4F7F;&#x7528;&#x7EDD;&#x5BF9;&#x503C;; -s: &#x4E0D;&#x66F4;&#x65B0;&#x5386;&#x53F2;; -z: &#x6253;&#x5370;0&#x503C;</li>
</ul>
<p><img src="img/networking_&#x6742;&#x8BB0;2_20221024155916.png" alt="">  </p>
<h3 id="netstat&#x548C;nstat&#x90FD;&#x662F;&#x7528;procnet&#x4E0B;&#x9762;&#x7684;&#x7EDF;&#x8BA1;"><a name="netstat&#x548C;nstat&#x90FD;&#x662F;&#x7528;procnet&#x4E0B;&#x9762;&#x7684;&#x7EDF;&#x8BA1;" class="anchor-navigation-ex-anchor" href="#netstat&#x548C;nstat&#x90FD;&#x662F;&#x7528;procnet&#x4E0B;&#x9762;&#x7684;&#x7EDF;&#x8BA1;"><i class="fa fa-link" aria-hidden="true"></i></a>20.2.3. netstat&#x548C;nstat&#x90FD;&#x662F;&#x7528;/proc/net&#x4E0B;&#x9762;&#x7684;&#x7EDF;&#x8BA1;</h3>
<p><img src="img/networking_&#x6742;&#x8BB0;2_20221024155930.png" alt="">  </p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="as_title_networking.html" class="navigation navigation-prev " aria-label="Previous page: 计算机网络相关">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="networking_杂记1.html" class="navigation navigation-next " aria-label="Next page: networking杂记1">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"networking杂记2","level":"1.6.1","depth":2,"next":{"title":"networking杂记1","level":"1.6.2","depth":2,"path":"notes/networking_杂记1.md","ref":"notes/networking_杂记1.md","articles":[]},"previous":{"title":"计算机网络相关","level":"1.6","depth":1,"path":"notes/as_title_networking.md","ref":"notes/as_title_networking.md","articles":[{"title":"networking杂记2","level":"1.6.1","depth":2,"path":"notes/networking_杂记2.md","ref":"notes/networking_杂记2.md","articles":[]},{"title":"networking杂记1","level":"1.6.2","depth":2,"path":"notes/networking_杂记1.md","ref":"notes/networking_杂记1.md","articles":[]},{"title":"优化linux网络栈: 接收路径(网摘)","level":"1.6.3","depth":2,"path":"notes/networking_优化linux网络栈_接收路径.md","ref":"notes/networking_优化linux网络栈_接收路径.md","articles":[]},{"title":"优化linux网络栈: 发送路径(网摘)","level":"1.6.4","depth":2,"path":"notes/networking_优化linux网络栈_发送路径.md","ref":"notes/networking_优化linux网络栈_发送路径.md","articles":[]},{"title":"Potential Performance Bottleneck in Linux TCP(网摘)","level":"1.6.5","depth":2,"path":"notes/networking_Potential_Performance_Bottleneck_in_Linux_TCP.md","ref":"notes/networking_Potential_Performance_Bottleneck_in_Linux_TCP.md","articles":[]},{"title":"Get started with XDP(网摘)","level":"1.6.6","depth":2,"path":"notes/networking_xdp入门.md","ref":"notes/networking_xdp入门.md","articles":[]},{"title":"linux收包路径图解(网摘)","level":"1.6.7","depth":2,"path":"notes/networking_linux收包路径图解.md","ref":"notes/networking_linux收包路径图解.md","articles":[]},{"title":"Qemu OVS和DPDK","level":"1.6.8","depth":2,"path":"notes/as_title_qemu_ovs.md","ref":"notes/as_title_qemu_ovs.md","articles":[{"title":"OVS-DPDK编译运行","level":"1.6.8.1","depth":3,"path":"notes/OVS_DPDK_编译运行.md","ref":"notes/OVS_DPDK_编译运行.md","articles":[]},{"title":"OVS架构和代码","level":"1.6.8.2","depth":3,"path":"notes/OVS_架构和代码.md","ref":"notes/OVS_架构和代码.md","articles":[]},{"title":"OVS-DPDK for ARM server 性能测试环境","level":"1.6.8.3","depth":3,"path":"notes/OVS_DPDK_performance_HXT_ARM_server.md","ref":"notes/OVS_DPDK_performance_HXT_ARM_server.md","articles":[]},{"title":"DPDK Mellanox","level":"1.6.8.4","depth":3,"path":"notes/DPDK_Mellanox.md","ref":"notes/DPDK_Mellanox.md","articles":[]},{"title":"OVS PHY-VM-PHY","level":"1.6.8.5","depth":3,"path":"notes/OVS_phy-vm-phy.md","ref":"notes/OVS_phy-vm-phy.md","articles":[]},{"title":"网络虚拟化用例记录","level":"1.6.8.6","depth":3,"path":"notes/networking_网络虚拟化用例记录.md","ref":"notes/networking_网络虚拟化用例记录.md","articles":[]},{"title":"网络虚拟化操作记录","level":"1.6.8.7","depth":3,"path":"notes/networking_网络虚拟化操作记录.md","ref":"notes/networking_网络虚拟化操作记录.md","articles":[]}]},{"title":"虚拟化网络","level":"1.6.9","depth":2,"path":"notes/as_title_virtnet.md","ref":"notes/as_title_virtnet.md","articles":[{"title":"Connecting a veth device to tap","level":"1.6.9.1","depth":3,"path":"notes/networking_tc_filter_连接veth和tap.md","ref":"notes/networking_tc_filter_连接veth和tap.md","articles":[]},{"title":"multicast vxlan和flannel","level":"1.6.9.2","depth":3,"path":"notes/networking_multicast_vxlan_flannel.md","ref":"notes/networking_multicast_vxlan_flannel.md","articles":[]},{"title":"virtio网络介绍(网摘): vhost-net virtio-net vhost-user SRIOV","level":"1.6.9.3","depth":3,"path":"notes/networking_virtio网络介绍.md","ref":"notes/networking_virtio网络介绍.md","articles":[]},{"title":"虚拟化网络杂记","level":"1.6.9.4","depth":3,"path":"notes/networking_virtualization_杂记.md","ref":"notes/networking_virtualization_杂记.md","articles":[]},{"title":"linux虚拟网络接口(网摘)","level":"1.6.9.5","depth":3,"path":"notes/networking_linux虚拟网络接口.md","ref":"notes/networking_linux虚拟网络接口.md","articles":[]}]}]},"dir":"ltr"},"config":{"plugins":["-livereload","-sharing","-lunr","-search","search-plus","-highlight","theme-comscore","prism","code","chapter-fold","github","splitter","wide-page","hide-navigation-buttons","anchor-navigation-ex","sequence@0.1.1","mermaid-gb3"],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"chapter-fold":{},"prism":{"css":["prismjs/themes/prism.css"],"ignore":["mermaid","sequence"]},"sequence":{"theme":"simple"},"github":{"url":"https://github.com/Bai-Yingjie/Bai-Yingjie.github.io"},"splitter":{},"wide-page":{},"code":{"copyButtons":true},"fontsettings":{"theme":"white","family":"sans","size":2},"hide-navigation-buttons":{},"mermaid-gb3":{},"anchor-navigation-ex":{"mode":"float","pageTop":{"level1Icon":"","level2Icon":"","level3Icon":"","showLevelIcon":false},"isRewritePageTitle":true,"showLevel":true,"tocLevel1Icon":"fa fa-hand-o-right","tocLevel2Icon":"fa fa-hand-o-right","tocLevel3Icon":"fa fa-hand-o-right","showGoTop":true,"isShowTocTitleIcon":true,"printLog":false,"multipleH1":true,"associatedWithSummary":true,"float":{"floatIcon":"fa fa-navicon","level1Icon":"","level2Icon":"","level3Icon":"","showLevelIcon":false}},"theme-comscore":{},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false},"search-plus":{}},"theme":"default","author":"Bai Yingjie","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"My Notes","language":"zh-hans","gitbook":"*"},"file":{"path":"notes/networking_杂记2.md","mtime":"2023-02-27T10:21:21.775Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2023-02-27T10:22:35.461Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-search-plus/jquery.mark.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search-plus/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-code/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-chapter-fold/chapter-fold.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-github/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-splitter/splitter.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-mermaid-gb3/book/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-theme-comscore/test.js"></script>
        
    

    <script src="../gitbook/gitbook-plugin-mermaid-gb3/mermaid/mermaid.min.js"></script>

    </body>
</html>


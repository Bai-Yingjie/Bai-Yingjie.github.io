
<!DOCTYPE HTML>
<html lang="zh-hans" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>shell命令和脚本记录-高级篇 · My Notes</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        <meta name="author" content="Bai Yingjie">
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search-plus/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-prism-ext/prism.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-prism-ext/prism-line-numbers.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-expandable-chapters-small/expandable-chapters-small.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-disqus/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-splitter/splitter.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-wide-page/wide.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-hide-navigation-buttons/index.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-anchor-navigation-ex/style/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="shell_脚本片段.html" />
    
    
    <link rel="prev" href="shell_基础篇.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="输入并搜索" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    简介
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="as_title.html">
            
                <a href="as_title.html">
            
                    
                    开源
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="my_opensource.html">
            
                <a href="my_opensource.html">
            
                    
                    我的开源项目
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="my_upstream.html">
            
                <a href="my_upstream.html">
            
                    
                    我的upstream commit
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="as_title.html">
            
                <a href="as_title.html">
            
                    
                    系统分析和性能
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="system_analysis_bcc和ebpf.html">
            
                <a href="system_analysis_bcc和ebpf.html">
            
                    
                    bcc和ebpf(starting)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="performance_ovs进程调查.html">
            
                <a href="performance_ovs进程调查.html">
            
                    
                    OVS进程调查
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="performance_ping流程和函数调用解析.html">
            
                <a href="performance_ping流程和函数调用解析.html">
            
                    
                    ping流程和函数调用解析
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4" data-path="CentOS_系统性能优化配置.html">
            
                <a href="CentOS_系统性能优化配置.html">
            
                    
                    CentOS 性能优化系统配置
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="as_title.html">
            
                <a href="as_title.html">
            
                    
                    ARM server
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="arm_server_杂记.html">
            
                <a href="arm_server_杂记.html">
            
                    
                    Arm server 杂记
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="as_title.html">
            
                <a href="as_title.html">
            
                    
                    嵌入式系统开发调试
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="embedded_debugging.html">
            
                <a href="embedded_debugging.html">
            
                    
                    嵌入式调试杂记
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="uboot_杂记.html">
            
                <a href="uboot_杂记.html">
            
                    
                    uboot杂记
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3" data-path="buildroot_杂记.html">
            
                <a href="buildroot_杂记.html">
            
                    
                    buildroot杂记
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.4" data-path="toolchain_升级gcc问题解决.html">
            
                <a href="toolchain_升级gcc问题解决.html">
            
                    
                    升级GCC7.3问题解决
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="as_title.html">
            
                <a href="as_title.html">
            
                    
                    Linux工程实践
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="linux_日常使用.html">
            
                <a href="linux_日常使用.html">
            
                    
                    日常linux使用
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="git_日常使用.html">
            
                <a href="git_日常使用.html">
            
                    
                    日常git使用
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3" data-path="向kernel提交补丁.html">
            
                <a href="向kernel提交补丁.html">
            
                    
                    向kernel提交补丁
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.4" data-path="linux_ssh_relay.html">
            
                <a href="linux_ssh_relay.html">
            
                    
                    ssh relay
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.5" data-path="gitlab_ci.html">
            
                <a href="gitlab_ci.html">
            
                    
                    gitlab CI
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.6" data-path="docker_操作记录.html">
            
                <a href="docker_操作记录.html">
            
                    
                    docker操作记录
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.7" data-path="centos_操作记录.html">
            
                <a href="centos_操作记录.html">
            
                    
                    centos操作记录
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="as_title.html">
            
                <a href="as_title.html">
            
                    
                    Golang
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" data-path="as_title.html">
            
                <a href="as_title.html">
            
                    
                    入门
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1.1" data-path="golang_语法基础.html">
            
                <a href="golang_语法基础.html">
            
                    
                    Golang 语法基础
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.1.2" data-path="golang_json性能.html">
            
                <a href="golang_json性能.html">
            
                    
                    Golang json性能比较
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7.2" data-path="golang_原理.html">
            
                <a href="golang_原理.html">
            
                    
                    Golang 原理相关
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.2.1" data-path="golang_interface原理.html">
            
                <a href="golang_interface原理.html">
            
                    
                    Golang interface原理(网摘)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.2.2" data-path="golang_内存分配.html">
            
                <a href="golang_内存分配.html">
            
                    
                    Golang 内存分配(网摘)
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7.3" data-path="golang_标准库.html">
            
                <a href="golang_标准库.html">
            
                    
                    Golang 标准库
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.4" data-path="golang_我的反射代码.html">
            
                <a href="golang_我的反射代码.html">
            
                    
                    Golang 我的反射代码
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.5" data-path="golang_问答.html">
            
                <a href="golang_问答.html">
            
                    
                    Golang 问答
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.6" data-path="golang_高效go.html">
            
                <a href="golang_高效go.html">
            
                    
                    Golang 高效go
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.7" data-path="golang_进阶.html">
            
                <a href="golang_进阶.html">
            
                    
                    Golang 进阶
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.8" data-path="as_title.html">
            
                <a href="as_title.html">
            
                    
                    Golang 杂记
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.8.1" data-path="golang_杂记1.html">
            
                <a href="golang_杂记1.html">
            
                    
                    Golang 杂记1
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.8.2" data-path="golang_杂记2.html">
            
                <a href="golang_杂记2.html">
            
                    
                    Golang 杂记2
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.8.3" data-path="golang_杂记3.html">
            
                <a href="golang_杂记3.html">
            
                    
                    Golang 杂记3
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.8.4" data-path="golang_lib选型.html">
            
                <a href="golang_lib选型.html">
            
                    
                    Golang lib选型
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.8.5" data-path="golang_mod_proxy.html">
            
                <a href="golang_mod_proxy.html">
            
                    
                    go mod和go proxy
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.8.6" data-path="golang_汇编_arm64.html">
            
                <a href="golang_汇编_arm64.html">
            
                    
                    Golang 汇编语法和arm64小知识
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.8.7" data-path="golang_cgo_swig.html">
            
                <a href="golang_cgo_swig.html">
            
                    
                    go调用c可以用swig
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7.9" data-path="as_title.html">
            
                <a href="as_title.html">
            
                    
                    Golang 环境和工具链生成
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.9.1" data-path="golang_toolchain_ppc.html">
            
                <a href="golang_toolchain_ppc.html">
            
                    
                    go tools增加ppc32支持.md
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.9.2" data-path="golang_toolchain_compile_gccgo.html">
            
                <a href="golang_toolchain_compile_gccgo.html">
            
                    
                    编译gccgo
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.9.3" data-path="golang_go_on_mips.html">
            
                <a href="golang_go_on_mips.html">
            
                    
                    go on mips boards(not so updated)
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.9.3.1" data-path="golang_go_on_mips_part1.html">
            
                <a href="golang_go_on_mips_part1.html">
            
                    
                    part 1: cross compile go
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.9.3.2" data-path="golang_go_on_mips_part2.html">
            
                <a href="golang_go_on_mips_part2.html">
            
                    
                    part 2: build native go compiler
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.9.3.3" data-path="golang_go_on_mips_part3.html">
            
                <a href="golang_go_on_mips_part3.html">
            
                    
                    part 3: gccgo experiments
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.9.3.4" data-path="golang_go_on_mips_part4.html">
            
                <a href="golang_go_on_mips_part4.html">
            
                    
                    part 4: Golang json performance
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.9.3.5" data-path="golang_gentoo_on_mips_board_and_build_go.html">
            
                <a href="golang_gentoo_on_mips_board_and_build_go.html">
            
                    
                    Gentoo on mips board and build go
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7.10" data-path="as_title.html">
            
                <a href="as_title.html">
            
                    
                    微服务
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.10.1" data-path="golang_micro.html">
            
                <a href="golang_micro.html">
            
                    
                    go-micro和micro
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.10.2" data-path="golang_微服务概念.html">
            
                <a href="golang_微服务概念.html">
            
                    
                    微服务概念
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7.11" data-path="as_title.html">
            
                <a href="as_title.html">
            
                    
                    解释器和编解码
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.11.1" data-path="golang_yeagi.html">
            
                <a href="golang_yeagi.html">
            
                    
                    解释器yeagi
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.11.2" data-path="golang_tengo.html">
            
                <a href="golang_tengo.html">
            
                    
                    解释器tengo
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.11.3" data-path="golang_govaluate.html">
            
                <a href="golang_govaluate.html">
            
                    
                    解释器govaluate
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.11.4" data-path="golang_encoding_gotiny.html">
            
                <a href="golang_encoding_gotiny.html">
            
                    
                    gotiny编解码
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.11.5" data-path="golang_abs.html">
            
                <a href="golang_abs.html">
            
                    
                    解释器abs
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7.12" data-path="as_title.html">
            
                <a href="as_title.html">
            
                    
                    调试和性能
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.12.1" data-path="golang_调试记录.html">
            
                <a href="golang_调试记录.html">
            
                    
                    Golang 调试记录
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.12.2" data-path="golang_topid性能优化.html">
            
                <a href="golang_topid性能优化.html">
            
                    
                    Golang topid性能优化
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.12.3" data-path="golang_gshell性能调试.html">
            
                <a href="golang_gshell性能调试.html">
            
                    
                    Golang gshell性能调试
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7.13" data-path="as_title.html">
            
                <a href="as_title.html">
            
                    
                    网络和消息中间件
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.13.1" data-path="golang_zmq.html">
            
                <a href="golang_zmq.html">
            
                    
                    消息中间件基本概念和zero mq
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.13.2" data-path="golang_mango.html">
            
                <a href="golang_mango.html">
            
                    
                    消息中间件mango
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.13.3" data-path="golang_libp2p.html">
            
                <a href="golang_libp2p.html">
            
                    
                    Golang p2p网络
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="as_title.html">
            
                <a href="as_title.html">
            
                    
                    Rust
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.1" data-path="rust_入门_brief.html">
            
                <a href="rust_入门_brief.html">
            
                    
                    Rust 入门系列
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.1.1" data-path="rust_books.html">
            
                <a href="rust_books.html">
            
                    
                    Rust reference books
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.1.2" data-path="rust_入门1.html">
            
                <a href="rust_入门1.html">
            
                    
                    Rust 安装和基础语法
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.1.3" data-path="rust_入门2.html">
            
                <a href="rust_入门2.html">
            
                    
                    Rust 泛型和内存所有权
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.1.4" data-path="rust_入门3.html">
            
                <a href="rust_入门3.html">
            
                    
                    Rust 闭包 容器 迭代器 生成器 线程
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.1.5" data-path="rust_工程构建.html">
            
                <a href="rust_工程构建.html">
            
                    
                    Rust 工程构建
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8.2" data-path="rust_coding_brief.html">
            
                <a href="rust_coding_brief.html">
            
                    
                    Rust 代码积累
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.2.1" data-path="rust_序列化.html">
            
                <a href="rust_序列化.html">
            
                    
                    Rust 序列化原理
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2.2" data-path="rust_知识点积累.html">
            
                <a href="rust_知识点积累.html">
            
                    
                    Rust 知识点更新
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2.3" data-path="rust_adaptiveservice.html">
            
                <a href="rust_adaptiveservice.html">
            
                    
                    rust版本的adaptiveservice探索
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2.4" data-path="rust_常用设施.html">
            
                <a href="rust_常用设施.html">
            
                    
                    Rust 常用设施
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2.5" data-path="rust_代码小段.html">
            
                <a href="rust_代码小段.html">
            
                    
                    Rust 代码小段
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8.3" data-path="others.html">
            
                <a href="others.html">
            
                    
                    其他
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.3.1" data-path="rust_mdbook_使用.html">
            
                <a href="rust_mdbook_使用.html">
            
                    
                    Rust 使用mdbook
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="as_title.html">
            
                <a href="as_title.html">
            
                    
                    C开发
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.9.1" data-path="c_automake_autoconf.html">
            
                <a href="c_automake_autoconf.html">
            
                    
                    automake autoconf
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2" data-path="makefile_原理和实践.html">
            
                <a href="makefile_原理和实践.html">
            
                    
                    makefile
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.3" data-path="c_编程杂记高级篇.html">
            
                <a href="c_编程杂记高级篇.html">
            
                    
                    C编程杂记高级篇
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.4" data-path="c_编程杂记基础篇.html">
            
                <a href="c_编程杂记基础篇.html">
            
                    
                    C编程杂记基础篇
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.5" data-path="c_networking_socket高阶用法.html">
            
                <a href="c_networking_socket高阶用法.html">
            
                    
                    网络编程: Advanced Socket Topics(网摘)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.6" data-path="c_protobuf介绍.html">
            
                <a href="c_protobuf介绍.html">
            
                    
                    序列化: protobuf介绍
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.7" data-path="c_进程间通信_共享文件和共享内存.html">
            
                <a href="c_进程间通信_共享文件和共享内存.html">
            
                    
                    进程间通信: 共享文件和共享内存(网摘)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.8" data-path="c_pthread_condition和mutex.html">
            
                <a href="c_pthread_condition和mutex.html">
            
                    
                    并发 任务 事件 和锁.md
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.9" data-path="kernel_user_space_howto.html">
            
                <a href="kernel_user_space_howto.html">
            
                    
                    kernel space和user space交互(网摘, linux2.6)
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="as_title.html">
            
                <a href="as_title.html">
            
                    
                    脚本
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.1" data-path="shell_变量.html">
            
                <a href="shell_变量.html">
            
                    
                    shell变量
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.2" data-path="shell_基础篇.html">
            
                <a href="shell_基础篇.html">
            
                    
                    shell命令和脚本记录-基础篇
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.10.3" data-path="shell_高级篇.html">
            
                <a href="shell_高级篇.html">
            
                    
                    shell命令和脚本记录-高级篇
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.4" data-path="shell_脚本片段.html">
            
                <a href="shell_脚本片段.html">
            
                    
                    shell脚本片段
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.5" data-path="python_记录.html">
            
                <a href="python_记录.html">
            
                    
                    python记录
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.6" data-path="lua_记录.html">
            
                <a href="lua_记录.html">
            
                    
                    lua记录
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.7" data-path="shell_rds脚本阅读.html">
            
                <a href="shell_rds脚本阅读.html">
            
                    
                    RDS脚本阅读
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.8" data-path="Project_Euler.html">
            
                <a href="Project_Euler.html">
            
                    
                    Project Euler
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.11" data-path="as_title.html">
            
                <a href="as_title.html">
            
                    
                    cloud和容器相关
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.11.1" data-path="cloud_杂记.html">
            
                <a href="cloud_杂记.html">
            
                    
                    云杂记
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.2" data-path="container_当代容器读书笔记.html">
            
                <a href="container_当代容器读书笔记.html">
            
                    
                    当代容器读书笔记
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.12" data-path="as_title.html">
            
                <a href="as_title.html">
            
                    
                    Operating System
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.12.1" data-path="system_libc_part1.html">
            
                <a href="system_libc_part1.html">
            
                    
                    libc概览1
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.2" data-path="system_libc_part2.html">
            
                <a href="system_libc_part2.html">
            
                    
                    libc概览2
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.3" data-path="system_libc_part3.html">
            
                <a href="system_libc_part3.html">
            
                    
                    libc概览3
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.4" data-path="system_原理杂记.html">
            
                <a href="system_原理杂记.html">
            
                    
                    系统原理杂记
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.5" data-path="system_alpine.html">
            
                <a href="system_alpine.html">
            
                    
                    Alpine Linux
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.6" data-path="system_进程间通信.html">
            
                <a href="system_进程间通信.html">
            
                    
                    进程间通信
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.7" data-path="system_特殊功能fd.html">
            
                <a href="system_特殊功能fd.html">
            
                    
                    eventfd timerfd signalfd和fd共享
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.13" data-path="as_title.html">
            
                <a href="as_title.html">
            
                    
                    CPU和device虚拟化
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.13.1" data-path="as_title.html">
            
                <a href="as_title.html">
            
                    
                    gvisor
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.13.1.1" data-path="golang_gvisor代码_KVM.html">
            
                <a href="golang_gvisor代码_KVM.html">
            
                    
                    gvisor KVM模式代码
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.1.2" data-path="golang_gvisor调试.html">
            
                <a href="golang_gvisor调试.html">
            
                    
                    gvisor调试
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.1.3" data-path="golang_gvisor_ptrace.html">
            
                <a href="golang_gvisor_ptrace.html">
            
                    
                    gvisor ptrace模式介绍(网摘)
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.13.2" data-path="rust_vmm_brief.html">
            
                <a href="rust_vmm_brief.html">
            
                    
                    rust VMM(virtual machine monitor)
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.13.2.1" data-path="rust_vmm_简介.html">
            
                <a href="rust_vmm_简介.html">
            
                    
                    rust-vmm简介
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.2.2" data-path="rust_firecracker_代码.html">
            
                <a href="rust_firecracker_代码.html">
            
                    
                    firecracker代码
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.2.3" data-path="rust_firecracker_使用.html">
            
                <a href="rust_firecracker_使用.html">
            
                    
                    firecracker使用
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.2.4" data-path="rust_cloud-hypervisor_代码.html">
            
                <a href="rust_cloud-hypervisor_代码.html">
            
                    
                    cloud hypervisor代码
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.2.5" data-path="rust_cloud-hypervisor_使用.html">
            
                <a href="rust_cloud-hypervisor_使用.html">
            
                    
                    cloud hypervisor使用
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.2.6" data-path="rust_cloud-hypervisor_问题与解决.html">
            
                <a href="rust_cloud-hypervisor_问题与解决.html">
            
                    
                    cloud hypervisor问题与解决
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.13.3" data-path="virtualization_virtio规范阅读笔记.html">
            
                <a href="virtualization_virtio规范阅读笔记.html">
            
                    
                    virtio规范阅读笔记.md
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.4" data-path="qemu_ovs_虚拟化环境.html">
            
                <a href="qemu_ovs_虚拟化环境.html">
            
                    
                    qemu OVS 虚拟化环境准备
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.5" data-path="qemu使用.html">
            
                <a href="qemu使用.html">
            
                    
                    Qemu使用(old)
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.14" data-path="as_title.html">
            
                <a href="as_title.html">
            
                    
                    计算机网络相关
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.14.1" data-path="networking_杂记1.html">
            
                <a href="networking_杂记1.html">
            
                    
                    networking杂记1
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.2" data-path="as_title.html">
            
                <a href="as_title.html">
            
                    
                    Qemu OVS和DPDK
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.14.2.1" data-path="OVS_DPDK_编译运行.html">
            
                <a href="OVS_DPDK_编译运行.html">
            
                    
                    OVS-DPDK编译运行
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.2.2" data-path="OVS_架构和代码.html">
            
                <a href="OVS_架构和代码.html">
            
                    
                    OVS架构和代码
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.2.3" data-path="OVS_DPDK_performance_HXT_ARM_server.html">
            
                <a href="OVS_DPDK_performance_HXT_ARM_server.html">
            
                    
                    OVS-DPDK for ARM server 性能测试环境
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.2.4" data-path="DPDK_Mellanox.html">
            
                <a href="DPDK_Mellanox.html">
            
                    
                    DPDK Mellanox
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.2.5" data-path="OVS_phy-vm-phy.html">
            
                <a href="OVS_phy-vm-phy.html">
            
                    
                    OVS PHY-VM-PHY
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.2.6" data-path="networking_网络虚拟化用例记录.html">
            
                <a href="networking_网络虚拟化用例记录.html">
            
                    
                    网络虚拟化用例记录
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.2.7" data-path="networking_网络虚拟化操作记录.html">
            
                <a href="networking_网络虚拟化操作记录.html">
            
                    
                    网络虚拟化操作记录
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.14.3" data-path="as_title.html">
            
                <a href="as_title.html">
            
                    
                    虚拟化网络
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.14.3.1" data-path="networking_tc_filter_连接veth和tap.html">
            
                <a href="networking_tc_filter_连接veth和tap.html">
            
                    
                    Connecting a veth device to tap
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.3.2" data-path="networking_multicast_vxlan_flannel.html">
            
                <a href="networking_multicast_vxlan_flannel.html">
            
                    
                    multicast vxlan和flannel
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.3.3" data-path="networking_virtio网络介绍.html">
            
                <a href="networking_virtio网络介绍.html">
            
                    
                    virtio网络介绍(网摘): vhost-net virtio-net vhost-user SRIOV
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.3.4" data-path="networking_virtualization_杂记.html">
            
                <a href="networking_virtualization_杂记.html">
            
                    
                    虚拟化网络杂记
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.3.5" data-path="networking_linux虚拟网络接口.html">
            
                <a href="networking_linux虚拟网络接口.html">
            
                    
                    linux虚拟网络接口(网摘)
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.15" data-path="as_title.html">
            
                <a href="as_title.html">
            
                    
                    内核 设备和驱动相关
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.15.1" data-path="driver_驱动中使用工作队列轮询.html">
            
                <a href="driver_驱动中使用工作队列轮询.html">
            
                    
                    驱动中使用工作队列轮询
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.2" data-path="device_driver_杂记.html">
            
                <a href="device_driver_杂记.html">
            
                    
                    驱动调试杂记
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.3" data-path="device_driver_原理相关.html">
            
                <a href="device_driver_原理相关.html">
            
                    
                    kernel和驱动原理相关
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.4" data-path="device_localbus_16bit读写.html">
            
                <a href="device_localbus_16bit读写.html">
            
                    
                    CPLD做8bit到16bit转换
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.5" data-path="as_title.html">
            
                <a href="as_title.html">
            
                    
                    nand
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.15.5.1" data-path="device_driver_octeon_nand.html">
            
                <a href="device_driver_octeon_nand.html">
            
                    
                    octeon nand flash驱动
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.5.2" data-path="device_driver_nand概率写失败问题分析.html">
            
                <a href="device_driver_nand概率写失败问题分析.html">
            
                    
                    Nand flash概率写失败问题分析
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.15.6" data-path="octeon_remote_pci.html">
            
                <a href="octeon_remote_pci.html">
            
                    
                    octeon remote-pci.c阅读
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.7" data-path="Device_VFIO_notes.html">
            
                <a href="Device_VFIO_notes.html">
            
                    
                    VFIO简介
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.8" data-path="as_title.html">
            
                <a href="as_title.html">
            
                    
                    智能网卡和DPDK
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.15.8.1" data-path="smartNIC_智能网卡对比.html">
            
                <a href="smartNIC_智能网卡对比.html">
            
                    
                    智能网卡对比
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.8.2" data-path="octeon_pci_NIC.html">
            
                <a href="octeon_pci_NIC.html">
            
                    
                    octeon PCI NIC
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.8.3" data-path="as_title.html">
            
                <a href="as_title.html">
            
                    
                    octeon liquidIO
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.15.8.3.1" data-path="smartNIC_liquidIO_代码阅读app篇.html">
            
                <a href="smartNIC_liquidIO_代码阅读app篇.html">
            
                    
                    PCI-NIC 代码阅读 --app篇
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.8.3.2" data-path="smartNIC_liquidIO_代码阅读api篇.html">
            
                <a href="smartNIC_liquidIO_代码阅读api篇.html">
            
                    
                    PCI-NIC 代码阅读 --api篇
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.8.3.3" data-path="smartNIC_liquidIO_代码阅读driver篇之结构体.html">
            
                <a href="smartNIC_liquidIO_代码阅读driver篇之结构体.html">
            
                    
                    PCI-NIC 代码阅读 --driver篇之结构体
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.8.3.4" data-path="smartNIC_liquidIO_代码阅读driver篇.html">
            
                <a href="smartNIC_liquidIO_代码阅读driver篇.html">
            
                    
                    PCI-NIC 代码阅读 --driver篇
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.8.3.5" data-path="smartNIC_liquidIO_代码阅读真NIC篇.html">
            
                <a href="smartNIC_liquidIO_代码阅读真NIC篇.html">
            
                    
                    PCI-NIC 代码阅读 --真NIC篇
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.15.8.4" data-path="networking_dpdk使用_2014.html">
            
                <a href="networking_dpdk使用_2014.html">
            
                    
                    DPDK使用(2014)
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.15.9" data-path="device_nvme要点介绍.html">
            
                <a href="device_nvme要点介绍.html">
            
                    
                    nvme要点介绍
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.16" data-path="as_title.html">
            
                <a href="as_title.html">
            
                    
                    CPU Arch相关
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.16.1" data-path="as_title.html">
            
                <a href="as_title.html">
            
                    
                    ARM64
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.16.1.1" data-path="CPU_ARM64_thunder_overview.html">
            
                <a href="CPU_ARM64_thunder_overview.html">
            
                    
                    thunder 概览
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.1.2" data-path="CPU_ARM64_thunder_开发板操作记录.html">
            
                <a href="CPU_ARM64_thunder_开发板操作记录.html">
            
                    
                    thunder 开发板操作记录
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.1.3" data-path="CPU_ARM64_thunder_bdk.html">
            
                <a href="CPU_ARM64_thunder_bdk.html">
            
                    
                    thunder BDK
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.1.4" data-path="CPU_ARM64_thunder_efi_rtc.html">
            
                <a href="CPU_ARM64_thunder_efi_rtc.html">
            
                    
                    thunder RTC时间和efi
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.1.5" data-path="CPU_ARM64_thunder_uefi_fdt.html">
            
                <a href="CPU_ARM64_thunder_uefi_fdt.html">
            
                    
                    thunder uefi和fdt
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.1.6" data-path="CPU_ARM64_thunder_atf.html">
            
                <a href="CPU_ARM64_thunder_atf.html">
            
                    
                    thunder atf
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.1.7" data-path="CPU_ARM64_thunder_kernel_boot.html">
            
                <a href="CPU_ARM64_thunder_kernel_boot.html">
            
                    
                    thunder kernel启动打印流程
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.16.2" data-path="as_title.html">
            
                <a href="as_title.html">
            
                    
                    PPC
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.16.2.1" data-path="CPU_PPC启动多核Linux_流程和内存映射.html">
            
                <a href="CPU_PPC启动多核Linux_流程和内存映射.html">
            
                    
                    PPC启动多核linux: 流程和内存映射
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.2.2" data-path="CPU_PPC_kernel升级记录.html">
            
                <a href="CPU_PPC_kernel升级记录.html">
            
                    
                    PPC kernel升级记录
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.16.3" data-path="as_title.html">
            
                <a href="as_title.html">
            
                    
                    MIPS
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.16.3.1" data-path="CPU_MIPS_octeon地址空间和寄存器访问.html">
            
                <a href="CPU_MIPS_octeon地址空间和寄存器访问.html">
            
                    
                    octeon 地址空间和寄存器访问
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.3.2" data-path="CPU_MIPS_octeon操作记录.html">
            
                <a href="CPU_MIPS_octeon操作记录.html">
            
                    
                    octeon 操作记录
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.3.3" data-path="CPU_MIPS_octeon_包处理性能.html">
            
                <a href="CPU_MIPS_octeon_包处理性能.html">
            
                    
                    octeon 系列处理器包处理性能
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.3.4" data-path="CPU_MIPS_octeon_ddr调试记录.html">
            
                <a href="CPU_MIPS_octeon_ddr调试记录.html">
            
                    
                    octeon DDR调试
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.3.5" data-path="CPU_MIPS_octeon_BDK.html">
            
                <a href="CPU_MIPS_octeon_BDK.html">
            
                    
                    octeon CN78xx BDK
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.3.6" data-path="kernel_增加ECC中断.html">
            
                <a href="kernel_增加ECC中断.html">
            
                    
                    octeon 增加ECC中断
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.3.7" data-path="CPU_MIPS_octeon_hw-ddr2代码走读.html">
            
                <a href="CPU_MIPS_octeon_hw-ddr2代码走读.html">
            
                    
                    octeon hw-ddr2代码走读
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.3.8" data-path="CPU_MIPS_octeon_reboot调试和ddr中断.html">
            
                <a href="CPU_MIPS_octeon_reboot调试和ddr中断.html">
            
                    
                    octeon reboot调试和DDR中断
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.3.9" data-path="CPU_MIPS_octeon中断.html">
            
                <a href="CPU_MIPS_octeon中断.html">
            
                    
                    octeon 中断
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.3.10" data-path="CPU_MIPS_octeon原子操作.html">
            
                <a href="CPU_MIPS_octeon原子操作.html">
            
                    
                    octeon 原子操作
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.3.11" data-path="CPU_MIPS_octeon网口代码分析.html">
            
                <a href="CPU_MIPS_octeon网口代码分析.html">
            
                    
                    octeon 网口代码分析
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            本书使用 GitBook 发布
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >shell命令和脚本记录-高级篇</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div class="search-plus" id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <div id="anchor-navigation-ex-navbar"><i class="fa fa-navicon"></i><ul><li><span class="title-icon "></span><a href="#&#x7528;socat&#x8FDE;&#x63A5;pty"><b>1. </b>&#x7528;socat&#x8FDE;&#x63A5;pty</a></li><ul><li><span class="title-icon "></span><a href="#&#x4EC0;&#x4E48;&#x662F;tty-pty"><b>1.1. </b>&#x4EC0;&#x4E48;&#x662F;tty pty</a></li><li><span class="title-icon "></span><a href="#&#x8BFB;&#x5199;pts"><b>1.2. </b>&#x8BFB;&#x5199;pts</a></li></ul><li><span class="title-icon "></span><a href="#socat&#x6982;&#x89C8;"><b>2. </b>socat&#x6982;&#x89C8;</a></li><ul><li><span class="title-icon "></span><a href="#&#x5E38;&#x7528;&#x9009;&#x9879;"><b>2.1. </b>&#x5E38;&#x7528;&#x9009;&#x9879;</a></li><li><span class="title-icon "></span><a href="#&#x5730;&#x5740;&#x683C;&#x5F0F;"><b>2.2. </b>&#x5730;&#x5740;&#x683C;&#x5F0F;</a></li><li><span class="title-icon "></span><a href="#&#x5730;&#x5740;&#x7C7B;&#x578B;"><b>2.3. </b>&#x5730;&#x5740;&#x7C7B;&#x578B;</a></li><ul><li><span class="title-icon "></span><a href="#&#x9009;&#x9879;"><b>2.3.1. </b>&#x9009;&#x9879;</a></li></ul><li><span class="title-icon "></span><a href="#&#x4F8B;&#x5B50;"><b>2.4. </b>&#x4F8B;&#x5B50;</a></li></ul><li><span class="title-icon "></span><a href="#&#x811A;&#x672C;&#x547D;&#x4EE4;&#x884C;&#x89E3;&#x6790;&#x4E4B;declare--f"><b>3. </b>&#x811A;&#x672C;&#x547D;&#x4EE4;&#x884C;&#x89E3;&#x6790;&#x4E4B;declare -f</a></li><li><span class="title-icon "></span><a href="#shell&#x53D8;&#x91CF;&#x6269;&#x5C55;&#x548C;&#x5F15;&#x53F7;&#x4FDD;&#x7559;"><b>4. </b>shell&#x53D8;&#x91CF;&#x6269;&#x5C55;&#x548C;&#x5F15;&#x53F7;&#x4FDD;&#x7559;</a></li><ul><li><span class="title-icon "></span><a href="#&#x80CC;&#x666F;"><b>4.1. </b>&#x80CC;&#x666F;:</a></li><li><span class="title-icon "></span><a href="#&#x7B80;&#x5355;wrapper"><b>4.2. </b>&#x7B80;&#x5355;wrapper</a></li><li><span class="title-icon "></span><a href="#&#x53C2;&#x6570;&#x91CD;&#x8F7D;"><b>4.3. </b>&#x53C2;&#x6570;&#x91CD;&#x8F7D;</a></li><li><span class="title-icon "></span><a href="#&#x53D8;&#x91CF;&#x8D4B;&#x503C;&#x5BFC;&#x81F4;&#x5B57;&#x7B26;&#x4E32;&#x591A;&#x53D8;&#x4E00;"><b>4.4. </b>&#x53D8;&#x91CF;&#x8D4B;&#x503C;&#x5BFC;&#x81F4;&#x5B57;&#x7B26;&#x4E32;&#x591A;&#x53D8;&#x4E00;</a></li><li><span class="title-icon "></span><a href="#shell&#x53D8;&#x91CF;&#x6269;&#x5C55;&#x65B9;&#x5F0F;"><b>4.5. </b>shell&#x53D8;&#x91CF;&#x6269;&#x5C55;&#x65B9;&#x5F0F;</a></li><li><span class="title-icon "></span><a href="#printf"><b>4.6. </b>printf</a></li><li><span class="title-icon "></span><a href="#&#x6700;&#x7EC8;&#x7248;-&#x7528;eval"><b>4.7. </b>&#x6700;&#x7EC8;&#x7248;, &#x7528;eval</a></li><li><span class="title-icon "></span><a href="#&#x8865;&#x5145;-shell&#x7684;&#x53D8;&#x91CF;&#x6269;&#x5C55;"><b>4.8. </b>&#x8865;&#x5145;: shell&#x7684;&#x53D8;&#x91CF;&#x6269;&#x5C55;</a></li></ul><li><span class="title-icon "></span><a href="#curl&#x4F7F;&#x7528;&#x8BF4;&#x660E;&#x548C;&#x4E3E;&#x4F8B;"><b>5. </b>curl&#x4F7F;&#x7528;&#x8BF4;&#x660E;&#x548C;&#x4E3E;&#x4F8B;</a></li><ul><li><span class="title-icon "></span><a href="#&#x4F7F;&#x7528;&#x4E3E;&#x4F8B;1"><b>5.1. </b>&#x4F7F;&#x7528;&#x4E3E;&#x4F8B;1</a></li><li><span class="title-icon "></span><a href="#&#x4F7F;&#x7528;&#x4E3E;&#x4F8B;2"><b>5.2. </b>&#x4F7F;&#x7528;&#x4E3E;&#x4F8B;2</a></li><li><span class="title-icon "></span><a href="#&#x4F7F;&#x7528;&#x4E3E;&#x4F8B;3"><b>5.3. </b>&#x4F7F;&#x7528;&#x4E3E;&#x4F8B;3</a></li><li><span class="title-icon "></span><a href="#url&#x683C;&#x5F0F;"><b>5.4. </b>URL&#x683C;&#x5F0F;</a></li></ul><li><span class="title-icon "></span><a href="#curl&#x548C;restful-gitlab-api&#x4E3E;&#x4F8B;"><b>6. </b>curl&#x548C;RESTful gitlab API&#x4E3E;&#x4F8B;</a></li><ul><li><span class="title-icon "></span><a href="#&#x7B80;&#x4ECB;"><b>6.1. </b>&#x7B80;&#x4ECB;</a></li><li><span class="title-icon "></span><a href="#&#x4E3E;&#x4F8B;"><b>6.2. </b>&#x4E3E;&#x4F8B;</a></li><ul><li><span class="title-icon "></span><a href="#&#x521B;&#x5EFA;&#x65B0;project"><b>6.2.1. </b>&#x521B;&#x5EFA;&#x65B0;project</a></li><li><span class="title-icon "></span><a href="#&#x83B7;&#x53D6;gitignore&#x6A21;&#x677F;"><b>6.2.2. </b>&#x83B7;&#x53D6;gitignore&#x6A21;&#x677F;</a></li><li><span class="title-icon "></span><a href="#&#x5206;&#x652F;&#x7EF4;&#x62A4;"><b>6.2.3. </b>&#x5206;&#x652F;&#x7EF4;&#x62A4;</a></li></ul></ul><li><span class="title-icon "></span><a href="#sed&#x89E3;&#x6790;log"><b>7. </b>sed&#x89E3;&#x6790;log</a></li><li><span class="title-icon "></span><a href="#cpu&#x5229;&#x7528;&#x7387;&#x6761;&#x4EF6;&#x89E6;&#x53D1;perf-record"><b>8. </b>CPU&#x5229;&#x7528;&#x7387;&#x6761;&#x4EF6;&#x89E6;&#x53D1;perf record</a></li><li><span class="title-icon "></span><a href="#top&#x7684;&#x8BB0;&#x5F55;&#x5BFC;&#x5165;&#x5230;excel"><b>9. </b>top&#x7684;&#x8BB0;&#x5F55;&#x5BFC;&#x5165;&#x5230;excel</a></li><ul><li><span class="title-icon "></span><a href="#&#x6BD4;&#x8F83;&#x7C97;&#x7CD9;&#x7684;&#x7248;&#x672C;"><b>9.1. </b>&#x6BD4;&#x8F83;&#x7C97;&#x7CD9;&#x7684;&#x7248;&#x672C;</a></li><ul><li><span class="title-icon "></span><a href="#cpu"><b>9.1.1. </b>CPU</a></li><li><span class="title-icon "></span><a href="#mem"><b>9.1.2. </b>mem</a></li></ul><li><span class="title-icon "></span><a href="#&#x540C;&#x65F6;&#x5BFC;&#x51FA;cpu&#x5229;&#x7528;&#x7387;&#x548C;mem"><b>9.2. </b>&#x540C;&#x65F6;&#x5BFC;&#x51FA;CPU&#x5229;&#x7528;&#x7387;&#x548C;mem</a></li><li><span class="title-icon "></span><a href="#&#x53EA;&#x5BFC;&#x51FA;cpu&#x5229;&#x7528;&#x7387;"><b>9.3. </b>&#x53EA;&#x5BFC;&#x51FA;cpu&#x5229;&#x7528;&#x7387;</a></li><ul><li><span class="title-icon "></span><a href="#&#x6539;&#x8FDB;&#x7248;"><b>9.3.1. </b>&#x6539;&#x8FDB;&#x7248;</a></li></ul></ul><li><span class="title-icon "></span><a href="#&#x7528;tr&#x5904;&#x7406;&#x591A;&#x4F59;&#x5B57;&#x7B26;"><b>10. </b>&#x7528;tr&#x5904;&#x7406;&#x591A;&#x4F59;&#x5B57;&#x7B26;</a></li><li><span class="title-icon "></span><a href="#&#x4E00;&#x6B21;shell&#x91CD;&#x5B9A;&#x5411;&#x8FC7;&#x7A0B;"><b>11. </b>&#x4E00;&#x6B21;shell&#x91CD;&#x5B9A;&#x5411;&#x8FC7;&#x7A0B;</a></li><ul><li><span class="title-icon "></span><a href="#shell&#x91CD;&#x5B9A;&#x5411;&#x548C;exec"><b>11.1. </b>shell&#x91CD;&#x5B9A;&#x5411;&#x548C;exec</a></li></ul><li><span class="title-icon "></span><a href="#&#x52A8;&#x6001;&#x53D8;&#x91CF;&#x540D;&#x53CA;&#x5176;&#x5F15;&#x7528;-eval&#x7684;&#x4F7F;&#x7528;"><b>12. </b>&#x52A8;&#x6001;&#x53D8;&#x91CF;&#x540D;&#x53CA;&#x5176;&#x5F15;&#x7528;: eval&#x7684;&#x4F7F;&#x7528;</a></li><ul><li><span class="title-icon "></span><a href="#&#x7528;eval&#x751F;&#x6210;&#x52A8;&#x6001;&#x53D8;&#x91CF;&#x540D;"><b>12.1. </b>&#x7528;eval&#x751F;&#x6210;&#x52A8;&#x6001;&#x53D8;&#x91CF;&#x540D;</a></li><li><span class="title-icon "></span><a href="#&#x95F4;&#x63A5;&#x5F15;&#x7528;&#x53D8;&#x91CF;"><b>12.2. </b>&#x95F4;&#x63A5;&#x5F15;&#x7528;&#x53D8;&#x91CF;</a></li><li><span class="title-icon "></span><a href="#&#x4E3E;&#x4F8B;-&#x8BFB;&#x51FA;conf&#x6587;&#x4EF6;&#x5185;&#x5BB9;&#x5230;&#x52A8;&#x6001;&#x6587;&#x4EF6;&#x540D;&#x53D8;&#x91CF;"><b>12.3. </b>&#x4E3E;&#x4F8B;: &#x8BFB;&#x51FA;*.conf&#x6587;&#x4EF6;&#x5185;&#x5BB9;&#x5230;&#x52A8;&#x6001;&#x6587;&#x4EF6;&#x540D;&#x53D8;&#x91CF;</a></li><li><span class="title-icon "></span><a href="#uaes&#x8FDB;&#x7A0B;&#x7BA1;&#x7406;-&#x5173;&#x7CFB;&#x6570;&#x7EC4;&#x65B9;&#x5F0F;&#x5B9E;&#x73B0;"><b>12.4. </b>uaes&#x8FDB;&#x7A0B;&#x7BA1;&#x7406;, &#x5173;&#x7CFB;&#x6570;&#x7EC4;&#x65B9;&#x5F0F;&#x5B9E;&#x73B0;</a></li></ul><li><span class="title-icon "></span><a href="#&#x5224;&#x65AD;&#x5B57;&#x4E32;&#x662F;&#x5426;&#x5305;&#x542B;&#x5B57;&#x4E32;"><b>13. </b>&#x5224;&#x65AD;&#x5B57;&#x4E32;&#x662F;&#x5426;&#x5305;&#x542B;&#x5B57;&#x4E32;</a></li><li><span class="title-icon "></span><a href="#exec&#x91CD;&#x5B9A;&#x5411;"><b>14. </b>exec&#x91CD;&#x5B9A;&#x5411;</a></li><ul><li><span class="title-icon "></span><a href="#&#x5728;shell&#x91CC;&#x76F4;&#x63A5;&#x91CD;&#x5B9A;&#x5411;stdin"><b>14.1. </b>&#x5728;shell&#x91CC;&#x76F4;&#x63A5;&#x91CD;&#x5B9A;&#x5411;stdin</a></li><li><span class="title-icon "></span><a href="#&#x91CD;&#x5B9A;&#x5411;&#x6574;&#x4E2A;shell&#x7684;stdout"><b>14.2. </b>&#x91CD;&#x5B9A;&#x5411;&#x6574;&#x4E2A;shell&#x7684;stdout</a></li><li><span class="title-icon "></span><a href="#&#x8F93;&#x5165;&#x548C;&#x8F93;&#x51FA;&#x7684;&#x4F8B;&#x5B50;"><b>14.3. </b>&#x8F93;&#x5165;&#x548C;&#x8F93;&#x51FA;&#x7684;&#x4F8B;&#x5B50;</a></li><li><span class="title-icon "></span><a href="#crosstool-ng&#x7684;&#x4F8B;&#x5B50;"><b>14.4. </b>crosstool ng&#x7684;&#x4F8B;&#x5B50;</a></li><li><span class="title-icon "></span><a href="#&#x8865;&#x5145;-test&#x53EF;&#x4EE5;&#x68C0;&#x6D4B;fd&#x662F;&#x5426;&#x662F;terminal"><b>14.5. </b>&#x8865;&#x5145;: test&#x53EF;&#x4EE5;&#x68C0;&#x6D4B;FD&#x662F;&#x5426;&#x662F;terminal</a></li></ul><li><span class="title-icon "></span><a href="#shell&#x8BFB;&#x5199;socket"><b>15. </b>shell&#x8BFB;&#x5199;socket</a></li><ul><li><span class="title-icon "></span><a href="#&#x66F4;&#x7B80;&#x5355;&#x7684;&#x5199;&#x6CD5;"><b>15.1. </b>&#x66F4;&#x7B80;&#x5355;&#x7684;&#x5199;&#x6CD5;</a></li><li><span class="title-icon "></span><a href="#devtcp&#x662F;shell&#x5185;&#x5EFA;&#x7684;&#x8BBE;&#x5907;&#x8282;&#x70B9;"><b>15.2. </b>/dev/tcp&#x662F;shell&#x5185;&#x5EFA;&#x7684;&#x8BBE;&#x5907;&#x8282;&#x70B9;</a></li></ul><li><span class="title-icon "></span><a href="#shell&#x8FDB;&#x7A0B;&#x95F4;&#x901A;&#x4FE1;"><b>16. </b>shell&#x8FDB;&#x7A0B;&#x95F4;&#x901A;&#x4FE1;</a></li><ul><li><span class="title-icon "></span><a href="#&#x6709;&#x540D;&#x7BA1;&#x9053;&#x548C;nc"><b>16.1. </b>&#x6709;&#x540D;&#x7BA1;&#x9053;&#x548C;nc</a></li></ul><li><span class="title-icon "></span><a href="#shell&#x68C0;&#x67E5;&#x4E00;&#x4E2A;&#x811A;&#x672C;&#x662F;&#x5426;&#x5DF2;&#x7ECF;&#x88AB;include&#x4E86;"><b>17. </b>shell&#x68C0;&#x67E5;&#x4E00;&#x4E2A;&#x811A;&#x672C;&#x662F;&#x5426;&#x5DF2;&#x7ECF;&#x88AB;include&#x4E86;</a></li><li><span class="title-icon "></span><a href="#sed"><b>18. </b>sed</a></li><ul><li><span class="title-icon "></span><a href="#&#x5411;sed&#x4F20;&#x9012;&#x53D8;&#x91CF;"><b>18.1. </b>&#x5411;sed&#x4F20;&#x9012;&#x53D8;&#x91CF;</a></li><li><span class="title-icon "></span><a href="#sed&#x4F7F;&#x7528;&#x8BB0;&#x5F55;"><b>18.2. </b>sed&#x4F7F;&#x7528;&#x8BB0;&#x5F55;</a></li><li><span class="title-icon "></span><a href="#sed&#x547D;&#x4EE4;"><b>18.3. </b>sed&#x547D;&#x4EE4;</a></li><li><span class="title-icon "></span><a href="#sed&#x5339;&#x914D;2&#x884C;&#x4E4B;&#x95F4;&#x7684;&#x5185;&#x5BB9;"><b>18.4. </b>sed&#x5339;&#x914D;2&#x884C;&#x4E4B;&#x95F4;&#x7684;&#x5185;&#x5BB9;</a></li><li><span class="title-icon "></span><a href="#&#x63D0;&#x53D6;&#x6587;&#x4EF6;&#x7279;&#x5B9A;&#x884C;"><b>18.5. </b>&#x63D0;&#x53D6;&#x6587;&#x4EF6;&#x7279;&#x5B9A;&#x884C;</a></li><li><span class="title-icon "></span><a href="#sed&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;"><b>18.6. </b>sed&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;</a></li><li><span class="title-icon "></span><a href="#sed&#x5B9A;&#x5740;&#x66FF;&#x6362;"><b>18.7. </b>sed&#x5B9A;&#x5740;&#x66FF;&#x6362;</a></li><li><span class="title-icon "></span><a href="#sed&#x5220;&#x9664;"><b>18.8. </b>sed&#x5220;&#x9664;</a></li><li><span class="title-icon "></span><a href="#sed&#x66FF;&#x6362;&#x5F15;&#x7528;"><b>18.9. </b>sed&#x66FF;&#x6362;&#x5F15;&#x7528;</a></li><li><span class="title-icon "></span><a href="#sed&#x7684;&#x5206;&#x7EC4;&#x5339;&#x914D;-&#x7528;&#x5206;&#x7EC4;-&#x7528;1&#x5F15;&#x7528;"><b>18.10. </b>sed&#x7684;&#x5206;&#x7EC4;&#x5339;&#x914D;, &#x7528;()&#x5206;&#x7EC4;, &#x7528;\1&#x5F15;&#x7528;</a></li></ul><li><span class="title-icon "></span><a href="#awk"><b>19. </b>awk</a></li><ul><li><span class="title-icon "></span><a href="#shell&#x53D8;&#x91CF;&#x4F20;&#x7ED9;awk"><b>19.1. </b>shell&#x53D8;&#x91CF;&#x4F20;&#x7ED9;awk</a></li><li><span class="title-icon "></span><a href="#&#x518D;&#x8BF4;patten"><b>19.2. </b>&#x518D;&#x8BF4;patten</a></li><li><span class="title-icon "></span><a href="#awk&#x5728;if&#x91CC;&#x5339;&#x914D;"><b>19.3. </b>awk&#x5728;if&#x91CC;&#x5339;&#x914D;</a></li><li><span class="title-icon "></span><a href="#awk&#x652F;&#x6301;&#x6D6E;&#x70B9;"><b>19.4. </b>awk&#x652F;&#x6301;&#x6D6E;&#x70B9;</a></li><li><span class="title-icon "></span><a href="#awk&#x903B;&#x8F91;&#x4E0E;"><b>19.5. </b>awk&#x903B;&#x8F91;&#x4E0E;</a></li><li><span class="title-icon "></span><a href="#awk&#x591A;&#x884C;&#x89E3;&#x6790;"><b>19.6. </b>awk&#x591A;&#x884C;&#x89E3;&#x6790;</a></li><li><span class="title-icon "></span><a href="#awk&#x5206;&#x7EC4;&#x63D0;&#x53D6;"><b>19.7. </b>awk&#x5206;&#x7EC4;&#x63D0;&#x53D6;</a></li><li><span class="title-icon "></span><a href="#awk&#x53D8;&#x91CF;"><b>19.8. </b>awk&#x53D8;&#x91CF;</a></li><li><span class="title-icon "></span><a href="#awk&#x6570;&#x7EC4;"><b>19.9. </b>awk&#x6570;&#x7EC4;</a></li><li><span class="title-icon "></span><a href="#awk&#x5B57;&#x7B26;&#x4E32;&#x66FF;&#x6362;"><b>19.10. </b>awk&#x5B57;&#x7B26;&#x4E32;&#x66FF;&#x6362;</a></li><li><span class="title-icon "></span><a href="#awk&#x7684;&#x6761;&#x4EF6;&#x5224;&#x65AD;&#x548C;&#x6570;&#x5B57;&#x8FD0;&#x7B97;"><b>19.11. </b>awk&#x7684;&#x6761;&#x4EF6;&#x5224;&#x65AD;&#x548C;&#x6570;&#x5B57;&#x8FD0;&#x7B97;</a></li><li><span class="title-icon "></span><a href="#awk&#x6267;&#x884C;&#x5176;&#x4ED6;&#x7A0B;&#x5E8F;"><b>19.12. </b>awk&#x6267;&#x884C;&#x5176;&#x4ED6;&#x7A0B;&#x5E8F;</a></li><li><span class="title-icon "></span><a href="#awk&#x66FF;&#x6362;&#x547D;&#x4EE4;"><b>19.13. </b>awk&#x66FF;&#x6362;&#x547D;&#x4EE4;</a></li></ul><li><span class="title-icon "></span><a href="#shell&#x7BA1;&#x9053;&#x548C;&#x5FAA;&#x73AF;"><b>20. </b>shell&#x7BA1;&#x9053;&#x548C;&#x5FAA;&#x73AF;</a></li><li><span class="title-icon "></span><a href="#&#x770B;&#x4E00;&#x4E2A;interface&#x662F;&#x5426;&#x5B58;&#x5728;"><b>21. </b>&#x770B;&#x4E00;&#x4E2A;interface&#x662F;&#x5426;&#x5B58;&#x5728;</a></li><ul><li><span class="title-icon "></span><a href="#&#x7528;procnetdev"><b>21.1. </b>&#x7528;/proc/net/dev</a></li><li><span class="title-icon "></span><a href="#&#x7528;ifconfig-intf&#x8FD4;&#x56DE;&#x503C;"><b>21.2. </b>&#x7528;ifconfig intf&#x8FD4;&#x56DE;&#x503C;</a></li></ul><li><span class="title-icon "></span><a href="#awk&#x8BA1;&#x7B97;&#x65F6;&#x95F4;&#x5DEE;"><b>22. </b>awk&#x8BA1;&#x7B97;&#x65F6;&#x95F4;&#x5DEE;</a></li><li><span class="title-icon "></span><a href="#ping&#x5EF6;&#x8FDF;&#x5927;&#x4E8E;05ms&#x89E6;&#x53D1;&#x52A8;&#x4F5C;"><b>23. </b>ping&#x5EF6;&#x8FDF;&#x5927;&#x4E8E;0.5ms&#x89E6;&#x53D1;&#x52A8;&#x4F5C;</a></li><li><span class="title-icon "></span><a href="#&#x8BA1;&#x7B97;cpu&#x63A9;&#x7801;-mask"><b>24. </b>&#x8BA1;&#x7B97;cpu&#x63A9;&#x7801;, mask</a></li><li><span class="title-icon "></span><a href="#shell&#x7684;&#x8FDB;&#x7A0B;&#x521B;&#x5EFA;"><b>25. </b>shell&#x7684;&#x8FDB;&#x7A0B;&#x521B;&#x5EFA;</a></li><li><span class="title-icon "></span><a href="#&#x7C98;&#x8D34;&#x591A;&#x884C;&#x6587;&#x672C;&#x7BA1;&#x9053;&#x540E;&#x518D;&#x7528;&#x540E;&#x7EED;&#x547D;&#x4EE4;&#x5904;&#x7406;"><b>26. </b>&#x7C98;&#x8D34;&#x591A;&#x884C;&#x6587;&#x672C;&#x7BA1;&#x9053;&#x540E;&#x518D;&#x7528;&#x540E;&#x7EED;&#x547D;&#x4EE4;&#x5904;&#x7406;</a></li><li><span class="title-icon "></span><a href="#&#x5173;&#x7CFB;&#x6570;&#x7EC4;-sed-&#x548C;-awk"><b>27. </b>&#x5173;&#x7CFB;&#x6570;&#x7EC4; sed &#x548C; awk</a></li><ul><li><span class="title-icon "></span><a href="#&#x6539;&#x8FDB;&#x7248;-awk&#x591A;&#x7EF4;&#x6570;&#x7EC4;"><b>27.1. </b>&#x6539;&#x8FDB;&#x7248; awk&#x591A;&#x7EF4;&#x6570;&#x7EC4;</a></li><li><span class="title-icon "></span><a href="#&#x539F;&#x59CB;&#x7248;"><b>27.2. </b>&#x539F;&#x59CB;&#x7248;</a></li></ul><li><span class="title-icon "></span><a href="#shell&#x5173;&#x7CFB;&#x6570;&#x7EC4;----&#x6216;&#x8005;&#x8BF4;&#x662F;list"><b>28. </b>shell&#x5173;&#x7CFB;&#x6570;&#x7EC4; -- &#x6216;&#x8005;&#x8BF4;&#x662F;list</a></li><li><span class="title-icon "></span><a href="#shell&#x6570;&#x7EC4;"><b>29. </b>shell&#x6570;&#x7EC4;</a></li><li><span class="title-icon "></span><a href="#shell&#x811A;&#x672C;&#x89E3;&#x6790;&#x6587;&#x4EF6;-&#x8F93;&#x51FA;&#x53EF;&#x4EE5;&#x5BFC;&#x5165;&#x5230;excel&#x7684;&#x6587;&#x672C;"><b>30. </b>shell&#x811A;&#x672C;&#x89E3;&#x6790;&#x6587;&#x4EF6;, &#x8F93;&#x51FA;&#x53EF;&#x4EE5;&#x5BFC;&#x5165;&#x5230;excel&#x7684;&#x6587;&#x672C;</a></li><li><span class="title-icon "></span><a href="#shell&#x5904;&#x7406;&#x547D;&#x4EE4;&#x884C;&#x9009;&#x9879;"><b>31. </b>shell&#x5904;&#x7406;&#x547D;&#x4EE4;&#x884C;&#x9009;&#x9879;</a></li><li><span class="title-icon "></span><a href="#shell&#x4E5F;&#x53EF;&#x4EE5;&#x9012;&#x5F52;&#x8C03;&#x7528;&#x51FD;&#x6570;"><b>32. </b>shell&#x4E5F;&#x53EF;&#x4EE5;&#x9012;&#x5F52;&#x8C03;&#x7528;&#x51FD;&#x6570;</a></li><ul><li><span class="title-icon "></span><a href="#&#x6539;&#x8FDB;&#x7248;&#x672C;"><b>32.1. </b>&#x6539;&#x8FDB;&#x7248;&#x672C;</a></li></ul><li><span class="title-icon "></span><a href="#local-system-monitor"><b>33. </b>local system monitor</a></li><li><span class="title-icon "></span><a href="#system-monitor-for-pangu"><b>34. </b>system monitor for pangu</a></li><li><span class="title-icon "></span><a href="#&#x589E;&#x52A0;fedora&#x5206;&#x533A;&#x7684;&#x811A;&#x672C;"><b>35. </b>&#x589E;&#x52A0;fedora&#x5206;&#x533A;&#x7684;&#x811A;&#x672C;</a></li></ul></div><a href="#&#x7528;socat&#x8FDE;&#x63A5;pty" id="anchorNavigationExGoTop"><i class="fa fa-arrow-up"></i></a><html><head></head><body><ul>
<li><a href="#&#x7528;socat&#x8FDE;&#x63A5;pty">&#x7528;socat&#x8FDE;&#x63A5;pty</a><ul>
<li><a href="#&#x4EC0;&#x4E48;&#x662F;tty-pty">&#x4EC0;&#x4E48;&#x662F;tty pty</a></li>
<li><a href="#&#x8BFB;&#x5199;pts">&#x8BFB;&#x5199;pts</a></li>
</ul>
</li>
<li><a href="#socat&#x6982;&#x89C8;">socat&#x6982;&#x89C8;</a><ul>
<li><a href="#&#x5E38;&#x7528;&#x9009;&#x9879;">&#x5E38;&#x7528;&#x9009;&#x9879;</a></li>
<li><a href="#&#x5730;&#x5740;&#x683C;&#x5F0F;">&#x5730;&#x5740;&#x683C;&#x5F0F;</a></li>
<li><a href="#&#x5730;&#x5740;&#x7C7B;&#x578B;">&#x5730;&#x5740;&#x7C7B;&#x578B;</a><ul>
<li><a href="#&#x9009;&#x9879;">&#x9009;&#x9879;</a><ul>
<li><a href="#fd&#x7EC4;">FD&#x7EC4;</a></li>
<li><a href="#named-option-group">NAMED option group</a></li>
<li><a href="#open-option-group">OPEN option group</a></li>
<li><a href="#reg-and-blk-option-group">REG and BLK option group</a></li>
<li><a href="#process-option-group">PROCESS option group</a></li>
<li><a href="#application-option-group">APPLICATION option group</a></li>
<li><a href="#socket-option-group">SOCKET option group</a></li>
<li><a href="#ip4-and-ip6-option-groups">IP4 and IP6 option groups</a></li>
<li><a href="#termios-option-group">TERMIOS option group</a></li>
<li><a href="#fork-option-group">FORK option group</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#&#x4F8B;&#x5B50;">&#x4F8B;&#x5B50;</a></li>
</ul>
</li>
<li><a href="#&#x811A;&#x672C;&#x547D;&#x4EE4;&#x884C;&#x89E3;&#x6790;&#x4E4B;declare--f">&#x811A;&#x672C;&#x547D;&#x4EE4;&#x884C;&#x89E3;&#x6790;&#x4E4B;declare -f</a></li>
<li><a href="#shell&#x53D8;&#x91CF;&#x6269;&#x5C55;&#x548C;&#x5F15;&#x53F7;&#x4FDD;&#x7559;">shell&#x53D8;&#x91CF;&#x6269;&#x5C55;&#x548C;&#x5F15;&#x53F7;&#x4FDD;&#x7559;</a><ul>
<li><a href="#&#x80CC;&#x666F;">&#x80CC;&#x666F;:</a></li>
<li><a href="#&#x7B80;&#x5355;wrapper">&#x7B80;&#x5355;wrapper</a></li>
<li><a href="#&#x53C2;&#x6570;&#x91CD;&#x8F7D;">&#x53C2;&#x6570;&#x91CD;&#x8F7D;</a></li>
<li><a href="#&#x53D8;&#x91CF;&#x8D4B;&#x503C;&#x5BFC;&#x81F4;&#x5B57;&#x7B26;&#x4E32;&#x591A;&#x53D8;&#x4E00;">&#x53D8;&#x91CF;&#x8D4B;&#x503C;&#x5BFC;&#x81F4;&#x5B57;&#x7B26;&#x4E32;&#x591A;&#x53D8;&#x4E00;</a></li>
<li><a href="#shell&#x53D8;&#x91CF;&#x6269;&#x5C55;&#x65B9;&#x5F0F;">shell&#x53D8;&#x91CF;&#x6269;&#x5C55;&#x65B9;&#x5F0F;</a></li>
<li><a href="#printf">printf</a></li>
<li><a href="#&#x6700;&#x7EC8;&#x7248;-&#x7528;eval">&#x6700;&#x7EC8;&#x7248;, &#x7528;eval</a></li>
<li><a href="#&#x8865;&#x5145;-shell&#x7684;&#x53D8;&#x91CF;&#x6269;&#x5C55;">&#x8865;&#x5145;: shell&#x7684;&#x53D8;&#x91CF;&#x6269;&#x5C55;</a></li>
</ul>
</li>
<li><a href="#curl&#x4F7F;&#x7528;&#x8BF4;&#x660E;&#x548C;&#x4E3E;&#x4F8B;">curl&#x4F7F;&#x7528;&#x8BF4;&#x660E;&#x548C;&#x4E3E;&#x4F8B;</a><ul>
<li><a href="#&#x4F7F;&#x7528;&#x4E3E;&#x4F8B;1">&#x4F7F;&#x7528;&#x4E3E;&#x4F8B;1</a></li>
<li><a href="#&#x4F7F;&#x7528;&#x4E3E;&#x4F8B;2">&#x4F7F;&#x7528;&#x4E3E;&#x4F8B;2</a></li>
<li><a href="#&#x4F7F;&#x7528;&#x4E3E;&#x4F8B;3">&#x4F7F;&#x7528;&#x4E3E;&#x4F8B;3</a></li>
<li><a href="#url&#x683C;&#x5F0F;">URL&#x683C;&#x5F0F;</a></li>
</ul>
</li>
<li><a href="#curl&#x548C;restful-gitlab-api&#x4E3E;&#x4F8B;">curl&#x548C;RESTful gitlab API&#x4E3E;&#x4F8B;</a><ul>
<li><a href="#&#x7B80;&#x4ECB;">&#x7B80;&#x4ECB;</a></li>
<li><a href="#&#x4E3E;&#x4F8B;">&#x4E3E;&#x4F8B;</a><ul>
<li><a href="#&#x521B;&#x5EFA;&#x65B0;project">&#x521B;&#x5EFA;&#x65B0;project</a></li>
<li><a href="#&#x83B7;&#x53D6;gitignore&#x6A21;&#x677F;">&#x83B7;&#x53D6;gitignore&#x6A21;&#x677F;</a></li>
<li><a href="#&#x5206;&#x652F;&#x7EF4;&#x62A4;">&#x5206;&#x652F;&#x7EF4;&#x62A4;</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#sed&#x89E3;&#x6790;log">sed&#x89E3;&#x6790;log</a></li>
<li><a href="#cpu&#x5229;&#x7528;&#x7387;&#x6761;&#x4EF6;&#x89E6;&#x53D1;perf-record">CPU&#x5229;&#x7528;&#x7387;&#x6761;&#x4EF6;&#x89E6;&#x53D1;perf record</a></li>
<li><a href="#top&#x7684;&#x8BB0;&#x5F55;&#x5BFC;&#x5165;&#x5230;excel">top&#x7684;&#x8BB0;&#x5F55;&#x5BFC;&#x5165;&#x5230;excel</a><ul>
<li><a href="#&#x6BD4;&#x8F83;&#x7C97;&#x7CD9;&#x7684;&#x7248;&#x672C;">&#x6BD4;&#x8F83;&#x7C97;&#x7CD9;&#x7684;&#x7248;&#x672C;</a><ul>
<li><a href="#cpu">CPU</a></li>
<li><a href="#mem">mem</a></li>
</ul>
</li>
<li><a href="#&#x540C;&#x65F6;&#x5BFC;&#x51FA;cpu&#x5229;&#x7528;&#x7387;&#x548C;mem">&#x540C;&#x65F6;&#x5BFC;&#x51FA;CPU&#x5229;&#x7528;&#x7387;&#x548C;mem</a></li>
<li><a href="#&#x53EA;&#x5BFC;&#x51FA;cpu&#x5229;&#x7528;&#x7387;">&#x53EA;&#x5BFC;&#x51FA;cpu&#x5229;&#x7528;&#x7387;</a><ul>
<li><a href="#&#x6539;&#x8FDB;&#x7248;">&#x6539;&#x8FDB;&#x7248;</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#&#x7528;tr&#x5904;&#x7406;&#x591A;&#x4F59;&#x5B57;&#x7B26;">&#x7528;tr&#x5904;&#x7406;&#x591A;&#x4F59;&#x5B57;&#x7B26;</a></li>
<li><a href="#&#x4E00;&#x6B21;shell&#x91CD;&#x5B9A;&#x5411;&#x8FC7;&#x7A0B;">&#x4E00;&#x6B21;shell&#x91CD;&#x5B9A;&#x5411;&#x8FC7;&#x7A0B;</a><ul>
<li><a href="#shell&#x91CD;&#x5B9A;&#x5411;&#x548C;exec">shell&#x91CD;&#x5B9A;&#x5411;&#x548C;exec</a></li>
</ul>
</li>
<li><a href="#&#x52A8;&#x6001;&#x53D8;&#x91CF;&#x540D;&#x53CA;&#x5176;&#x5F15;&#x7528;-eval&#x7684;&#x4F7F;&#x7528;">&#x52A8;&#x6001;&#x53D8;&#x91CF;&#x540D;&#x53CA;&#x5176;&#x5F15;&#x7528;: eval&#x7684;&#x4F7F;&#x7528;</a><ul>
<li><a href="#&#x7528;eval&#x751F;&#x6210;&#x52A8;&#x6001;&#x53D8;&#x91CF;&#x540D;">&#x7528;eval&#x751F;&#x6210;&#x52A8;&#x6001;&#x53D8;&#x91CF;&#x540D;</a></li>
<li><a href="#&#x95F4;&#x63A5;&#x5F15;&#x7528;&#x53D8;&#x91CF;">&#x95F4;&#x63A5;&#x5F15;&#x7528;&#x53D8;&#x91CF;</a></li>
<li><a href="#&#x4E3E;&#x4F8B;-&#x8BFB;&#x51FA;conf&#x6587;&#x4EF6;&#x5185;&#x5BB9;&#x5230;&#x52A8;&#x6001;&#x6587;&#x4EF6;&#x540D;&#x53D8;&#x91CF;">&#x4E3E;&#x4F8B;: &#x8BFB;&#x51FA;*.conf&#x6587;&#x4EF6;&#x5185;&#x5BB9;&#x5230;&#x52A8;&#x6001;&#x6587;&#x4EF6;&#x540D;&#x53D8;&#x91CF;</a></li>
<li><a href="#uaes&#x8FDB;&#x7A0B;&#x7BA1;&#x7406;-&#x5173;&#x7CFB;&#x6570;&#x7EC4;&#x65B9;&#x5F0F;&#x5B9E;&#x73B0;">uaes&#x8FDB;&#x7A0B;&#x7BA1;&#x7406;, &#x5173;&#x7CFB;&#x6570;&#x7EC4;&#x65B9;&#x5F0F;&#x5B9E;&#x73B0;</a></li>
</ul>
</li>
<li><a href="#&#x5224;&#x65AD;&#x5B57;&#x4E32;&#x662F;&#x5426;&#x5305;&#x542B;&#x5B57;&#x4E32;">&#x5224;&#x65AD;&#x5B57;&#x4E32;&#x662F;&#x5426;&#x5305;&#x542B;&#x5B57;&#x4E32;</a></li>
<li><a href="#exec&#x91CD;&#x5B9A;&#x5411;">exec&#x91CD;&#x5B9A;&#x5411;</a><ul>
<li><a href="#&#x5728;shell&#x91CC;&#x76F4;&#x63A5;&#x91CD;&#x5B9A;&#x5411;stdin">&#x5728;shell&#x91CC;&#x76F4;&#x63A5;&#x91CD;&#x5B9A;&#x5411;stdin</a></li>
<li><a href="#&#x91CD;&#x5B9A;&#x5411;&#x6574;&#x4E2A;shell&#x7684;stdout">&#x91CD;&#x5B9A;&#x5411;&#x6574;&#x4E2A;shell&#x7684;stdout</a></li>
<li><a href="#&#x8F93;&#x5165;&#x548C;&#x8F93;&#x51FA;&#x7684;&#x4F8B;&#x5B50;">&#x8F93;&#x5165;&#x548C;&#x8F93;&#x51FA;&#x7684;&#x4F8B;&#x5B50;</a></li>
<li><a href="#crosstool-ng&#x7684;&#x4F8B;&#x5B50;">crosstool ng&#x7684;&#x4F8B;&#x5B50;</a></li>
<li><a href="#&#x8865;&#x5145;-test&#x53EF;&#x4EE5;&#x68C0;&#x6D4B;fd&#x662F;&#x5426;&#x662F;terminal">&#x8865;&#x5145;: test&#x53EF;&#x4EE5;&#x68C0;&#x6D4B;FD&#x662F;&#x5426;&#x662F;terminal</a></li>
</ul>
</li>
<li><a href="#shell&#x8BFB;&#x5199;socket">shell&#x8BFB;&#x5199;socket</a><ul>
<li><a href="#&#x66F4;&#x7B80;&#x5355;&#x7684;&#x5199;&#x6CD5;">&#x66F4;&#x7B80;&#x5355;&#x7684;&#x5199;&#x6CD5;</a></li>
<li><a href="#devtcp&#x662F;shell&#x5185;&#x5EFA;&#x7684;&#x8BBE;&#x5907;&#x8282;&#x70B9;">/dev/tcp&#x662F;shell&#x5185;&#x5EFA;&#x7684;&#x8BBE;&#x5907;&#x8282;&#x70B9;</a></li>
</ul>
</li>
<li><a href="#shell&#x8FDB;&#x7A0B;&#x95F4;&#x901A;&#x4FE1;">shell&#x8FDB;&#x7A0B;&#x95F4;&#x901A;&#x4FE1;</a><ul>
<li><a href="#&#x6709;&#x540D;&#x7BA1;&#x9053;&#x548C;nc">&#x6709;&#x540D;&#x7BA1;&#x9053;&#x548C;nc</a></li>
</ul>
</li>
<li><a href="#shell&#x68C0;&#x67E5;&#x4E00;&#x4E2A;&#x811A;&#x672C;&#x662F;&#x5426;&#x5DF2;&#x7ECF;&#x88AB;include&#x4E86;">shell&#x68C0;&#x67E5;&#x4E00;&#x4E2A;&#x811A;&#x672C;&#x662F;&#x5426;&#x5DF2;&#x7ECF;&#x88AB;include&#x4E86;</a></li>
<li><a href="#sed">sed</a><ul>
<li><a href="#&#x5411;sed&#x4F20;&#x9012;&#x53D8;&#x91CF;">&#x5411;sed&#x4F20;&#x9012;&#x53D8;&#x91CF;</a></li>
<li><a href="#sed&#x4F7F;&#x7528;&#x8BB0;&#x5F55;">sed&#x4F7F;&#x7528;&#x8BB0;&#x5F55;</a></li>
<li><a href="#sed&#x547D;&#x4EE4;">sed&#x547D;&#x4EE4;</a></li>
<li><a href="#sed&#x5339;&#x914D;2&#x884C;&#x4E4B;&#x95F4;&#x7684;&#x5185;&#x5BB9;">sed&#x5339;&#x914D;2&#x884C;&#x4E4B;&#x95F4;&#x7684;&#x5185;&#x5BB9;</a></li>
<li><a href="#&#x63D0;&#x53D6;&#x6587;&#x4EF6;&#x7279;&#x5B9A;&#x884C;">&#x63D0;&#x53D6;&#x6587;&#x4EF6;&#x7279;&#x5B9A;&#x884C;</a></li>
<li><a href="#sed&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;">sed&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;</a></li>
<li><a href="#sed&#x5B9A;&#x5740;&#x66FF;&#x6362;">sed&#x5B9A;&#x5740;&#x66FF;&#x6362;</a></li>
<li><a href="#sed&#x5220;&#x9664;">sed&#x5220;&#x9664;</a></li>
<li><a href="#sed&#x66FF;&#x6362;&#x5F15;&#x7528;">sed&#x66FF;&#x6362;&#x5F15;&#x7528;</a></li>
<li><a href="#sed&#x7684;&#x5206;&#x7EC4;&#x5339;&#x914D;-&#x7528;&#x5206;&#x7EC4;-&#x7528;1&#x5F15;&#x7528;">sed&#x7684;&#x5206;&#x7EC4;&#x5339;&#x914D;, &#x7528;()&#x5206;&#x7EC4;, &#x7528;\1&#x5F15;&#x7528;</a></li>
</ul>
</li>
<li><a href="#awk">awk</a><ul>
<li><a href="#shell&#x53D8;&#x91CF;&#x4F20;&#x7ED9;awk">shell&#x53D8;&#x91CF;&#x4F20;&#x7ED9;awk</a></li>
<li><a href="#&#x518D;&#x8BF4;patten">&#x518D;&#x8BF4;patten</a></li>
<li><a href="#awk&#x5728;if&#x91CC;&#x5339;&#x914D;">awk&#x5728;if&#x91CC;&#x5339;&#x914D;</a></li>
<li><a href="#awk&#x652F;&#x6301;&#x6D6E;&#x70B9;">awk&#x652F;&#x6301;&#x6D6E;&#x70B9;</a></li>
<li><a href="#awk&#x903B;&#x8F91;&#x4E0E;">awk&#x903B;&#x8F91;&#x4E0E;</a></li>
<li><a href="#awk&#x591A;&#x884C;&#x89E3;&#x6790;">awk&#x591A;&#x884C;&#x89E3;&#x6790;</a></li>
<li><a href="#awk&#x5206;&#x7EC4;&#x63D0;&#x53D6;">awk&#x5206;&#x7EC4;&#x63D0;&#x53D6;</a></li>
<li><a href="#awk&#x53D8;&#x91CF;">awk&#x53D8;&#x91CF;</a></li>
<li><a href="#awk&#x6570;&#x7EC4;">awk&#x6570;&#x7EC4;</a></li>
<li><a href="#awk&#x5B57;&#x7B26;&#x4E32;&#x66FF;&#x6362;">awk&#x5B57;&#x7B26;&#x4E32;&#x66FF;&#x6362;</a></li>
<li><a href="#awk&#x7684;&#x6761;&#x4EF6;&#x5224;&#x65AD;&#x548C;&#x6570;&#x5B57;&#x8FD0;&#x7B97;">awk&#x7684;&#x6761;&#x4EF6;&#x5224;&#x65AD;&#x548C;&#x6570;&#x5B57;&#x8FD0;&#x7B97;</a></li>
<li><a href="#awk&#x6267;&#x884C;&#x5176;&#x4ED6;&#x7A0B;&#x5E8F;">awk&#x6267;&#x884C;&#x5176;&#x4ED6;&#x7A0B;&#x5E8F;</a></li>
<li><a href="#awk&#x66FF;&#x6362;&#x547D;&#x4EE4;">awk&#x66FF;&#x6362;&#x547D;&#x4EE4;</a></li>
</ul>
</li>
<li><a href="#shell&#x7BA1;&#x9053;&#x548C;&#x5FAA;&#x73AF;">shell&#x7BA1;&#x9053;&#x548C;&#x5FAA;&#x73AF;</a></li>
<li><a href="#&#x770B;&#x4E00;&#x4E2A;interface&#x662F;&#x5426;&#x5B58;&#x5728;">&#x770B;&#x4E00;&#x4E2A;interface&#x662F;&#x5426;&#x5B58;&#x5728;</a><ul>
<li><a href="#&#x7528;procnetdev">&#x7528;/proc/net/dev</a></li>
<li><a href="#&#x7528;ifconfig-intf&#x8FD4;&#x56DE;&#x503C;">&#x7528;ifconfig intf&#x8FD4;&#x56DE;&#x503C;</a></li>
</ul>
</li>
<li><a href="#awk&#x8BA1;&#x7B97;&#x65F6;&#x95F4;&#x5DEE;">awk&#x8BA1;&#x7B97;&#x65F6;&#x95F4;&#x5DEE;</a></li>
<li><a href="#ping&#x5EF6;&#x8FDF;&#x5927;&#x4E8E;05ms&#x89E6;&#x53D1;&#x52A8;&#x4F5C;">ping&#x5EF6;&#x8FDF;&#x5927;&#x4E8E;0.5ms&#x89E6;&#x53D1;&#x52A8;&#x4F5C;</a></li>
<li><a href="#&#x8BA1;&#x7B97;cpu&#x63A9;&#x7801;-mask">&#x8BA1;&#x7B97;cpu&#x63A9;&#x7801;, mask</a></li>
<li><a href="#shell&#x7684;&#x8FDB;&#x7A0B;&#x521B;&#x5EFA;">shell&#x7684;&#x8FDB;&#x7A0B;&#x521B;&#x5EFA;</a></li>
<li><a href="#&#x7C98;&#x8D34;&#x591A;&#x884C;&#x6587;&#x672C;&#x7BA1;&#x9053;&#x540E;&#x518D;&#x7528;&#x540E;&#x7EED;&#x547D;&#x4EE4;&#x5904;&#x7406;">&#x7C98;&#x8D34;&#x591A;&#x884C;&#x6587;&#x672C;&#x7BA1;&#x9053;&#x540E;&#x518D;&#x7528;&#x540E;&#x7EED;&#x547D;&#x4EE4;&#x5904;&#x7406;</a></li>
<li><a href="#&#x5173;&#x7CFB;&#x6570;&#x7EC4;-sed-&#x548C;-awk">&#x5173;&#x7CFB;&#x6570;&#x7EC4; sed &#x548C; awk</a><ul>
<li><a href="#&#x6539;&#x8FDB;&#x7248;-awk&#x591A;&#x7EF4;&#x6570;&#x7EC4;">&#x6539;&#x8FDB;&#x7248; awk&#x591A;&#x7EF4;&#x6570;&#x7EC4;</a></li>
<li><a href="#&#x539F;&#x59CB;&#x7248;">&#x539F;&#x59CB;&#x7248;</a></li>
</ul>
</li>
<li><a href="#shell&#x5173;&#x7CFB;&#x6570;&#x7EC4;----&#x6216;&#x8005;&#x8BF4;&#x662F;list">shell&#x5173;&#x7CFB;&#x6570;&#x7EC4; -- &#x6216;&#x8005;&#x8BF4;&#x662F;list</a></li>
<li><a href="#shell&#x6570;&#x7EC4;">shell&#x6570;&#x7EC4;</a></li>
<li><a href="#shell&#x811A;&#x672C;&#x89E3;&#x6790;&#x6587;&#x4EF6;-&#x8F93;&#x51FA;&#x53EF;&#x4EE5;&#x5BFC;&#x5165;&#x5230;excel&#x7684;&#x6587;&#x672C;">shell&#x811A;&#x672C;&#x89E3;&#x6790;&#x6587;&#x4EF6;, &#x8F93;&#x51FA;&#x53EF;&#x4EE5;&#x5BFC;&#x5165;&#x5230;excel&#x7684;&#x6587;&#x672C;</a></li>
<li><a href="#shell&#x5904;&#x7406;&#x547D;&#x4EE4;&#x884C;&#x9009;&#x9879;">shell&#x5904;&#x7406;&#x547D;&#x4EE4;&#x884C;&#x9009;&#x9879;</a></li>
<li><a href="#shell&#x4E5F;&#x53EF;&#x4EE5;&#x9012;&#x5F52;&#x8C03;&#x7528;&#x51FD;&#x6570;">shell&#x4E5F;&#x53EF;&#x4EE5;&#x9012;&#x5F52;&#x8C03;&#x7528;&#x51FD;&#x6570;</a><ul>
<li><a href="#&#x6539;&#x8FDB;&#x7248;&#x672C;">&#x6539;&#x8FDB;&#x7248;&#x672C;</a></li>
</ul>
</li>
<li><a href="#local-system-monitor">local system monitor</a></li>
<li><a href="#system-monitor-for-pangu">system monitor for pangu</a></li>
<li><a href="#&#x589E;&#x52A0;fedora&#x5206;&#x533A;&#x7684;&#x811A;&#x672C;">&#x589E;&#x52A0;fedora&#x5206;&#x533A;&#x7684;&#x811A;&#x672C;</a></li>
</ul>
<h1 id="&#x7528;socat&#x8FDE;&#x63A5;pty"><a name="&#x7528;socat&#x8FDE;&#x63A5;pty" class="anchor-navigation-ex-anchor" href="#&#x7528;socat&#x8FDE;&#x63A5;pty"><i class="fa fa-link" aria-hidden="true"></i></a>1. &#x7528;socat&#x8FDE;&#x63A5;pty</h1>
<h2 id="&#x4EC0;&#x4E48;&#x662F;tty-pty"><a name="&#x4EC0;&#x4E48;&#x662F;tty-pty" class="anchor-navigation-ex-anchor" href="#&#x4EC0;&#x4E48;&#x662F;tty-pty"><i class="fa fa-link" aria-hidden="true"></i></a>1.1. &#x4EC0;&#x4E48;&#x662F;tty pty</h2>
<p>linux&#x7EC8;&#x7AEF;(Terminals)&#x6709;&#x4E09;&#x79CD;:</p>
<ul>
<li>&#x4E32;&#x53E3;: &#x6BD4;&#x5982;ttyS0, ttyUSB0</li>
<li>pty: /dev/pts/xx</li>
<li>&#x5C4F;&#x5E55;&#x547D;&#x4EE4;&#x884C;&#x7EC8;&#x7AEF;: tty1, tty2...</li>
</ul>
<p>&#x8FD9;&#x91CC;&#x6211;&#x4EEC;&#x4F7F;&#x7528;pty, pty&#x662F;master slave&#x6A21;&#x5F0F;&#x7684;, master&#x7528;&#x4E8E;&#x521B;&#x5EFA;slave, &#x5411;slave&#x8BFB;&#x5199;&#x5185;&#x5BB9;; slave&#x5C31;&#x662F;&#x6A21;&#x62DF;&#x7684;&#x7EC8;&#x7AEF;</p>
<ul>
<li>master: <code>/dev/ptmx</code></li>
<li>slave: <code>/dev/pts/*</code></li>
</ul>
<h2 id="&#x8BFB;&#x5199;pts"><a name="&#x8BFB;&#x5199;pts" class="anchor-navigation-ex-anchor" href="#&#x8BFB;&#x5199;pts"><i class="fa fa-link" aria-hidden="true"></i></a>1.2. &#x8BFB;&#x5199;pts</h2>
<p>&#x6BD4;&#x5982;cloud-hypervisor&#x4F7F;&#x7528;pty&#x6587;&#x4EF6;<code>/dev/pts/2</code>&#x505A;&#x4E3A;VM&#x7684;&#x63A7;&#x5236;&#x53F0;, <code>cat /dev/pts/2</code>&#x80FD;&#x591F;&#x5728;host&#x4E0A;&#x67E5;&#x770B;VM&#x7684;&#x8F93;&#x51FA;, <code>echo xxxx &gt; /dev/pts/2</code>&#x53EF;&#x4EE5;&#x5411;VM&#x8F93;&#x5165;. 
&#x4F46;&#x600E;&#x4E48;&#x540C;&#x65F6;&#x8F93;&#x5165;&#x8F93;&#x51FA;? &#x5C31;&#x50CF;&#x8FDB;&#x5165;VM&#x7684;&#x63A7;&#x5236;&#x53F0;&#x4E00;&#x6837;?
&#x5148;&#x7ED9;&#x51FA;&#x7ED3;&#x679C;, &#x7528;socat:</p>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">socat -,rawer,escape=29 /dev/pts/2
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>&#x8FD9;&#x4E2A;&#x547D;&#x4EE4;&#x7684;&#x610F;&#x601D;&#x662F;, &#x5EFA;&#x7ACB;&#x4ECE;raw&#x6A21;&#x5F0F;&#x7684;<code>stdio</code>&#x5230;<code>/dev/pts/2</code>&#x7684;&#x53CC;&#x5411;stream&#x8FDE;&#x63A5;</p>
<ul>
<li><code>-</code>: &#x8868;&#x793A;stdin&#x548C;stdout</li>
<li>rawer&#x662F;raw&#x6A21;&#x5F0F;, &#x4E0D;echo; &#x5728;raw&#x6A21;&#x5F0F;&#x4E0B;, &#x6BD4;&#x5982;ctrl+c&#x4F1A;&#x53D1;&#x9001;&#x7ED9;VM, &#x4E0D;&#x518D;&#x7528;&#x6765;&#x9000;&#x51FA;socat</li>
<li><code>escape=29</code>: &#x4F7F;&#x7528;<code>ctrl+]</code>&#x6765;&#x9000;&#x51FA;socat</li>
<li><code>/dev/pts/2</code>: &#x662F;pty&#x6587;&#x4EF6;</li>
</ul>
<h1 id="socat&#x6982;&#x89C8;"><a name="socat&#x6982;&#x89C8;" class="anchor-navigation-ex-anchor" href="#socat&#x6982;&#x89C8;"><i class="fa fa-link" aria-hidden="true"></i></a>2. socat&#x6982;&#x89C8;</h1>
<p>socat&#x662F;&#x5F3A;&#x5927;&#x7684;&#x53CC;&#x5411;stream&#x5BF9;&#x63A5;&#x5DE5;&#x5177;, &#x57FA;&#x672C;&#x4F5C;&#x7528;&#x5C31;&#x662F;&#x5EFA;&#x7ACB;address1&#x5230;address2&#x7684;&#x53CC;&#x5411;byte stream&#x8FDE;&#x63A5;.
<code>socat [options] &lt;address1&gt; &lt;address2&gt;</code></p>
<h2 id="&#x5E38;&#x7528;&#x9009;&#x9879;"><a name="&#x5E38;&#x7528;&#x9009;&#x9879;" class="anchor-navigation-ex-anchor" href="#&#x5E38;&#x7528;&#x9009;&#x9879;"><i class="fa fa-link" aria-hidden="true"></i></a>2.1. &#x5E38;&#x7528;&#x9009;&#x9879;</h2>
<ul>
<li><code>-d -d</code>: &#x6253;&#x5370;verbose debug&#x4FE1;&#x606F;, &#x53EF;&#x591A;&#x4E2A;-d</li>
<li><code>-T&lt;timeout&gt;</code>: &#x7A7A;&#x95F2;timeout&#x65F6;&#x95F4;&#x81EA;&#x52A8;&#x9000;&#x51FA;</li>
<li><code>-u</code>/<code>-U</code>: &#x5355;&#x5411;&#x6570;&#x636E;&#x4F20;&#x8F93;</li>
<li><code>-L</code>: lock&#x6587;&#x4EF6;</li>
</ul>
<h2 id="&#x5730;&#x5740;&#x683C;&#x5F0F;"><a name="&#x5730;&#x5740;&#x683C;&#x5F0F;" class="anchor-navigation-ex-anchor" href="#&#x5730;&#x5740;&#x683C;&#x5F0F;"><i class="fa fa-link" aria-hidden="true"></i></a>2.2. &#x5730;&#x5740;&#x683C;&#x5F0F;</h2>
<p>socat&#x652F;&#x6301;&#x591A;&#x79CD;&#x5730;&#x5740;&#x7C7B;&#x578B;, &#x683C;&#x5F0F;&#x4E3A;<code>&#x5730;&#x5740;&#x7C7B;&#x578B;:&#x5730;&#x5740;,&#x9009;&#x9879;1,&#x9009;&#x9879;2</code>
&#x67D0;&#x4E9B;&#x5E38;&#x7528;&#x5730;&#x5740;&#x7C7B;&#x578B;&#x53EF;&#x4EE5;&#x7528;&#x7B80;&#x5316;&#x5199;&#x6CD5;:</p>
<ul>
<li><code>-</code>: stdio</li>
<li>TCP: TCP4</li>
<li>&#x6570;&#x5B57;: FD</li>
</ul>
<h2 id="&#x5730;&#x5740;&#x7C7B;&#x578B;"><a name="&#x5730;&#x5740;&#x7C7B;&#x578B;" class="anchor-navigation-ex-anchor" href="#&#x5730;&#x5740;&#x7C7B;&#x578B;"><i class="fa fa-link" aria-hidden="true"></i></a>2.3. &#x5730;&#x5740;&#x7C7B;&#x578B;</h2>
<ul>
<li><code>CREATE:&lt;filename&gt;</code>
&#x521B;&#x5EFA;&#x6587;&#x4EF6;&#x5199;&#x5165;</li>
<li><code>EXEC:&lt;command-line&gt;</code>
&#x4F7F;&#x7528;command&#x505A;&#x4E3A;input/output</li>
<li><code>FD:&lt;fdnum&gt;</code>
&#x4F7F;&#x7528;&#x5DF2;&#x7ECF;&#x5B58;&#x5728;&#x7684;fd</li>
<li><code>GOPEN:&lt;filename&gt;</code>
&#x6253;&#x5F00;&#x6587;&#x4EF6;&#x8BFB;&#x5199;. &#x6587;&#x4EF6;&#x53EF;&#x4EE5;&#x662F;unix socket, &#x4F1A;&#x81EA;&#x52A8;connect, connect&#x5931;&#x8D25;&#x5219;&#x5047;&#x5B9A;&#x7528;sendto. &#x53EF;&#x4EE5;&#x7701;&#x7565;GOPEN.</li>
<li><code>INTERFACE:&lt;interface&gt;</code>
&#x5E26;L2&#x7684;raw packet</li>
<li><code>IP-DATAGRAM:&lt;address&gt;:&lt;protocol&gt;</code>
<code>IP4-DATAGRAM:&lt;host&gt;:&lt;protocol&gt;</code>
<code>IP6-DATAGRAM:&lt;host&gt;:&lt;protocol&gt;</code>
<code>IP-RECVFROM:&lt;protocol&gt;</code>
<code>IP4-RECVFROM:&lt;protocol&gt;</code>
<code>IP6-RECVFROM:&lt;protocol&gt;</code>
<code>IP-RECV:&lt;protocol&gt;</code>
<code>IP-SENDTO:&lt;host&gt;:&lt;protocol&gt;</code>
<code>IP4-SENDTO:&lt;host&gt;:&lt;protocol&gt;</code>
<code>IP6-SENDTO:&lt;host&gt;:&lt;protocol&gt;</code>
raw/datagram socket</li>
<li><code>PIPE:&lt;filename&gt;</code>
<code>PIPE</code>
&#x6709;&#x540D;&#x548C;&#x65E0;&#x540D;&#x7BA1;&#x9053;</li>
<li><code>PROXY:&lt;proxy&gt;:&lt;hostname&gt;:&lt;port&gt;</code>
proxy</li>
<li><code>PTY</code>
&#x521B;&#x5EFA;&#x65B0;&#x7684;pty slave</li>
<li><code>SCTP-CONNECT:&lt;host&gt;:&lt;port&gt;</code>
SCTP&#x534F;&#x8BAE;</li>
<li><code>SOCKET-CONNECT:&lt;domain&gt;:&lt;protocol&gt;:&lt;remote-address&gt;</code>
<code>SOCKET-DATAGRAM:&lt;domain&gt;:&lt;type&gt;:&lt;protocol&gt;:&lt;remote-address&gt;</code>
<code>SOCKET-RECV:&lt;domain&gt;:&lt;type&gt;:&lt;protocol&gt;:&lt;local-address&gt;</code>
<code>SOCKS4:&lt;socks-server&gt;:&lt;host&gt;:&lt;port&gt;</code>
socket</li>
<li><code>STDIN</code>
<code>STDIO</code>
<code>STDOUT</code></li>
<li><code>SYSTEM:&lt;shell-command&gt;</code>
&#x611F;&#x89C9;&#x548C;exec&#x5DEE;&#x4E0D;&#x591A;</li>
<li><code>TCP:&lt;host&gt;:&lt;port&gt;</code>
<code>TCP-LISTEN:&lt;port&gt;</code></li>
<li><code>TUN[:&lt;if-addr&gt;/&lt;bits&gt;]</code>
&#x65B0;&#x5EFA;tun&#x8BBE;&#x5907;&#x505A;&#x4E3A;&#x5199;&#x4FA7;</li>
<li><code>UDP:&lt;host&gt;:&lt;port&gt;</code>
<code>UDP-LISTEN:&lt;port&gt;</code>
udp&#x8FD8;&#x6709;listen?</li>
<li><code>UNIX-CONNECT:&lt;filename&gt;</code>
<code>UNIX-LISTEN:&lt;filename&gt;</code>
<code>UNIX-SENDTO:&lt;filename&gt;</code>
<code>UNIX-RECVFROM:&lt;filename&gt;</code>
<code>UNIX-RECV:&lt;filename&gt;</code>
<code>UNIX-CLIENT:&lt;filename&gt;</code>
<code>ABSTRACT-CONNECT:&lt;string&gt;</code>
unix socket</li>
</ul>
<h3 id="&#x9009;&#x9879;"><a name="&#x9009;&#x9879;" class="anchor-navigation-ex-anchor" href="#&#x9009;&#x9879;"><i class="fa fa-link" aria-hidden="true"></i></a>2.3.1. &#x9009;&#x9879;</h3>
<p>socat&#x652F;&#x6301;&#x5F88;&#x591A;&#x9009;&#x9879;, &#x6BD4;&#x5982;&#x4E0A;&#x9762;&#x4F8B;&#x5B50;&#x4E2D;&#x7684;<code>raw</code>
&#x4E0D;&#x540C;&#x7684;group&#x652F;&#x6301;&#x4E0D;&#x540C;&#x7684;option</p>
<h4 id="fd&#x7EC4;"><a name="fd&#x7EC4;" class="anchor-navigation-ex-anchor" href="#fd&#x7EC4;"><i class="fa fa-link" aria-hidden="true"></i></a>FD&#x7EC4;</h4>
<p>&#x8FD9;&#x4E2A;&#x7EC4;&#x91CC;&#x7684;option&#x652F;&#x6301;&#x5BF9;fd&#x914D;&#x7F6E;&#x67D0;&#x79CD;&#x53C2;&#x6570;.</p>
<pre class="line-numbers language-undefined"><code class=" language-undefined">cloexec
setlk
flock-ex
lock
user
mode
append
nonblock
null-eof
...
&#x5F88;&#x591A;
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="named-option-group"><a name="named-option-group" class="anchor-navigation-ex-anchor" href="#named-option-group"><i class="fa fa-link" aria-hidden="true"></i></a>NAMED option group</h4>
<p>&#x4F5C;&#x7528;&#x4E8E;&#x6587;&#x4EF6;&#x540D;</p>
<pre class="line-numbers language-undefined"><code class=" language-undefined">umask
unlink-close
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h4 id="open-option-group"><a name="open-option-group" class="anchor-navigation-ex-anchor" href="#open-option-group"><i class="fa fa-link" aria-hidden="true"></i></a>OPEN option group</h4>
<pre class="line-numbers language-undefined"><code class=" language-undefined">creat
noatime
rdonly
rsync
...
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="reg-and-blk-option-group"><a name="reg-and-blk-option-group" class="anchor-navigation-ex-anchor" href="#reg-and-blk-option-group"><i class="fa fa-link" aria-hidden="true"></i></a>REG and BLK option group</h4>
<pre class="line-numbers language-undefined"><code class=" language-undefined">seek
...
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h4 id="process-option-group"><a name="process-option-group" class="anchor-navigation-ex-anchor" href="#process-option-group"><i class="fa fa-link" aria-hidden="true"></i></a>PROCESS option group</h4>
<pre class="line-numbers language-undefined"><code class=" language-undefined">chroot
setgid
su
...
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h4 id="application-option-group"><a name="application-option-group" class="anchor-navigation-ex-anchor" href="#application-option-group"><i class="fa fa-link" aria-hidden="true"></i></a>APPLICATION option group</h4>
<p>&#x4F5C;&#x7528;&#x4E8E;&#x6570;&#x636E;</p>
<pre class="line-numbers language-undefined"><code class=" language-undefined">cr     Converts the default line termination character NL (&#x2019;\n&#x2019;, 0x0a) to/from CR (&#x2019;\r&#x2019;, 0x0d) when writing/reading on this channel.
escape
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h4 id="socket-option-group"><a name="socket-option-group" class="anchor-navigation-ex-anchor" href="#socket-option-group"><i class="fa fa-link" aria-hidden="true"></i></a>SOCKET option group</h4>
<pre class="line-numbers language-undefined"><code class=" language-undefined">bind=
broadcast
rcvbuf
sndbuf
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h4 id="ip4-and-ip6-option-groups"><a name="ip4-and-ip6-option-groups" class="anchor-navigation-ex-anchor" href="#ip4-and-ip6-option-groups"><i class="fa fa-link" aria-hidden="true"></i></a>IP4 and IP6 option groups</h4>
<pre class="line-numbers language-undefined"><code class=" language-undefined">tos
ip-pktinfo
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h4 id="termios-option-group"><a name="termios-option-group" class="anchor-navigation-ex-anchor" href="#termios-option-group"><i class="fa fa-link" aria-hidden="true"></i></a>TERMIOS option group</h4>
<pre class="line-numbers language-undefined"><code class=" language-undefined">b0 &#x6CE2;&#x7279;&#x7387;0, &#x5373;&#x65AD;&#x5F00;&#x8FDE;&#x63A5;
b19200
echo=
rawer
ignbrk
brkint
... &#x5F88;&#x591A;&#x5173;&#x4E8E;&#x7279;&#x6B8A;&#x5B57;&#x7B26;&#x63A7;&#x5236;&#x7684;
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="fork-option-group"><a name="fork-option-group" class="anchor-navigation-ex-anchor" href="#fork-option-group"><i class="fa fa-link" aria-hidden="true"></i></a>FORK option group</h4>
<pre class="line-numbers language-undefined"><code class=" language-undefined">pipes
sighup, sigint, sigquit
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h2 id="&#x4F8B;&#x5B50;"><a name="&#x4F8B;&#x5B50;" class="anchor-navigation-ex-anchor" href="#&#x4F8B;&#x5B50;"><i class="fa fa-link" aria-hidden="true"></i></a>2.4. &#x4F8B;&#x5B50;</h2>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">#&#x628A;stdio&#x8F6C;&#x5230;tcp
socat - TCP4:www.domain.org:80
#&#x548C;&#x4E0A;&#x9762;&#x5DEE;&#x4E0D;&#x591A;, &#x4F46;&#x652F;&#x6301;line edit
socat -d -d READLINE,history=$HOME/.http_history TCP4:www.domain.org:www,crnl
#&#x8F6C;&#x53D1;listen, &#x4F46;&#x53EA;accept&#x4E00;&#x4E2A;connection
socat TCP4-LISTEN:www TCP4:www.domain.org:www
#&#x52A0;&#x4E86;fork&#x5C31;&#x80FD;&#x5141;&#x8BB8;&#x591A;&#x4E2A;connection
socat TCP4-LISTEN:5555,fork,tcpwrap=script EXEC:/bin/myscript,chroot=/home/sandbox,su-d=sandbox,pty,stderr
#stdion&#x8F6C;&#x5230;ttyS0, &#x7528;control-O&#x9000;&#x51FA;socat
socat -,escape=0x0f /dev/ttyS0,rawer,crnl
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h1 id="&#x811A;&#x672C;&#x547D;&#x4EE4;&#x884C;&#x89E3;&#x6790;&#x4E4B;declare--f"><a name="&#x811A;&#x672C;&#x547D;&#x4EE4;&#x884C;&#x89E3;&#x6790;&#x4E4B;declare--f" class="anchor-navigation-ex-anchor" href="#&#x811A;&#x672C;&#x547D;&#x4EE4;&#x884C;&#x89E3;&#x6790;&#x4E4B;declare--f"><i class="fa fa-link" aria-hidden="true"></i></a>3. &#x811A;&#x672C;&#x547D;&#x4EE4;&#x884C;&#x89E3;&#x6790;&#x4E4B;declare -f</h1>
<p>&#x4E0B;&#x9762;&#x7684;&#x4EE3;&#x7801;&#x4E2D;, &#x811A;&#x672C;main&#x91CC;&#x9762;&#x89E3;&#x6790;&#x547D;&#x4EE4;&#x884C;, &#x53EA;&#x770B;&#x4E86;&#x901A;&#x7528;&#x7684;--help&#x7B49;, &#x800C;&#x5176;&#x4ED6;&#x7684;&#x547D;&#x4EE4;&#x90FD;&#x901A;&#x8FC7;<code>declare -f &quot;cmd_$1&quot;  &gt; /dev/null</code>&#x5148;&quot;&#x58F0;&#x660E;&quot;&#x51FD;&#x6570;, &#x518D;&#x8C03;&#x7528;:<code>$cmd &quot;$@&quot;</code></p>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">main() {

    if [ $# = 0 ];  then
    die &quot;No command provided. Please use \`$0 help\` for help.&quot;
    fi

    # Parse main command line args.
    #
    while [ $# -gt 0 ];  do
        case  &quot;$1&quot;  in
            -h|--help)              { cmd_help;  exit 1;     } ;;
            -y|--unattended)        { OPT_UNATTENDED=true;  } ;;
            -*)
                die &quot;Unknown arg: $1. Please use \`$0 help\` for help.&quot;
            ;;
            *)
                break
            ;;
        esac
        shift
    done

    # $1 is now a command name. Check if it is a valid command and, if so,
    # run it.
    #
    declare -f &quot;cmd_$1&quot;  &gt; /dev/null
    ok_or_die &quot;Unknown command: $1. Please use \`$0 help\` for help.&quot;

    cmd=cmd_$1
    shift

    # $@ is now a list of command-specific args
    #
    $cmd &quot;$@&quot;
}

main &quot;$@&quot;
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>&#x6BD4;&#x5982;&#x60F3;&#x5B9E;&#x73B0;<code>$0 build_rootfs</code>&#x547D;&#x4EE4;, &#x7528;&#x4E0A;&#x9762;&#x7684;&#x65B9;&#x6CD5;, &#x53EA;&#x9700;&#x8981;&#x589E;&#x52A0;<code>cmd_build_rootfs()</code>&#x51FD;&#x6570;:
&#x4F46;&#x9700;&#x8981;&#x6BCF;&#x4E2A;&quot;&#x5B50;&#x547D;&#x4EE4;&quot;&#x51FD;&#x6570;&#x90FD;&#x81EA;&#x5DF1;&#x5B9E;&#x73B0;&#x547D;&#x4EE4;&#x89E3;&#x6790;</p>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh"># `./devtool build_rootfs -s 500MB`
# Build a rootfs of custom size.
#
cmd_build_rootfs() {
    # Default size for the resulting rootfs image is 300MB.
    SIZE=&quot;300MB&quot;
    FROM_CTR=ubuntu:18.04
    flavour=&quot;bionic&quot;

    # Parse the command line args.
    while [ $# -gt 0 ];  do
        case  &quot;$1&quot;  in
            &quot;-h&quot;|&quot;--help&quot;)      { cmd_help;  exit 1; } ;;
            &quot;-s&quot;|&quot;--size&quot;)
                shift
                SIZE=&quot;$1&quot;
                ;;
            &quot;-p&quot;|&quot;--partuuid&quot;)
                shift
                PARTUUID=1
                ;;
            *)
                die &quot;Unknown argument: $1. Please use --help for help.&quot;
            ;;
        esac
        shift
    done
    ...
}
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h1 id="shell&#x53D8;&#x91CF;&#x6269;&#x5C55;&#x548C;&#x5F15;&#x53F7;&#x4FDD;&#x7559;"><a name="shell&#x53D8;&#x91CF;&#x6269;&#x5C55;&#x548C;&#x5F15;&#x53F7;&#x4FDD;&#x7559;" class="anchor-navigation-ex-anchor" href="#shell&#x53D8;&#x91CF;&#x6269;&#x5C55;&#x548C;&#x5F15;&#x53F7;&#x4FDD;&#x7559;"><i class="fa fa-link" aria-hidden="true"></i></a>4. shell&#x53D8;&#x91CF;&#x6269;&#x5C55;&#x548C;&#x5F15;&#x53F7;&#x4FDD;&#x7559;</h1>
<p><a href="https://www.gnu.org/software/bash/manual/html_node/Shell-Parameter-Expansion.html" target="_blank">shell&#x53D8;&#x91CF;&#x6269;&#x5C55;&#x8BED;&#x6CD5;</a></p>
<h2 id="&#x80CC;&#x666F;"><a name="&#x80CC;&#x666F;" class="anchor-navigation-ex-anchor" href="#&#x80CC;&#x666F;"><i class="fa fa-link" aria-hidden="true"></i></a>4.1. &#x80CC;&#x666F;:</h2>
<p>&#x8FD9;&#x91CC;&#x7684;&#x6D4B;&#x8BD5;&#x547D;&#x4EE4;&#x662F;:</p>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">go list -f &quot;{{context.GOARCH}} {{context.Compiler}}&quot; -- unsafe

#&#x6B63;&#x5E38;&#x7684;&#x7ED3;&#x679C;&#x662F;
amd64 gc
#&#x8BF4;&#x660E;go&#x547D;&#x4EE4;&#x80FD;&#x6B63;&#x786E;&#x7406;&#x89E3;&#x4F20;&#x5165;&#x7684;&#x53C2;&#x6570;
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>&#x4F46;&#x6211;&#x8FD9;&#x91CC;&#x9700;&#x8981;&#x7528;&#x4E00;&#x4E2A;bash wrapper&#x5C01;&#x88C5;&#x539F;&#x59CB;&#x7684;go&#x547D;&#x4EE4;(&#x91CD;&#x547D;&#x540D;&#x4E3A;<code>_go</code>), &#x628A;&#x539F;&#x59CB;&#x53C2;&#x6570;&#x4FEE;&#x6539;&#x540E;&#x518D;&#x4F20;&#x5165;<code>_go</code></p>
<h2 id="&#x7B80;&#x5355;wrapper"><a name="&#x7B80;&#x5355;wrapper" class="anchor-navigation-ex-anchor" href="#&#x7B80;&#x5355;wrapper"><i class="fa fa-link" aria-hidden="true"></i></a>4.2. &#x7B80;&#x5355;wrapper</h2>
<p>&#x8FD9;&#x6837;&#x662F;&#x53EF;&#x4EE5;&#x7684;</p>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">#!/bin/bash

exec _go &quot;$@&quot;
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>&#x8FD9;&#x91CC;</p>
<ul>
<li><code>&quot;$@&quot;</code>&#x4F1A;&#x628A;&#x6240;&#x6709;&#x7684;&#x53C2;&#x6570;&quot;&#x539F;&#x5C01;&#x4E0D;&#x52A8;&quot;&#x7684;&#x4F20;&#x5165;&#x5E95;&#x5C42;&#x547D;&#x4EE4;
&#x8865;&#x5145;&#x4E00;&#x4E0B;:</li>
<li><code>$#</code>&#x662F;&#x53C2;&#x6570;&#x4E2A;&#x6570;, &#x8FD9;&#x91CC;&#x4E3A;5, &#x7528;<code>for a in &quot;$@&quot;</code>&#x6765;&#x904D;&#x5386;&#x53C2;&#x6570;, &#x8FD9;5&#x4E2A;&#x53C2;&#x6570;&#x5206;&#x522B;&#x662F;<ul>
<li><code>list</code></li>
<li><code>-f</code></li>
<li><code>` : &#x8FD9;&#x91CC;&#x8BF4;&#x660E; for in&#x5BF9;&#x4F4D;&#x7F6E;&#x53C2;&#x6570;&#x7684;&#x904D;&#x5386;, &#x4E0D;&#x662F;&#x4EE5;&#x7A7A;&#x767D;&#x7B26;&#x4E3A;&#x5206;&#x9694;&#x7684;. &#x56E0;&#x4E3A;&#x8FD9;&#x91CC;&#x867D;&#x7136;&#x6709;&#x7A7A;&#x683C;, &#x4F46;&#x5B83;&#x4EEC;&#x4F1A;&#x505A;&#x4E3A;&#x4E00;&#x4E2A;&#x6574;&#x4F53;&#x88AB;&#x8D4B;&#x503C;&#x5230;&#x53D8;&#x91CF;</code>a`</li>
<li><code>--</code></li>
<li><code>unsafe</code></li>
</ul>
</li>
</ul>
<h2 id="&#x53C2;&#x6570;&#x91CD;&#x8F7D;"><a name="&#x53C2;&#x6570;&#x91CD;&#x8F7D;" class="anchor-navigation-ex-anchor" href="#&#x53C2;&#x6570;&#x91CD;&#x8F7D;"><i class="fa fa-link" aria-hidden="true"></i></a>4.3. &#x53C2;&#x6570;&#x91CD;&#x8F7D;</h2>
<p>&#x4F46;&#x6211;&#x7684;&#x9700;&#x6C42;&#x662F;&#x66F4;&#x6539;&#x53C2;&#x6570;, &#x6709;&#x5982;&#x4E0B;&#x5C1D;&#x8BD5;:</p>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">#!/bin/bash

cmd=$1
shift
exec _go $cmd &quot;$@&quot;
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>&#x8FD9;&#x4E2A;&#x53EF;&#x4EE5;.</p>
<ul>
<li>&#x8BF4;&#x660E;<code>shift</code>&#x5BF9;&#x53C2;&#x6570;&#x79FB;&#x4F4D;&#x4E86;, &#x4F46;&#x4E0D;&#x4F1A;&#x5F71;&#x54CD;<code>&quot;$@&quot;</code>&#x5BF9;&#x539F;&#x59CB;&#x5B57;&#x7B26;&#x4E32;&#x7684;&#x64CD;&#x4F5C;</li>
</ul>
<h2 id="&#x53D8;&#x91CF;&#x8D4B;&#x503C;&#x5BFC;&#x81F4;&#x5B57;&#x7B26;&#x4E32;&#x591A;&#x53D8;&#x4E00;"><a name="&#x53D8;&#x91CF;&#x8D4B;&#x503C;&#x5BFC;&#x81F4;&#x5B57;&#x7B26;&#x4E32;&#x591A;&#x53D8;&#x4E00;" class="anchor-navigation-ex-anchor" href="#&#x53D8;&#x91CF;&#x8D4B;&#x503C;&#x5BFC;&#x81F4;&#x5B57;&#x7B26;&#x4E32;&#x591A;&#x53D8;&#x4E00;"><i class="fa fa-link" aria-hidden="true"></i></a>4.4. &#x53D8;&#x91CF;&#x8D4B;&#x503C;&#x5BFC;&#x81F4;&#x5B57;&#x7B26;&#x4E32;&#x591A;&#x53D8;&#x4E00;</h2>
<p>&#x4F46;&#x4E0B;&#x9762;&#x7684;&#x4EE3;&#x7801;&#x4E0D;&#x6B63;&#x5E38;&#x5DE5;&#x4F5C;:</p>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">#!/bin/bash

cmd=$1
shift
args=&quot;$@&quot;

exec _go $cmd &quot;$args&quot;
#&#x6216;&#x8005;&#x4E0B;&#x9762;&#x7684;&#x547D;&#x4EE4;
exec _go $cmd $args
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>&#x7684;&#x7ED3;&#x679C;&#x662F;<code>flag provided but not defined: -f {{context.GOARCH}} {{context.Compiler}} -- unsafe</code>
&#x7ECF;&#x8FC7;&#x68C0;&#x67E5;, &#x548C;&#x8FD9;&#x6837;&#x6267;&#x884C;&#x539F;&#x59CB;&#x547D;&#x4EE4;&#x662F;&#x4E00;&#x6837;&#x7684;:
<code>_go list &quot;-f {{context.GOARCH}} {{context.Compiler}} -- unsafe&quot;</code>
&#x8BF4;&#x660E;:</p>
<ul>
<li><code>args=&quot;$@&quot;</code>&#x7684;&#x7ED3;&#x679C;&#x662F;, <code>args</code>&#x628A;<code>-f   -- unsafe</code>&#x4F1A;&#x53D8;&#x6210;&#x4E00;&#x4E2A;&#x6574;&#x4F53;&#x7684;string</li>
</ul>
<h2 id="shell&#x53D8;&#x91CF;&#x6269;&#x5C55;&#x65B9;&#x5F0F;"><a name="shell&#x53D8;&#x91CF;&#x6269;&#x5C55;&#x65B9;&#x5F0F;" class="anchor-navigation-ex-anchor" href="#shell&#x53D8;&#x91CF;&#x6269;&#x5C55;&#x65B9;&#x5F0F;"><i class="fa fa-link" aria-hidden="true"></i></a>4.5. shell&#x53D8;&#x91CF;&#x6269;&#x5C55;&#x65B9;&#x5F0F;</h2>
<p>&#x4E0B;&#x9762;&#x7684;&#x90FD;&#x4E0D;&#x884C;</p>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">#!/bin/bash

cmd=$1
shift

exec _go $cmd ${*@Q}
#&#x7ED3;&#x679C;
can&apos;t load package: package &apos;-f&apos;: malformed module path &quot;&apos;-f&apos;&quot;: invalid char &apos;\&apos;&apos;

exec _go $cmd &quot;${*@Q}&quot;
#&#x7ED3;&#x679C;
can&apos;t load package: package &apos;-f&apos; &apos;{{context.GOARCH}} {{context.Compiler}}&apos; &apos;--&apos; &apos;unsafe&apos;: malformed module path &quot;&apos;-f&apos; &apos;{{context.GOARCH}} {{context.Compiler}}&apos; &apos;--&apos; &apos;unsafe&apos;&quot;: invalid char &apos;\&apos;&apos;
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>&#x8FD9;&#x91CC;&#x7528;&#x5230;&#x4E86;shell&#x7684;<a href="https://www.gnu.org/software/bash/manual/html_node/Shell-Parameter-Expansion.html" target="_blank">&#x53D8;&#x91CF;&#x6269;&#x5C55;</a>:</p>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">${parameter@operator}
The expansion is either a transformation of the value of parameter or information about parameter itself, depending on the value of operator. Each operator is a single letter:
Q
    The expansion is a string that is the value of parameter quoted in a format that can be reused as input.

If parameter is &#x2018;@&#x2019; or &#x2018;*&#x2019;, the operation is applied to each positional parameter in turn, and the expansion is the resultant list. If parameter is an array variable subscripted with &#x2018;@&#x2019; or &#x2018;*&#x2019;, the operation is applied to each member of the array in turn, and the expansion is the resultant list.
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>&#x610F;&#x601D;&#x662F;&#x628A;<code>$*</code>&#x5F53;&#x4F5C;&#x4E00;&#x4E2A;list, &#x5BF9;&#x5176;&#x4E2D;&#x7684;&#x6BCF;&#x4E2A;&#x6210;&#x5458;&#x505A;<code>Q</code>&#x64CD;&#x4F5C;. &#x4ECE;&#x7ED3;&#x679C;&#x6765;&#x770B;<code>Q</code>&#x64CD;&#x4F5C;&#x5B9E;&#x9645;&#x4E0A;&#x628A;&#x6210;&#x5458;&#x505A;&#x4E86;&#x8F6C;&#x4E49;-&#x5F15;&#x53F7;:<br>&#x6BD4;&#x5982;<code>-f</code>&#x53D8;&#x6210;&#x4E86;<code>\&apos;-f\&apos;</code>, <code>{{context.GOARCH}} {{context.Compiler}}</code>&#x53D8;&#x6210;&#x4E86;<code>\&apos;{{context.GOARCH}} {{context.Compiler}}\&apos;</code><br>&#x4F20;&#x9012;&#x7ED9;<code>_go</code>&#x547D;&#x4EE4;&#x65F6;, &#x8FD9;&#x4E9B;&#x8F6C;&#x4E49;&#x88AB;&#x5F53;&#x4F5C;&#x539F;&#x59CB;&#x8F93;&#x5165;, &#x4E0D;&#x80FD;&#x88AB;&#x6B63;&#x786E;&#x89E3;&#x6790;.<br><code>${*@Q}</code>&#x548C;<code>&quot;${*@Q}&quot;</code>&#x7684;&#x533A;&#x522B;&#x662F;, &#x540E;&#x8005;&#x88AB;&#x5F53;&#x4F5C;&#x4E00;&#x4E2A;&#x6574;&#x4F53;&#x7684;string&#x88AB;&#x4F20;&#x5165;.</p>
<h2 id="printf"><a name="printf" class="anchor-navigation-ex-anchor" href="#printf"><i class="fa fa-link" aria-hidden="true"></i></a>4.6. printf</h2>
<p>printf&#x4E5F;&#x652F;&#x6301;</p>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">printf: printf [-v var] format [arguments]
 %b        expand backslash escape sequences in the corresponding argument
 %q        quote the argument in a way that can be reused as shell input
The format is re-used as necessary to consume all of the arguments.
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>&#x6BD4;&#x5982;</p>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">#!/bin/bash

args=&quot;$@&quot;
echo &quot;${args@Q}&quot;
#&#x8F93;&#x51FA;
&apos;list -f {{context.GOARCH}} {{context.Compiler}} -- unsafe&apos;

printf &quot;====%s\n&quot; ${args@Q}
#&#x8F93;&#x51FA;
====&apos;list
====-f
===={{context.GOARCH}}
===={{context.Compiler}}
====--
====unsafe&apos;
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><code>${args@Q}</code>&#x4E2D;, <code>${args}</code>&#x88AB;&#x5F53;&#x4F5C;&#x4E00;&#x4E2A;&#x6574;&#x4F53;, &#x52A0;&#x4E0A;&#x4E86;&#x5F15;&#x53F7;. &#x8FD9;&#x4E2A;&#x6574;&#x4F53;&#x4F20;&#x5165;printf&#x7684;&#x65F6;&#x5019;, printf&#x6309;&#x7A7A;&#x767D;&#x7B26;&#x5206;&#x5272;, &#x88AB;&#x5F53;&#x4F5C;6&#x4E2A;argument, &#x5E76;&#x5206;&#x522B;&#x7528;<code>&quot;====%s\n&quot;</code>&#x6765;&#x683C;&#x5F0F;&#x5316;.</p>
<h2 id="&#x6700;&#x7EC8;&#x7248;-&#x7528;eval"><a name="&#x6700;&#x7EC8;&#x7248;-&#x7528;eval" class="anchor-navigation-ex-anchor" href="#&#x6700;&#x7EC8;&#x7248;-&#x7528;eval"><i class="fa fa-link" aria-hidden="true"></i></a>4.7. &#x6700;&#x7EC8;&#x7248;, &#x7528;eval</h2>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">#!/bin/bash

cmd=$1
shift
args=${*@Q}
echo $cmd $args

eval exec _go $cmd $args
#&#x4E0D;&#x7528;exec&#x4E5F;&#x662F;&#x53EF;&#x4EE5;&#x7684;
eval _go $cmd $args
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>&#x89E3;&#x91CA;: &#x65E2;&#x7136;<code>${*@Q}</code>&#x80FD;&#x591F;&#x628A;&#x6BCF;&#x4E2A;&#x6210;&#x5458;&#x90FD;&#x52A0;&#x8F6C;&#x4E49;-&#x5F15;&#x53F7;, &#x90A3;&#x4E48;&#x7528;shell&#x7684;eval&#x547D;&#x4EE4;, &#x91CD;&#x65B0;&#x89E3;&#x6790;&#x4E00;&#x4E0B;&#x8FD9;&#x4E2A;&#x547D;&#x4EE4;, &#x5C31;&#x80FD;&#x6B63;&#x5E38;&#x8FD0;&#x4F5C;&#x4E86;.</p>
<h2 id="&#x8865;&#x5145;-shell&#x7684;&#x53D8;&#x91CF;&#x6269;&#x5C55;"><a name="&#x8865;&#x5145;-shell&#x7684;&#x53D8;&#x91CF;&#x6269;&#x5C55;" class="anchor-navigation-ex-anchor" href="#&#x8865;&#x5145;-shell&#x7684;&#x53D8;&#x91CF;&#x6269;&#x5C55;"><i class="fa fa-link" aria-hidden="true"></i></a>4.8. &#x8865;&#x5145;: shell&#x7684;&#x53D8;&#x91CF;&#x6269;&#x5C55;</h2>
<p>&#x8FD8;&#x662F;<a href="https://www.gnu.org/software/bash/manual/html_node/Shell-Parameter-Expansion.html" target="_blank">&#x8FD9;&#x4E2A;&#x94FE;&#x63A5;</a>
&#x53D8;&#x91CF;&#x6269;&#x5C55;&#x80FD;&#x591F;:</p>
<ul>
<li>&#x53D8;&#x91CF;&#x91CD;&#x5B9A;&#x5411;: <code>${!var}</code><blockquote>
<p>If the first character of parameter is an exclamation point (!), and parameter is not a nameref, it introduces a level of indirection. Bash uses the value formed by expanding the rest of parameter as the new parameter; this is then expanded and that value is used in the rest of the expansion, rather than the expansion of the original parameter. This is known as indirect expansion.</p>
</blockquote>
</li>
<li>&#x53D8;&#x91CF;&#x66FF;&#x6362;: <code>${parameter/pattern/string}</code> &#x6839;&#x636E;<a href="https://www.gnu.org/software/bash/manual/html_node/Pattern-Matching.html#Pattern-Matching" target="_blank">&#x5339;&#x914D;&#x89C4;&#x5219;</a>, &#x7528;<code>string</code>&#x66FF;&#x6362;&#x53D8;&#x91CF;<code>$parameter</code>&#x4E2D;&#x7684;<code>pattern</code>&#x4E32;.
&#x53EF;&#x4EE5;&#x5168;&#x90E8;&#x66FF;&#x6362;, &#x53EF;&#x4EE5;&#x53EA;&#x66FF;&#x6362;&#x7B2C;&#x4E00;&#x4E2A;
<code>parameter</code>&#x652F;&#x6301;list&#x6A21;&#x5F0F;, &#x6BD4;&#x5982;<code>array[@]</code></li>
<li>&#x5927;&#x5C0F;&#x5199;&#x8F6C;&#x6362;: <code>${parameter^pattern} ${parameter,pattern}</code> </li>
<li>&#x5339;&#x914D;&#x548C;&#x5220;&#x9664;: <code>${parameter#word} ${parameter##word} ${parameter%word} ${parameter%%word}</code> </li>
<li>&#x5B57;&#x7B26;&#x4E2A;&#x6570;: <code>${#parameter}</code> &#x5982;&#x679C;&#x662F;<code>array[@]</code>&#x7684;&#x5F62;&#x5F0F;, &#x8FD4;&#x56DE;&#x6210;&#x5458;&#x4E2A;&#x6570;</li>
<li>&#x53D8;&#x91CF;&#x9ED8;&#x8BA4;&#x503C;: <code>${parameter:-word} ${parameter:=word} ${parameter:?word} ${parameter:+word}</code></li>
<li><code>${!prefix*} ${!prefix@} ${!name[@]} ${!name[*]}</code> &#x6CA1;&#x770B;&#x61C2;&#x6709;&#x5565;&#x7528;<blockquote>
<p>Expands to the names of variables whose names begin with prefix, separated by the first character of the IFS special variable.</p>
</blockquote>
</li>
<li>&#x5B50;&#x4E32;&#x6269;&#x5C55;: <code>${parameter:offset} ${parameter:offset:length}</code>
&#x652F;&#x6301;&#x8D1F;&#x6570;</li>
</ul>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">$ string=01234567890abcdefgh
$ echo ${string:7}
7890abcdefgh
$ echo ${string:7:0}

$ echo ${string:7:2}
78
$ echo ${string:7:-2}
7890abcdef
$ echo ${string: -7}
bcdefgh
$ echo ${string: -7:0}

$ echo ${string: -7:2}
bc
$ echo ${string: -7:-2}
bcdef
$ set -- 01234567890abcdefgh
$ echo ${1:7}
7890abcdefgh
$ echo ${1:7:0}

$ echo ${1:7:2}
78
$ echo ${1:7:-2}
7890abcdef
$ echo ${1: -7}
bcdefgh
$ echo ${1: -7:0}

$ echo ${1: -7:2}
bc
$ echo ${1: -7:-2}
bcdef
$ array[0]=01234567890abcdefgh
$ echo ${array[0]:7}
7890abcdefgh
$ echo ${array[0]:7:0}

$ echo ${array[0]:7:2}
78
$ echo ${array[0]:7:-2}
7890abcdef
$ echo ${array[0]: -7}
bcdefgh
$ echo ${array[0]: -7:0}

$ echo ${array[0]: -7:2}
bc
$ echo ${array[0]: -7:-2}
bcdef
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>&#x652F;&#x6301;list&#x6A21;&#x5F0F;(array&#x6A21;&#x5F0F;).</p>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">$ array=(0 1 2 3 4 5 6 7 8 9 0 a b c d e f g h)
$ echo ${array[@]:7}
7 8 9 0 a b c d e f g h
$ echo ${array[@]:7:2}
7 8
$ echo ${array[@]: -7:2}
b c
$ echo ${array[@]: -7:-2}
bash: -2: substring expression &lt; 0
$ echo ${array[@]:0}
0 1 2 3 4 5 6 7 8 9 0 a b c d e f g h
$ echo ${array[@]:0:2}
0 1
$ echo ${array[@]: -7:0}
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h1 id="curl&#x4F7F;&#x7528;&#x8BF4;&#x660E;&#x548C;&#x4E3E;&#x4F8B;"><a name="curl&#x4F7F;&#x7528;&#x8BF4;&#x660E;&#x548C;&#x4E3E;&#x4F8B;" class="anchor-navigation-ex-anchor" href="#curl&#x4F7F;&#x7528;&#x8BF4;&#x660E;&#x548C;&#x4E3E;&#x4F8B;"><i class="fa fa-link" aria-hidden="true"></i></a>5. curl&#x4F7F;&#x7528;&#x8BF4;&#x660E;&#x548C;&#x4E3E;&#x4F8B;</h1>
<p>curl&#x4E0D;&#x4EC5;&#x53EF;&#x4EE5;&#x4F20;&#x8F93;http, &#x8FD8;&#x652F;&#x6301;&#x51E0;&#x4E4E;&#x6240;&#x6709;&#x7684;&#x4F20;&#x8F93;&#x534F;&#x8BAE;:&#x6BD4;&#x5982;tftp telnet smbs imap &#x7B49;&#x7B49;&#x7B49;&#x7B49;
curl&#x6709;&#x975E;&#x5E38;&#x591A;&#x7684;&#x9009;&#x9879;</p>
<h2 id="&#x4F7F;&#x7528;&#x4E3E;&#x4F8B;1"><a name="&#x4F7F;&#x7528;&#x4E3E;&#x4F8B;1" class="anchor-navigation-ex-anchor" href="#&#x4F7F;&#x7528;&#x4E3E;&#x4F8B;1"><i class="fa fa-link" aria-hidden="true"></i></a>5.1. &#x4F7F;&#x7528;&#x4E3E;&#x4F8B;1</h2>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh"># https://www.jfrog.com/confluence/display/JFROG/Artifactory+REST+API#ArtifactoryRESTAPI-WorkingwithArtifactoryCloud
curl -X PUT $ARTIFACTORY_URL/$RELEASE_BASE/$versiondir/$subdir/$arch/$remote_package_name -T $package

# https://www.jfrog.com/confluence/display/JFROG/Artifactory+REST+API#ArtifactoryRESTAPI-FileInfo
curl -s -X GET $ARTIFACTORY_URL/api/storage/$RELEASE_BASE/$versiondir/$subdir/$arch

curl -s -X GET $ARTIFACTORY_URL/api/storage/$RELEASE_BASE/$versiondir/$subdir/$arch/$package_name
curl -s -X GET $ARTIFACTORY_URL/$RELEASE_BASE/$versiondir/$subdir/$arch/$package_name -o $local_package
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>&#x8BF4;&#x660E;:</p>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">       -X, --request &lt;command&gt;
              (HTTP) Specifies a custom request method to use when communicating with the HTTP server.  The specified request method will be used instead of the method otherwise used
              (which defaults to GET). Read the HTTP 1.1 specification for details and explanations. Common additional HTTP requests include PUT and DELETE, but related  technologies
              like WebDAV offers PROPFIND, COPY, MOVE and more.

              Normally you don&apos;t need this option. All sorts of GET, HEAD, POST and PUT requests are rather invoked by using dedicated command line options.

              This  option  only  changes  the actual word used in the HTTP request, it does not alter the way curl behaves. So for example if you want to make a proper HEAD request,
              using -X HEAD will not suffice. You need to use the -I, --head option.

              The method string you set with -X, --request will be used for all requests, which if you for example use -L, --location may  cause  unintended  side-effects  when  curl
              doesn&apos;t change request method according to the HTTP 30x response codes - and similar.


       -T, --upload-file &lt;file&gt;
              This transfers the specified local file to the remote URL. If there is no file part in the specified URL, curl will append the local file name. NOTE that you must use a
              trailing  /  on  the  last directory to really prove to Curl that there is no file name or curl will think that your last directory name is the remote file name to use.
              That will most likely cause the upload operation to fail. If this is used on an HTTP(S) server, the PUT command will be used.

              Use the file name &quot;-&quot; (a single dash) to use stdin instead of a given file.  Alternately, the file name &quot;.&quot; (a single period) may be specified instead  of  &quot;-&quot;  to  use
              stdin in non-blocking mode to allow reading server output while stdin is being uploaded.

              You  can  specify  one  -T,  --upload-file for each URL on the command line. Each -T, --upload-file + URL pair specifies what to upload and to where. curl also supports
              &quot;globbing&quot; of the -T, --upload-file argument, meaning that you can upload multiple files to a single URL by using the same URL globbing style supported in the URL, like
              this:

               curl --upload-file &quot;{file1,file2}&quot; http://www.example.com

              or even

               curl -T &quot;img[1-1000].png&quot; ftp://ftp.example.com/upload/
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="&#x4F7F;&#x7528;&#x4E3E;&#x4F8B;2"><a name="&#x4F7F;&#x7528;&#x4E3E;&#x4F8B;2" class="anchor-navigation-ex-anchor" href="#&#x4F7F;&#x7528;&#x4E3E;&#x4F8B;2"><i class="fa fa-link" aria-hidden="true"></i></a>5.2. &#x4F7F;&#x7528;&#x4E3E;&#x4F8B;2</h2>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">#For example, the following cURL and build-info-permission.json define a new permission target called &#x201C;java-developers&#x201D;, for a build called &#x201C;test-maven&#x201D;:
curl -uadmin:password -XPUT &quot;http://localhost:8081/artifactory/api/v2/security/permissions/java-developers&quot;  -H &quot;Content-type: application/json&quot;  -T build-info-permission.json
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>&#x8BF4;&#x660E;:</p>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">       -u, --user &lt;user:password&gt;
              Specify the user name and password to use for server authentication. Overrides -n, --netrc and --netrc-optional.

              If you just give the user name (without entering a colon) curl will prompt for a password.

              If you use an SSPI-enabled curl binary and do NTLM authentication, you can force curl to pick up the user name and password from your environment by simply specifying a
              single colon with this option: &quot;-u :&quot;.

              If this option is used several times, the last one will be used.

       -H, --header &lt;header&gt;
              (HTTP)  Extra  header to use when getting a web page. You may specify any number of extra headers. Note that if you should add a custom header that has the same name as
              one of the internal ones curl would use, your externally set header will be used instead of the internal one. This allows you to make  even  trickier  stuff  than  curl
              would  normally  do.  You  should not replace internally set headers without knowing perfectly well what you&apos;re doing. Remove an internal header by giving a replacement
              without content on the right side of the colon, as in: -H &quot;Host:&quot;. If you send the custom header with no-value then its header must be terminated with a semicolon, such
              as -H &quot;X-Custom-Header;&quot; to send &quot;X-Custom-Header:&quot;.

              curl  will  make  sure that each header you add/replace is sent with the proper end-of-line marker, you should thus not add that as a part of the header content: do not
              add newlines or carriage returns, they will only mess things up for you.

              See also the -A, --user-agent and -e, --referer options.

              This option can be used multiple times to add/replace/remove multiple headers.
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="&#x4F7F;&#x7528;&#x4E3E;&#x4F8B;3"><a name="&#x4F7F;&#x7528;&#x4E3E;&#x4F8B;3" class="anchor-navigation-ex-anchor" href="#&#x4F7F;&#x7528;&#x4E3E;&#x4F8B;3"><i class="fa fa-link" aria-hidden="true"></i></a>5.3. &#x4F7F;&#x7528;&#x4E3E;&#x4F8B;3</h2>
<p>&#x4E0B;&#x8F7D;vscode server</p>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">curl -#fL -o ~/.cache/code-server/code-server-3.6.0-linux-amd64.tar.gz.incomplete -C - https://github.com/cdr/code-server/releases/download/v3.6.0/code-server-3.6.0-linux-amd64.tar.gz
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<ul>
<li><code>-#</code> &#x4F7F;&#x7528;&#x7B80;&#x5316;&#x7684;&#x8FDB;&#x5EA6;&#x6761;</li>
<li><code>-f</code> Fail silently (no output at all) on server  errors. &#x4E3B;&#x8981;&#x7684;&#x76EE;&#x7684;&#x662F;&#x7ED9;&#x8FDC;&#x7A0B;&#x6267;&#x884C;&#x811A;&#x672C;&#x7528;&#x7684;</li>
<li><code>-L</code> &#x4E4B;&#x524D;&#x9047;&#x5230;&#x8FC7;, follow redirection</li>
<li><code>-C -</code> &#x8FD9;&#x4E24;&#x4E2A;&#x8FDE;&#x8D77;&#x6765;&#x662F;&#x8BF4;curl&#x4F1A; continue/Resume a previous file transfer</li>
</ul>
<h2 id="url&#x683C;&#x5F0F;"><a name="url&#x683C;&#x5F0F;" class="anchor-navigation-ex-anchor" href="#url&#x683C;&#x5F0F;"><i class="fa fa-link" aria-hidden="true"></i></a>5.4. URL&#x683C;&#x5F0F;</h2>
<p>curl&#x652F;&#x6301;&#x591A;&#x4E2A;url&#x5730;&#x5740;, &#x6BD4;&#x5982;</p>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">http://site.{one,two,three}.com
ftp://ftp.example.com/file[1-100].txt
ftp://ftp.example.com/file[a-z].txt

#&#x5728;&#x4E00;&#x4E2A;url&#x91CC;&#x9762;&#x5305;&#x542B;&#x591A;&#x4E2A;&#x53EF;&#x53D8;&#x90E8;&#x5206;
http://example.com/archive[1996-1999]/vol[1-4]/part{a,b,c}.html

#&#x5E26;&#x6B65;&#x8FDB;&#x7684;
http://example.com/file[1-100:10].txt
http://example.com/file[a-z:2].txt
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h1 id="curl&#x548C;restful-gitlab-api&#x4E3E;&#x4F8B;"><a name="curl&#x548C;restful-gitlab-api&#x4E3E;&#x4F8B;" class="anchor-navigation-ex-anchor" href="#curl&#x548C;restful-gitlab-api&#x4E3E;&#x4F8B;"><i class="fa fa-link" aria-hidden="true"></i></a>6. curl&#x548C;RESTful gitlab API&#x4E3E;&#x4F8B;</h1>
<h2 id="&#x7B80;&#x4ECB;"><a name="&#x7B80;&#x4ECB;" class="anchor-navigation-ex-anchor" href="#&#x7B80;&#x4ECB;"><i class="fa fa-link" aria-hidden="true"></i></a>6.1. &#x7B80;&#x4ECB;</h2>
<p>gitlab API&#x7684;&#x6839;&#x76EE;&#x5F55;&#x662F;<code>https://gitlab.example.com/api/v4</code>
&#x6BD4;&#x5982;</p>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh"># &#x83B7;&#x53D6;gitlabe1.ext.net.nokia.com&#x4E0B;&#x6240;&#x6709;&#x7684;projects, &#x8FD4;&#x56DE;&#x503C;&#x662F;json&#x683C;&#x5F0F;&#x7684;
curl &quot;https://gitlabe1.ext.net.nokia.com/api/v4/projects&quot;
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>POST&#x662F;&#x65B0;&#x5EFA;, PUT&#x662F;&#x66F4;&#x65B0;: &#x4F7F;&#x7528;curl&#x7684;<code>-X, --request</code>&#x9009;&#x9879;&#x6307;&#x5B9A;. &#x9ED8;&#x8BA4;&#x662F;GET</p>
<table>
<thead>
<tr>
<th>Methods</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>--header &quot;PRIVATE-TOKEN: &lt;your_access_token&gt;&quot;</code></td>
<td>Use this method as is, whenever authentication needed</td>
</tr>
<tr>
<td><code>--request POST</code></td>
<td>Use this method when creating new objects</td>
</tr>
<tr>
<td><code>--request PUT</code></td>
<td>Use this method when updating existing objects</td>
</tr>
<tr>
<td><code>--request DELETE</code></td>
<td>Use this method when removing existing objects</td>
</tr>
</tbody>
</table>
<p>&#x6709;&#x4E9B;API&#x662F;&#x9700;&#x8981;&#x6743;&#x9650;&#x7684;, &#x6CA1;&#x6709;&#x6743;&#x9650;&#x53EF;&#x80FD;&#x8FD4;&#x56DE;public data&#x6216;&#x8005;&#x76F4;&#x63A5;&#x8FD4;&#x56DE;&#x9519;&#x8BEF;.
&#x6709;&#x51E0;&#x79CD;&#x65B9;&#x5F0F;&#x63D0;&#x4F9B;&#x6743;&#x9650;, &#x6BD4;&#x5982;</p>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh"># &#x5728;&#x53C2;&#x6570;&#x91CC;
curl https://gitlab.example.com/api/v4/projects?private_token=&lt;your_access_token&gt;

# &#x5728;header&#x91CC;
curl --header  &quot;Private-Token: &lt;your_access_token&gt;&quot; https://gitlab.example.com/api/v4/projects
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>&#x6BD4;&#x5982;&#x83B7;&#x53D6;group&#x4FE1;&#x606F;</p>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">curl --header  &quot;PRIVATE-TOKEN: &lt;your_access_token&gt;&quot;  &quot;https://gitlab.example.com/api/v4/groups/gitlab-org&quot;
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h2 id="&#x4E3E;&#x4F8B;"><a name="&#x4E3E;&#x4F8B;" class="anchor-navigation-ex-anchor" href="#&#x4E3E;&#x4F8B;"><i class="fa fa-link" aria-hidden="true"></i></a>6.2. &#x4E3E;&#x4F8B;</h2>
<h3 id="&#x521B;&#x5EFA;&#x65B0;project"><a name="&#x521B;&#x5EFA;&#x65B0;project" class="anchor-navigation-ex-anchor" href="#&#x521B;&#x5EFA;&#x65B0;project"><i class="fa fa-link" aria-hidden="true"></i></a>6.2.1. &#x521B;&#x5EFA;&#x65B0;project</h3>
<p>&#x4F7F;&#x7528;POST</p>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">curl --request POST --header  &quot;PRIVATE-TOKEN: &lt;your_access_token&gt;&quot;  &quot;https://gitlab.example.com/api/v4/projects?name=foo&quot;
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>&#x4E5F;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;curl&#x7684;--data</p>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">curl --data  &quot;name=foo&quot;  --header  &quot;PRIVATE-TOKEN: &lt;your_access_token&gt;&quot;  &quot;https://gitlab.example.com/api/v4/projects&quot;
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>&#x518D;&#x4E3E;&#x4E2A;&#x521B;&#x5EFA;&#x65B0;group&#x7684;&#x4F8B;&#x5B50;: &#x8FD9;&#x4E2A;&#x4F8B;&#x5B50;&#x4F7F;&#x7528;json&#x683C;&#x5F0F;&#x7684;&#x6570;&#x636E;&#x505A;&#x4E3A;&#x8F93;&#x5165;</p>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">curl --request POST --header  &quot;PRIVATE-TOKEN: &lt;your_access_token&gt;&quot;  --header  &quot;Content-Type: application/json&quot;  --data  &apos;{&quot;path&quot;: &quot;my-group&quot;, &quot;name&quot;: &quot;My group&quot;}&apos;  &quot;https://gitlab.example.com/api/v4/groups&quot;
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h3 id="&#x83B7;&#x53D6;gitignore&#x6A21;&#x677F;"><a name="&#x83B7;&#x53D6;gitignore&#x6A21;&#x677F;" class="anchor-navigation-ex-anchor" href="#&#x83B7;&#x53D6;gitignore&#x6A21;&#x677F;"><i class="fa fa-link" aria-hidden="true"></i></a>6.2.2. &#x83B7;&#x53D6;gitignore&#x6A21;&#x677F;</h3>
<p>&#x5BF9;&#x6BCF;&#x4E2A;&#x8BED;&#x8A00;, gitlab&#x90FD;&#x6709;gitignore&#x6A21;&#x677F;, &#x5BF9;&#x5E94;<code>GET /templates/gitignores</code>&#x8BF7;&#x6C42;</p>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh"># &#x83B7;&#x53D6;&#x6240;&#x6709;&#x6A21;&#x677F;, &#x8FD4;&#x56DE;json&#x683C;&#x5F0F;&#x7684;&#x5217;&#x8868;
curl https://gitlab.example.com/api/v4/templates/gitignores
# &#x5B9E;&#x4F8B;&#x8FD4;&#x56DE;&#x7ED3;&#x679C;
[
  {
    &quot;key&quot;: &quot;Autotools&quot;,
    &quot;name&quot;: &quot;Autotools&quot;
  },
  {
    &quot;key&quot;: &quot;C&quot;,
    &quot;name&quot;: &quot;C&quot;
  },
  {
    &quot;key&quot;: &quot;C++&quot;,
    &quot;name&quot;: &quot;C++&quot;
  },
  {
    &quot;key&quot;: &quot;CFWheels&quot;,
    &quot;name&quot;: &quot;CFWheels&quot;
  },
  {
    &quot;key&quot;: &quot;CMake&quot;,
    &quot;name&quot;: &quot;CMake&quot;
  },
  {
    &quot;key&quot;: &quot;CUDA&quot;,
    &quot;name&quot;: &quot;CUDA&quot;
  }
]
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>&#x6BD4;&#x5982;&#x770B;Ruby&#x7684;gitignore&#x6A21;&#x677F;, &#x9700;&#x8981;&#x7528;&#x8FD9;&#x6837;&#x7684;&#x8BED;&#x6CD5;:<code>GET /templates/gitignores/:key</code></p>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">curl https://gitlab.example.com/api/v4/templates/gitignores/Ruby
#&#x7ED3;&#x679C;
{
  &quot;name&quot;: &quot;Ruby&quot;,
  &quot;content&quot;: &quot;*.gem\n*.rbc\n/.config\n/coverage/\n/InstalledFiles\n/pkg/\n/spec/reports/\n/spec/examples.txt\n/test/tmp/\n/test/version_tmp/\n/tmp/\n\n# Used by dotenv library to load environment variables.\n# .env\n\n## Specific to RubyMotion:\n.dat*\n.repl_history\nbuild/\n*.bridgesupport\nbuild-iPhoneOS/\nbuild-iPhoneSimulator/\n\n## Specific to RubyMotion (use of CocoaPods):\n#\n# We recommend against adding the Pods directory to your .gitignore. However\n# you should judge for yourself, the pros and cons are mentioned at:\n# https://guides.cocoapods.org/using/using-cocoapods.html#should-i-check-the-pods-directory-into-source-control\n#\n# vendor/Pods/\n\n## Documentation cache and generated files:\n/.yardoc/\n/_yardoc/\n/doc/\n/rdoc/\n\n## Environment normalization:\n/.bundle/\n/vendor/bundle\n/lib/bundler/man/\n\n# for a library or gem, you might want to ignore these files since the code is\n# intended to run in multiple environments; otherwise, check them in:\n# Gemfile.lock\n# .ruby-version\n# .ruby-gemset\n\n# unless supporting rvm &lt; 1.11.0 or doing something fancy, ignore this:\n.rvmrc\n&quot;
}
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="&#x5206;&#x652F;&#x7EF4;&#x62A4;"><a name="&#x5206;&#x652F;&#x7EF4;&#x62A4;" class="anchor-navigation-ex-anchor" href="#&#x5206;&#x652F;&#x7EF4;&#x62A4;"><i class="fa fa-link" aria-hidden="true"></i></a>6.2.3. &#x5206;&#x652F;&#x7EF4;&#x62A4;</h3>
<p>&#x83B7;&#x53D6;&#x5206;&#x652F;&#x683C;&#x5F0F;
<code>GET /projects/:id/repository/branches</code>
&#x6216;&#x8005;
<code>GET /projects/:id/repository/branches/:branch</code>
&#x6BD4;&#x5982;:</p>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">curl https://gitlabe1.ext.net.nokia.com/api/v4/projects/57103/repository/branches
curl https://gitlabe1.ext.net.nokia.com/api/v4/projects/57103/repository/branches/master
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>&#x521B;&#x5EFA;&#x5206;&#x652F;&#x683C;&#x5F0F;
<code>POST /projects/:id/repository/branches</code>
&#x9700;&#x8981;&#x4E0B;&#x9762;&#x7684;&#x53C2;&#x6570;:</p>
<table>
<thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>id</code></td>
<td>integer</td>
<td>yes</td>
<td>ID or <a href="https://docs.gitlab.com/12.10/ee/api/README.html#namespaced-path-encoding" target="_blank">URL-encoded path of the project</a> owned by the authenticated user.</td>
</tr>
<tr>
<td><code>branch</code></td>
<td>string</td>
<td>yes</td>
<td>Name of the branch.</td>
</tr>
<tr>
<td><code>ref</code></td>
<td>string</td>
<td>yes</td>
<td>Branch name or commit SHA to create branch from.</td>
</tr>
</tbody>
</table>
<p>&#x4E3E;&#x4F8B;:</p>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">curl --request POST --header  &quot;PRIVATE-TOKEN: &lt;your_access_token&gt;&quot; https://gitlab.example.com/api/v4/projects/5/repository/branches?branch=newbranch&amp;ref=master

# &#x8FD4;&#x56DE;
{  &quot;commit&quot;:  {  &quot;author_email&quot;:  &quot;john@example.com&quot;,  &quot;author_name&quot;:  &quot;John Smith&quot;,  &quot;authored_date&quot;:  &quot;2012-06-27T05:51:39-07:00&quot;,  &quot;committed_date&quot;:  &quot;2012-06-28T03:44:20-07:00&quot;,  &quot;committer_email&quot;:  &quot;john@example.com&quot;,  &quot;committer_name&quot;:  &quot;John Smith&quot;,  &quot;id&quot;:  &quot;7b5c3cc8be40ee161ae89a06bba6229da1032a0c&quot;,  &quot;short_id&quot;:  &quot;7b5c3cc&quot;,  &quot;title&quot;:  &quot;add projects API&quot;,  &quot;message&quot;:  &quot;add projects API&quot;,  &quot;parent_ids&quot;:  [  &quot;4ad91d3c1144c406e50c7b33bae684bd6837faf8&quot;  ]  },  &quot;name&quot;:  &quot;newbranch&quot;,  &quot;merged&quot;:  false,  &quot;protected&quot;:  false,  &quot;default&quot;:  false,  &quot;developers_can_push&quot;:  false,  &quot;developers_can_merge&quot;:  false,  &quot;can_push&quot;:  true  }
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>&#x5220;&#x9664;&#x5206;&#x652F;:<code>DELETE /projects/:id/repository/branches/:branch</code>
&#x4E3E;&#x4F8B;:</p>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">curl --request DELETE --header  &quot;PRIVATE-TOKEN: &lt;your_access_token&gt;&quot; https://gitlab.example.com/api/v4/projects/5/repository/branches/newbranch
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h1 id="sed&#x89E3;&#x6790;log"><a name="sed&#x89E3;&#x6790;log" class="anchor-navigation-ex-anchor" href="#sed&#x89E3;&#x6790;log"><i class="fa fa-link" aria-hidden="true"></i></a>7. sed&#x89E3;&#x6790;log</h1>
<p>&#x8981;&#x5728;&#x4E00;&#x4E2A;&#x5F88;&#x5927;&#x7684;log&#x91CC;&#x9762;&#x63D0;&#x53D6;OMCI&#x7684;&#x6D88;&#x606F;:
&#x683C;&#x5F0F;1</p>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">[trace] 08:36:48.888471 Dir: Tx --&gt; Onu: ont1-fwlt-b Retry: 0 
00000000  1c ee 49 0a 00 02 00 00  80 00 00 00 00 00 00 00  |..I.............|
00000010  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
00000020  00 00 00 00 00 00 00 00  00 00 00 28              |...........(|
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>&#x683C;&#x5F0F;2</p>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">[2018/04/28 07:54:20.393226][omci][INFO]Dir: Rx &lt;-- Onu: ont1-fwlt-b 
00000000  1c ee 29 0a 00 02 00 00  00 80 00 3d 00 00 00 00  |..)........=....|
00000010  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
00000020  00 00 00 00 00 00 00 00  00 00 00 28 62 68 9f 0c  |...........(bh..|
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>&#x683C;&#x5F0F;1&#x548C;&#x683C;&#x5F0F;2&#x5C31;&#x662F;&#x6253;&#x5370;&#x7684;header&#x4E0D;&#x4E00;&#x6837;</p>
<p>&#x7528;&#x4E0B;&#x9762;&#x7684;sed&#x547D;&#x4EE4;&#x63D0;&#x53D6;</p>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">sed -rn -e &apos;/.*Dir: .*--.*/,+4{s/.* (..:..:..\.......).*(Dir.*)/\1 \2/g;p}&apos; stdout_824128194_ok.log
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>&#x5176;&#x4E2D;</p>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">-r &#x4F7F;&#x7528;&#x6269;&#x5C55;&#x6B63;&#x5219;
-n &#x4E0D;&#x81EA;&#x52A8;&#x6253;&#x5370;pattern&#x7A7A;&#x95F4;. &#x4E0D;&#x52A0;-n&#x4F1A;&#x6253;&#x5370;&#x6240;&#x6709;&#x539F;&#x59CB;&#x884C;&#x548C;&#x4FEE;&#x6539;&#x884C;
-e &#x540E;&#x9762;&#x8DDF;&#x5B9A;&#x5740; /.*Dir: .*--.*/,+4 &#x610F;&#x601D;&#x662F;&#x6240;&#x6709;&#x5339;&#x914D;&#x5230;Dir: Tx --&gt; Onu&#x548C;Dir: Rx &lt;-- Onu&#x7684;&#x884C;,&#x4EE5;&#x53CA;&#x63A5;&#x4E0B;&#x6765;&#x7684;4&#x884C;
&#x5B9A;&#x5740;&#x540E;&#x9762;&#x662F;&#x547D;&#x4EE4;, &#x7528;{}&#x62EC;&#x8D77;&#x6765;, &#x4E0D;&#x7528;&#x5E94;&#x8BE5;&#x4E5F;&#x884C;
s/.* (..:..:..\.......).*(Dir.*)/\1 \2/g&#x662F;&#x7B2C;&#x4E00;&#x4E2A;&#x547D;&#x4EE4;: &#x53BB;&#x6389;&#x9664;&#x4E86;&#x65F6;&#x95F4;&#x6233;&#x548C;OMCI Dir&#x63D0;&#x793A;&#x5916;&#x7684;&#x6253;&#x5370;; &#x8FD9;&#x91CC;&#x7528;&#x4E86;&#x6269;&#x5C55;&#x6B63;&#x5219;&#x548C;&#x53CD;&#x5411;&#x5F15;&#x7528;.
;p&#x662F;&#x7B2C;&#x4E8C;&#x547D;&#x4EE4;, &#x6253;&#x5370;pattern&#x7A7A;&#x95F4;, &#x5373;&#x6253;&#x5370;&#x5904;&#x7406;&#x540E;&#x7684;&#x884C;. &#x6CA1;&#x6709;p&#x547D;&#x4EE4;&#x5C06;&#x6CA1;&#x6709;&#x8F93;&#x51FA;
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h1 id="cpu&#x5229;&#x7528;&#x7387;&#x6761;&#x4EF6;&#x89E6;&#x53D1;perf-record"><a name="cpu&#x5229;&#x7528;&#x7387;&#x6761;&#x4EF6;&#x89E6;&#x53D1;perf-record" class="anchor-navigation-ex-anchor" href="#cpu&#x5229;&#x7528;&#x7387;&#x6761;&#x4EF6;&#x89E6;&#x53D1;perf-record"><i class="fa fa-link" aria-hidden="true"></i></a>8. CPU&#x5229;&#x7528;&#x7387;&#x6761;&#x4EF6;&#x89E6;&#x53D1;perf record</h1>
<p>&#x6761;&#x4EF6;&#x662F;&#x4E24;&#x4E2A;&#x8FDB;&#x7A0B;<code>pidof onumgnt_hypervisor_app</code>&#x548C;<code>pidof onu_engine</code>&#x7684;CPU&#x5229;&#x7528;&#x7387;&#x540C;&#x65F6;&#x5230;10%&#x4EE5;&#x4E0A;.</p>
<p>&#x6CE8;&#x610F;&#x7528;&#x6574;&#x4E2A;<code>while</code>&#x5757;&#x4F7F;&#x7528;&#x5C0F;&#x62EC;&#x53F7;&#x62EC;&#x8D77;&#x6765;&#x7684;, &#x5C0F;&#x62EC;&#x53F7;&#x4F1A;&#x4EA7;&#x751F;&#x5B50;&#x8FDB;&#x7A0B;, &#x76EE;&#x7684;&#x662F;&#x8BA9;&#x5757;&#x5185;&#x7684;<code>exit</code>&#x9000;&#x51FA;&#x8FD9;&#x4E2A;&#x5B50;&#x8FDB;&#x7A0B;.
&#x4E0D;&#x7528;&#x5C0F;&#x62EC;&#x53F7;&#x7684;&#x8BDD;, &#x8FD9;&#x4E2A;&#x4EE3;&#x7801;&#x5757;&#x662F;&#x5728;&#x5F53;&#x524D;shell&#x8FDB;&#x7A0B;&#x6267;&#x884C;, &#x90A3;<code>exit</code>&#x4F1A;&#x9000;&#x51FA;&#x5F53;&#x524D;shell.</p>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">./topid -p `pidof onumgnt_hypervisor_app` -p `pidof onu_engine` &gt; pid.log &amp;

(
while true
do
    if [[ $(tail -n 2 pid.log | awk &apos;{if ($3&gt;10) print $5}&apos; | wc -l) == 2 ]];then
        echo doing profiling
        LD_LIBRARY_PATH=`pwd` ./perf record -F 500 -e cycles -g --call-graph dwarf -p `pidof onumgnt_hypervisor_app` -- sleep 60
        exit
    fi
    sleep 3
done
)
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>&#x53E6;&#x5916;, &#x8FD9;&#x4E2A;&#x8FD9;&#x4E2A;&#x4EE3;&#x7801;&#x5757;&#x4E0D;&#x8981;&#x7528;<code>tab</code>&#x6765;&#x7F29;&#x8FDB;, &#x5426;&#x5219;&#x4F1A;&#x88AB;shell&#x89E3;&#x6790;&#x6210;auto completion&#x6765;&#x81EA;&#x52A8;&#x8054;&#x60F3;&#x547D;&#x4EE4;.</p>
<h1 id="top&#x7684;&#x8BB0;&#x5F55;&#x5BFC;&#x5165;&#x5230;excel"><a name="top&#x7684;&#x8BB0;&#x5F55;&#x5BFC;&#x5165;&#x5230;excel" class="anchor-navigation-ex-anchor" href="#top&#x7684;&#x8BB0;&#x5F55;&#x5BFC;&#x5165;&#x5230;excel"><i class="fa fa-link" aria-hidden="true"></i></a>9. top&#x7684;&#x8BB0;&#x5F55;&#x5BFC;&#x5165;&#x5230;excel</h1>
<h2 id="&#x6BD4;&#x8F83;&#x7C97;&#x7CD9;&#x7684;&#x7248;&#x672C;"><a name="&#x6BD4;&#x8F83;&#x7C97;&#x7CD9;&#x7684;&#x7248;&#x672C;" class="anchor-navigation-ex-anchor" href="#&#x6BD4;&#x8F83;&#x7C97;&#x7CD9;&#x7684;&#x7248;&#x672C;"><i class="fa fa-link" aria-hidden="true"></i></a>9.1. &#x6BD4;&#x8F83;&#x7C97;&#x7CD9;&#x7684;&#x7248;&#x672C;</h2>
<h3 id="cpu"><a name="cpu" class="anchor-navigation-ex-anchor" href="#cpu"><i class="fa fa-link" aria-hidden="true"></i></a>9.1.1. CPU</h3>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">(echo time switch_hwa_app vonu xpon_hwa_app xponhwadp &amp;&amp; cat top.log | awk &apos;/GMT/{printf &quot;\n&quot;$4} /run\/switch_hwa_app/{printf(&quot; switch_hwa_app&gt;%s&quot;,$8)} /run\/xpon_hwa_app/{printf(&quot; xpon_hwa_app&gt;%s&quot;,$8)} /run\/xponhwadp/{printf(&quot; xponhwadp&gt;%s&quot;,$8)} /vONU-PoC-1 -skipav yes/{printf(&quot; vonu&gt;%s&quot;,$8)}&apos; | while read line; do echo $line | xargs -n1 | sort | xargs; done | tr &quot;&gt;&quot; &quot; &quot; | awk &apos;{printf(&quot;%s %s %s %s %s\n&quot;, $1, $3, $5, $7, $9)}&apos; ) &gt; ~/sf_work/tmp/$(basename `pwd`).csv
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h3 id="mem"><a name="mem" class="anchor-navigation-ex-anchor" href="#mem"><i class="fa fa-link" aria-hidden="true"></i></a>9.1.2. mem</h3>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">#&#x8FD9;&#x91CC;&#x5B9E;&#x9645;&#x4E0A;&#x662F;&#x7EDF;&#x8BA1;&#x7684;VSS, &#x662F;&#x865A;&#x62DF;&#x5185;&#x5B58;&#x5360;&#x7528;
cat top.log | awk &apos;/GMT/{printf &quot;\n&quot;$4&quot;\t&quot;} /vONU-PoC-1 -skipav yes/ {if($5 ~ /.*m/) printf $5; else printf $5/1024}&apos; | tr -d &apos;m&apos; &gt; ~/sf_work/tmp/$(basename `pwd`).csv
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<h2 id="&#x540C;&#x65F6;&#x5BFC;&#x51FA;cpu&#x5229;&#x7528;&#x7387;&#x548C;mem"><a name="&#x540C;&#x65F6;&#x5BFC;&#x51FA;cpu&#x5229;&#x7528;&#x7387;&#x548C;mem" class="anchor-navigation-ex-anchor" href="#&#x540C;&#x65F6;&#x5BFC;&#x51FA;cpu&#x5229;&#x7528;&#x7387;&#x548C;mem"><i class="fa fa-link" aria-hidden="true"></i></a>9.2. &#x540C;&#x65F6;&#x5BFC;&#x51FA;CPU&#x5229;&#x7528;&#x7387;&#x548C;mem</h2>
<p>&#x8FD9;&#x4E2A;top.log&#x662F;&#x7528;&#x5982;&#x4E0B;&#x547D;&#x4EE4;&#x8BB0;&#x5F55;&#x7684;, &#x6BCF;&#x79D2;&#x4E00;&#x6B21;.</p>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">#grep -E&#x8BB0;&#x5F55;&#x7684;&#x662F;RSS, &#x7269;&#x7406;&#x5185;&#x5B58;.
while true; do
    date
    top -bn1 | grep -E &quot;$patten|CPU|Mem|COMMAND&quot;
    top -bn1 -m | grep -E &quot;$patten|COMMAND&quot;
    sleep 1
done &gt;&gt; log/top.log
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>&#x539F;&#x59CB;&#x7684;log&#x5982;&#x4E0B;:</p>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">Tue Jan  6 13:05:29 GMT 1970
Mem: 884920K used, 1072956K free, 152152K shrd, 42636K buff, 356908K cached
CPU:  54% usr  16% sys   0% nic  29% idle   0% io   0% irq   0% sirq
  PID  PPID USER     STAT   VSZ %VSZ CPU %CPU COMMAND
24514     1 root     S     110m   6%   1  50% ./vONU-PoC-1 -profilingperiod 5
18455   165 root     S     204m  11%   1   0% /isam/slot_default/xpon_hwa_app/run/xpon_hwa_app --json=/isam/slot_default/xpon_hwa_app/config/app_config --pty=/isam/slot_default/xpon_hwa_app/run/tty1_ext --tnd-client
18047   131 root     S     184m  10%   0   0% /isam/slot_default/switch_hwa_app/run/switch_hwa_app --json=/isam/slot_default/switch_hwa_app/config/app_config --pty=/isam/slot_default/switch_hwa_app/run/tty1_ext --tnd-client --json=/isam/slot_default/switch_hwa_app/config/app_config --pty=/isam/slot_default/switch_hwa_app/run/tty1_ext --tnd-client
22037     1 root     S    51844   3%   1   0% //lib/confd/erts/bin/confd -K false -MHe true -- -root //lib/confd -progname confd -- -home / -- -smp disable -boot confd -delayed-detach -noshell -noinput -yaws embedded true -stacktrace_depth 24 -shutdown_time 30000 -conffile //etc/confd/confd.conf -start_phase0 -max_fds 1024 -detached-fd 4
18067   166 root     S    36168   2%   1   0% /isam/slot_default/xponhwadp/run/xponhwadp --json=/isam/slot_default/xponhwadp/config/app_config --pty=/isam/slot_default/xponhwadp/run/tty1_ext --tnd-client
18601   124 root     S    34260   2%   1   0% /isam/slot_default/dmsp_app/run/dmsp_app --json=/isam/slot_default/dmsp_app/config/app_config --pty=/isam/slot_default/dmsp_app/run/tty1_ext --tnd-client
24522 24515 root     S     2952   0%   1   0% grep -E vONU-PoC-1|xponhwadp|switch_hwa_app|xpon_hwa_app|confd|dmsp_app|CPU|Mem|COMMAND
  124     1 root     S     2788   0%   0   0% s6-supervise dmsp_app
  131     1 root     S     2788   0%   0   0% s6-supervise switch_hwa_app
  165     1 root     S     2788   0%   0   0% s6-supervise xpon_hwa_app
  166     1 root     S     2788   0%   0   0% s6-supervise xponhwadp
  PID^^^VSZ^VSZRW   RSS (SHR) DIRTY (SHR) STACK COMMAND
18047  176m  148m  123m  6948 95676  5896   132 /isam/slot_default/switch_hwa_app/run/switch_hwa_app --json=/isam/slot_default/switch_hwa_app/config/app_config --pty=/isam/slot_default/switch_hwa_app/run/tty1_ext --tnd-client --json=/isam/slot_default/switch_hwa_app/config/app_config --pty=/isam/slot_default/switch_hwa_app/run/tty1_ext --tnd-client
24514  110m  100m 11020     0 11020     0   132 ./vONU-PoC-1 -profilingperiod 5
22037 51844 39868 38424  2608 38420  2604   132 //lib/confd/erts/bin/confd -K false -MHe true -- -root //lib/confd -progname confd -- -home / -- -smp disable -boot confd -delayed-detach -noshell -noinput -yaws embedded true -stacktrace_depth 24 -shutdown_time 30000 -conffile //etc/confd/confd.conf -start_phase0 -max_fds 1024 -detached-fd 4
18067 36168  7624 20760 11224 11272  6816   128 /isam/slot_default/xponhwadp/run/xponhwadp --json=/isam/slot_default/xponhwadp/config/app_config --pty=/isam/slot_default/xponhwadp/run/tty1_ext --tnd-client
18601 34260 14452 22652 11304 17688  6916   132 /isam/slot_default/dmsp_app/run/dmsp_app --json=/isam/slot_default/dmsp_app/config/app_config --pty=/isam/slot_default/dmsp_app/run/tty1_ext --tnd-client
18455 29104  8324 14208  7192  8392  5540   132 /isam/slot_default/xpon_hwa_app/run/xpon_hwa_app --json=/isam/slot_default/xpon_hwa_app/config/app_config --pty=/isam/slot_default/xpon_hwa_app/run/tty1_ext --tnd-client
24527  2952   384  1532  1464  1528  1460   132 grep -E vONU-PoC-1|xponhwadp|switch_hwa_app|xpon_hwa_app|confd|dmsp_app|COMMAND
  124  2788   400  1464  1348  1460  1344   132 s6-supervise dmsp_app
  166  2788   400  1424  1312  1420  1308   132 s6-supervise xponhwadp
  131  2788   400  1396  1284  1392  1280   132 s6-supervise switch_hwa_app
  165  2788   400  1396  1284  1392  1280   132 s6-supervise xpon_hwa_app
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>&#x7528;&#x4E0B;&#x9762;&#x7684;&#x811A;&#x672C;&#x89E3;&#x6790;</p>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">cat top.log | grep -v -E &quot;s6-supervise|grep|COMMAND|confd -B| tar| cat&quot; | awk &apos;/GMT/{printf &quot;\ntime=&quot;$4} /Mem:/{sub(&quot;K&quot;,&quot;&quot;,$4);printf &quot; free=&quot; $4/1024} /CPU:/{printf(&quot; usr=%s sys=%s idle=%s sirq=%s&quot;,$2,$4,$8,$14)} $1 ~ /[0-9]+/{sub(&quot;.*/&quot;,&quot;&quot;,$9);printf(&quot; %s&quot;,$9);if($8 ~ /.*%/) printf &quot;:cpu=&quot;$8;else {printf &quot;:rss=&quot;;if($4 ~ /.*m/) {sub(&quot;m&quot;,&quot;&quot;,$4);printf $4} else printf $4/1024}}&apos; | while read line; do echo $line | xargs -n1 | sort | xargs; done
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<ul>
<li>awk&#x7684;&#x884C;&#x5339;&#x914D;&#x652F;&#x6301;&#x8868;&#x8FBE;&#x5F0F;, &#x8FD9;&#x91CC;&#x7684;<code>$1 ~ /[0-9]+/</code>&#x5C31;&#x662F;, &#x610F;&#x601D;&#x662F;&#x7B2C;&#x4E00;&#x4E2A;field&#x5339;&#x914D;&#x4E00;&#x4E2A;number</li>
<li>sub&#x662F;&#x539F;&#x5730;&#x66FF;&#x6362;, &#x4E0D;&#x8FD4;&#x56DE;&#x5B57;&#x7B26;&#x4E32;</li>
</ul>
<p>&#x8F93;&#x51FA;&#x5982;&#x4E0B;:</p>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">confd:cpu=0% confd:rss=37.5234 dmsp_app:cpu=0% dmsp_app:rss=22.1211 free=1047.81 idle=29% sirq=0% switch_hwa_app:cpu=0% switch_hwa_app:rss=123 sys=16% time=13:05:29 usr=54% vONU-PoC-1:cpu=50% vONU-PoC-1:rss=10.7617 xpon_hwa_app:cpu=0% xpon_hwa_app:rss=13.875 xponhwadp:cpu=0% xponhwadp:rss=20.2734
confd:cpu=0% confd:rss=37.5234 dmsp_app:cpu=0% dmsp_app:rss=22.1211 free=1047.55 idle=75% sirq=0% switch_hwa_app:cpu=4% switch_hwa_app:rss=123 sys=16% time=13:05:30 usr=8% vONU-PoC-1:cpu=0% vONU-PoC-1:rss=10.7617 xpon_hwa_app:cpu=0% xpon_hwa_app:rss=13.875 xponhwadp:cpu=0% xponhwadp:rss=20.2734
confd:cpu=0% confd:rss=37.5234 dmsp_app:cpu=0% dmsp_app:rss=22.1211 free=1047.42 idle=83% sirq=4% switch_hwa_app:cpu=4% switch_hwa_app:rss=123 sys=4% time=13:05:32 usr=8% vONU-PoC-1:cpu=0% vONU-PoC-1:rss=10.7617 xpon_hwa_app:cpu=0% xpon_hwa_app:rss=13.875 xponhwadp:cpu=0% xponhwadp:rss=20.2734
confd:cpu=0% confd:rss=37.5234 dmsp_app:cpu=0% dmsp_app:rss=22.1211 free=1047.24 idle=90% sirq=0% switch_hwa_app:cpu=2% switch_hwa_app:rss=123 sys=4% time=13:05:33 usr=4% vONU-PoC-1:cpu=0% vONU-PoC-1:rss=10.7617 xpon_hwa_app:cpu=0% xpon_hwa_app:rss=13.875 xponhwadp:cpu=0% xponhwadp:rss=20.2734
confd:cpu=0% confd:rss=37.5234 dmsp_app:cpu=0% dmsp_app:rss=22.1211 free=1047.22 idle=81% sirq=0% switch_hwa_app:cpu=4% switch_hwa_app:rss=123 sys=13% time=13:05:35 usr=4% vONU-PoC-1:cpu=0% vONU-PoC-1:rss=10.7852 xpon_hwa_app:cpu=0% xpon_hwa_app:rss=13.875 xponhwadp:cpu=0% xponhwadp:rss=20.2734
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>&#x6700;&#x540E;&#x7528;<code>tr &quot;=&quot; &quot; &quot;</code>&#x4F11;&#x6574;&#x4E00;&#x4E0B;.</p>
<p>&#x6700;&#x7EC8;&#x7248;:</p>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">1         2  3         4       5            6  7            8       9    10      11   12  13   14 15                 16 17                 18  19  20  21   22       23  24
confd:cpu 0% confd:rss 37.5234 dmsp_app:cpu 0% dmsp_app:rss 22.1211 free 1047.81 idle 29% sirq 0% switch_hwa_app:cpu 0% switch_hwa_app:rss 123 sys 16% time 13:05:29 usr 54% 
25             26  27             28      29               30 31               32     33            34 35            36
vONU-PoC-1:cpu 50% vONU-PoC-1:rss 10.7617 xpon_hwa_app:cpu 0% xpon_hwa_app:rss 13.875 xponhwadp:cpu 0% xponhwadp:rss 20.2734

(echo time free usr sys idle sirq confd:cpu confd:rss dmsp:cpu dmsp:rss switch_hwa:cpu switch_hwa:rss vONU:cpu vONU:rss xpon_hwa:cpu xpon_hwa:rss xponhwadp:cpu xponhwadp:rss &amp;&amp; cat top.log | grep -v -E &quot;s6-supervise|grep|COMMAND|confd -B| tar| cat&quot; | awk &apos;/GMT/{printf &quot;\ntime=&quot;$4} /Mem:/{sub(&quot;K&quot;,&quot;&quot;,$4);printf &quot; free=&quot; $4/1024} /CPU:/{printf(&quot; usr=%s sys=%s idle=%s sirq=%s&quot;,$2,$4,$8,$14)} $1 ~ /[0-9]+/{sub(&quot;.*/&quot;,&quot;&quot;,$9);printf(&quot; %s&quot;,$9);if($8 ~ /.*%/) printf &quot;:cpu=&quot;$8;else {printf &quot;:rss=&quot;;if($4 ~ /.*m/) {sub(&quot;m&quot;,&quot;&quot;,$4);printf $4} else printf $4/1024}}&apos; | while read line; do echo $line | xargs -n1 | sort | xargs; done | tr &quot;=&quot; &quot; &quot; | awk &apos;NF == 36 {printf(&quot;%s %s %s %s %s %s %s %s %s %s %s %s %s %s %s %s %s %s\n&quot;, $22,$10,$24,$20,$12,$14,$2,$4,$6,$8,$16,$18,$26,$28,$30,$32,$34,$36)}&apos;) &gt; top.csv
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="&#x53EA;&#x5BFC;&#x51FA;cpu&#x5229;&#x7528;&#x7387;"><a name="&#x53EA;&#x5BFC;&#x51FA;cpu&#x5229;&#x7528;&#x7387;" class="anchor-navigation-ex-anchor" href="#&#x53EA;&#x5BFC;&#x51FA;cpu&#x5229;&#x7528;&#x7387;"><i class="fa fa-link" aria-hidden="true"></i></a>9.3. &#x53EA;&#x5BFC;&#x51FA;cpu&#x5229;&#x7528;&#x7387;</h2>
<p>top&#x7684;&#x8F93;&#x51FA;, &#x6BCF;&#x79D2;&#x8BB0;&#x5F55;&#x4E00;&#x6B21;, &#x8FD9;&#x91CC;&#x7684;patten&#x662F;<code>xponhwadp switch_hwa_app xpon_hwa_app vONU-PoC-1</code>&#x8FD9;&#x51E0;&#x4E2A;app&#x7684;&#x540D;&#x5B57;<br>&#x524D;&#x9762;&#x6253;&#x4E2A;&#x65F6;&#x95F4;&#x6233;<br><code>date &amp;&amp; top -bn1 | grep -E $patten</code>
&#x8F93;&#x51FA;&#x662F;&#x8FD9;&#x6837;&#x7684;:<br><img src="img/shell_&#x9AD8;&#x7EA7;&#x7BC7;_20220915234144.png" alt="">  </p>
<p>&#x600E;&#x4E48;&#x628A;&#x8FD9;&#x4E2A;&#x8F93;&#x51FA;, &#x5BFC;&#x5165;&#x5230;excel&#x91CC;&#x9762;, &#x7136;&#x540E;&#x5BF9;&#x6BCF;&#x4E2A;app&#x505A;cpu&#x5360;&#x7528;&#x7684;&#x56FE;&#x5462;?
&#x8981;&#x7528;&#x5230;awk, xargs, sort</p>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">cat top.log | awk &apos;/GMT/{printf &quot;\n&quot;$4} /run\/switch_hwa_app/{printf(&quot; switch_hwa_app:%s&quot;,$8)} /run\/xpon_hwa_app/{printf(&quot; xpon_hwa_app:%s&quot;,$8)} /run\/xponhwadp/{printf(&quot; xponhwadp:%s&quot;,$8)} /vONU-PoC-1 -skipav yes/{printf(&quot; vonu:%s&quot;,$8)}&apos; | while read line; do echo $line | xargs -n1 | sort | xargs; done
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<ul>
<li>awk&#x8D1F;&#x8D23;&#x8FC7;&#x6EE4;&#x5173;&#x952E;&#x8BCD;, &#x7528;/patten/{action}&#x7684;&#x5F62;&#x5F0F;</li>
<li>awk&#x8FC7;&#x6EE4;&#x540E;, &#x6BCF;&#x4E2A;&#x65F6;&#x95F4;&#x6233;&#x4E0B;, &#x8FD9;&#x56DB;&#x4E2A;app&#x90FD;&#x5217;&#x51FA;&#x6765;&#x4E86;, &#x4F46;&#x987A;&#x4E0D;&#x4E00;&#x5B9A;&#x4E00;&#x6837;, &#x56E0;&#x4E3A;top&#x8F93;&#x51FA;&#x4F1A;&#x6309;&#x7167;CPU&#x6392;&#x5E8F;<br><img src="img/shell_&#x9AD8;&#x7EA7;&#x7BC7;_20220915234243.png" alt="">  </li>
<li>&#x6B64;&#x65F6;&#x8981;&#x7528;read, &#x4ECE;stdin&#x8BFB;&#x6BCF;&#x4E00;&#x884C;, &#x7136;&#x540E;&#x5BF9;&#x8BE5;&#x884C;&#x6392;&#x5E8F;</li>
<li>xargs -n1&#x5B9E;&#x9645;&#x4E0A;&#x662F;&#x5BF9;&#x6BCF;&#x4E2A;&#x5B57;&#x6BB5;&#x52A0;&#x56DE;&#x8F66;, &#x56E0;&#x4E3A;&#x9ED8;&#x8BA4;&#x7684;xargs&#x4F1A;&#x5BF9;&#x6BCF;&#x4E2A;&#x8F93;&#x5165;&#x505A;echo</li>
<li>sort&#x662F;&#x6309;&#x884C;&#x5DE5;&#x4F5C;&#x7684;, &#x524D;&#x9762;&#x7684;xargs&#x7684;&#x8F93;&#x51FA;&#x5C31;&#x662F;&#x591A;&#x884C;</li>
<li>&#x6700;&#x540E;&#x7684;xargs&#x628A;&#x6392;&#x597D;&#x5E8F;&#x7684;&#x591A;&#x884C;&#x8F93;&#x51FA;&#x8FD8;&#x539F;&#x6210;&#x4E00;&#x884C;</li>
</ul>
<p>&#x6700;&#x540E;&#x7684;&#x8F93;&#x51FA;:<br><img src="img/shell_&#x9AD8;&#x7EA7;&#x7BC7;_20220915234300.png" alt="">  </p>
<h3 id="&#x6539;&#x8FDB;&#x7248;"><a name="&#x6539;&#x8FDB;&#x7248;" class="anchor-navigation-ex-anchor" href="#&#x6539;&#x8FDB;&#x7248;"><i class="fa fa-link" aria-hidden="true"></i></a>9.3.1. &#x6539;&#x8FDB;&#x7248;</h3>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">(echo time switch_hwa_app vonu xpon_hwa_app xponhwadp &amp;&amp; cat top.log | awk &apos;/GMT/{printf &quot;\n&quot;$4} /run\/switch_hwa_app/{printf(&quot; switch_hwa_app&gt;%s&quot;,$8)} /run\/xpon_hwa_app/{printf(&quot; xpon_hwa_app&gt;%s&quot;,$8)} /run\/xponhwadp/{printf(&quot; xponhwadp&gt;%s&quot;,$8)} /vONU-PoC-1 -skipav yes/{printf(&quot; vonu&gt;%s&quot;,$8)}&apos; | while read line; do echo $line | xargs -n1 | sort | xargs; done | tr &quot;&gt;&quot; &quot; &quot; | awk &apos;{printf(&quot;%s %s %s %s %s\n&quot;, $1, $3, $5, $7, $9)}&apos; ) &gt; top.csv
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<ul>
<li>&#x7528;()&#x62EC;&#x8D77;&#x6765;echo&#x548C;&#x540E;&#x9762;&#x7684;&#x5904;&#x7406;, &#x5426;&#x5219;echo&#x4E0D;&#x4F1A;&#x91CD;&#x5B9A;&#x5411;&#x5230;top.csv</li>
</ul>
<h1 id="&#x7528;tr&#x5904;&#x7406;&#x591A;&#x4F59;&#x5B57;&#x7B26;"><a name="&#x7528;tr&#x5904;&#x7406;&#x591A;&#x4F59;&#x5B57;&#x7B26;" class="anchor-navigation-ex-anchor" href="#&#x7528;tr&#x5904;&#x7406;&#x591A;&#x4F59;&#x5B57;&#x7B26;"><i class="fa fa-link" aria-hidden="true"></i></a>10. &#x7528;tr&#x5904;&#x7406;&#x591A;&#x4F59;&#x5B57;&#x7B26;</h1>
<p><img src="img/shell_&#x9AD8;&#x7EA7;&#x7BC7;_20220915234334.png" alt=""><br>&#x539F;&#x59CB;&#x6587;&#x4EF6;&#x662F;&#x5E26;^M&#x5B57;&#x7B26;&#x7684;, &#x5B83;&#x5B9E;&#x9645;&#x4E0A;&#x662F;windows&#x7684;<code>\r</code></p>
<blockquote>
<p><code>(to get ^M type CTRL+V followed by CTRL+M i.e. don&#x2019;t just type the carat symbol and a capital M. It will not work)</code></p>
</blockquote>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">#&#x91CD;&#x70B9;&#x662F;tr -d, &#x628A;&#x4E24;&#x8FB9;&#x7684;&#x65B9;&#x62EC;&#x53F7;&#x5220;&#x6389;, &#x628A;\r&#x5220;&#x6389;
cat onustatus.log | tr -d &apos;[]\r&apos; | awk &apos;/onustatus/{printf $6 &quot; &quot;} /ONUs done/{print $3}&apos;
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<h1 id="&#x4E00;&#x6B21;shell&#x91CD;&#x5B9A;&#x5411;&#x8FC7;&#x7A0B;"><a name="&#x4E00;&#x6B21;shell&#x91CD;&#x5B9A;&#x5411;&#x8FC7;&#x7A0B;" class="anchor-navigation-ex-anchor" href="#&#x4E00;&#x6B21;shell&#x91CD;&#x5B9A;&#x5411;&#x8FC7;&#x7A0B;"><i class="fa fa-link" aria-hidden="true"></i></a>11. &#x4E00;&#x6B21;shell&#x91CD;&#x5B9A;&#x5411;&#x8FC7;&#x7A0B;</h1>
<p>&#x7528;strace&#x89C2;&#x5BDF;&#x4E00;&#x4E2A;&#x91CD;&#x5B9A;&#x5411;&#x7684;&#x8FC7;&#x7A0B;:
<code>strace bash -c &quot;echo 5555 &gt; testpipe&quot;</code>
&#x8FD9;&#x91CC;&#x7684;testpipe&#x662F;&#x4E2A;&#x6709;&#x540D;&#x7BA1;&#x9053;, &#x7528;<code>mkfifo testpipe&#x751F;&#x6210;&#x7684;</code>
&#x6CE8;&#x610F;, &#x6211;&#x7528;&#x4E86;&apos;bash -c&apos;&#x547D;&#x4EE4;, &#x610F;&#x601D;&#x662F;&#x65B0;&#x8D77;&#x4E00;&#x4E2A;bash&#x8FDB;&#x7A0B;&#x6765;&#x6267;&#x884C;<code>-c</code>&#x540E;&#x9762;&#x7684;&#x547D;&#x4EE4;, &#x76EE;&#x7684;&#x662F;&#x89C2;&#x5BDF;bash&#x600E;&#x4E48;&#x5904;&#x7406;&#x91CD;&#x5B9A;&#x5411;&#x7684;.
&#x4E0D;&#x52A0;&apos;bash -c&apos;&#x662F;&#x770B;&#x4E0D;&#x5230;&#x8FD9;&#x4E2A;&#x8FC7;&#x7A0B;&#x7684;.</p>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">#&#x672C;bash&#x6267;&#x884C;&#x53E6;&#x5916;&#x4E00;&#x4E2A;bash, &#x4ECE;&#x8FD9;&#x91CC;&#x5230;&#x7ED3;&#x675F;&#x90FD;&#x6CA1;&#x6709;&#x518D;&#x6B21;exec bash
execve(&quot;/bin/bash&quot;, [&quot;bash&quot;, &quot;-c&quot;, &quot;echo 5555 &gt; testpipe&quot;]
#&#x7701;&#x7565;&#x52A8;&#x6001;&#x5E93;&#x52A0;&#x8F7D;&#x8FC7;&#x7A0B;, &#x7701;&#x7565;brk &#x548C;mmap&#x8FC7;&#x7A0B;, &#x7701;&#x7565;&#x6302;&#x8F7D;sighandler&#x8FC7;&#x7A0B;
...

#&#x8FDB;&#x5165;&#x4E3B;&#x9898;
# &#x6253;&#x5F00;testpipe, fd&#x662F;3
openat(AT_FDCWD, &quot;testpipe&quot;, O_WRONLY|O_CREAT|O_TRUNC, 0666) = 3
fcntl(1, F_GETFD)                       = 0
#&#x4FDD;&#x5B58;&#x73B0;&#x5728;&#x7684;fd1, &#x5230;fd10
fcntl(1, F_DUPFD, 10)                   = 10
fcntl(1, F_GETFD)                       = 0
#&#x5982;&#x679C;&#x540E;&#x9762;&#x8C03;&#x7528;&#x4E86;exec, &#x5219;exec&#x51FA;&#x7684;&#x5B50;&#x8FDB;&#x7A0B;&#x4E0D;&#x7EE7;&#x627F;fd10; &#x6362;&#x53E5;&#x8BDD;&#x8BF4;, exec&#x6210;&#x529F;&#x540E;, fd10&#x4F1A;&#x88AB;close
#&#x8FD9;&#x4E2A;&#x4F8B;&#x5B50;&#x91CC;, &#x90FD;&#x6CA1;&#x6709;&#x518D;&#x6B21;exec&#x5B50;&#x8FDB;&#x7A0B;, &#x6240;&#x4EE5;&#x8FD9;&#x4E2A;&#x8BED;&#x53E5;&#x5B9E;&#x9645;&#x6CA1;&#x8D77;&#x5230;&#x4F5C;&#x7528;.
fcntl(10, F_SETFD, FD_CLOEXEC)          = 0
#int dup2(int oldfd, int newfd);
#&#x628A;fd3&#x590D;&#x5236;&#x5230;fd1, &#x5373;&#x73B0;&#x5728;fd1&#x5C31;&#x662F;fd3
dup2(3, 1)                              = 1
#&#x5173;&#x95ED;fd3
close(3)
write(1, &quot;5555\n&quot;, 5)                   = 5
#&#x4ECE;fd10&#x8FD8;&#x539F;fd1
dup2(10, 1)                             = 1
fcntl(10, F_GETFD)                      = 0x1 (flags FD_CLOEXEC)
close(10)                               = 0
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="shell&#x91CD;&#x5B9A;&#x5411;&#x548C;exec"><a name="shell&#x91CD;&#x5B9A;&#x5411;&#x548C;exec" class="anchor-navigation-ex-anchor" href="#shell&#x91CD;&#x5B9A;&#x5411;&#x548C;exec"><i class="fa fa-link" aria-hidden="true"></i></a>11.1. shell&#x91CD;&#x5B9A;&#x5411;&#x548C;exec</h2>
<p>&#x628A;&#x4E0A;&#x9762;&#x4F8B;&#x5B50;&#x7684;&#x547D;&#x4EE4;&#x4FEE;&#x6539;&#x4E00;&#x4E0B;, &#x628A;echo&#x6539;&#x6210;&#x5916;&#x90E8;&#x7A0B;&#x5E8F;cat, &#x7528;strace&#x7684;-f&#x9009;&#x9879;&#x8DDF;&#x8E2A;&#x5168;&#x90E8;&#x8FDB;&#x7A0B;.
<code>strace -f -o s.log bash -c &quot;cat testpipe &gt; testpipe2&quot;</code>
&#x8FC7;&#x7A0B;&#x7B80;&#x6790;&#x5982;&#x4E0B;:</p>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">#8123&#x8FDB;&#x7A0B;&#x6267;&#x884C;bash
8123  execve(&quot;/bin/bash&quot;, [&quot;bash&quot;, &quot;-c&quot;, &quot;cat testpipe &gt; testpipe2&quot;]
#&#x7701;&#x7565;&#x52A8;&#x6001;&#x5E93;&#x52A0;&#x8F7D;&#x8FC7;&#x7A0B;, &#x7701;&#x7565;brk &#x548C;mmap&#x8FC7;&#x7A0B;, &#x7701;&#x7565;&#x6302;&#x8F7D;sighandler&#x8FC7;&#x7A0B;
#&#x627E;&#x5230;cat&#x547D;&#x4EE4;
8123  access(&quot;/bin/cat&quot;, R_OK)          = 0
8123  rt_sigprocmask(SIG_BLOCK, [INT CHLD], [], 8) = 0
#clone&#x7236;&#x8FDB;&#x7A0B;
8123  clone(child_stack=NULL, flags=CLONE_CHILD_CLEARTID|CLONE_CHILD_SETTID|SIGCHLD, child_tidptr=0x7fefa27eda10) = 8124
#8123&#x8FDB;&#x5165;wait
8123  wait4(-1,  &lt;unfinished ...&gt;
#&#x7701;&#x7565;&#x5B50;&#x8FDB;&#x7A0B;&#x6302;&#x8F7D;sighandler
...
#&#x5904;&#x7406;&#x91CD;&#x5B9A;&#x5411;, &#x6253;&#x5F00;testpipe2&#x4E3A;fd3, fd3&#x590D;&#x5236;&#x5230;fd1, &#x968F;&#x5373;close fd3
8124  openat(AT_FDCWD, &quot;testpipe2&quot;, O_WRONLY|O_CREAT|O_TRUNC, 0666) = 3
8124  dup2(3, 1)                        = 1
8124  close(3)                          = 0
#&#x91CD;&#x5B9A;&#x5411;&#x53D1;&#x751F;&#x5728;exec cat&#x4E4B;&#x524D;, &#x662F;bash&#x505A;&#x7684;&#x5DE5;&#x4F5C;
#exec&#x6267;&#x884C;cat, &#x66FF;&#x6362;&#x539F;&#x8FDB;&#x7A0B;&#x7A7A;&#x95F4;
8124  execve(&quot;/bin/cat&quot;, [&quot;cat&quot;, &quot;testpipe&quot;], 0x5600ee4a38f0 /* 26 vars */) = 0
#&#x4EE5;&#x6B64;&#x8C03;&#x7528;brk&#x6269;&#x5C55;&#x5185;&#x5B58;&#x7A7A;&#x95F4;, mmap&#x7B49;, &#x88C5;&#x8F7D;so
#&#x6253;&#x5F00;&#x8981;cat&#x7684;&#x6587;&#x4EF6;
8124  openat(AT_FDCWD, &quot;testpipe&quot;, O_RDONLY) = 3
#&#x4ECE;fd3(&#x5373;testpipe)&#x8BFB;, &#x5199;&#x5230;fd1
8124  read(3, &quot;5555\n&quot;, 131072)         = 5
8124  write(1, &quot;5555\n&quot;, 5)             = 5
#&#x5173;&#x95ED;&#x76F8;&#x5173;fd
...
8124  +++ exited with 0 +++
#&#x7236;&#x8FDB;&#x7A0B;bash&#x7684;wait4&#x8FD4;&#x56DE;
8123  &lt;... wait4 resumed&gt; [{WIFEXITED(s) &amp;&amp; WEXITSTATUS(s) == 0}], 0, NULL) = 8124
#&#x7236;&#x8FDB;&#x7A0B;&#x5904;&#x7406;SIGCHLD&#x4FE1;&#x53F7;
#&#x518D;&#x6B21;wait4&#x53D1;&#x73B0;&#x6CA1;&#x6709;&#x5B50;&#x8FDB;&#x7A0B;&#x4E86;, &#x7236;&#x8FDB;&#x7A0B;&#x9000;&#x51FA;
8123  rt_sigaction(SIGINT, {sa_handler=SIG_DFL, sa_mask=[], sa_flags=SA_RESTORER, sa_restorer=0x7fefa1df5f20}, {sa_handler=0x5600edd40160, sa_mask=[], sa_flags=SA_RESTORER, sa_restorer=0x7fefa1df5f20}, 8) = 0
8123  rt_sigprocmask(SIG_SETMASK, [], NULL, 8) = 0
8123  --- SIGCHLD {si_signo=SIGCHLD, si_code=CLD_EXITED, si_pid=8124, si_uid=1003, si_status=0, si_utime=0, si_stime=0} ---
8123  wait4(-1, 0x7ffd543dca50, WNOHANG, NULL) = -1 ECHILD (No child processes)
8123  +++ exited with 0 +++
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h1 id="&#x52A8;&#x6001;&#x53D8;&#x91CF;&#x540D;&#x53CA;&#x5176;&#x5F15;&#x7528;-eval&#x7684;&#x4F7F;&#x7528;"><a name="&#x52A8;&#x6001;&#x53D8;&#x91CF;&#x540D;&#x53CA;&#x5176;&#x5F15;&#x7528;-eval&#x7684;&#x4F7F;&#x7528;" class="anchor-navigation-ex-anchor" href="#&#x52A8;&#x6001;&#x53D8;&#x91CF;&#x540D;&#x53CA;&#x5176;&#x5F15;&#x7528;-eval&#x7684;&#x4F7F;&#x7528;"><i class="fa fa-link" aria-hidden="true"></i></a>12. &#x52A8;&#x6001;&#x53D8;&#x91CF;&#x540D;&#x53CA;&#x5176;&#x5F15;&#x7528;: eval&#x7684;&#x4F7F;&#x7528;</h1>
<p>&#x6709;&#x65F6;&#x5019;, &#x6211;&#x4EEC;&#x60F3;&#x6839;&#x636E;&#x67D0;&#x4E9B;&#x6761;&#x4EF6;, &#x6765;&#x751F;&#x6210;&#x4E00;&#x4E2A;shell&#x53D8;&#x91CF;, &#x5176;&#x540D;&#x5B57;&#x53EF;&#x4EE5;&#x662F;&#x7528;&#x6237;&#x8F93;&#x5165;, &#x4E5F;&#x53EF;&#x4EE5;&#x662F;&#x4ECE;&#x6587;&#x4EF6;&#x91CC;&#x8BFB;&#x51FA;&#x6765;&#x7684;&#x67D0;&#x4E2A;&#x5B57;&#x6BB5;.
&#x7528;eval&#x53EF;&#x4EE5;&#x505A;&#x5230;</p>
<h2 id="&#x7528;eval&#x751F;&#x6210;&#x52A8;&#x6001;&#x53D8;&#x91CF;&#x540D;"><a name="&#x7528;eval&#x751F;&#x6210;&#x52A8;&#x6001;&#x53D8;&#x91CF;&#x540D;" class="anchor-navigation-ex-anchor" href="#&#x7528;eval&#x751F;&#x6210;&#x52A8;&#x6001;&#x53D8;&#x91CF;&#x540D;"><i class="fa fa-link" aria-hidden="true"></i></a>12.1. &#x7528;eval&#x751F;&#x6210;&#x52A8;&#x6001;&#x53D8;&#x91CF;&#x540D;</h2>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">#option&#x7684;&#x503C;&#x53EF;&#x4EE5;&#x4ECE;&#x4EFB;&#x4F55;&#x5730;&#x65B9;, &#x6BD4;&#x5982;&#x53D6;&#x81EA;&#x6587;&#x4EF6;&#x540D;
option=vendor_name
#&#x8FD9;&#x4E2A;&#x503C;&#x88AB;eval&#x540E;, &#x6210;&#x4E3A;&#x4E86;&#x65B0;&#x7684;&#x53D8;&#x91CF;&#x540D;. &#x5728;&#x5F53;&#x524D;shell&#x5C31;&#x6709;&#x6548;.
eval $option=my_vendor
echo $vendor_name
#&#x8F93;&#x51FA;
my_vendor
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>&#x6CE8;&#x610F;:</p>
<ul>
<li>&#x4E0D;&#x52A0;eval&#x662F;&#x4E0D;&#x884C;&#x7684;:</li>
</ul>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">$ $option=my_vendor
vendor_name=my_vendor: command not found
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<ul>
<li>eval&#x540E;&#x9762;&#x6709;&#x7A7A;&#x683C;&#x4E0D;&#x884C;, &#x9664;&#x975E;&#x52A0;&#x4E24;&#x5C42;&#x5F15;&#x53F7;, &#x5148;&#x5355;&#x540E;&#x53CC;</li>
</ul>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">$ eval $option=my vendor
vendor: command not found

$ eval $option=&apos;my vendor&apos;
vendor: command not found

$ eval $option=&quot;&apos;my vendor&apos;&quot;
byj@byj-envy-notebook ~/tmp/uaes
$ echo $vendor_name
my vendor
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="&#x95F4;&#x63A5;&#x5F15;&#x7528;&#x53D8;&#x91CF;"><a name="&#x95F4;&#x63A5;&#x5F15;&#x7528;&#x53D8;&#x91CF;" class="anchor-navigation-ex-anchor" href="#&#x95F4;&#x63A5;&#x5F15;&#x7528;&#x53D8;&#x91CF;"><i class="fa fa-link" aria-hidden="true"></i></a>12.2. &#x95F4;&#x63A5;&#x5F15;&#x7528;&#x53D8;&#x91CF;</h2>
<p>&#x53D8;&#x91CF;&#x662F;&#x52A8;&#x6001;&#x751F;&#x6210;&#x7684;&#x65F6;&#x5019;, &#x6211;&#x4EEC;&#x5728;&#x5199;&#x811A;&#x672C;&#x7684;&#x5F53;&#x4E0B;, &#x662F;&#x4E0D;&#x77E5;&#x9053;&#x5177;&#x4F53;&#x7684;&#x53D8;&#x91CF;&#x540D;&#x7684;, &#x5C31;&#x6CA1;&#x529E;&#x6CD5;&#x76F4;&#x63A5;&#x5F15;&#x7528;.
&#x8981;&#x95F4;&#x63A5;&#x5F15;&#x7528;, &#x7528;<code>${!var}</code>&#x7684;&#x683C;&#x5F0F;</p>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">dvar=hello
var=dvar
echo ${!var}
#&#x8F93;&#x51FA;
hello

#&#x7528;eval&#x4E5F;&#x884C;, $var&#x5148;&#x88AB;&#x66FF;&#x6362;&#x4E3A;dvar, &#x8F6C;&#x4E49;$&#x518D;&#x4F20;&#x5165;eval
eval &quot;echo \${$var}&quot;
#&#x8FD9;&#x6837;&#x5199;&#x4E0D;&#x884C;
$ echo ${$var}
bash: ${$var}: bad substitution
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="&#x4E3E;&#x4F8B;-&#x8BFB;&#x51FA;conf&#x6587;&#x4EF6;&#x5185;&#x5BB9;&#x5230;&#x52A8;&#x6001;&#x6587;&#x4EF6;&#x540D;&#x53D8;&#x91CF;"><a name="&#x4E3E;&#x4F8B;-&#x8BFB;&#x51FA;conf&#x6587;&#x4EF6;&#x5185;&#x5BB9;&#x5230;&#x52A8;&#x6001;&#x6587;&#x4EF6;&#x540D;&#x53D8;&#x91CF;" class="anchor-navigation-ex-anchor" href="#&#x4E3E;&#x4F8B;-&#x8BFB;&#x51FA;conf&#x6587;&#x4EF6;&#x5185;&#x5BB9;&#x5230;&#x52A8;&#x6001;&#x6587;&#x4EF6;&#x540D;&#x53D8;&#x91CF;"><i class="fa fa-link" aria-hidden="true"></i></a>12.3. &#x4E3E;&#x4F8B;: &#x8BFB;&#x51FA;*.conf&#x6587;&#x4EF6;&#x5185;&#x5BB9;&#x5230;&#x52A8;&#x6001;&#x6587;&#x4EF6;&#x540D;&#x53D8;&#x91CF;</h2>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">for f in *.conf;do eval ${f%.conf}=&apos;`cat $f`&apos;;done
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h2 id="uaes&#x8FDB;&#x7A0B;&#x7BA1;&#x7406;-&#x5173;&#x7CFB;&#x6570;&#x7EC4;&#x65B9;&#x5F0F;&#x5B9E;&#x73B0;"><a name="uaes&#x8FDB;&#x7A0B;&#x7BA1;&#x7406;-&#x5173;&#x7CFB;&#x6570;&#x7EC4;&#x65B9;&#x5F0F;&#x5B9E;&#x73B0;" class="anchor-navigation-ex-anchor" href="#uaes&#x8FDB;&#x7A0B;&#x7BA1;&#x7406;-&#x5173;&#x7CFB;&#x6570;&#x7EC4;&#x65B9;&#x5F0F;&#x5B9E;&#x73B0;"><i class="fa fa-link" aria-hidden="true"></i></a>12.4. uaes&#x8FDB;&#x7A0B;&#x7BA1;&#x7406;, &#x5173;&#x7CFB;&#x6570;&#x7EC4;&#x65B9;&#x5F0F;&#x5B9E;&#x73B0;</h2>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">#! /bin/bash
StartProcess() {
    echo Starting process [$1] ...Done
}
StopProcess() {
    echo Stoping process [$1] ...Done
}
GetTargetState() {
    cat msgfifo
}
ReportState() {
    echo $1 &gt; rplfifo
}
stopList=&quot;&quot;
AddToStopList() {
    stopList=&quot;$1 $stopList&quot;
}
DoStopList() {
    for p in $stopList; do
        StopProcess $p
    done
    stopList=&quot;&quot;
}
declare -A processes
SwitchState(){
    local from=$1
    local to=$2
    if test -z &quot;$from&quot;; then
        from=null
        processes[$from]=&quot;&quot;
    elif test -z &quot;${processes[$from]}&quot;; then
        processes[$from]=$(cat ${from}.conf)
        echo Loading ${from}.conf ...Done
    fi
    if test -z &quot;${processes[$to]}&quot;; then
        processes[$to]=$(cat ${to}.conf)
        echo Loading ${to}.conf ...Done
    fi
    OLDIFS=$IFS

    IFS=$&apos;\n&apos;
    for p in ${processes[$from]}; do
        if [[ &quot;${processes[$to]}&quot; != *&quot;$p&quot;* ]]; then
            IFS=$OLDIFS
            #StopProcess $p
            AddToStopList $p
        fi
    done
    DoStopList
    IFS=$&apos;\n&apos;
    for p in ${processes[$to]}; do
        if [[ &quot;${processes[$from]}&quot; != *&quot;$p&quot;* ]]; then
            StartProcess &quot;$p&quot;
        fi
    done
    IFS=$OLDIFS
}
if ! test -e IDL.conf; then
    echo Please add IDL.conf first!
    exit 1
fi
SwitchState &quot;&quot; IDL
current=IDL
echo Initial state $current running ...
while true; do
    target=$(GetTargetState)
    if test &quot;$target&quot; = &quot;$current&quot;; then
        echo Keep state $current unchanged
        continue
    fi
    if test -e ${target}.conf; then
        echo Switching state from $current to $target ...
        echo &quot;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&quot;
        SwitchState $current $target
    else
        echo File ${target}.conf not found!
        continue
    fi
    current=$target
    ReportState $current
    if test &quot;$current&quot; = &quot;DOWN&quot;; then
        echo ========Shutdown. 
        exit 1
    fi
    echo Running in state $current ..
done
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h1 id="&#x5224;&#x65AD;&#x5B57;&#x4E32;&#x662F;&#x5426;&#x5305;&#x542B;&#x5B57;&#x4E32;"><a name="&#x5224;&#x65AD;&#x5B57;&#x4E32;&#x662F;&#x5426;&#x5305;&#x542B;&#x5B57;&#x4E32;" class="anchor-navigation-ex-anchor" href="#&#x5224;&#x65AD;&#x5B57;&#x4E32;&#x662F;&#x5426;&#x5305;&#x542B;&#x5B57;&#x4E32;"><i class="fa fa-link" aria-hidden="true"></i></a>13. &#x5224;&#x65AD;&#x5B57;&#x4E32;&#x662F;&#x5426;&#x5305;&#x542B;&#x5B57;&#x4E32;</h1>
<p>&#x5224;&#x65AD;&#x4E00;&#x4E2A;&#x5B57;&#x7B26;&#x4E32;&#x662F;&#x5426;&#x5305;&#x542B;&#x4E00;&#x4E2A;&#x5B57;&#x4E32;
&#x6CE8;&#x610F;, <strong>&#x4E0D;&#x5E26;&#x901A;&#x914D;&#x7B26;&#x7684;&#x5FC5;&#x987B;&#x5728;&#x5224;&#x65AD;&#x7684;&#x5DE6;&#x8FB9;</strong>; &#x5426;&#x5219;&#x6C38;&#x8FDC;&#x4E3A;false</p>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">if [[ &quot;$str&quot; == *&quot;$substr&quot;* ]]; then
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h1 id="exec&#x91CD;&#x5B9A;&#x5411;"><a name="exec&#x91CD;&#x5B9A;&#x5411;" class="anchor-navigation-ex-anchor" href="#exec&#x91CD;&#x5B9A;&#x5411;"><i class="fa fa-link" aria-hidden="true"></i></a>14. exec&#x91CD;&#x5B9A;&#x5411;</h1>
<p>&#x5BF9;&#x67D0;&#x4E2A;&#x547D;&#x4EE4;&#x7684;&#x91CD;&#x5B9A;&#x5411;&#x5F88;&#x5E38;&#x89C1;, &#x6BD4;&#x5982;
<code>cat &lt; README</code> : cat&#x4ECE;stdin&#x8BFB;&#x53D6;&#x5B57;&#x7B26;, &#x5E76;&#x663E;&#x793A;&#x5230;stdou&#x4E0A;. &#x8FD9;&#x91CC;&#x7528;README&#x6587;&#x4EF6;&#x91CD;&#x5B9A;&#x5411;&#x5230;stdin
&#x5F53;&#x7136;&#x76F4;&#x63A5;<code>cat README</code>&#x4E5F;&#x662F;&#x53EF;&#x4EE5;&#x7684;, &#x56E0;&#x4E3A;cat&#x547D;&#x4EE4;&#x540E;&#x9762;&#x5E26;&#x6587;&#x4EF6;&#x540D;, &#x5B83;&#x4F1A;&#x6253;&#x5F00;&#x8FD9;&#x4E2A;&#x6587;&#x4EF6;&#x4F5C;&#x4E3A;&#x8F93;&#x5165;.&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x5B83;&#x4E0D;&#x4ECE;stdin&#x8BFB;&#x53D6;&#x4E1C;&#x897F;, &#x548C;&#x91CD;&#x5B9A;&#x5411;&#x6CA1;&#x5173;&#x7CFB;.</p>
<p>&#x90A3;&#x8FD9;&#x91CC;&#x8BF4;&#x7684;&#x662F;&#x5BF9;&#x6574;&#x4E2A;&#x811A;&#x672C;&#x91CD;&#x5B9A;&#x5411;. &#x8981;&#x7528;&#x5230;shell&#x7684;&#x5185;&#x7F6E;&#x547D;&#x4EE4;<code>exec</code></p>
<h2 id="&#x5728;shell&#x91CC;&#x76F4;&#x63A5;&#x91CD;&#x5B9A;&#x5411;stdin"><a name="&#x5728;shell&#x91CC;&#x76F4;&#x63A5;&#x91CD;&#x5B9A;&#x5411;stdin" class="anchor-navigation-ex-anchor" href="#&#x5728;shell&#x91CC;&#x76F4;&#x63A5;&#x91CD;&#x5B9A;&#x5411;stdin"><i class="fa fa-link" aria-hidden="true"></i></a>14.1. &#x5728;shell&#x91CC;&#x76F4;&#x63A5;&#x91CD;&#x5B9A;&#x5411;stdin</h2>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">#&#x65B0;&#x5EFA;fd6(&#x6216;&#x91CD;&#x65B0;&#x6253;&#x5F00;), &#x590D;&#x5236;fd0&#x7ED9;fd6, &#x7BAD;&#x5934;&#x8868;&#x793A;fd&#x662F;&#x53EA;&#x8BFB;&#x7684;
#&#x4E5F;&#x53EF;&#x4EE5;&#x7406;&#x89E3;&#x6210;Link file descriptor #6 with stdin
#&#x8FD9;&#x91CC;&#x7684;&#x610F;&#x601D;&#x662F;, &#x628A;fd0&#x4FDD;&#x5B58;&#x5230;&#x65B0;&#x5EFA;&#x7684;fd6&#x4E2D;. &#x5355;&#x72EC;&#x7528;&#x8FD9;&#x4E2A;&#x6CA1;&#x4EC0;&#x4E48;&#x610F;&#x601D;
exec 6&lt;&amp;0

#&#x4ECE;&#x8FD9;&#x91CC;&#x5F00;&#x59CB;, stdin&#x5C31;&#x662F;data-file&#x4E86;
exec &lt; data-file

#&#x4ECE;data-file&#x91CC;&#x8BFB;&#x4E24;&#x884C;, &#x8D4B;&#x503C;&#x7ED9;a1 a2
read a1
read a2

#&#x628A;fd6&#x8D4B;&#x503C;&#x7ED9;fd0. &#x5373;&#x8FD8;&#x539F;fd0, &#x8BA9;&#x5B83;&#x8FD8;&#x539F;&#x4E3A;stdin
#6&lt;&amp;-&#x7684;&#x610F;&#x601D;&#x662F;&#x628A;&#x7A7A;fd&#x8D4B;&#x503C;&#x7ED9;fd6, &#x5373;&#x5173;&#x95ED;fd6
exec 0&lt;&amp;6 6&lt;&amp;-&#x7684;&#x610F;&#x601D;&#x662F;&#x628A;&#x7A7A;fd&#x8D4B;&#x503C;&#x7ED9;fd6, &#x5373;&#x5173;&#x95ED;fd6
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>&#x5B8C;&#x6574;&#x4F8B;&#x5B50;</p>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">#!/bin/bash
# Redirecting stdin using &apos;exec&apos;.

#&#x65B0;&#x5EFA;fd6(&#x6216;&#x91CD;&#x65B0;&#x6253;&#x5F00;), &#x590D;&#x5236;fd0&#x7ED9;fd6, &#x7BAD;&#x5934;&#x8868;&#x793A;fd&#x662F;&#x53EA;&#x8BFB;&#x7684;
exec 6&lt;&amp;0          # Link file descriptor #6 with stdin.
                   # Saves stdin.

exec &lt; data-file   # stdin replaced by file &quot;data-file&quot;

read a1            # Reads first line of file &quot;data-file&quot;.
read a2            # Reads second line of file &quot;data-file.&quot;

echo
echo &quot;Following lines read from file.&quot;
echo &quot;-------------------------------&quot;
echo $a1
echo $a2

echo; echo; echo

exec 0&lt;&amp;6 6&lt;&amp;-
#  Now restore stdin from fd #6, where it had been saved,
#+ and close fd #6 ( 6&lt;&amp;- ) to free it for other processes to use.
#
# &lt;&amp;6 6&lt;&amp;-    also works.

echo -n &quot;Enter data  &quot;
read b1  # Now &quot;read&quot; functions as expected, reading from normal stdin.
echo &quot;Input read from stdin.&quot;
echo &quot;----------------------&quot;
echo &quot;b1 = $b1&quot;

echo

exit 0
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="&#x91CD;&#x5B9A;&#x5411;&#x6574;&#x4E2A;shell&#x7684;stdout"><a name="&#x91CD;&#x5B9A;&#x5411;&#x6574;&#x4E2A;shell&#x7684;stdout" class="anchor-navigation-ex-anchor" href="#&#x91CD;&#x5B9A;&#x5411;&#x6574;&#x4E2A;shell&#x7684;stdout"><i class="fa fa-link" aria-hidden="true"></i></a>14.2. &#x91CD;&#x5B9A;&#x5411;&#x6574;&#x4E2A;shell&#x7684;stdout</h2>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">#&#x65B0;&#x5EFA;fd6(&#x6216;&#x91CD;&#x65B0;&#x6253;&#x5F00;), &#x590D;&#x5236;fd1&#x7ED9;fd6, &#x7BAD;&#x5934;&#x8868;&#x793A;fd&#x662F;&#x53EA;&#x5199;. &#x5E76;&#x4E0D;&#x662F;&#x628A;6&#x8D4B;&#x503C;&#x7ED9;1
#&#x8FD9;&#x91CC;&#x7684;&#x610F;&#x601D;&#x662F;&#x4FDD;&#x5B58;fd1&#x5230;fd6, &#x5373;&#x4FDD;&#x5B58;&#x539F;&#x59CB;&#x7684;stdout
exec 6&gt;&amp;1

#&#x4ECE;&#x8FD9;&#x91CC;&#x5F00;&#x59CB;, &#x8F93;&#x51FA;&#x53D8;&#x4E3A;logfile.txt
exec &gt; logfile.txt
#&#x8F93;&#x51FA;
echo xxx
...

#&#x4ECE;fd6&#x8FD8;&#x539F;fd1, &#x5373;&#x8FD8;&#x539F;&#x539F;&#x59CB;&#x7684;stdout.
#&#x5E76;&#x5173;&#x95ED;fd6
exec 1&gt;&amp;6 6&gt;&amp;-
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>&#x5B8C;&#x6574;&#x4F8B;&#x5B50;</p>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">#!/bin/bash
# reassign-stdout.sh

LOGFILE=logfile.txt

# &#x65B0;&#x5EFA;fd6(&#x6216;&#x91CD;&#x65B0;&#x6253;&#x5F00;), &#x590D;&#x5236;fd1&#x7ED9;fd6, &#x7BAD;&#x5934;&#x8868;&#x793A;fd&#x662F;&#x53EA;&#x5199;. &#x5E76;&#x4E0D;&#x662F;&#x628A;6&#x8D4B;&#x503C;&#x7ED9;1
exec 6&gt;&amp;1           # Link file descriptor #6 with stdout.
                    # Saves stdout.

exec &gt; $LOGFILE     # stdout replaced with file &quot;logfile.txt&quot;.

# ----------------------------------------------------------- #
# All output from commands in this block sent to file $LOGFILE.

echo -n &quot;Logfile: &quot;
date
echo &quot;-------------------------------------&quot;
echo

echo &quot;Output of \&quot;ls -al\&quot; command&quot;
echo
ls -al
echo; echo
echo &quot;Output of \&quot;df\&quot; command&quot;
echo
df

# ----------------------------------------------------------- #

exec 1&gt;&amp;6 6&gt;&amp;-      # Restore stdout and close file descriptor #6.

echo
echo &quot;== stdout now restored to default == &quot;
echo
ls -al
echo

exit 0
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="&#x8F93;&#x5165;&#x548C;&#x8F93;&#x51FA;&#x7684;&#x4F8B;&#x5B50;"><a name="&#x8F93;&#x5165;&#x548C;&#x8F93;&#x51FA;&#x7684;&#x4F8B;&#x5B50;" class="anchor-navigation-ex-anchor" href="#&#x8F93;&#x5165;&#x548C;&#x8F93;&#x51FA;&#x7684;&#x4F8B;&#x5B50;"><i class="fa fa-link" aria-hidden="true"></i></a>14.3. &#x8F93;&#x5165;&#x548C;&#x8F93;&#x51FA;&#x7684;&#x4F8B;&#x5B50;</h2>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">#!/bin/bash
# upperconv.sh
# Converts a specified input file to uppercase.

E_FILE_ACCESS=70
E_WRONG_ARGS=71

if [ ! -r &quot;$1&quot; ]     # Is specified input file readable?
then
  echo &quot;Can&apos;t read from input file!&quot;
  echo &quot;Usage: $0 input-file output-file&quot;
  exit $E_FILE_ACCESS
fi                   #  Will exit with same error
                     #+ even if input file ($1) not specified (why?).

if [ -z &quot;$2&quot; ]
then
  echo &quot;Need to specify output file.&quot;
  echo &quot;Usage: $0 input-file output-file&quot;
  exit $E_WRONG_ARGS
fi


exec 4&lt;&amp;0
exec &lt; $1            # Will read from input file.

exec 7&gt;&amp;1
exec &gt; $2            # Will write to output file.
                     # Assumes output file writable (add check?).

# -----------------------------------------------
    cat - | tr a-z A-Z   # Uppercase conversion.
#   ^^^^^                # Reads from stdin.
#           ^^^^^^^^^^   # Writes to stdout.
# However, both stdin and stdout were redirected.
# Note that the &apos;cat&apos; can be omitted.
# -----------------------------------------------

exec 1&gt;&amp;7 7&gt;&amp;-       # Restore stout.
exec 0&lt;&amp;4 4&lt;&amp;-       # Restore stdin.

# After restoration, the following line prints to stdout as expected.
echo &quot;File \&quot;$1\&quot; written to \&quot;$2\&quot; as uppercase conversion.&quot;

exit 0
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="crosstool-ng&#x7684;&#x4F8B;&#x5B50;"><a name="crosstool-ng&#x7684;&#x4F8B;&#x5B50;" class="anchor-navigation-ex-anchor" href="#crosstool-ng&#x7684;&#x4F8B;&#x5B50;"><i class="fa fa-link" aria-hidden="true"></i></a>14.4. crosstool ng&#x7684;&#x4F8B;&#x5B50;</h2>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh"># Log policy:
#  - first of all, save stdout so we can see the live logs: fd #6
#    (also save stdin and stderr for use by CT_DEBUG_INTERACTIVE)
#    FIXME: it doesn&apos;t look like anyone is overriding stdin/stderr. Do we need
#    to save/restore them?
CT_LogEnable() {
        local clean=no
        local arg

        for arg in &quot;$@&quot;; do eval &quot;$arg&quot;; done
        #&#x590D;&#x5236;1&#x5230;6, 2&#x5230;7, 0&#x5230;8&#xFF1B;&#x7BAD;&#x5934;&#x53EA;&#x8868;&#x793A;&#x8F93;&#x5165;&#x8FD8;&#x662F;&#x8F93;&#x51FA;
        exec 6&gt;&amp;1 7&gt;&amp;2 8&lt;&amp;0
        CT_BUILD_LOG=&quot;${CT_TOP_DIR}/build.log&quot;
        CT_LOG_ENABLED=y
     if [ &quot;$clean&quot; = &quot;yes&quot; ]; then
                rm -f &quot;${CT_BUILD_LOG}&quot;
        fi
        exec &gt;&gt;&quot;${CT_BUILD_LOG}&quot;
}

# Restore original stdout, stderr and stdin
CT_LogDisable() {
        exec &gt;&amp;6 2&gt;&amp;7 &lt;&amp;8
        CT_LOG_ENABLED=
}
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="&#x8865;&#x5145;-test&#x53EF;&#x4EE5;&#x68C0;&#x6D4B;fd&#x662F;&#x5426;&#x662F;terminal"><a name="&#x8865;&#x5145;-test&#x53EF;&#x4EE5;&#x68C0;&#x6D4B;fd&#x662F;&#x5426;&#x662F;terminal" class="anchor-navigation-ex-anchor" href="#&#x8865;&#x5145;-test&#x53EF;&#x4EE5;&#x68C0;&#x6D4B;fd&#x662F;&#x5426;&#x662F;terminal"><i class="fa fa-link" aria-hidden="true"></i></a>14.5. &#x8865;&#x5145;: test&#x53EF;&#x4EE5;&#x68C0;&#x6D4B;FD&#x662F;&#x5426;&#x662F;terminal</h2>
<pre class="line-numbers language-undefined"><code class=" language-undefined">test -t FD 
-t FD          True if FD is opened on a terminal.
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h1 id="shell&#x8BFB;&#x5199;socket"><a name="shell&#x8BFB;&#x5199;socket" class="anchor-navigation-ex-anchor" href="#shell&#x8BFB;&#x5199;socket"><i class="fa fa-link" aria-hidden="true"></i></a>15. shell&#x8BFB;&#x5199;socket</h1>
<p>&#x7528;nc&#x547D;&#x4EE4;&#x53EF;&#x4EE5;&#x65B9;&#x4FBF;&#x7684;&#x8BFB;&#x5199;socket
&#x5176;&#x5B9E;shell&#x8FD8;&#x6709;&#x66F4;&#x7B80;&#x5355;&#x7684;&#x65B9;&#x6CD5;:
&#x5728;&#x4E00;&#x4E2A;&#x7A97;&#x53E3;&#x91CC;, &#x7528;nc&#x76D1;&#x542C;&#x4E00;&#x4E2A;&#x7AEF;&#x53E3;
<code>nc -l 1985</code></p>
<p>&#x5728;&#x53E6;&#x5916;&#x4E00;&#x4E2A;&#x7A97;&#x53E3;&#x91CC;</p>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">#&#x7528;socket&#x505A;&#x6587;&#x4EF6;fd 3
exec 3&lt;&gt;/dev/tcp/localhost/1985
#&#x8BFB;
echo 111 &gt;&amp;3
#&#x5199;
cat &lt;&amp;3
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><img src="img/shell_&#x9AD8;&#x7EA7;&#x7BC7;_20220915234532.png" alt="">  </p>
<h2 id="&#x66F4;&#x7B80;&#x5355;&#x7684;&#x5199;&#x6CD5;"><a name="&#x66F4;&#x7B80;&#x5355;&#x7684;&#x5199;&#x6CD5;" class="anchor-navigation-ex-anchor" href="#&#x66F4;&#x7B80;&#x5355;&#x7684;&#x5199;&#x6CD5;"><i class="fa fa-link" aria-hidden="true"></i></a>15.1. &#x66F4;&#x7B80;&#x5355;&#x7684;&#x5199;&#x6CD5;</h2>
<p>&#x5728;&#x53E6;&#x4E00;&#x4E2A;&#x7A97;&#x53E3;&#x91CC;
<code>echo 111 &gt; /dev/tcp/localhost/1985</code>
&#x76F4;&#x63A5;&#x5C31;&#x53EF;&#x4EE5;&#x53D1;&#x9001;. &#x4F46;&#x524D;&#x63D0;&#x662F;1985&#x7AEF;&#x53E3;&#x6709;&#x4EBA;&#x76D1;&#x542C;.
&#x5982;&#x679C;&#x5BF9;&#x7AEF;&#x6CA1;&#x6709;&#x76D1;&#x542C;, &#x4F1A;&#x51FA;&#x73B0;<code>Connection refused</code></p>
<h2 id="devtcp&#x662F;shell&#x5185;&#x5EFA;&#x7684;&#x8BBE;&#x5907;&#x8282;&#x70B9;"><a name="devtcp&#x662F;shell&#x5185;&#x5EFA;&#x7684;&#x8BBE;&#x5907;&#x8282;&#x70B9;" class="anchor-navigation-ex-anchor" href="#devtcp&#x662F;shell&#x5185;&#x5EFA;&#x7684;&#x8BBE;&#x5907;&#x8282;&#x70B9;"><i class="fa fa-link" aria-hidden="true"></i></a>15.2. /dev/tcp&#x662F;shell&#x5185;&#x5EFA;&#x7684;&#x8BBE;&#x5907;&#x8282;&#x70B9;</h2>
<p>&#x8FD9;&#x4E2A;&#x8282;&#x70B9;&#x5728;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x91CC;&#x662F;&#x6CA1;&#x6709;&#x7684;. &#x8FD9;&#x662F;shell&#x63D0;&#x4F9B;&#x7684;&#x8BBF;&#x95EE;socket&#x7684;&#x65B9;&#x6CD5;.</p>
<h1 id="shell&#x8FDB;&#x7A0B;&#x95F4;&#x901A;&#x4FE1;"><a name="shell&#x8FDB;&#x7A0B;&#x95F4;&#x901A;&#x4FE1;" class="anchor-navigation-ex-anchor" href="#shell&#x8FDB;&#x7A0B;&#x95F4;&#x901A;&#x4FE1;"><i class="fa fa-link" aria-hidden="true"></i></a>16. shell&#x8FDB;&#x7A0B;&#x95F4;&#x901A;&#x4FE1;</h1>
<p>&#x6211;&#x4EEC;&#x7ECF;&#x5E38;&#x7528;&#x7684;&#x7BA1;&#x9053;&#x5C31;&#x662F;shell&#x8FDB;&#x7A0B;&#x95F4;&#x901A;&#x4FE1;&#x7684;&#x4E00;&#x79CD;:
&#x6BD4;&#x5982;<code>ls | grep txt</code>
&#x8FD9;&#x662F;&#x533F;&#x540D;&#x7BA1;&#x9053;.</p>
<p>&#x8FD8;&#x6709;&#x6709;&#x540D;&#x7BA1;&#x9053;, shell&#x7684;mkfifo&#x547D;&#x4EE4;&#x5C31;&#x80FD;&#x521B;&#x5EFA;&#x4E2A;&#x6709;&#x540D;&#x7BA1;&#x9053;
<code>mkfifo pipe2</code>
&#x4F1A;&#x5728;&#x5F53;&#x524D;&#x76EE;&#x5F55;&#x4E0B;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x7BA1;&#x9053;&#x6587;&#x4EF6;</p>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">Linux Mint 19.1 Tessa $ ll pipe2
#&#x7BA1;&#x9053;&#x6587;&#x4EF6;&#x4EE5;p&#x5F00;&#x5934;
prw-rw-r-- 1 yingjieb yingjieb 0 Oct 12 14:31 pipe2
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>&#x4EE5;&#x540E;&#x4E24;&#x4E2A;&#x72EC;&#x7ACB;&#x7684;&#x8FDB;&#x7A0B;&#x5C31;&#x53EF;&#x4EE5;&#x91CD;&#x5B9A;&#x5411;&#x5230;&#x8FD9;&#x4E2A;&#x6587;&#x4EF6;&#x901A;&#x4FE1;&#x4E86;.
<code>ls &gt; pipe2</code></p>
<p>&#x5728;&#x53E6;&#x4E00;&#x4E2A;&#x7A97;&#x53E3;&#x91CC;
<code>cat &lt; pipe2</code></p>
<p>&#x6CE8;: &#x5355;&#x72EC;&#x8BFB;&#x5199;&#x8FD9;&#x4E2A;&#x7BA1;&#x9053;&#x4F1A;&#x963B;&#x585E;&#x8FDB;&#x7A0B;. &#x6BD4;&#x5982;<code>echo abcd &gt; pipe2</code>&#x5982;&#x679C;&#x6CA1;&#x4EBA;&#x8BFB;&#x7684;&#x8BDD;, &#x4F1A;&#x963B;&#x585E;. &#x8BFB;&#x4E00;&#x4E2A;&#x7A7A;&#x7684;pipe&#x4E5F;&#x4F1A;&#x963B;&#x585E;.</p>
<h2 id="&#x6709;&#x540D;&#x7BA1;&#x9053;&#x548C;nc"><a name="&#x6709;&#x540D;&#x7BA1;&#x9053;&#x548C;nc" class="anchor-navigation-ex-anchor" href="#&#x6709;&#x540D;&#x7BA1;&#x9053;&#x548C;nc"><i class="fa fa-link" aria-hidden="true"></i></a>16.1. &#x6709;&#x540D;&#x7BA1;&#x9053;&#x548C;nc</h2>
<p><img src="img/shell_&#x9AD8;&#x7EA7;&#x7BC7;_20220915234625.png" alt=""><br>&#x4E0A;&#x9762;&#x7684;&#x56FE;&#x7247;&#x5B9E;&#x73B0;&#x4E86;&#x4E00;&#x4E2A;&#x8FDC;&#x7A0B;&#x767B;&#x9646;shell&#x7684;&#x670D;&#x52A1;<br>&#x5728;&#x670D;&#x52A1;&#x7AEF;:<br><code>cat pipe2 | /bin/sh -i 2&gt;&amp;1 | nc -l 1985 &gt; pipe2</code></p>
<p>&#x5728;client&#x7AEF;:<br><code>nc localhost 1985</code></p>
<p>&#x89E3;&#x91CA;:</p>
<ul>
<li><p>&#x670D;&#x52A1;&#x7AEF;&#x8D77;&#x4E86;&#x4E09;&#x4E2A;&#x8FDB;&#x7A0B;, &#x8FD9;&#x4E09;&#x4E2A;&#x8FDB;&#x7A0B;&#x662F;&#x72EC;&#x7ACB;&#x7684;, &#x5E76;&#x4E0D;&#x5B58;&#x5728;&#x5148;&#x540E;&#x987A;&#x5E8F;.
<code>cat pipe2</code>&#x7684;&#x4F5C;&#x7528;&#x662F;, &#x5982;&#x679C;&#x6709;&#x540D;&#x7BA1;&#x9053;pipe2&#x6709;&#x4E1C;&#x897F;, &#x5219;&#x8F93;&#x51FA;&#x5230;stdout; &#x5982;&#x679C;&#x6CA1;&#x6709;&#x5219;&#x963B;&#x585E;&#x5728;read
<code>/bin/sh -i 2&gt;&amp;1</code>&#x4ECE;stdin&#x8BFB;&#x6570;&#x636E;, &#x4E5F;&#x5C31;&#x662F;&#x524D;&#x9762;<code>cat pipe2</code>&#x7684;&#x8F93;&#x51FA;, &#x7136;&#x540E;&#x505A;shell&#x4EA4;&#x4E92;, &#x8F93;&#x51FA;&#x5230;stdout
<code>nc -l 1985 &gt; pipe2</code>&#x4ECE;stdin&#x8BFB;&#x6570;&#x636E;, &#x4E5F;&#x5C31;&#x662F;&#x524D;&#x9762;sh&#x7684;&#x8F93;&#x51FA;, &#x518D;&#x91CD;&#x5B9A;&#x5411;&#x5230;pipe2; &#x6CE8;&#x610F;&#x8FD9;&#x91CC;&#x4E0D;&#x662F;&#x7BA1;&#x9053;&#x5230;pipe2
&#x91CD;&#x5B9A;&#x5411;&#x5230;pipe2&#x662F;&#x5199;, &#x5199;&#x4E86;pipe&#x5C31;&#x6709;&#x4E1C;&#x897F;&#x4E86;, <code>cat pipe2</code>&#x5C31;&#x80FD;&#x8BFB;&#x5230;&#x6570;&#x636E;&#x4E86;. &#x8FD9;&#x662F;&#x4E2A;&quot;&#x4E4C;&#x6D1B;&#x6CE2;&#x6D1B;&#x65AF;&quot;&#x86C7;, &#x5934;&#x5C3E;&#x76F8;&#x8FDE;, &#x65E0;&#x9650;&#x5FAA;&#x73AF;.</p>
</li>
<li><p><code>nc -l 1985</code>&#x5EFA;&#x7ACB;&#x4E86;&#x53CC;&#x5411;&#x7684;tcp&#x8FDE;&#x63A5;, client&#x7684;&#x8F93;&#x5165;, &#x4F1A;&#x88AB;nc&#x63A5;&#x6536;&#x91CD;&#x5B9A;&#x5411;&#x5230;pipe2.
<code>/bin/sh</code>&#x7684;&#x8F93;&#x51FA;, &#x4F1A;&#x88AB;nc&#x901A;&#x8FC7;tcp&#x8FDE;&#x63A5;, &#x5728;client&#x7AEF;&#x663E;&#x793A;.</p>
</li>
<li><p>nc&#x9ED8;&#x8BA4;&#x7528;tcp, &#x7528;&#x9009;&#x9879;<code>-u</code>&#x53EF;&#x4EE5;&#x4F7F;&#x7528;udp. <code>-u</code>&#x5728;&#x4E0A;&#x9762;&#x7684;&#x4F8B;&#x5B50;&#x91CC;&#x6548;&#x679C;&#x662F;&#x4E00;&#x6837;&#x7684;.</p>
</li>
</ul>
<h1 id="shell&#x68C0;&#x67E5;&#x4E00;&#x4E2A;&#x811A;&#x672C;&#x662F;&#x5426;&#x5DF2;&#x7ECF;&#x88AB;include&#x4E86;"><a name="shell&#x68C0;&#x67E5;&#x4E00;&#x4E2A;&#x811A;&#x672C;&#x662F;&#x5426;&#x5DF2;&#x7ECF;&#x88AB;include&#x4E86;" class="anchor-navigation-ex-anchor" href="#shell&#x68C0;&#x67E5;&#x4E00;&#x4E2A;&#x811A;&#x672C;&#x662F;&#x5426;&#x5DF2;&#x7ECF;&#x88AB;include&#x4E86;"><i class="fa fa-link" aria-hidden="true"></i></a>17. shell&#x68C0;&#x67E5;&#x4E00;&#x4E2A;&#x811A;&#x672C;&#x662F;&#x5426;&#x5DF2;&#x7ECF;&#x88AB;include&#x4E86;</h1>
<p>&#x7528;type&#x547D;&#x4EE4;</p>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">$ type echo
echo is a shell builtin
$ type find
find is /usr/bin/find

# -t&#x8F93;&#x51FA;&#x7C7B;&#x578B;, &#x53EF;&#x4EE5;&#x662F;`alias&apos;, `keyword&apos;,`function&apos;, `builtin&apos;, `file&apos; or `&apos;
$ type -t find
file
$ type -t echo
builtin
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>&#x90A3;&#x4E48;&#x53EF;&#x4EE5;&#x7528;type&#x547D;&#x4EE4;&#x6765;&#x770B;, &#x6BD4;&#x5982;&#x4E00;&#x4E2A;shell&#x51FD;&#x6570;&#x5728;&#x53E6;&#x5916;&#x4E00;&#x4E2A;&#x6587;&#x4EF6;&#x91CC;&#x5B9A;&#x4E49;, &#x60F3;&#x770B;&#x770B;&#x662F;&#x5426;&#x5B83;&#x5DF2;&#x7ECF;&#x88AB;&#x5305;&#x542B;&#x4E86;.</p>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">type -t source_once &gt;/dev/null || . /isam/scripts/prepare_script_env.sh
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h1 id="sed"><a name="sed" class="anchor-navigation-ex-anchor" href="#sed"><i class="fa fa-link" aria-hidden="true"></i></a>18. sed</h1>
<p>sed&#x7684;&#x903B;&#x8F91;&#x548C;awk&#x4E00;&#x6837;, &#x4E5F;&#x662F;&#x6309;&#x884C;&#x5904;&#x7406;&#x7684;, &#x88AB;&#x5904;&#x7406;&#x7684;&#x90A3;&#x4E00;&#x884C;&#x53EB;&#x505A;pattern&#x7A7A;&#x95F4;; &#x800C;&#x4E14;, sed&#x4E5F;&#x6709;&#x884C;&#x5339;&#x914D;&#x529F;&#x80FD;.
&#x57FA;&#x672C;&#x7684;&#x547D;&#x4EE4;&#x683C;&#x5F0F;&#x662F;:
<code>sed -r -n -e &apos;&#x884C;&#x5B9A;&#x5740;/{&#x547D;&#x4EE4;1;&#x547D;&#x4EE4;2}&apos; file</code>
&#x5176;&#x4E2D;:</p>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">-E, -r, --regexp-extended &#x4F7F;&#x7528;&#x6269;&#x5C55;&#x6B63;&#x5219;
-n, --quiet, --silent &#x4E0D;&#x81EA;&#x52A8;&#x6253;&#x5370;pattern&#x7A7A;&#x95F4;. &#x9ED8;&#x8BA4;&#x6BCF;&#x884C;&#x90FD;&#x6253;&#x5370;, &#x5373;&#x4F7F;&#x4E0D;&#x5339;&#x914D;&#x7684;&#x884C;&#x4E5F;&#x6253;&#x5370;; &#x533A;&#x522B;&#x662F;&#x5339;&#x914D;&#x5230;&#x7684;&#x884C;, &#x6267;&#x884C;&#x4E86;&#x547D;&#x4EE4;&#x624D;&#x6253;&#x5370;.
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>&#x884C;&#x5B9A;&#x5740;&#x89C1;&#x4E0B;&#x6587;.
&#x547D;&#x4EE4;&#x4E24;&#x4FA7;&#x7684;&#x5927;&#x62EC;&#x53F7;<code>{}</code>&#x53EF;&#x4EE5;&#x7701;&#x7565;</p>
<h2 id="&#x5411;sed&#x4F20;&#x9012;&#x53D8;&#x91CF;"><a name="&#x5411;sed&#x4F20;&#x9012;&#x53D8;&#x91CF;" class="anchor-navigation-ex-anchor" href="#&#x5411;sed&#x4F20;&#x9012;&#x53D8;&#x91CF;"><i class="fa fa-link" aria-hidden="true"></i></a>18.1. &#x5411;sed&#x4F20;&#x9012;&#x53D8;&#x91CF;</h2>
<p>&#x7528;&#x53CC;&#x62EC;&#x53F7;&#x5C31;&#x884C;:</p>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">instacne=yingjieb_devtool_vscode
sed -e &quot;/$instacne /d&quot; test
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<h2 id="sed&#x4F7F;&#x7528;&#x8BB0;&#x5F55;"><a name="sed&#x4F7F;&#x7528;&#x8BB0;&#x5F55;" class="anchor-navigation-ex-anchor" href="#sed&#x4F7F;&#x7528;&#x8BB0;&#x5F55;"><i class="fa fa-link" aria-hidden="true"></i></a>18.2. sed&#x4F7F;&#x7528;&#x8BB0;&#x5F55;</h2>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh"># &#x4F7F;&#x7528;grep&#x5148;&#x6B63;&#x5219;&#x5339;&#x914D;, &#x7136;&#x540E;&#x7528;sed&#x5220;&#x9664;&#x5339;&#x914D;&#x5230;&#x7684;&#x5B57;&#x7B26;&#x4E32;(&#x5373;&#x7528;&#x7A7A;&#x4E32;&#x66FF;&#x6362;)
bzcat build.log.bz2 | grep -E &apos;\[DEBUG\][[:space:]]*(# )?CT_&apos; | sed s&apos;/\[DEBUG\]    //&apos;
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<h2 id="sed&#x547D;&#x4EE4;"><a name="sed&#x547D;&#x4EE4;" class="anchor-navigation-ex-anchor" href="#sed&#x547D;&#x4EE4;"><i class="fa fa-link" aria-hidden="true"></i></a>18.3. sed&#x547D;&#x4EE4;</h2>
<p>sed&#x547D;&#x4EE4;&#x7684;&#x5BF9;&#x8C61;&#x662F;&#x5F53;&#x524D;&#x7684;pattern&#x7A7A;&#x95F4;, &#x5927;&#x90E8;&#x5206;&#x60C5;&#x51B5;&#x662F;&#x6B63;&#x5728;&#x5904;&#x7406;&#x7684;&#x90A3;&#x884C;.
sed&#x547D;&#x4EE4;&#x5982;&#x679C;&#x6CA1;&#x6709;&#x6307;&#x5B9A;address, &#x5C31;&#x4F1A;&#x5BF9;&#x6240;&#x6709;&#x884C;&#x64CD;&#x4F5C;.
&#x5982;&#x679C;&#x6709;&#x6307;&#x5B9A;address&#x533A;&#x95F4;, &#x5BF9;&#x533A;&#x95F4;&#x5185;&#x7684;&#x6240;&#x6709;&#x884C;&#x64CD;&#x4F5C;.</p>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">       Sed commands can be given with no addresses, in which case the command will be executed for all input lines; with one address, in which case the command will only be  executed
       for input lines which match that address; or with two addresses, in which case the command will be executed for all input lines which match the inclusive range of lines start&#x2010;
       ing from the first address and continuing to the second address.
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">0&#x5730;&#x5740;&#x547D;&#x4EE4;
: label &#x7528;&#x4E8E;&#x540E;&#x7EED;&#x7684;&#x8DF3;&#x8F6C;label&#x547D;&#x4EE4;, &#x6BD4;&#x5982;b&#x6216;t&#x547D;&#x4EE4;

0&#x5730;&#x5740;&#x6216;1&#x4E2A;&#x5730;&#x5740;&#x547D;&#x4EE4;
= &#x6253;&#x5370;&#x884C;&#x53F7;
a \text append text
i \text &#x63D2;&#x5165;text
q [exit-code] &#x9000;&#x51FA;
r filename &#x8FFD;&#x52A0;filename&#x7684;&#x5185;&#x5BB9;

&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x5B9A;&#x5740;&#x7684;&#x547D;&#x4EE4;:
b label &#x8DF3;&#x8F6C;&#x5230;label
c \text &#x4F7F;&#x7528;text&#x66FF;&#x6362;pattern space, text&#x7684;&#x6362;&#x884C;&#x524D;&#x9762;&#x52A0;\
d &#x5220;&#x9664;pattern space
h H    Copy/append pattern space to hold space.
g G    Copy/append hold space to pattern space.
l      List out the current line in a ``visually unambiguous&apos;&apos; form.
n N    Read/append the next line of input into the pattern space.
p      Print the current pattern space.
P      Print up to the first embedded newline of the current pattern space. &#x53EA;&#x6253;&#x5370;&#x4E00;&#x884C;
s/regexp/replacement/ &#x66FF;&#x6362;
w filename
              Write the current pattern space to filename.
x      Exchange the contents of the hold and pattern spaces.
y/source/dest/
              Transliterate the characters in the pattern space which appear in source to the corresponding character in dest.
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="sed&#x5339;&#x914D;2&#x884C;&#x4E4B;&#x95F4;&#x7684;&#x5185;&#x5BB9;"><a name="sed&#x5339;&#x914D;2&#x884C;&#x4E4B;&#x95F4;&#x7684;&#x5185;&#x5BB9;" class="anchor-navigation-ex-anchor" href="#sed&#x5339;&#x914D;2&#x884C;&#x4E4B;&#x95F4;&#x7684;&#x5185;&#x5BB9;"><i class="fa fa-link" aria-hidden="true"></i></a>18.4. sed&#x5339;&#x914D;2&#x884C;&#x4E4B;&#x95F4;&#x7684;&#x5185;&#x5BB9;</h2>
<p>some.log&#x91CC;&#x9762;, &#x4FDD;&#x7559;abc&#x548C;efg&#x4E4B;&#x95F4;&#x7684;&#x884C;, &#x5220;&#x6389;&#x5176;&#x4ED6;&#x884C;
<code>sed -e &apos;/abc/,/efg/!d&apos; some.log</code></p>
<p>&#x8FD9;&#x91CC;<code>!</code>&#x8868;&#x793A;&#x903B;&#x8F91;&#x53CD;, &#x5426;&#x5219;&#x4F1A;&#x5220;&#x6389;&#x4E4B;&#x95F4;&#x7684;&#x884C;.</p>
<h2 id="&#x63D0;&#x53D6;&#x6587;&#x4EF6;&#x7279;&#x5B9A;&#x884C;"><a name="&#x63D0;&#x53D6;&#x6587;&#x4EF6;&#x7279;&#x5B9A;&#x884C;" class="anchor-navigation-ex-anchor" href="#&#x63D0;&#x53D6;&#x6587;&#x4EF6;&#x7279;&#x5B9A;&#x884C;"><i class="fa fa-link" aria-hidden="true"></i></a>18.5. &#x63D0;&#x53D6;&#x6587;&#x4EF6;&#x7279;&#x5B9A;&#x884C;</h2>
<p>grep&#x65B9;&#x5F0F;</p>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">cat ddr_test.log | egrep &quot;Evaluating Read-Leveling Scoreboard|Initializing cgroup subsys|EDAC MC.:.. [UC]E DIMM&quot; &gt; ddr_test.log.analysis
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>&#x4F46;&#x662F;&#x6709;&#x4E2A;&#x7F3A;&#x9677;, &#x4E0D;&#x80FD;&#x63D0;&#x53D6;&#x8FDE;&#x7EED;&#x7684;&#x591A;&#x884C;&#x4FE1;&#x606F;. &#x53EF;&#x80FD;grep&#x662F;&#x6309;&#x884C;&#x5904;&#x7406;&#x7684;.
sed&#x65B9;&#x5F0F;</p>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">$ sed -rn -e &apos;/Evaluating Read-Leveling Scoreboard/,/Rlevel Rank/p&apos; -e &apos;/Initializing cgroup subsys/p&apos; -e &apos;/EDAC MC.:.. [UC]E DIMM/p&apos; ddr_test.log | sed -r -e &apos;/Evaluating Read-Leveling Scoreboard/i ==============&apos; | sed &apos;s/^M//&apos; &gt; ddr_test.log.analysis
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">$ sed -rn -e &apos;/Cavium Inc. OCTEON SDK version/,/DRAM: 2 GiB/p&apos; -e &apos;/Initializing cgroup subsys/p&apos; -e &apos;/EDAC MC.:.. [UC]E DIMM/p&apos; ddr_test.log | cut -d&apos; &apos; -f 4- | sed -r -e &apos;/Cavium Inc. OCTEON SDK version/i \\n==============&apos; | sed &apos;s/^M//&apos; &gt; ddr_test.log.analysis
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>sed&#x7684;&#x5B9A;&#x5740;&#x53EF;&#x4EE5;&#x8FBE;&#x5230;&#x6B64;&#x76EE;&#x7684;
&#x89E3;&#x91CA;&#x5982;&#x4E0B;:</p>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">-r &#x4F7F;&#x7528;&#x6269;&#x5C55;&#x6B63;&#x5219;
-n &#x4E0D;&#x6253;&#x5370;pattern&#x7A7A;&#x95F4;
-e &#x591A;&#x91CD;&#x64CD;&#x4F5C;. &#x6CE8;&#x610F;, sed&#x4F1A;&#x628A;&#x5339;&#x914D;&#x5230;&#x7684;&#x884C;&#x5168;&#x90E8;&#x8FDB;&#x884C;-e&#x540E;&#x9762;&#x7684;command, &#x6240;&#x4EE5;&#x591A;&#x4E2A;-e&#x7684;&#x64CD;&#x4F5C;&#x5E94;&#x8BE5;&#x662F;&#x4E92;&#x4E0D;&#x5F71;&#x54CD;&#x7684;
/pattern1/,/pattern2/ &#x5339;&#x914D;&#x8303;&#x56F4;
p &#x6253;&#x5370;&#x6A21;&#x5F0F;&#x7A7A;&#x95F4;
/pattern/i \text &#x5728;pattern&#x4E4B;&#x524D;&#x63D2;&#x5165;text, a&#x662F;&#x5728;&#x4E4B;&#x540E;&#x63D2;&#x5165;
sed &apos;s/^M//&apos; &#x662F;&#x5220;&#x9664;^M, &#x8F93;&#x5165;^M&#x7684;&#x65B9;&#x6CD5;&#x662F;&#x5148;ctrl+v, &#x5728;ctrl+m
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="sed&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;"><a name="sed&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;" class="anchor-navigation-ex-anchor" href="#sed&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;"><i class="fa fa-link" aria-hidden="true"></i></a>18.6. sed&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;</h2>
<p>&#x6CE8;&#x610F;: sed -r &#x9009;&#x9879;&#x76F4;&#x63A5;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x6269;&#x5C55;&#x6B63;&#x5219;
&#x9ED8;&#x8BA4;&#x4F7F;&#x7528;basic regexp, &#x4F46;&#x4E5F;&#x80FD;&#x89E3;&#x91CA;<code>\|&apos;,</code>+&apos;, <code>\?&apos;,</code>`&apos;, <code>\&apos;&apos;,</code>\&lt;&apos;, <code>\&gt;&apos;,</code>\b&apos;, <code>\B&apos;,</code>\w&apos;, and `\W&apos;
&#x6BD4;&#x5982;</p>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">`x\+&apos; matches one or more occurrences of `x&apos;.  
`abc\|def&apos; matches either `abc&apos; or `def&apos;.
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>&#x5728;/regexp/&#x540E;&#x9762;&#x52A0;I&#x53EF;&#x4EE5;&#x5927;&#x5C0F;&#x5199;&#x4E0D;&#x654F;&#x611F;, &#x6BD4;&#x5982;
<code>/regexp/Ip</code>, &#x6253;&#x5370;&#x5339;&#x914D;regexp&#x7684;&#x884C;, &#x5927;&#x5C0F;&#x5199;&#x4E0D;&#x654F;&#x611F;
&#x6BD4;&#x5982;&#x67E5;&#x627E;&#x6240;&#x6709;&#x6E90;&#x6587;&#x4EF6;,</p>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">$ find -type f | sed -n &apos;/\.\([chs]\)\1\{0,1\}\(pp\)\?$/Ip&apos;
./test.c
./test.h
./test.cc
./test.hh
./test.cpp
./test.hpp
./test.s
./test.S
./test.C
./test.H
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="sed&#x5B9A;&#x5740;&#x66FF;&#x6362;"><a name="sed&#x5B9A;&#x5740;&#x66FF;&#x6362;" class="anchor-navigation-ex-anchor" href="#sed&#x5B9A;&#x5740;&#x66FF;&#x6362;"><i class="fa fa-link" aria-hidden="true"></i></a>18.7. sed&#x5B9A;&#x5740;&#x66FF;&#x6362;</h2>
<p><code>sed -i -e &apos;/# GENERIC_SERIAL$/s%^\(.*\)::.*#%\1::respawn:/usr/bin/chrt -r 30 /bin/sh -l #%&apos; $targetdir/etc/inittab</code>
sed &#x4E2D;&#x7684;&#x64CD;&#x4F5C;&#x7B26;&#x6BD4;&#x5982;s&#x6216;&#x8005;d, &#x90FD;&#x53EF;&#x4EE5;&#x6307;&#x5B9A;&#x8303;&#x56F4;, &#x5373;&#x5B9A;&#x5740;. &#x4E0D;&#x5B9A;&#x5740;&#x7684;&#x64CD;&#x4F5C;&#x9ED8;&#x8BA4;&#x662F;&#x5BF9;&#x5168;&#x90E8;&#x884C;.
&#x5B9A;&#x5740;&#x6709;&#x4E00;&#x4E0B;&#x51E0;&#x79CD;:</p>
<ul>
<li><code>addr1 addr1</code>&#x6240;&#x5728;&#x884C;</li>
<li><code>addr1,addr2</code> &#x6240;&#x6709;addr1&#x548C;addr2&#x4E4B;&#x95F4;&#x7684;&#x884C;. &#x7279;&#x522B;&#x7684;, $&#x4EE3;&#x8868;&#x6700;&#x540E;&#x4E00;&#x884C;</li>
<li><code>first~step</code> &#x6BD4;&#x5982;1~2p&#x4F1A;&#x6253;&#x5370;&#x6240;&#x6709;&#x5947;&#x6570;&#x884C;</li>
<li><code>addr1,~N</code> &#x548C;&#x4E0A;&#x9762;&#x5DEE;&#x4E0D;&#x591A;&#x610F;&#x601D;</li>
<li><code>/regexp/</code> &#x6240;&#x6709;&#x5339;&#x914D;&#x5230;regexp&#x7684;&#x884C;</li>
<li><code>\cregexpc</code> &#x548C;&#x4E0A;&#x9762;&#x5DEE;&#x4E0D;&#x591A;, &#x4F46;c&#x53EF;&#x4EE5;&#x662F;&#x4EFB;&#x610F;&#x5B57;&#x7B26;, &#x7528;&#x4E8E;&#x5206;&#x9694;</li>
<li><code>addr1,+N addr1</code> &#x6240;&#x5728;&#x884C;&#x4EE5;&#x53CA;&#x4E0B;&#x9762;&#x8FDE;&#x7EED;N&#x884C;</li>
</ul>
<h2 id="sed&#x5220;&#x9664;"><a name="sed&#x5220;&#x9664;" class="anchor-navigation-ex-anchor" href="#sed&#x5220;&#x9664;"><i class="fa fa-link" aria-hidden="true"></i></a>18.8. sed&#x5220;&#x9664;</h2>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">sed -i -n -e &apos;/^#OUTPUT-MARKER-BEGIN/,/^#OUTPUT-MARKER-END/d; p&apos; $targetdir/etc/init.d/rcS
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h2 id="sed&#x66FF;&#x6362;&#x5F15;&#x7528;"><a name="sed&#x66FF;&#x6362;&#x5F15;&#x7528;" class="anchor-navigation-ex-anchor" href="#sed&#x66FF;&#x6362;&#x5F15;&#x7528;"><i class="fa fa-link" aria-hidden="true"></i></a>18.9. sed&#x66FF;&#x6362;&#x5F15;&#x7528;</h2>
<p><code>sed -i -e &quot;s%#!/bin/sh%&amp;${output_redirection}%&quot; $targetdir/etc/init.d/rcS</code></p>
<h2 id="sed&#x7684;&#x5206;&#x7EC4;&#x5339;&#x914D;-&#x7528;&#x5206;&#x7EC4;-&#x7528;1&#x5F15;&#x7528;"><a name="sed&#x7684;&#x5206;&#x7EC4;&#x5339;&#x914D;-&#x7528;&#x5206;&#x7EC4;-&#x7528;1&#x5F15;&#x7528;" class="anchor-navigation-ex-anchor" href="#sed&#x7684;&#x5206;&#x7EC4;&#x5339;&#x914D;-&#x7528;&#x5206;&#x7EC4;-&#x7528;1&#x5F15;&#x7528;"><i class="fa fa-link" aria-hidden="true"></i></a>18.10. sed&#x7684;&#x5206;&#x7EC4;&#x5339;&#x914D;, &#x7528;()&#x5206;&#x7EC4;, &#x7528;\1&#x5F15;&#x7528;</h2>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">echo /repo/yingjieb/fdt063/sw/vobs/dsl/sw/flat/fpxt-b_OFLT_MAIN/src/bcm_commands.c | sed &apos;s!\(.*/flat/[^/]*\).*!\1!g&apos;
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h1 id="awk"><a name="awk" class="anchor-navigation-ex-anchor" href="#awk"><i class="fa fa-link" aria-hidden="true"></i></a>19. awk</h1>
<h2 id="shell&#x53D8;&#x91CF;&#x4F20;&#x7ED9;awk"><a name="shell&#x53D8;&#x91CF;&#x4F20;&#x7ED9;awk" class="anchor-navigation-ex-anchor" href="#shell&#x53D8;&#x91CF;&#x4F20;&#x7ED9;awk"><i class="fa fa-link" aria-hidden="true"></i></a>19.1. shell&#x53D8;&#x91CF;&#x4F20;&#x7ED9;awk</h2>
<p>&#x5411;awk&#x4F20;&#x5165;&#x53D8;&#x91CF;, &#x7528;-v, shell&#x53D8;&#x91CF;&#x7528;&#x53CC;&#x5F15;&#x53F7;&#x62EC;&#x8D77;&#x6765;:<code>-v td=&quot;$TimeDiff&quot;</code></p>
<h2 id="&#x518D;&#x8BF4;patten"><a name="&#x518D;&#x8BF4;patten" class="anchor-navigation-ex-anchor" href="#&#x518D;&#x8BF4;patten"><i class="fa fa-link" aria-hidden="true"></i></a>19.2. &#x518D;&#x8BF4;patten</h2>
<p>&#x4E00;&#x822C;&#x7684;pattern&#x662F;&#x8FD9;&#x6837;&#x7684;:</p>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">awk &apos;/search regex pattern1/ {Actions}        
     /search regex pattern2/ {Actions}&apos; file
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<ul>
<li>//&#x4E2D;&#x95F4;&#x7684;&#x662F;regex</li>
<li>pattern &#x4E5F;&#x53EF;&#x4EE5;&#x4E0D;&#x7528;//, &#x5176;&#x5B9E;{}&#x524D;&#x9762;&#x7684;&#x90FD;&#x662F;pattern</li>
<li>&#x6BD4;&#x8F83;&#x8868;&#x8FBE;&#x5F0F;&#x4E5F;&#x53EF;&#x4EE5;&#x505A;pattern<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">#&#x6700;&#x540E;&#x4E00;&#x4E2A;&#x5B57;&#x6BB5;&#x4E0D;&#x662F;A&#x5219;&#x6267;&#x884C;
awk &apos;$NF != &quot;A&quot; { print $0 }&apos;
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
</li>
<li>BEGIN&#x6838;END&#x4E5F;&#x662F;&#x7279;&#x6B8A;&#x7684;pattern<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">awk &apos;BEGIN { n=5 } NR==n { print $0 } END { print $0 }&apos;
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li>pattern&#x53EF;&#x4EE5;&#x662F;&#x4E2A;&#x8303;&#x56F4;, pattern1, pattern2: pattern1&#x5339;&#x914D;&#x5230;&#x5219;&#x5F00;&#x95F8;&#x653E;&#x6C34;, pattern2&#x5339;&#x914D;&#x5230;&#x5219;&#x5173;&#x95F8;. &#x5728;&#x5F00;&#x5173;&#x95F8;&#x4E4B;&#x95F4;&#x505A;action</li>
</ul>
<h2 id="awk&#x5728;if&#x91CC;&#x5339;&#x914D;"><a name="awk&#x5728;if&#x91CC;&#x5339;&#x914D;" class="anchor-navigation-ex-anchor" href="#awk&#x5728;if&#x91CC;&#x5339;&#x914D;"><i class="fa fa-link" aria-hidden="true"></i></a>19.3. awk&#x5728;if&#x91CC;&#x5339;&#x914D;</h2>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">cat log/top.log | awk &apos;{printf NR&quot; &quot;; {if($5 ~ /.*m/) printf $5; else printf $5/1024} printf &quot; &quot; $8 &quot;\n&quot;}&apos; | tr -d &apos;m&apos;
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>&#x8FD9;&#x91CC;&#x7684;<code>if($5 ~ /.*m/)</code>&#x5C31;&#x662F;&#x6B63;&#x5219;&#x5339;&#x914D;, &#x7528;<code>~</code>&#x548C;<code>/patten/</code>&#x7684;&#x5F62;&#x5F0F;</p>
<h2 id="awk&#x652F;&#x6301;&#x6D6E;&#x70B9;"><a name="awk&#x652F;&#x6301;&#x6D6E;&#x70B9;" class="anchor-navigation-ex-anchor" href="#awk&#x652F;&#x6301;&#x6D6E;&#x70B9;"><i class="fa fa-link" aria-hidden="true"></i></a>19.4. awk&#x652F;&#x6301;&#x6D6E;&#x70B9;</h2>
<p>bash&#x53EA;&#x652F;&#x6301;&#x6574;&#x6570;&#x8FD0;&#x7B97;, &#x800C;awk&#x652F;&#x6301;&#x6D6E;&#x70B9;</p>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">#&#x6BD4;&#x5982;ping.log&#x6700;&#x540E;&#x4E00;&#x884C;
64 bytes from 5.5.5.12: icmp_seq=11 ttl=64 time=0.187 ms
#&#x6211;&#x60F3;&#x6BD4;&#x8F83;time&#x662F;&#x5426;&#x5927;&#x4E8E;&#x67D0;&#x4E2A;&#x503C;, &#x56E0;&#x4E3A;time&#x662F;&#x4E2A;&#x6D6E;&#x70B9;, &#x7528;bash&#x76F4;&#x63A5;&#x6BD4;&#x8F83;&#x4F1A;&#x51FA;&#x9519;
$ tail ping.log -n 1 | awk -F&quot; *|=&quot; &apos;{if ($10&gt;0.1) print $10}&apos;
0.187
#&#x6539;&#x6210;0.2&#x5219;&#x65E0;&#x8F93;&#x51FA;
$ tail ping.log -n 1 | awk -F&quot; *|=&quot; &apos;{if ($10&gt;0.2) print $10}&apos;
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="awk&#x903B;&#x8F91;&#x4E0E;"><a name="awk&#x903B;&#x8F91;&#x4E0E;" class="anchor-navigation-ex-anchor" href="#awk&#x903B;&#x8F91;&#x4E0E;"><i class="fa fa-link" aria-hidden="true"></i></a>19.5. awk&#x903B;&#x8F91;&#x4E0E;</h2>
<p>&#x8FD9;&#x6837;&#x5199;&#x6BD4;&#x4E0B;&#x6587;&#x7684;<code>ss -ant |awk &apos;{if(NR&gt;1)++s[$1]} END {for(k in s) print k,s[k]}&apos;</code>&#x66F4;&#x7B80;&#x6D01;&#x4E00;&#x4E9B;</p>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">#&#x6253;&#x5370;&#x4E94;&#x5230;&#x5341;&#x884C;&#xFF0C;&#x5E76;&#x5728;&#x524D;&#x9762;&#x52A0;&#x4E0A;&#x884C;&#x53F7;
awk -F: &apos;NR&gt;=5 &amp;&amp; NR&lt;=10 {print NR,$0}&apos; /etc/passwd
#&#x6253;&#x5370;&#x5947;&#x6570;&#x884C; (&#x5220;&#x9664;&#x5076;&#x6570;&#x884C;&#xFF09;
awk -F: &apos;NR%2==1 {print NR,$0}&apos; /etc/passwd
#&#x6253;&#x5370;&#x5076;&#x6570;&#x884C; (&#x5220;&#x9664;&#x5947;&#x6570;&#x884C;)
awk -F: &apos;NR%2==0 {print NR,$0}&apos; /etc/passwd
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="awk&#x591A;&#x884C;&#x89E3;&#x6790;"><a name="awk&#x591A;&#x884C;&#x89E3;&#x6790;" class="anchor-navigation-ex-anchor" href="#awk&#x591A;&#x884C;&#x89E3;&#x6790;"><i class="fa fa-link" aria-hidden="true"></i></a>19.6. awk&#x591A;&#x884C;&#x89E3;&#x6790;</h2>
<p>&#x6BD4;&#x5982;nmap&#x7684;&#x8F93;&#x51FA;&#x5982;&#x4E0B;, &#x60F3;&#x89E3;&#x6790;ip&#x548C;mac&#x7684;&#x5BF9;&#x5E94;&#x5173;&#x7CFB;</p>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">Nmap scan report for 10.239.120.208
Host is up (0.00049s latency).
MAC Address: EC:B1:D7:2F:90:67 (Unknown)
Nmap scan report for 10.239.120.209
Host is up (0.00019s latency).
MAC Address: 34:64:A9:CF:8E:62 (Unknown)
Nmap scan report for 10.239.120.212
Host is up (0.00020s latency).
MAC Address: 8C:FD:F0:06:8B:A1 (Qualcomm Incorporated)
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><code>sudo nmap -n -sP 10.239.120.1/24 | awk &apos;/Nmap scan report/{printf $5;printf &quot; &quot;;getline;getline;print $3;}&apos;</code>
&#x91CD;&#x70B9;&#x662F;getline
&#x53E6;&#x5916;&#x4E00;&#x79CD;&#x5199;&#x6CD5;&#x6211;&#x8BA4;&#x4E3A;&#x66F4;&#x597D;:
<code>sudo nmap -n -sP 10.239.120.1/24 | awk &apos;/Nmap scan report for/{printf $5;}/MAC Address:/{print &quot; =&gt; &quot;$3;}&apos; | sort</code></p>
<h2 id="awk&#x5206;&#x7EC4;&#x63D0;&#x53D6;"><a name="awk&#x5206;&#x7EC4;&#x63D0;&#x53D6;" class="anchor-navigation-ex-anchor" href="#awk&#x5206;&#x7EC4;&#x63D0;&#x53D6;"><i class="fa fa-link" aria-hidden="true"></i></a>19.7. awk&#x5206;&#x7EC4;&#x63D0;&#x53D6;</h2>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">CentOS 7.3 $ cat log/test_report.csv | grep ^[0-9]
1,127.0.0.1,50,500000,10,1,1,set, 81024
1,127.0.0.1,50,500000,10,1,1,get, 89078
1,127.0.0.1,50,25000000,10,1,100,get, 315923
2,127.0.0.1,50,500000,10,1,1,set, 160236
2,127.0.0.1,50,500000,10,1,1,get, 174584
2,127.0.0.1,50,25000000,10,1,100,get, 616733
4,127.0.0.1,50,500000,10,1,1,set, 310916
4,127.0.0.1,50,500000,10,1,1,get, 333704
4,127.0.0.1,50,25000000,10,1,100,get, 1155443
8,127.0.0.1,50,500000,10,1,1,set, 617204
8,127.0.0.1,50,500000,10,1,1,get, 640997
8,127.0.0.1,50,25000000,10,1,100,get, 2244430
16,127.0.0.1,50,500000,10,1,1,set, 433805
16,127.0.0.1,50,500000,10,1,1,get, 435868
16,127.0.0.1,50,25000000,10,1,100,get, 4253953
#&#x73B0;&#x5728;&#x60F3;&#x5BF9;&#x4E0A;&#x9762;&#x7684;&#x8F93;&#x51FA;, &#x6309;&#x7167;&#x7B2C;&#x4E00;&#x5217;&#x7684;&#x4FE1;&#x606F;&#x6574;&#x7406;
#tmp[$1]=tmp[$1]&quot;,&quot;$9&#x662F;&#x8BF4;&#x628A;tmp[$1]&#x62FC;&#x63A5;&#x4E0A;&#x7B2C;&#x4E5D;&#x4E2A;&#x5B57;&#x6BB5;, &#x8FD8;&#x8D4B;&#x503C;&#x56DE;tmp[$1], &#x8FD9;&#x5C31;&#x6709;&#x70B9;&#x50CF;PATH=xxxxx:$PATH
awk -F, &apos;{tmp[$1]=tmp[$1]&quot;,&quot;$9}; END{ for(i in tmp) {print i tmp[i]}}&apos; | sort -h
1, 81024, 89078, 315923
2, 160236, 174584, 616733
4, 310916, 333704, 1155443
8, 617204, 640997, 2244430
16, 433805, 435868, 4253953
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="awk&#x53D8;&#x91CF;"><a name="awk&#x53D8;&#x91CF;" class="anchor-navigation-ex-anchor" href="#awk&#x53D8;&#x91CF;"><i class="fa fa-link" aria-hidden="true"></i></a>19.8. awk&#x53D8;&#x91CF;</h2>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">CentOS 7.3 $ awk &apos;{s+=$1} END {print s}&apos; log/*.csv
1.18365e+07
CentOS 7.3 $ awk &apos;{s+=$1} END {printf(&quot;%d\n&quot;, s)}&apos; log/*.csv
11836539
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<ul>
<li>s&#x662F;&#x4E2A;&#x53D8;&#x91CF;, &#x76F4;&#x63A5;&#x7528;, &#x4E0D;&#x52A0;$, &#x90A3;&#x4E48;&#x548C;&#x5B57;&#x7B26;&#x4E32;&#x7684;&#x533A;&#x522B;&#x5728;&#x4E8E;&#x5B57;&#x7B26;&#x4E32;&#x9700;&#x8981;&#x52A0;&#x53CC;&#x5F15;&#x53F7;</li>
<li>print&#x9ED8;&#x8BA4;&#x7528;&#x79D1;&#x5B66;&#x8BA1;&#x6570;&#x6CD5;</li>
</ul>
<h2 id="awk&#x6570;&#x7EC4;"><a name="awk&#x6570;&#x7EC4;" class="anchor-navigation-ex-anchor" href="#awk&#x6570;&#x7EC4;"><i class="fa fa-link" aria-hidden="true"></i></a>19.9. awk&#x6570;&#x7EC4;</h2>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">$ ss -ant |awk &apos;{if(NR&gt;1)++s[$1]} END {for(k in s) print k,s[k]}&apos;
LISTEN 15
ESTAB 10
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>&#x6CE8;: &#x6570;&#x7EC4;&#x7684;&#x4E0B;&#x6807;&#x53EF;&#x4EE5;&#x662F;&#x6570;&#x5B57;&#x4E5F;&#x53EF;&#x4EE5;&#x662F;&#x5B57;&#x7B26;&#x4E32;, ++s[$1]&#x662F;&#x7EDF;&#x8BA1;&#x4E2A;&#x6570;</p>
<h2 id="awk&#x5B57;&#x7B26;&#x4E32;&#x66FF;&#x6362;"><a name="awk&#x5B57;&#x7B26;&#x4E32;&#x66FF;&#x6362;" class="anchor-navigation-ex-anchor" href="#awk&#x5B57;&#x7B26;&#x4E32;&#x66FF;&#x6362;"><i class="fa fa-link" aria-hidden="true"></i></a>19.10. awk&#x5B57;&#x7B26;&#x4E32;&#x66FF;&#x6362;</h2>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">for f in log.fio*; do echo -n &quot;$f &quot;; awk &apos;/IOPS/ {sub(&quot;,&quot;,&quot;&quot;,$2);match($4,&quot;[0-9]*MB/s&quot;,arr);printf &quot;BW=%s %s &quot;,arr[0],$2} /95.00th/ {print $2 $3, $8 $9}&apos; $f; done | column -t
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>&#x89E3;&#x91CA;:</p>
<ul>
<li>awk &#x540E;&#x9762;&#x659C;&#x6760;&#x4E2D;&#x95F4;&#x7684;&#x90E8;&#x5206;&#x662F;&#x5339;&#x914D;&#x5B57;&#x7B26;&#x4E32;, &#x5339;&#x914D;&#x5230;&#x7684;&#x884C;&#x624D;&#x505A;&#x540E;&#x9762;&#x7684;&#x4E8B;&#x60C5;</li>
<li>match&#x51FD;&#x6570;&#x53EF;&#x4EE5;&#x4F20;&#x5165;arr, arr[0]&#x8868;&#x793A;&#x5339;&#x914D;&#x5230;&#x7684;&#x5B57;&#x7B26;&#x4E32;, &#x5982;&#x679C;&#x6B63;&#x5219;&#x91CC;&#x9762;&#x6709;&#x5206;&#x7EC4;&#x6807;&#x8BB0;(), &#x5219;arr[1], arr[2]&#x4F9D;&#x6B21;&#x662F;&#x5B50;&#x5206;&#x7EC4;<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">awk &apos;/search pattern1/ {Actions}        
   /search pattern2/ {Actions}&apos; file
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
</li>
<li>awk &apos;{pattern + action}&apos; {filenames}, &#x6309;&#x884C;&#x5904;&#x7406;, &#x5BF9;&#x5339;&#x914D;patten&#x7684;&#x884C;, &#x987A;&#x5E8F;&#x6267;&#x884C;{}&#x91CC;&#x9762;&#x7684;&#x64CD;&#x4F5C;, - patten&#x5C31;&#x662F;//&#x91CC;&#x9762;&#x7684;&#x4E1C;&#x897F; - $0&#x4EE3;&#x8868;&#x6574;&#x884C;,$1&#x662F;&#x7B2C;&#x4E00;&#x4E2A;&#x5B57;&#x6BB5;</li>
<li>sub(match, replace, string)&#x662F;&#x5B57;&#x7B26;&#x4E32;&#x66FF;&#x6362;, &#x4E0A;&#x9762;&#x7684;<code>sub(/,/,&quot;&quot;,$2)</code>&#x4E5F;&#x662F;&#x53EF;&#x4EE5;&#x7684;, &#x6548;&#x679C;&#x4E00;&#x6837;.</li>
<li>BEGIN&#x662F;&#x8BF4;&#x5728;&#x626B;&#x63CF;&#x4E4B;&#x524D;&#x6267;&#x884C;&#x7684;, &#x76F8;&#x5BF9;&#x7684;END&#x662F;&#x5728;&#x6700;&#x540E;&#x90FD;&#x626B;&#x63CF;&#x5B8C;&#x4E86;&#x518D;&#x6267;&#x884C;&#x7684; </li>
<li>OFS&#x662F;&#x8F93;&#x51FA;&#x7684;&#x5206;&#x9694;&#x7B26;, FS&#x662F;&#x8F93;&#x5165;&#x7684;&#x5206;&#x9694;&#x7B26;, &#x9ED8;&#x8BA4;&#x90FD;&#x662F;space </li>
<li>print&#x8F93;&#x51FA;&#x5B57;&#x7B26;&#x4E32;&#x8981;&#x52A0;&quot;&quot;, &#x6BD4;&#x5982;print &quot;hello&quot;</li>
<li>echo -n &#x4E0D;&#x6362;&#x884C;</li>
<li>printf&#x4E0D;&#x6362;&#x884C;, &#x800C;print&#x6362;&#x884C;</li>
</ul>
<h2 id="awk&#x7684;&#x6761;&#x4EF6;&#x5224;&#x65AD;&#x548C;&#x6570;&#x5B57;&#x8FD0;&#x7B97;"><a name="awk&#x7684;&#x6761;&#x4EF6;&#x5224;&#x65AD;&#x548C;&#x6570;&#x5B57;&#x8FD0;&#x7B97;" class="anchor-navigation-ex-anchor" href="#awk&#x7684;&#x6761;&#x4EF6;&#x5224;&#x65AD;&#x548C;&#x6570;&#x5B57;&#x8FD0;&#x7B97;"><i class="fa fa-link" aria-hidden="true"></i></a>19.11. awk&#x7684;&#x6761;&#x4EF6;&#x5224;&#x65AD;&#x548C;&#x6570;&#x5B57;&#x8FD0;&#x7B97;</h2>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">cat iperf3_client_x710.log | awk &apos;{if($8==&quot;Mbits/sec&quot;) printf $7&quot; &quot;;if ($8==&quot;Gbits/sec&quot;) printf $7*1024&quot; &quot;}&apos;
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h2 id="awk&#x6267;&#x884C;&#x5176;&#x4ED6;&#x7A0B;&#x5E8F;"><a name="awk&#x6267;&#x884C;&#x5176;&#x4ED6;&#x7A0B;&#x5E8F;" class="anchor-navigation-ex-anchor" href="#awk&#x6267;&#x884C;&#x5176;&#x4ED6;&#x7A0B;&#x5E8F;"><i class="fa fa-link" aria-hidden="true"></i></a>19.12. awk&#x6267;&#x884C;&#x5176;&#x4ED6;&#x7A0B;&#x5E8F;</h2>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">$ awk &apos;{system(&quot;echo &quot;$1 &quot; and &quot;$2)}&apos; ../linklist
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h2 id="awk&#x66FF;&#x6362;&#x547D;&#x4EE4;"><a name="awk&#x66FF;&#x6362;&#x547D;&#x4EE4;" class="anchor-navigation-ex-anchor" href="#awk&#x66FF;&#x6362;&#x547D;&#x4EE4;"><i class="fa fa-link" aria-hidden="true"></i></a>19.13. awk&#x66FF;&#x6362;&#x547D;&#x4EE4;</h2>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">$ echo $var | awk &apos;{sub(&quot; &quot;, &quot;_&quot;, $0); printf(&quot;%s\n&quot;, $0);}&apos;
$ echo $var | awk &apos;{gsub(&quot; &quot;, &quot;_&quot;, $0); printf(&quot;%s\n&quot;, $0);}&apos;
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<h1 id="shell&#x7BA1;&#x9053;&#x548C;&#x5FAA;&#x73AF;"><a name="shell&#x7BA1;&#x9053;&#x548C;&#x5FAA;&#x73AF;" class="anchor-navigation-ex-anchor" href="#shell&#x7BA1;&#x9053;&#x548C;&#x5FAA;&#x73AF;"><i class="fa fa-link" aria-hidden="true"></i></a>20. shell&#x7BA1;&#x9053;&#x548C;&#x5FAA;&#x73AF;</h1>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">for f in `find -name *.so`; do echo $f; readelf -h $f | grep Flag | grep fp64; done &gt; so.log
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<ul>
<li>for&#x91CC;&#x9762;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x7528;pipe</li>
<li>done&#x540E;&#x9762;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x8DDF;&#x91CD;&#x5B9A;&#x5411;</li>
</ul>
<h1 id="&#x770B;&#x4E00;&#x4E2A;interface&#x662F;&#x5426;&#x5B58;&#x5728;"><a name="&#x770B;&#x4E00;&#x4E2A;interface&#x662F;&#x5426;&#x5B58;&#x5728;" class="anchor-navigation-ex-anchor" href="#&#x770B;&#x4E00;&#x4E2A;interface&#x662F;&#x5426;&#x5B58;&#x5728;"><i class="fa fa-link" aria-hidden="true"></i></a>21. &#x770B;&#x4E00;&#x4E2A;interface&#x662F;&#x5426;&#x5B58;&#x5728;</h1>
<h2 id="&#x7528;procnetdev"><a name="&#x7528;procnetdev" class="anchor-navigation-ex-anchor" href="#&#x7528;procnetdev"><i class="fa fa-link" aria-hidden="true"></i></a>21.1. &#x7528;/proc/net/dev</h2>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">~ # cat /proc/net/dev
Inter-| Receive | Transmit
 face |bytes packets errs drop fifo frame compressed multicast|bytes packets errs drop fifo colls carrier compressed
dummy0: 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
  npi1: 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
 loop1: 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
    lo: 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
  npi2: 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
 loop2: 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
 bond0: 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
  eth0: 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
  agl0: 123857375 91502 0 0 0 0 0 6 4491714 52744 0 0 0 0 0 0
  npi3: 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
 loop3: 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
  npi0: 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
 loop0: 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
  eth1: 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="&#x7528;ifconfig-intf&#x8FD4;&#x56DE;&#x503C;"><a name="&#x7528;ifconfig-intf&#x8FD4;&#x56DE;&#x503C;" class="anchor-navigation-ex-anchor" href="#&#x7528;ifconfig-intf&#x8FD4;&#x56DE;&#x503C;"><i class="fa fa-link" aria-hidden="true"></i></a>21.2. &#x7528;ifconfig intf&#x8FD4;&#x56DE;&#x503C;</h2>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">~ # ifconfig itefwd
ifconfig: itefwd: error fetching interface information: Device not found
~ # echo $?
1
~ # ifconfig eth0
eth0 Link encap:Ethernet HWaddr 00:BA:0B:AB:00:0A  
          BROADCAST MULTICAST MTU:1500 Metric:1
          RX packets:0 errors:0 dropped:0 overruns:0 frame:0
          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000 
          RX bytes:0 (0.0 B) TX bytes:0 (0.0 B)

~ # echo $?
0
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h1 id="awk&#x8BA1;&#x7B97;&#x65F6;&#x95F4;&#x5DEE;"><a name="awk&#x8BA1;&#x7B97;&#x65F6;&#x95F4;&#x5DEE;" class="anchor-navigation-ex-anchor" href="#awk&#x8BA1;&#x7B97;&#x65F6;&#x95F4;&#x5DEE;"><i class="fa fa-link" aria-hidden="true"></i></a>22. awk&#x8BA1;&#x7B97;&#x65F6;&#x95F4;&#x5DEE;</h1>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh"># sudo perf script | grep -n1 netdev_send
207567- pmd8 6965 [013] 111673.977146: probe_ovs:netdev_rxq_recv: (698e80)
207568: pmd8 6965 [013] 111673.977193: probe_ovs:netdev_send: (698fd8 &lt;- 6764cc)
207569- pmd8 6965 [013] 111673.977195: probe_ovs:netdev_rxq_recv: (698e80)
--
207711- pmd8 6965 [013] 111673.977673: probe_ovs:netdev_rxq_recv: (698e80)
207712: pmd8 6965 [013] 111673.977692: probe_ovs:netdev_send: (698fd8 &lt;- 6764cc)
207713- pmd8 6965 [013] 111673.977694: probe_ovs:netdev_rxq_recv: (698e80)
--
504452- pmd8 6965 [013] 111674.978342: probe_ovs:netdev_rxq_recv: (698e80)
504453: pmd8 6965 [013] 111674.978385: probe_ovs:netdev_send: (698fd8 &lt;- 6764cc)
504454- pmd8 6965 [013] 111674.978388: probe_ovs:netdev_rxq_recv: (698e80)
--
504602- pmd8 6965 [013] 111674.978889: probe_ovs:netdev_rxq_recv: (698e80)
504603: pmd8 6965 [013] 111674.978908: probe_ovs:netdev_send: (698fd8 &lt;- 6764cc)
504604- pmd8 6965 [013] 111674.978911: probe_ovs:netdev_rxq_recv: (698e80)
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">#&#x7B2C;&#x4E00;&#x4E2A;awk&#x5F97;&#x51FA;&#x65F6;&#x95F4;&#x5B57;&#x6BB5;, &#x6BD4;&#x5982;111673.977146: &#x7B2C;&#x4E8C;awk&#x7528;&#x5206;&#x9694;&#x7B26;&#x96C6;&#x5408;.&#x6216;:&#x5728;NR&#x9664;4&#x4F59;2&#x7684;&#x65F6;&#x5019;, &#x6253;&#x5370;$2-t; &#x800C;t&#x6BCF;&#x884C;&#x90FD;&#x4FDD;&#x5B58;
sudo perf script | grep -n1 netdev_send | awk &apos;{print $5}&apos; | awk -F&quot;[.:]&quot; &apos;NR%4==2 {print $2-t} {t=$2}&apos;
# &#x7ED3;&#x679C;
47
19
43
19
42
19
42
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h1 id="ping&#x5EF6;&#x8FDF;&#x5927;&#x4E8E;05ms&#x89E6;&#x53D1;&#x52A8;&#x4F5C;"><a name="ping&#x5EF6;&#x8FDF;&#x5927;&#x4E8E;05ms&#x89E6;&#x53D1;&#x52A8;&#x4F5C;" class="anchor-navigation-ex-anchor" href="#ping&#x5EF6;&#x8FDF;&#x5927;&#x4E8E;05ms&#x89E6;&#x53D1;&#x52A8;&#x4F5C;"><i class="fa fa-link" aria-hidden="true"></i></a>23. ping&#x5EF6;&#x8FDF;&#x5927;&#x4E8E;0.5ms&#x89E6;&#x53D1;&#x52A8;&#x4F5C;</h1>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">ping 5.5.5.11 | tee ping.log
tail ping.log -n 1 | awk -F&quot; *|=&quot; &apos;{if ($10&gt;0.5) {printf &quot;ping latency %s ms\n&quot;, $10; system(&quot;sudo perf sched record -a&quot;)}}&apos;
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>&#x6CE8;: awk&#x4E5F;&#x652F;&#x6301;-F&quot;[.:]&quot;&#x7684;&#x65B9;&#x5F0F;&#x6765;&#x6307;&#x5B9A;&#x5206;&#x9694;&#x7B26;, &#x8FD9;&#x91CC;&#x6307;&#x7528;.&#x548C;:&#x5206;&#x5272;.</p>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">while true
do
    #&#x7528;[[ $(command) ]]&#x6765;&#x5224;&#x65AD;command&#x662F;&#x5426;&#x6709;&#x8F93;&#x51FA;
    if [[ $(tail ping.log | awk -F&quot; *|=&quot; &apos;{if ($10&gt;0.1) print $10}&apos;) ]];then
        sudo perf sched record -a
        exit
    fi
    sleep 10
done
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h1 id="&#x8BA1;&#x7B97;cpu&#x63A9;&#x7801;-mask"><a name="&#x8BA1;&#x7B97;cpu&#x63A9;&#x7801;-mask" class="anchor-navigation-ex-anchor" href="#&#x8BA1;&#x7B97;cpu&#x63A9;&#x7801;-mask"><i class="fa fa-link" aria-hidden="true"></i></a>24. &#x8BA1;&#x7B97;cpu&#x63A9;&#x7801;, mask</h1>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">bitmask() { #eg. 0,5,8-11 17,26-30 return 7c020f21
    local bm=0
    for arg in $(echo $* | tr &apos;,&apos; &apos; &apos;);do
        #[ expression ] &amp;&amp; statement1 || statement2 is equal to if expression then statement1 else statement2
        #for i in $([ $(echo &quot;$arg&quot; | cut -d&apos;-&apos; -f1) == $arg ] &amp;&amp; echo $arg || echo $arg | tr &apos;-&apos; &apos; &apos; | xargs seq);do
        #for i in $(seq ${arg%-*} ${arg#*-});do
        for ((i=${arg%-*};i&lt;=${arg#*-};i++));do
            ((bm |= 1&lt;&lt;$i))
        done
    done
    printf &quot;%x\n&quot; $bm
}

bitumask() { #input hex: 7c020f21 or 0x7c020f21
    local x=$((16#${1#0x}))

    for ((i=0; x; x = x&gt;&gt;1,i++));do
        #&#x8FD9;&#x91CC;&#x7684;for&#x7684;&#x5FAA;&#x73AF;&#x4F53;&#x4E3A;&#x7A7A;, &#x7528;:&#x8868;&#x793A;&#x7A7A;&#x64CD;&#x4F5C;. for&#x4E0D;&#x80FD;&#x6CA1;&#x6709;do ... done
        for ((h=l=i; x&amp;1; x = x&gt;&gt;1,i++,h++));do :;done
        #&#x53CC;&#x5C0F;&#x62EC;&#x53F7;&#x91CC;&#x9762;&#x662F;C&#x683C;&#x5F0F;&#x7684;&#x8FD0;&#x7B97;, &#x53D8;&#x91CF;&#x524D;&#x53EF;&#x4EE5;&#x4E0D;&#x8981;$; &#x4E5F;&#x53EF;&#x4EE5;&#x7528;&#x4F5C;&#x903B;&#x8F91;&#x5224;&#x65AD;
        ((h - l == 1)) &amp;&amp; echo -n &quot;$l &quot;
        ((h - l &gt; 1)) &amp;&amp; echo -n &quot;$l-$((h-1)) &quot;
    done
    echo
}
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h1 id="shell&#x7684;&#x8FDB;&#x7A0B;&#x521B;&#x5EFA;"><a name="shell&#x7684;&#x8FDB;&#x7A0B;&#x521B;&#x5EFA;" class="anchor-navigation-ex-anchor" href="#shell&#x7684;&#x8FDB;&#x7A0B;&#x521B;&#x5EFA;"><i class="fa fa-link" aria-hidden="true"></i></a>25. shell&#x7684;&#x8FDB;&#x7A0B;&#x521B;&#x5EFA;</h1>
<p><code>ls -l /proc/self</code>&#x662F;&#x5F53;&#x524D;&#x7684;&#x8FDB;&#x7A0B;&#x53F7;
<code>echo $$</code>&#x663E;&#x793A;&#x5F53;&#x524D;&#x8FDB;&#x7A0B;&#x53F7;
&#x8FD9;&#x4E24;&#x4E2A;&#x4E0D;&#x662F;&#x4E00;&#x56DE;&#x4E8B;, <code>echo</code>&#x662F;shell&#x5185;&#x5EFA;&#x547D;&#x4EE4;, &#x4E0D;&#x4F1A;&#x8D77;&#x5B50;&#x8FDB;&#x7A0B;; &#x800C;<code>ls</code>&#x662F;&#x5916;&#x90E8;&#x547D;&#x4EE4;, shell&#x4F1A;folk&#x5B50;&#x8FDB;&#x7A0B;&#x6765;&#x8DD1;&#x5916;&#x90E8;&#x547D;&#x4EE4;;
&#x6240;&#x4EE5;&#x8FD9;&#x4FE9;&#x7684;&#x8FDB;&#x7A0B;&#x53F7;&#x4E0D;&#x4E00;&#x6837;, &#x6BD4;&#x5982;&#x4E0B;&#x9762;&#x4E00;&#x4E2A;&#x662F;41427, &#x4E00;&#x4E2A;&#x662F;4141</p>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">[root@rep2-130 debug]# echo $$
41427
[root@rep2-130 debug]# ls -l /proc/self
lrwxrwxrwx 1 root root 0 Jan 1 1970 /proc/self -&gt; 4141
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>&#x5176;&#x6B21;, <code>&amp;&amp;</code>&#x903B;&#x8F91;&#x4E0E;&#x7684;&#x64CD;&#x4F5C;, &#x4E5F;&#x4E0D;&#x5F71;&#x54CD;shell&#x521B;&#x5EFA;&#x65B0;&#x8FDB;&#x7A0B;&#x7684;&#x903B;&#x8F91;. &#x76EE;&#x524D;&#x6211;&#x7684;&#x7406;&#x89E3;&#x662F;, &#x5916;&#x90E8;&#x547D;&#x4EE4;&#x4F1A;&#x521B;&#x5EFA;&#x65B0;&#x8FDB;&#x7A0B;. </p>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">[root@rep2-130 debug]# ls -l /proc/self &amp;&amp; ls -l /proc/self &amp;&amp; ls -l /proc/self
lrwxrwxrwx 1 root root 0 Jan 1 1970 /proc/self -&gt; 3926
lrwxrwxrwx 1 root root 0 Jan 1 1970 /proc/self -&gt; 3927
lrwxrwxrwx 1 root root 0 Jan 1 1970 /proc/self -&gt; 3928
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>&#x5982;&#x679C;&#x60F3;&#x5728;&#x5F53;&#x524D;&#x8FDB;&#x7A0B;&#x4E0B;&#x6267;&#x884C;&#x547D;&#x4EE4;, &#x7528;<code>exec</code>, &#x4F1A;&#x7528;&#x540E;&#x9762;&#x4F20;&#x7684;&#x547D;&#x4EE4;&#x66FF;&#x6362;&#x5F53;&#x524D;shell&#x8FDB;&#x7A0B;. &#x6CE8;&#x610F;&#x5982;&#x679C;<code>exec</code>&#x5199;&#x5728;&#x4E00;&#x4E2A;&#x811A;&#x672C;&#x91CC;, &#x90A3;&#x4E48;&#x4E0B;&#x9762;&#x7684;&#x884C;<strong>&#x6CA1;&#x6709;&#x673A;&#x4F1A;&#x6267;&#x884C;</strong>, &#x56E0;&#x4E3A;&#x5F53;&#x524D;shell&#x88AB;&#x66FF;&#x6362;&#x6389;&#x4E86;
<code>eval</code>&#x6267;&#x884C;&#x547D;&#x4EE4;&#x7684;&#x6548;&#x679C;&#x548C;shell&#x76F4;&#x63A5;&#x6267;&#x884C;&#x4E00;&#x6837;, &#x53EA;&#x662F;&#x591A;&#x4E86;<code>&#x8F93;&#x5165;&#x89E3;&#x6790;</code>&#x8FD9;&#x4E00;&#x6B65;.</p>
<h1 id="&#x7C98;&#x8D34;&#x591A;&#x884C;&#x6587;&#x672C;&#x7BA1;&#x9053;&#x540E;&#x518D;&#x7528;&#x540E;&#x7EED;&#x547D;&#x4EE4;&#x5904;&#x7406;"><a name="&#x7C98;&#x8D34;&#x591A;&#x884C;&#x6587;&#x672C;&#x7BA1;&#x9053;&#x540E;&#x518D;&#x7528;&#x540E;&#x7EED;&#x547D;&#x4EE4;&#x5904;&#x7406;" class="anchor-navigation-ex-anchor" href="#&#x7C98;&#x8D34;&#x591A;&#x884C;&#x6587;&#x672C;&#x7BA1;&#x9053;&#x540E;&#x518D;&#x7528;&#x540E;&#x7EED;&#x547D;&#x4EE4;&#x5904;&#x7406;"><i class="fa fa-link" aria-hidden="true"></i></a>26. &#x7C98;&#x8D34;&#x591A;&#x884C;&#x6587;&#x672C;&#x7BA1;&#x9053;&#x540E;&#x518D;&#x7528;&#x540E;&#x7EED;&#x547D;&#x4EE4;&#x5904;&#x7406;</h1>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh"># &#x8FD9;&#x91CC;&lt;&lt; EOF&#x662F;here document
# awk -F&#x8868;&#x793A;&#x7528;&quot;-&gt;&quot;&#x548C;&quot;&#x7A7A;&#x683C;*&quot;&#x6765;&#x5206;&#x5272;, strtonum&#x628A;16&#x8FDB;&#x5236;&#x8F6C;&#x6210;10&#x8FDB;&#x5236;&#x8BA1;&#x7B97;, awk&#x4E0D;&#x8BA4;16&#x8FDB;&#x5236;&#x8BA1;&#x7B97;
cat &lt;&lt; EOF | awk -F&quot;-&gt;| *&quot; &apos;{printf &quot;%s %s %dK\n&quot;,$2,$3,(strtonum($3)-strtonum($2))/1024}&apos;
    0xffff9d070000-&gt;0xffff9d080000 at 0x03630000: load100 ALLOC LOAD READONLY HAS_CONTENTS
    0xffff9d080000-&gt;0xffff9d880000 at 0x03640000: load101 ALLOC LOAD HAS_CONTENTS
    0xffff9d880000-&gt;0xffff9d890000 at 0x03e40000: load102 ALLOC LOAD READONLY HAS_CONTENTS
    0xffff9d890000-&gt;0xffff9e090000 at 0x03e50000: load103 ALLOC LOAD HAS_CONTENTS
    0xffff9e090000-&gt;0xffff9e0a0000 at 0x04650000: load104 ALLOC LOAD READONLY HAS_CONTENTS
    0xffff9e0a0000-&gt;0xffff9e8a0000 at 0x04660000: load105 ALLOC LOAD HAS_CONTENTS
    0xffff9e8a0000-&gt;0xffff9e8b0000 at 0x04e60000: load106 ALLOC LOAD READONLY HAS_CONTENTS
    0xffff9e8b0000-&gt;0xffff9f0b0000 at 0x04e70000: load107 ALLOC LOAD HAS_CONTENTS
    0xffff9f0b0000-&gt;0xffff9f0c0000 at 0x05670000: load108 ALLOC LOAD READONLY HAS_CONTENTS
    0xffff9f0c0000-&gt;0xffff9f8d0000 at 0x05680000: load109 ALLOC LOAD HAS_CONTENTS
    0xffff9f8d0000-&gt;0xffff9f8d0000 at 0x05e90000: load110 ALLOC
    0xffff9f910000-&gt;0xffff9f920000 at 0x05e90000: load111a ALLOC LOAD READONLY CODE HAS_CONTENTS
EOF
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h1 id="&#x5173;&#x7CFB;&#x6570;&#x7EC4;-sed-&#x548C;-awk"><a name="&#x5173;&#x7CFB;&#x6570;&#x7EC4;-sed-&#x548C;-awk" class="anchor-navigation-ex-anchor" href="#&#x5173;&#x7CFB;&#x6570;&#x7EC4;-sed-&#x548C;-awk"><i class="fa fa-link" aria-hidden="true"></i></a>27. &#x5173;&#x7CFB;&#x6570;&#x7EC4; sed &#x548C; awk</h1>
<h2 id="&#x6539;&#x8FDB;&#x7248;-awk&#x591A;&#x7EF4;&#x6570;&#x7EC4;"><a name="&#x6539;&#x8FDB;&#x7248;-awk&#x591A;&#x7EF4;&#x6570;&#x7EC4;" class="anchor-navigation-ex-anchor" href="#&#x6539;&#x8FDB;&#x7248;-awk&#x591A;&#x7EF4;&#x6570;&#x7EC4;"><i class="fa fa-link" aria-hidden="true"></i></a>27.1. &#x6539;&#x8FDB;&#x7248; awk&#x591A;&#x7EF4;&#x6570;&#x7EC4;</h2>
<p>&#x8981;&#x89E3;&#x6790;&#x7684;&#x6587;&#x672C;&#x6837;&#x5F0F;:</p>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">$ sudo ovs-appctl dpctl/show --statistics
netdev@ovs-netdev:
  lookups: hit:0 missed:0 lost:0
  flows: 0
  port 0: ovs-netdev (tap)
    RX packets:0 errors:0 dropped:0 overruns:0 frame:0
    TX packets:0 errors:0 dropped:0 aborted:0 carrier:0
    collisions:0
    RX bytes:0 TX bytes:0
  port 1: dpdkp0 (dpdk: configured_rx_queues=4, configured_rxq_descriptors=2048, configured_tx_queues=9, configured_txq_descriptors=2048, lsc_interrupt_mode=false, mtu=1500, requested_rx_queues=4, requested_rxq_descriptors=2048, requested_tx_queues=9, requested_txq_descriptors=2048, rx_csum_offload=true)
    RX packets:0 errors:0 dropped:0 overruns:? frame:?
    TX packets:0 errors:0 dropped:0 aborted:? carrier:?
    collisions:?
    RX bytes:0 TX bytes:0
  port 2: dpdkvhostuser1 (dpdkvhostuserclient: configured_rx_queues=4, configured_tx_queues=4, mtu=1500, requested_rx_queues=4, requested_tx_queues=4)
    RX packets:0 errors:0 dropped:0 overruns:? frame:?
    TX packets:0 errors:? dropped:0 aborted:? carrier:?
    collisions:?
    RX bytes:0 TX bytes:0
  port 3: dpdkvhostuser0 (dpdkvhostuserclient: configured_rx_queues=4, configured_tx_queues=4, mtu=1500, requested_rx_queues=4, requested_tx_queues=4)
    RX packets:0 errors:0 dropped:0 overruns:? frame:?
    TX packets:0 errors:? dropped:0 aborted:? carrier:?
    collisions:?
    RX bytes:0 TX bytes:0
  port 4: ovsbr0 (tap)
    RX packets:0 errors:0 dropped:0 overruns:0 frame:0
    TX packets:0 errors:0 dropped:0 aborted:0 carrier:0
    collisions:0
    RX bytes:0 TX bytes:0
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>&#x6362;&#x4E86;&#x547D;&#x4EE4;, &#x91CD;&#x65B0;&#x6539;&#x4E86;&#x601D;&#x8DEF;; &#x8FD9;&#x6B21;&#x4E0D;&#x7528;shell&#x5173;&#x7CFB;&#x6570;&#x7EC4;, &#x4F46;&#x4F1A;&#x7528;&#x5230;awk&#x591A;&#x7EF4;&#x6570;&#x7EC4;</p>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">ovs-appctl dpctl/show &gt; /dev/null
if [ $? -ne 0 ]; then
 printf &quot;execution failed, you may need sudo?\n&quot;
 exit 1
fi

prep () { #string
 #grep -o&#x662F;&#x8BF4;&#x53EA;&#x8F93;&#x51FA;&#x6B63;&#x5219;&#x5339;&#x914D;&#x7684;&#x90E8;&#x5206;; &#x800C;&#x4E14;&#x5339;&#x914D;&#x5230;&#x7684;&#x8F93;&#x51FA;&#x90FD;&#x662F;&#x5355;&#x72EC;&#x4E00;&#x884C;, &#x4FBF;&#x4E8E;&#x540E;&#x7EED;&#x5904;&#x7406;
 # awk&#x7684; -F [ :]&#x662F;&#x8BF4;&#x7528;&#x7A7A;&#x683C;&#x548C;:&#x505A;&#x5206;&#x9694;&#x7B26;;&#x540E;&#x9762;&#x7684;NR&#x8868;&#x793A;&#x884C;&#x53F7;, &#x4ECE;1&#x5F00;&#x59CB;; NF&#x662F;&#x5F53;&#x524D;&#x884C;&#x7684;field&#x4E2A;&#x6570;
 #a[port,$1,$i]=$(i+1), &#x8FD9;&#x662F;&#x4E2A;&#x4E09;&#x7EF4;&#x6570;&#x7EC4;, &#x4F46;awk&#x5185;&#x90E8;&#x4F1A;&#x628A;&#x4E0B;&#x6807;&#x90FD;&#x8FDE;&#x8D77;&#x6765;, &#x6BD4;&#x5982;foo[5,12] = &quot;value&quot;, &#x5185;&#x90E8;&#x53D8;&#x6210;foo[&quot;5@12&quot;]=&quot;value&quot;, &#x8FD9;&#x91CC;&#x7684;@&#x662F;&#x4E2A;&#x4E0D;&#x53EF;&#x89C1;&#x7684;&#x7B26;&#x53F7;(SUBSEP)
 ###grep&#x540E;&#x7684;&#x6587;&#x672C;:
 #port 0: ovs
 #RX packets:0 errors:0 dropped:0 overruns:0 frame:0
 #TX packets:0 errors:0 dropped:0 aborted:0 carrier:0
 ###
 #&#x4E09;&#x7EF4;&#x6570;&#x7EC4;&#x662F;&#x8981;&#x628A;&#x62A5;&#x6587;&#x7EDF;&#x8BA1;&#x7684;&#x6570;&#x503C;&#x7528;&#x4E09;&#x5143;(port&#x540D;, &#x65B9;&#x5411;, &#x7EDF;&#x8BA1;&#x9879;&#x540D;&#x79F0;)&#x6765;&#x6807;&#x8BB0;, &#x6BD4;&#x5982;a[&quot;ovs&quot;,&quot;RX&quot;, &quot;packets&quot;]=0
 ###&#x6700;&#x540E;&#x6253;&#x5370;&#x51FA;&#x6765;&#x6BCF;&#x884C;&#x90FD;&#x662F;&#x5982;&#x4E0B;&#x5F62;&#x5F0F;&#x7684;&#x7EDF;&#x8BA1;
 #ovs TX aborted:0
 #dpdkp1 RX dropped:0
 #dpdkp1 RX packets:170
 #dpdkvhostuser0 RX dropped:0
 ###
 echo &quot;$1&quot; | grep -Eo &quot;port [0-9]*: [[:alnum:]]*|RX packets.*|TX packets.*&quot; | tr &quot;?&quot; &quot;0&quot; \
  | awk -F&apos;[ :]&apos; &apos;{if(NR%3==1) port=$4; else{for(i=2;i&lt;=NF;i+=2){a[port,$1,$i]=$(i+1)}}} END {for(k in a) {split(k,se,SUBSEP);printf &quot;%s %s %s:%s\n&quot;,se[1],se[2],se[3],a[k]}}&apos;
}

cmd=&apos;ovs-appctl dpctl/show --statistics&apos;
echo &quot;Calculating pps for &apos;ovs-appctl dpctl/show --statistics&apos; ...&quot;
echo &quot;Note: 0 pps will be ignored, that said statistics not showed below are 0 pps&quot;
echo

for t in t1 t2 t3; do
 test $t = t1 &amp;&amp; v1=$(eval $cmd) &amp;&amp; d1=$(date +%s%6N)
 test $t = t2 &amp;&amp; sleep 1 &amp;&amp; v2=$(eval $cmd) &amp;&amp; d2=$(date +%s%6N)
 if test $t = t3; then
  ((td=$d2 - $d1))
  #echo $td

  v1=$(prep &quot;$v1&quot;)
  v2=$(prep &quot;$v2&quot;)
  o=$(echo -e &quot;$v1 \n$v2&quot; | awk -F&apos;:&apos; -v td=&quot;$td&quot; &apos;{a[$1]=$2-a[$1]} END {for(k in a) printf &quot;%s %d pps\n&quot;,k,a[k]*1000000/td}&apos;)
  #awk&#x683C;&#x5F0F;&#x5316;&#x8F93;&#x51FA;&#x548C;c&#x4E00;&#x6837;, %12s&#x662F;&#x8BF4;12&#x4E2A;&#x5B57;&#x7B26;&#x5BBD;&#x5EA6;, &#x53F3;&#x5BF9;&#x9F50;; &#x5DE6;&#x5BF9;&#x9F50;&#x662F;%-12s
  echo &quot;$o&quot; | grep -v &quot; 0&quot; | sort | awk &apos;{printf &quot;%s:\n\t%s %s:\t%12s %s\n&quot;,$1,$2,$3,$4,$5}&apos;
 fi
done 

echo -e &quot;\n\n&quot;
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="&#x539F;&#x59CB;&#x7248;"><a name="&#x539F;&#x59CB;&#x7248;" class="anchor-navigation-ex-anchor" href="#&#x539F;&#x59CB;&#x7248;"><i class="fa fa-link" aria-hidden="true"></i></a>27.2. &#x539F;&#x59CB;&#x7248;</h2>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">ovs-vsctl list interface &gt; /dev/null
if [ $? -ne 0 ]; then
 printf &quot;ovs-vsctl execution failed, you may need sudo?\n&quot;
 exit 1
fi

#&#x6CE8;&#x610F;cmd&#x8981;&#x7528;&#x5355;&#x5F15;&#x53F7;, &#x5355;&#x5F15;&#x53F7;&#x4E0D;&#x4F1A;&#x5C55;&#x5F00;&#x53D8;&#x91CF;
#sed -r&#x662F;&#x7528;&#x6269;&#x5C55;&#x6B63;&#x5219;, &#x8FD9;&#x91CC;&#x7528;&#x5230;&#x4E86;&#x66FF;&#x6362;, &#x53CD;&#x5411;&#x5F15;&#x7528;&#x7B49;, sed&#x4F1A;&#x5BF9;&#x884C;&#x4F9D;&#x6B21;&#x8FDB;&#x884C;-e&#x540E;&#x9762;&#x7684;&#x5904;&#x7406;, &#x5904;&#x7406;&#x7684;&#x90A3;&#x884C;&#x53EB;&#x505A;patten&#x7A7A;&#x95F4;
cmd=&apos;(ovs-vsctl list interface &amp;&amp; echo date: $(date +%s%6N)) | grep -E &quot;^name|^statistics|^date&quot; | sed -r -e &quot;s/,|\{|\}//g&quot; -e &quot;s/name *: (.*)/\1:/g&quot; -e &quot;s/statistics *://g&quot;&apos;

#t1 t2 t3&#x4E0D;&#x52A0;&#x5F15;&#x53F7;, &#x89C6;&#x4E3A;&#x5355;&#x72EC;&#x5143;&#x7D20;, &#x7528;for&#x53EF;&#x4EE5;&#x904D;&#x5386;; &#x52A0;&#x4E86;&quot;&quot;&#x5C31;&#x53D8;&#x6210;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#x4E86;
for t in t1 t2 t3; do
 test $t = t1 &amp;&amp; v1=$(eval $cmd)
 #&#x672C;&#x6765;&#x8BE5;&#x7528;if, &#x8FD9;&#x91CC;&#x7528;test&#x548C;&amp;&amp;&#x505A;&#x7B80;&#x5316;&#x5904;&#x7406;; &#x4E3B;&#x8FDB;&#x7A0B;&#x4F1A;&#x7B49;&#x7740;sleep&#x6267;&#x884C;&#x5B8C;&#x624D;&#x5F80;&#x540E;&#x6267;&#x884C;
 test $t = t2 &amp;&amp; sleep 10 &amp;&amp; v2=$(eval $cmd)
 if test $t = t3; then
  i=0
  #&#x58F0;&#x660E;&#x5173;&#x7CFB;&#x6570;&#x7EC4;, &#x5173;&#x7CFB;&#x6570;&#x7EC4;&#x5C31;&#x662F;&#x53EF;&#x4EE5;&#x7528;string&#x505A;&#x4E0B;&#x6807;&#x7684;&#x6570;&#x7EC4;
  declare -A map1 map2

  #NF&#x662F;awk&#x89E3;&#x6790;&#x7684;feild&#x4E2A;&#x6570;, &#x6BCF;&#x884C;
  v1=$(echo &quot;$v1&quot; | awk -F: &apos;{printf $0; if(NF==1 || $1==&quot;date&quot;) print &quot;&quot;}&apos;)
  #&#x6BCF;&#x884C;&#x7C7B;&#x4F3C;&#x4E8E;&quot;dpdkp1&quot;: rx_bytes=865352722 rx_dropped=0 rx_errors=0 rx_packets=14419925 tx_bytes=0 tx_dropped=0 tx_errors=0 tx_packets=0
  #&#x5148;&#x628A;&#x5B83;&#x4EE5;&#x7B2C;&#x4E00;&#x4E2A;&#x7A7A;&#x683C;&#x4E3A;&#x754C;&#x5206;&#x5272;&#x4E3A;&#x4E24;&#x90E8;&#x5206;:k&#x548C;v, &#x5176;&#x5B9E;v&#x662F;&#x7B2C;&#x4E00;&#x4E2A;&#x7A7A;&#x683C;&#x540E;&#x9762;&#x6240;&#x6709;&#x7684;&#x90E8;&#x5206;
  while read k v; do
   #&#x5173;&#x7CFB;&#x6570;&#x7EC4;&#x8D4B;&#x503C;
   map1[$k]=$v
  #&#x8FD9;&#x91CC;&#x7528;&lt;&lt;&lt;&#x6765;&#x628A;&#x53D8;&#x91CF;&#x4F20;&#x5165;while&#x5757;&#x4E2D;, &#x4E4B;&#x524D;&#x8BD5;&#x8FC7;&#x7BA1;&#x9053;, &#x4F46;map&#x7684;&#x8D4B;&#x503C;&#x53EA;&#x5728;while&#x5757;&#x91CC;&#x9762;&#x6709;&#x6548;, &#x51FA;&#x6765;&#x5C31;&#x6CA1;&#x6709;&#x4E86;
  #&lt;&lt;&lt;&#x7684;&#x5B66;&#x540D;&#x662F;Here Strings, &#x662F;Here Documents&#x7684;&#x53D8;&#x79CD;; &#x53D8;&#x91CF;&#x4F1A;&#x5C55;&#x5F00;&#x5E76;&#x4F5C;&#x4E3A;&#x8F93;&#x5165;
  done &lt;&lt;&lt; &quot;$v1&quot;

  v2=$(echo &quot;$v2&quot; | awk -F: &apos;{printf $0; if(NF==1 || $1==&quot;date&quot;) print &quot;&quot;}&apos;)
  while read k v; do
   map2[$k]=$v
  done &lt;&lt;&lt; &quot;$v2&quot;

  #&#x53CC;&#x62EC;&#x53F7;&#x8868;&#x793A;&#x7B97;&#x6570;&#x8BA1;&#x7B97;
  ((TimeDiff=${map2[date:]} - ${map1[date:]}))

  #&#x5173;&#x7CFB;&#x6570;&#x7EC4;&#x904D;&#x5386; &quot;${!map2[@]}&quot;&#x662F;&#x6240;&#x6709;&#x7684;key, &#x800C;&quot;${map2[@]}&quot;&#x662F;&#x6240;&#x6709;value(&#x8FD9;&#x4E2A;&#x548C;&#x666E;&#x901A;&#x6570;&#x7EC4;&#x662F;&#x4E00;&#x81F4;&#x7684;)
  for k in &quot;${!map2[@]}&quot;; do
   if test $k != &quot;date:&quot;;then
    echo ==== pps for $k ====
    #awk -F&#x6307;&#x5B9A;&#x5206;&#x9694;&#x7B26;, &#x4E5F;&#x53EF;&#x4EE5;&#x662F;&#x4E2A;&#x96C6;&#x5408;&#x6BD4;&#x5982;&apos;[=:\n]&apos;, &#x4E5F;&#x53EF;&#x4EE5;&#x662F;&#x4E2A;string, &#x6216;&#x8005;&#x6B63;&#x5219;, &#x6BD4;&#x5982;awk -F&quot;TX|RX&quot;, &#x5C31;&#x662F;&#x628A;&#x6BCF;&#x884C;&#x6309;TX&#x6216;&#x8005;RX&#x5206;&#x5272;
    #&#x5411;awk&#x4F20;&#x5165;&#x53D8;&#x91CF;, &#x7528;-v, shell&#x53D8;&#x91CF;&#x7528;&#x53CC;&#x5F15;&#x53F7;&#x62EC;&#x8D77;&#x6765;:-v td=&quot;$TimeDiff&quot;
    #awk&#x6570;&#x7EC4;, &#x8FD9;&#x91CC;&#x5BF9;&#x6BCF;&#x884C;&#x505A;a[$1]=$2-a[$1], &#x7528;$1&#x505A;key, &#x7528;$2&#x505A;value, &#x76F8;&#x51CF;&#x5F97;&#x51FA;&#x5DEE;&#x503C;; &#x6700;&#x540E;&#x5728;END&#x5757;&#x91CC;&#x6253;&#x5370;
    #&#x8981;&#x6C42;&#x6BCF;&#x884C;&#x662F;k=v&#x7684;&#x5F62;&#x5F0F;, &#x5728;&#x6570;&#x7EC4;&#x91CC;&#x5C31;&#x662F;a[k]=v
    #&#x8FD9;&#x91CC;&#x7684;&#x51CF;&#x6CD5;&#x5F88;&#x7CBE;&#x9AD3;, a[$1]=$2-a[$1], &#x76F8;&#x540C;&#x7684;key&#x51FA;&#x73B0;&#x4E24;&#x6B21;, &#x5BF9;&#x5E94;&#x7684;value&#x662F;&#x62A5;&#x6587;&#x6570;, &#x76F8;&#x51CF;&#x5C31;&#x662F;&#x62A5;&#x6587;&#x7EDF;&#x8BA1;&#x5DEE;&#x503C;
    echo -e &quot;${map1[$k]} \n${map2[$k]}&quot; | tr &apos; &apos; &apos;\n&apos; | grep -v &quot;bytes&quot; | awk -F&apos;=&apos; -v td=&quot;$TimeDiff&quot; &apos;{a[$1]=$2-a[$1]} END {for(k in a) printf &quot;%s %d pps\n&quot;,k,a[k]*1000000/td}&apos; | grep -v &quot; 0 &quot; | sort
   fi
  done
 fi
done
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h1 id="shell&#x5173;&#x7CFB;&#x6570;&#x7EC4;----&#x6216;&#x8005;&#x8BF4;&#x662F;list"><a name="shell&#x5173;&#x7CFB;&#x6570;&#x7EC4;----&#x6216;&#x8005;&#x8BF4;&#x662F;list" class="anchor-navigation-ex-anchor" href="#shell&#x5173;&#x7CFB;&#x6570;&#x7EC4;----&#x6216;&#x8005;&#x8BF4;&#x662F;list"><i class="fa fa-link" aria-hidden="true"></i></a>28. shell&#x5173;&#x7CFB;&#x6570;&#x7EC4; -- &#x6216;&#x8005;&#x8BF4;&#x662F;list</h1>
<p>&#x53C2;&#x8003;: <a href="https://www.artificialworlds.net/blog/2012/10/17/bash-associative-array-examples/" target="_blank">https://www.artificialworlds.net/blog/2012/10/17/bash-associative-array-examples/</a>
&#x9700;&#x8981;bash&#x7248;&#x672C;&#x9AD8;&#x4E8E;4</p>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">declare -A map
$ map[foo]=bar
$ echo ${map[foo]}
bar
$ K=baz
bai@CentOS-43 ~/repo/save
$ map[$K]=quux
bai@CentOS-43 ~/repo/save
$ echo ${map[$K]}
quux
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>&#x904D;&#x5386;</p>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">$ declare -A MYMAP=( [foo a]=bar [baz b]=quux )
$ echo &quot;${!MYMAP[@]}&quot; # Print all keys - quoted, but quotes removed by echo
foo a baz b
$ # Loop through all keys in an associative array
$ for K in &quot;${!MYMAP[@]}&quot;; do echo $K; done
foo a
baz b
$ # Loop through all values in an associative array
$ for V in &quot;${MYMAP[@]}&quot;; do echo $V; done
bar
quux
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h1 id="shell&#x6570;&#x7EC4;"><a name="shell&#x6570;&#x7EC4;" class="anchor-navigation-ex-anchor" href="#shell&#x6570;&#x7EC4;"><i class="fa fa-link" aria-hidden="true"></i></a>29. shell&#x6570;&#x7EC4;</h1>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">#&#x62EC;&#x53F7;&#x62EC;&#x8D77;&#x6765;&#x5B9A;&#x4E49;&#x6570;&#x7EC4;
my_array=(A B &quot;C&quot; D)
#&#x6216;&#x8005;
array_name[0]=value0
array_name[1]=value1
array_name[2]=value2
#&#x6570;&#x7EC4;&#x5143;&#x7D20;
echo &quot;&#x7B2C;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#x4E3A;: ${my_array[0]}&quot;
echo &quot;&#x7B2C;&#x4E8C;&#x4E2A;&#x5143;&#x7D20;&#x4E3A;: ${my_array[1]}&quot;
#&#x6240;&#x6709;&#x5143;&#x7D20;
echo &quot;&#x6570;&#x7EC4;&#x7684;&#x5143;&#x7D20;&#x4E3A;: ${my_array[*]}&quot;
echo &quot;&#x6570;&#x7EC4;&#x7684;&#x5143;&#x7D20;&#x4E3A;: ${my_array[@]}&quot;
#&#x6570;&#x7EC4;&#x957F;&#x5EA6;
echo &quot;&#x6570;&#x7EC4;&#x5143;&#x7D20;&#x4E2A;&#x6570;&#x4E3A;: ${#my_array[*]}&quot;
echo &quot;&#x6570;&#x7EC4;&#x5143;&#x7D20;&#x4E2A;&#x6570;&#x4E3A;: ${#my_array[@]}&quot;
#&#x6570;&#x7EC4;&#x904D;&#x5386;
for data in ${array[@]}  
do  
    echo ${data}  
done
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>&#x53C8;&#x6BD4;&#x5982;:</p>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">#&#x8FD9;&#x91CC;ETHTOOL&#x662F;&#x4E2A;&#x6570;&#x7EC4;, &#x800C;T_PKT&#x4E5F;&#x662F;&#x6570;&#x7EC4;, &#x7531;&#x5165;&#x53C2;index&#x6765;&#x63A7;&#x5236;
update_stats () { # $name $index
    TS_LAST[$2]=${TS[$2]}
    R_PKT_LAST[$2]=${R_PKT[$2]}
    R_BYTE_LAST[$2]=${R_BYTE[$2]}
    T_PKT_LAST[$2]=${T_PKT[$2]}
    T_BYTE_LAST[$2]=${T_BYTE[$2]}

    ETHTOOL=($(ethtool -S $1 | awk &apos;/tx_packets_phy/{print $2} /rx_packets_phy/{print $2} /tx_bytes_phy/{print $2} /rx_bytes_phy/{print$2}&apos;))
    if [ -z &quot;$ETHTOOL&quot; ]; then
        ETHTOOL=($(ethtool -S $1 | awk &apos;/tx_packets/{print $2} /rx_packets/{print $2} /tx_bytes/{print $2} /rx_bytes/{print$2}&apos;))
    fi

    TS[$2]=$(date +%s%6N) # in usec
    T_PKT[$2]=${ETHTOOL[0]}
    R_PKT[$2]=${ETHTOOL[1]}
    T_BYTE[$2]=${ETHTOOL[2]}
    R_BYTE[$2]=${ETHTOOL[3]}
}

# set initial value
index=0
for name in $NETIF; do
    update_stats $name $index
    ((index++))
done
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h1 id="shell&#x811A;&#x672C;&#x89E3;&#x6790;&#x6587;&#x4EF6;-&#x8F93;&#x51FA;&#x53EF;&#x4EE5;&#x5BFC;&#x5165;&#x5230;excel&#x7684;&#x6587;&#x672C;"><a name="shell&#x811A;&#x672C;&#x89E3;&#x6790;&#x6587;&#x4EF6;-&#x8F93;&#x51FA;&#x53EF;&#x4EE5;&#x5BFC;&#x5165;&#x5230;excel&#x7684;&#x6587;&#x672C;" class="anchor-navigation-ex-anchor" href="#shell&#x811A;&#x672C;&#x89E3;&#x6790;&#x6587;&#x4EF6;-&#x8F93;&#x51FA;&#x53EF;&#x4EE5;&#x5BFC;&#x5165;&#x5230;excel&#x7684;&#x6587;&#x672C;"><i class="fa fa-link" aria-hidden="true"></i></a>30. shell&#x811A;&#x672C;&#x89E3;&#x6790;&#x6587;&#x4EF6;, &#x8F93;&#x51FA;&#x53EF;&#x4EE5;&#x5BFC;&#x5165;&#x5230;excel&#x7684;&#x6587;&#x672C;</h1>
<p>&#x6D4B;&#x4E86;&#x5927;&#x7EA6;500&#x6B21;&#x7684;stream, &#x60F3;&#x5728;excel&#x4E0A;&#x7ED8;&#x56FE;.
&#x539F;&#x59CB;&#x6570;&#x636E;&#x683C;&#x5F0F;</p>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">STREAM2 fill latency: 0.92 nanoseconds
STREAM2 fill bandwidth: 121083.29 MB/sec
STREAM2 copy latency: 2.12 nanoseconds
STREAM2 copy bandwidth: 105697.16 MB/sec
STREAM2 daxpy latency: 3.24 nanoseconds
STREAM2 daxpy bandwidth: 103654.31 MB/sec
STREAM2 sum latency: 1.57 nanoseconds
STREAM2 sum bandwidth: 71472.48 MB/sec
STREAM2 fill latency: 1.68 nanoseconds
STREAM2 fill bandwidth: 66475.08 MB/sec
STREAM2 copy latency: 2.11 nanoseconds
STREAM2 copy bandwidth: 105921.94 MB/sec
STREAM2 daxpy latency: 3.24 nanoseconds
STREAM2 daxpy bandwidth: 103562.46 MB/sec
STREAM2 sum latency: 1.57 nanoseconds
STREAM2 sum bandwidth: 71506.36 MB/sec
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>&#x7528;&#x4E0B;&#x9762;&#x7684;&#x811A;&#x672C;&#x53EF;&#x4EE5;&#x8F93;&#x51FA;&#x4E00;&#x4E2A;excel&#x8BA4;&#x8BC6;&#x7684;&#x6587;&#x672C;</p>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">for i in &quot;fill latency&quot; &quot;copy latency&quot; &quot;daxpy latency&quot; &quot;sum latency&quot; &quot;fill bandwidth&quot; &quot;copy bandwidth&quot; &quot;daxpy bandwidth&quot; &quot;sum bandwidth&quot;; do (printf &quot;$i \t&quot; &amp;&amp;  cat stream*.log | awk &quot;/$i/&quot;&apos;{printf $4 &quot;\t&quot;}&apos; &amp;&amp; echo) &gt;&gt; test.txt; done
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<ul>
<li>for&#x540E;&#x9762;&#x7684;&#x4E1C;&#x897F;&#x7528;&#x7A7A;&#x683C;&#x5206;&#x5272;</li>
<li>awk&#x662F;&#x6309;&#x884C;&#x64CD;&#x4F5C;&#x7684;, &#x6BD4;&#x5982;&#x7B2C;&#x4E00;&#x884C;&#x4F1A;&#x4E00;&#x6B21;&#x6267;&#x884C;&#x591A;&#x4E2A;{ }&#x64CD;&#x4F5C;</li>
<li>awk&#x91CC;&#x9762;&#x7528;printf&#x8F93;&#x51FA;&#x6CA1;&#x6709;&#x6362;&#x884C;</li>
<li>shell&#x53D8;&#x91CF;&#x8981;&#x4F20;&#x5165;awk, &#x7528;&#x53CC;&#x5F15;&#x53F7;, &#x4E0A;&#x9762;&#x662F;&#x7528;&#x53CC;&#x5F15;&#x53F7;&#x62EC;&#x7684;/pattern/, <code>awk &quot;/$i/&quot;&apos;{printf $4 &quot;\t&quot;}&apos;</code>&#x6CE8;&#x610F;&#x540E;&#x9762;&#x4E0D;&#x52A0;&#x7A7A;&#x683C;. &#x53C2;&#x8003;<a href="https://www.gnu.org/software/gawk/manual/html_node/Using-Shell-Variables.html" target="_blank">https://www.gnu.org/software/gawk/manual/html_node/Using-Shell-Variables.html</a></li>
<li>shell&#x7684;&#x5C0F;&#x62EC;&#x53F7;&#x53EF;&#x4EE5;&#x4E00;&#x8D77;&#x91CD;&#x5B9A;&#x5411;</li>
</ul>
<p>&#x811A;&#x672C;&#x8F93;&#x51FA;&#x6570;&#x636E;&#x793A;&#x4F8B;: &#x4E00;&#x5171;&#x516B;&#x884C;</p>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">fill latency     0.92    1.68    1.70    1.67    1.69    1.69    0.92    1.67    1.65
copy latency     2.12    2.11    2.12    2.27    2.25    2.23    2.22    2.27    2.11
daxpy latency     3.24    3.24    3.24    3.24    3.11    3.24    3.24    3.24    3.25
sum latency     1.57    1.57    1.55    1.57    1.56    1.57    1.57    1.57    1.57
fill bandwidth     121083.29    66475.08    66018.47    67102.43    66170.01    66209.27
copy bandwidth     105697.16    105921.94    105900.48    98852.60    99648.56    100382.3
daxpy bandwidth     103654.31    103562.46    103639.09    103740.30    108061.48    1036
sum bandwidth     71472.48    71506.36    72182.22    71490.27    71900.50    71472.48
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h1 id="shell&#x5904;&#x7406;&#x547D;&#x4EE4;&#x884C;&#x9009;&#x9879;"><a name="shell&#x5904;&#x7406;&#x547D;&#x4EE4;&#x884C;&#x9009;&#x9879;" class="anchor-navigation-ex-anchor" href="#shell&#x5904;&#x7406;&#x547D;&#x4EE4;&#x884C;&#x9009;&#x9879;"><i class="fa fa-link" aria-hidden="true"></i></a>31. shell&#x5904;&#x7406;&#x547D;&#x4EE4;&#x884C;&#x9009;&#x9879;</h1>
<p>&#x6CE8;&#x610F;shell&#x53D8;&#x91CF;&#x7684;&#x5220;&#x9664; &#x63D2;&#x5165;&#x64CD;&#x4F5C;
&#x6BD4;&#x5982;</p>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">     var=${arg/#--no-}
    # remove all dashes for variable names:
    eval ${var//-}=0
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">while (($#))
do
    arg=$1
    shift
    case &quot;${arg:-}&quot; in
 --verbose|-v)
     set -x
     ;;
 --help|-h|&apos;&apos;)
     help
     exit 0
     ;;
 --*\=*)
     # make variables from options
     IFS=&apos;=&apos; read var value &lt;&lt;&lt; &quot;$arg&quot;
     # remove all dashes for variable names, avoid tilde
     # expansion with quoting:
     eval ${var//-}=&quot;$value&quot;
     ;;
 --no-*)
     var=${arg/#--no-}
     # remove all dashes for variable names:
     eval ${var//-}=0
     ;;
 --*)
     # remove all dashes for variable names:
     eval ${arg//-}=1
     ;;
 -*)
     echo &quot;Invalid option: $arg&quot;
     exit 1
     ;;
 *)
     stage=$(get_stage $arg)
     if test -n &quot;$stage&quot;
     then
  eval $stage
     elif is_target $arg
     then
  target=$arg
     else
  echo &quot;Invalid command: $arg&quot;
  exit 1
     fi
     ;;
    esac
done
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h1 id="shell&#x4E5F;&#x53EF;&#x4EE5;&#x9012;&#x5F52;&#x8C03;&#x7528;&#x51FD;&#x6570;"><a name="shell&#x4E5F;&#x53EF;&#x4EE5;&#x9012;&#x5F52;&#x8C03;&#x7528;&#x51FD;&#x6570;" class="anchor-navigation-ex-anchor" href="#shell&#x4E5F;&#x53EF;&#x4EE5;&#x9012;&#x5F52;&#x8C03;&#x7528;&#x51FD;&#x6570;"><i class="fa fa-link" aria-hidden="true"></i></a>32. shell&#x4E5F;&#x53EF;&#x4EE5;&#x9012;&#x5F52;&#x8C03;&#x7528;&#x51FD;&#x6570;</h1>
<p>&#x4E0B;&#x9762;&#x8FD9;&#x4E2A;&#x4F8B;&#x5B50;&#x7684;&#x4F5C;&#x7528;&#x662F;&#x6DF1;&#x5EA6;&#x6E05;&#x9664;git&#x5E93;&#x4E0B;&#x9762;&#x7684;&#x672A;&#x88AB;&#x8DDF;&#x8E2A;&#x7684;&#x6587;&#x4EF6;, &#x5305;&#x62EC;&#x5176;&#x4E0B;&#x9762;&#x7684;&#x5B50;git&#x5E93;</p>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">#!/bin/sh

gitpurge_r()
{
 local cwd=`pwd`
 local subgit=$1
 cd $subgit
 echo &quot;deep cleaning $subgit&quot;
 local subgits=&quot;`git clean -fdx | grep &apos;Skipping repository&apos; | cut -d&apos; &apos; -f3`&quot;
 if [ -n &quot;$subgits&quot; ]; then
  for g in $subgits; do
   gitpurge_r $g
  done
 fi
 cd $cwd
}

gitpurge_r .
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="&#x6539;&#x8FDB;&#x7248;&#x672C;"><a name="&#x6539;&#x8FDB;&#x7248;&#x672C;" class="anchor-navigation-ex-anchor" href="#&#x6539;&#x8FDB;&#x7248;&#x672C;"><i class="fa fa-link" aria-hidden="true"></i></a>32.1. &#x6539;&#x8FDB;&#x7248;&#x672C;</h2>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">#!/bin/bash
B=&quot;\033[1;37;40m&quot;
N=&quot;\033[0m&quot;

top_dir=`pwd`
remote=`git remote -v | grep fetch | awk &apos;{print $2}&apos;`
repos_branch=&apos;./master bootloader/edk2/thunder-stable bootloader/grub2/grub/master bootloader/trusted-firmware/atf/thunder-stable bootloader/u-boot/thunder-stable linux/kernel/linux-aarch64/thunder-stable&apos;

function reset_current()
{
 remote_branch=`git branch -vv | grep &quot;\*&quot; | sed -r &apos;s/.*\[(.*)\].*/\1/g&apos; | cut -d: -f1`
 echo ===reseting with $remote_branch
 git reset --hard $remote_branch
}

for repo_branch in $repos_branch; do
 repo=`dirname $repo_branch`
 branch=`basename $repo_branch`
 cd $top_dir

 if [ ! -d $repo ]; then 
  echo cloning $repo 
  cd `dirname $repo`
  if [ $repo == bdk ]; then
   git clone $remote/$repo
  else
   git clone -b fae $remote/$repo
  fi
 fi

 cd $top_dir/$repo

 echo -e $B&quot;&gt;&gt;&gt;`pwd`&quot;$N
 case &quot;$1&quot; in
  purge)
   echo ==deep cleaning...
   git clean -fdx
   ;;
  fetch)
   echo ==fetching from remote...
   git fetch --all
   ;;
  merge)
   echo ==merging workspace with $branch...
   git merge origin/$branch --no-commit
   ;;
  #upsync MUST be only used on my mint mechine
  upsync)
   echo ==fetching all
   git fetch --all
   echo ==reseting with remote master
   reset_current
   echo ==chekouting $branch
   git checkout $branch
   echo ==reseting with remote stable 
   reset_current
   echo ==going back to master
   git checkout -
   ;;
  *)
   echo ==doing [&quot;$@&quot;]
   &quot;$@&quot;
   ;;
 esac
 echo
done
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h1 id="local-system-monitor"><a name="local-system-monitor" class="anchor-navigation-ex-anchor" href="#local-system-monitor"><i class="fa fa-link" aria-hidden="true"></i></a>33. local system monitor</h1>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">./sysmonitor.sh -f test.f -t &quot;just want to test it&quot;
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">#! /bin/bash

B=&quot;\033[1;37;40m&quot;
N=&quot;\033[0m&quot;

file=
interval=5
sleepsec=10
title=

while getopts &quot;f:i:s:t:&quot; arg #: needs para 
do
    case $arg in
        f)
            file=$OPTARG #$OPTARG is the para
            ;;
        i)
            interval=$OPTARG
            ;;
        s)
            sleepsec=$OPTARG
            ;;
        t)
            title=$OPTARG
            ;;
        ?) 
            echo &quot;unkonw argument&quot;
            exit 1
            ;;
    esac
done

#exec &amp;&gt; $output #output to file

function do_syscollect()
{
    echo; echo $title
    echo -e $B&quot;start system statistics collecting&quot;$N
    dmesg -c

    while test -f &quot;$file&quot;;
    do
        echo; echo -e $B&quot;========================collecting system status===========================&quot;$N
        echo; echo -e $B&quot;===date&quot;$N
        date
        echo; echo -e $B&quot;===dmesg&quot;$N
        dmesg -c
        echo; echo -e $B&quot;===top&quot;$N
        top -bn1 | head -15
        echo; echo -e $B&quot;===sar&quot;$N
        sar -n DEV -u -dp -r $interval 1 | grep Average
        sleep $sleepsec
    done
}

do_syscollect | ts
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h1 id="system-monitor-for-pangu"><a name="system-monitor-for-pangu" class="anchor-navigation-ex-anchor" href="#system-monitor-for-pangu"><i class="fa fa-link" aria-hidden="true"></i></a>34. system monitor for pangu</h1>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">$ cat statistics.sh 
#! /bin/bash

B=&quot;\033[1;37;40m&quot;
N=&quot;\033[0m&quot;

echo -e $B&quot;start system statistics collecting&quot;$N

./alldo.sh dmesg -c
while true;
do
        echo -e $B&quot;========================collecting system status===========================&quot;$N
        echo; echo -e $B&quot;===date&quot;$N
        ./alldo.sh &apos;date&apos;
        echo; echo -e $B&quot;===dmesg&quot;$N
        ./alldo.sh &apos;dmesg&apos;
        echo; echo -e $B&quot;===top&quot;$N
        ./alldo.sh &apos;top -bn1 | head -15&apos;
        echo; echo -e $B&quot;===pangu&quot;$N
        ./alldo.sh &quot;ps -ef | egrep &apos;pangu|tubo|nuwa_agent|deploy_agent|chunkserver&apos;&quot;
        echo; echo -e $B&quot;===sar&quot;$N
        ./alldo.sh &apos;sar -n DEV -u -dp -r 5 1 | grep Average&apos;
        sleep $((60*1))
done
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">$ cat logstat.sh 
#! /bin/bash

B=&quot;\033[1;37;40m&quot;
N=&quot;\033[0m&quot;

logfile=${1:-log}

./statistics.sh | ts | tee $logfile
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<pre class="line-numbers language-undefined"><code class=" language-undefined">$ cat alldo.sh 
#! /bin/bash

B=&quot;\033[1;37;40m&quot;
N=&quot;\033[0m&quot;

atlocal=F

servers=&quot;
yingjie@192.168.85.10
byj@localhost
&quot;

cvmservers=&quot;
root@10.97.219.6
root@10.97.219.55
root@10.97.219.21
root@10.97.219.44
root@10.97.219.53
root@10.97.219.50
root@10.97.219.214
root@10.97.219.13
root@10.97.219.47
root@10.97.219.69
&quot;

if [ &quot;$1&quot; = &quot;-l&quot; ]; then
        atlocal=T
        shift
fi

for i in $cvmservers; do
        ip=${i#*@}
        echo
        echo -e $B&quot;&gt;&gt;&gt;$i&quot;$N
        if [ &quot;$atlocal&quot; = &quot;T&quot; ]; then
                eval &quot;$*&quot;
        else
                ssh $i &quot;$*&quot;
        fi
done
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="&#x589E;&#x52A0;fedora&#x5206;&#x533A;&#x7684;&#x811A;&#x672C;"><a name="&#x589E;&#x52A0;fedora&#x5206;&#x533A;&#x7684;&#x811A;&#x672C;" class="anchor-navigation-ex-anchor" href="#&#x589E;&#x52A0;fedora&#x5206;&#x533A;&#x7684;&#x811A;&#x672C;"><i class="fa fa-link" aria-hidden="true"></i></a>35. &#x589E;&#x52A0;fedora&#x5206;&#x533A;&#x7684;&#x811A;&#x672C;</h1>
<p>&#x8FD9;&#x91CC;&#x9762;&#x6709;shrink&#x539F;&#x5206;&#x533A;(ubuntu), &#x589E;&#x52A0;fedora&#x5206;&#x533A;&#x5E76;&#x62F7;&#x8D1D;fedora&#x7684;fs</p>
<pre class="line-numbers language-sh" lang="sh"><code class=" language-sh">work_dir=`pwd`
dev=${1:-/dev/sdc}
ubuntu_size=${2:-500G}
tar_fedora=${3:-fedora-with-native-kernel-repo-gcc-update-to-20150423.tar.bz2}

if [ ! -b $dev ]; then
 echo &quot;$dev not found&quot;
 exit 1
fi

if [ -b ${dev}3 ]; then
 echo &quot;fedora already exists, nothing to do&quot;
 exit 0
fi

if [ ! -f $tar_fedora ]; then
 echo &quot;file $tar_fedora not found&quot;
 exit 1
fi

echo &quot;resizing ubuntu fs&quot;
e2fsck -f ${dev}2 -y
resize2fs ${dev}2 $ubuntu_size 

echo &quot;resizing ubuntu partition&quot;
gdisk $dev &lt;&lt;EOF
d
2

n


+$ubuntu_size


n





w
y
EOF

sleep 2

echo &quot;making file system for fedora&quot;
mkfs.ext4 ${dev}3

cd $work_dir
echo &quot;installing grub into defora partition&quot;
cd sdk-master
source env-setup BOARD_TYPE=crb-2s
cd host/bin
#reinstall grub on fedora partition, as well as kernel Image...
./create_disk.sh --install-grub2 ${dev}1 ${dev}3 /boot


#cd $work_dir
#echo &quot;untaring fedora&quot;
#mount ${dev}3 mnt
#cd mnt
#tar xvf ../$tar_fedora
#cd ..
#umount mnt


#cd $work_dir
#echo &quot;installing modules on fedora&quot;
#./create_disk.sh --install-modules ${dev}3


#cd $work_dir
#echo &quot;some tuning&quot;
#mount ${dev}3 mnt
#cd mnt
##clear fstab
#echo &gt; etc/fstab
##grub
#sed -i &quot;/set timeout/a\\\nmenuentry &apos;Thunder Fedora Boot&apos; {\n\tlinux /boot/vmlinuz root=/dev/sda3 console=ttyAMA0,115200n8 earlycon=pl011,0x87e024000000 coherent_pool=16M rootwait rw transparent_hugepage=never\n\tboot\n}\n&quot; boot/grub/grub.cfg
#find lib/modules -name rtc-efi.ko | xargs -i mv {} {}.bak
#cd ..
#umount mnt

sync
cd $work_dir
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
</body></html>
                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="shell_基础篇.html" class="navigation navigation-prev " aria-label="Previous page: shell命令和脚本记录-基础篇">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="shell_脚本片段.html" class="navigation navigation-next " aria-label="Next page: shell脚本片段">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"shell命令和脚本记录-高级篇","level":"1.10.3","depth":2,"next":{"title":"shell脚本片段","level":"1.10.4","depth":2,"path":"notes/shell_脚本片段.md","ref":"notes/shell_脚本片段.md","articles":[]},"previous":{"title":"shell命令和脚本记录-基础篇","level":"1.10.2","depth":2,"path":"notes/shell_基础篇.md","ref":"notes/shell_基础篇.md","articles":[]},"dir":"ltr"},"config":{"plugins":["-sharing","-lunr","-search","search-plus","-highlight","prism-ext","expandable-chapters-small","github","disqus","splitter","wide-page","hide-navigation-buttons","anchor-navigation-ex","sequence"],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"prism":{"plugins":["line-numbers"],"lineHeight":"normal","cssClasses":"line-numbers","css":["prismjs/themes/prism.css"]},"disqus":{"useIdentifier":false,"shortName":"bai-yingjie-notes"},"sequence":{"theme":"simple"},"github":{"url":"https://github.com/Bai-Yingjie/Bai-Yingjie.github.io"},"splitter":{},"wide-page":{},"fontsettings":{"theme":"white","family":"sans","size":2},"hide-navigation-buttons":{},"anchor-navigation-ex":{"mode":"float","pageTop":{"level1Icon":"","level2Icon":"","level3Icon":"","showLevelIcon":false},"isRewritePageTitle":true,"showLevel":true,"tocLevel1Icon":"fa fa-hand-o-right","tocLevel2Icon":"fa fa-hand-o-right","tocLevel3Icon":"fa fa-hand-o-right","showGoTop":true,"isShowTocTitleIcon":true,"printLog":false,"multipleH1":true,"associatedWithSummary":true,"float":{"floatIcon":"fa fa-navicon","level1Icon":"","level2Icon":"","level3Icon":"","showLevelIcon":false}},"prism-ext":{},"expandable-chapters-small":{},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false},"search-plus":{}},"theme":"default","author":"Bai Yingjie","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"My Notes","language":"zh-hans","gitbook":"*"},"file":{"path":"notes/shell_高级篇.md","mtime":"2022-10-12T02:24:49.954Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2022-10-12T02:25:44.681Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-search-plus/jquery.mark.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search-plus/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-expandable-chapters-small/expandable-chapters-small.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-github/plugin.js"></script>
        
    
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/URI.js/1.16.1/URI.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-disqus/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-splitter/splitter.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>



<!DOCTYPE HTML>
<html lang="zh-hans" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>systemtap基础 · My Notes</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        <meta name="author" content="Bai Yingjie">
        
        
    
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search-plus/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-prism/prism.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-code/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-chapter-fold/chapter-fold.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-splitter/splitter.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-wide-page/wide.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-hide-navigation-buttons/index.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-anchor-navigation-ex/style/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-mermaid-gb3/mermaid/mermaid.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-theme-comscore/test.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    


    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="profiling_perf-tools_example.html" />
    
    
    <link rel="prev" href="profiling_systemtap实例.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="输入并搜索" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    简介
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.1.1" data-path="recent_topics.html">
            
                <a href="recent_topics.html">
            
                    
                    recent topics
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="as_title_kaiyuan.html">
            
                <a href="as_title_kaiyuan.html">
            
                    
                    开源
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="my_opensource.html">
            
                <a href="my_opensource.html">
            
                    
                    我的开源项目
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="my_upstream.html">
            
                <a href="my_upstream.html">
            
                    
                    我的upstream commit
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="as_title_system.html">
            
                <a href="as_title_system.html">
            
                    
                    系统分析和性能
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="as_title_perf_misc.html">
            
                <a href="as_title_perf_misc.html">
            
                    
                    调试和分析记录系列
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1.1" data-path="profiling_调试和分析记录5.html">
            
                <a href="profiling_调试和分析记录5.html">
            
                    
                    调试和分析记录5
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.2" data-path="profiling_调试和分析记录4.html">
            
                <a href="profiling_调试和分析记录4.html">
            
                    
                    调试和分析记录4
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.3" data-path="profiling_调试和分析记录3.html">
            
                <a href="profiling_调试和分析记录3.html">
            
                    
                    调试和分析记录3
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.4" data-path="profiling_调试和分析记录2.html">
            
                <a href="profiling_调试和分析记录2.html">
            
                    
                    调试和分析记录2
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.5" data-path="profiling_调试和分析记录1.html">
            
                <a href="profiling_调试和分析记录1.html">
            
                    
                    调试和分析记录1
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="调试和分析工具概览.html">
            
                <a href="调试和分析工具概览.html">
            
                    
                    profiling和debugging工具相关
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.2.1" data-path="profiling_Linux内核调试的方式以及工具集锦.html">
            
                <a href="profiling_Linux内核调试的方式以及工具集锦.html">
            
                    
                    Linux内核调试的方式以及工具集锦(网摘)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.2" data-path="profiling_user_space_Ptrace_Utrace_Uprobes.html">
            
                <a href="profiling_user_space_Ptrace_Utrace_Uprobes.html">
            
                    
                    Ptrace, Utrace, Uprobes: Lightweight, Dynamic Tracing of User Apps
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.3" data-path="debugging_gdb备忘录.html">
            
                <a href="debugging_gdb备忘录.html">
            
                    
                    gdb备忘录
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.4" data-path="profiling_perf命令备忘录.html">
            
                <a href="profiling_perf命令备忘录.html">
            
                    
                    perf命令备忘录
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.5" data-path="profiling_perf命令备忘录2.html">
            
                <a href="profiling_perf命令备忘录2.html">
            
                    
                    perf命令备忘录2
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.6" data-path="profiling_perf学习笔记之实战篇.html">
            
                <a href="profiling_perf学习笔记之实战篇.html">
            
                    
                    perf学习笔记之实战篇
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.7" data-path="profiling_perf学习笔记之入门篇.html">
            
                <a href="profiling_perf学习笔记之入门篇.html">
            
                    
                    perf学习笔记之入门篇
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.8" data-path="profiling_用kprobe和perf_记录函数参数.html">
            
                <a href="profiling_用kprobe和perf_记录函数参数.html">
            
                    
                    使用kprobe和perf结合记录函数参数
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.9" data-path="profiling_ftrace和trace-cmd记录.html">
            
                <a href="profiling_ftrace和trace-cmd记录.html">
            
                    
                    ftrace和trace-cmd记录
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.10" data-path="profiling_ftrace使用实例.html">
            
                <a href="profiling_ftrace使用实例.html">
            
                    
                    ftrace使用实例
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.11" data-path="profiling_systemtap实例.html">
            
                <a href="profiling_systemtap实例.html">
            
                    
                    systemtap实例
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.3.2.12" data-path="profiling_systemtap基础.html">
            
                <a href="profiling_systemtap基础.html">
            
                    
                    systemtap基础
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.13" data-path="profiling_perf-tools_example.html">
            
                <a href="profiling_perf-tools_example.html">
            
                    
                    perf-tools 系统tracing工具集
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.14" data-path="profiling_Comparing_SystemTap_and_bpftrace.html">
            
                <a href="profiling_Comparing_SystemTap_and_bpftrace.html">
            
                    
                    Comparing SystemTap and bpftrace(网摘)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.15" data-path="system_analysis_bcc和ebpf.html">
            
                <a href="system_analysis_bcc和ebpf.html">
            
                    
                    bcc和ebpf(starting)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.16" data-path="profiling_valgrind体验.html">
            
                <a href="profiling_valgrind体验.html">
            
                    
                    体验valgrind
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="as_title_os_perf.html">
            
                <a href="as_title_os_perf.html">
            
                    
                    profiling和debugging实例
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.3.1" data-path="debugging_gshellos_socket_leak.html">
            
                <a href="debugging_gshellos_socket_leak.html">
            
                    
                    gshell socket leak调查
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3.2" data-path="profiling_调查ftrace显示调用栈全0问题.html">
            
                <a href="profiling_调查ftrace显示调用栈全0问题.html">
            
                    
                    调查ftrace显示调用栈全0问题
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3.3" data-path="profiling_eoe_filter写tap设备失败问题.html">
            
                <a href="profiling_eoe_filter写tap设备失败问题.html">
            
                    
                    eoe_filter写tap设备失败问题
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3.4" data-path="performance_ovs进程调查.html">
            
                <a href="performance_ovs进程调查.html">
            
                    
                    OVS进程调查
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3.5" data-path="performance_ping流程和函数调用解析.html">
            
                <a href="performance_ping流程和函数调用解析.html">
            
                    
                    ping流程和函数调用解析
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3.6" data-path="profiling_VM互相ping场景下的延迟分析.html">
            
                <a href="profiling_VM互相ping场景下的延迟分析.html">
            
                    
                    VM互相ping场景下的延迟分析
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3.7" data-path="debugging_ftrace_谁创建了bond0设备.html">
            
                <a href="debugging_ftrace_谁创建了bond0设备.html">
            
                    
                    谁创建了bond0设备: ftrace kprobe uprobe perf综合使用
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3.8" data-path="profiling_unixbench之filecopy分析.html">
            
                <a href="profiling_unixbench之filecopy分析.html">
            
                    
                    unixbench之file copy分析
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3.9" data-path="profiling_lmbench之lat_tcp分析.html">
            
                <a href="profiling_lmbench之lat_tcp分析.html">
            
                    
                    lmbench之lat_tcp分析
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.4" data-path="as_title_arch_perf.html">
            
                <a href="as_title_arch_perf.html">
            
                    
                    CPU ARCH相关
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.4.1" data-path="performance_CPU_microarchiteture_pmu.html">
            
                <a href="performance_CPU_microarchiteture_pmu.html">
            
                    
                    Top-down Microarchitecture Analysis Method(网摘)
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="as_title_cloud.html">
            
                <a href="as_title_cloud.html">
            
                    
                    Cloud和容器相关
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="container_linux_namespaces.html">
            
                <a href="container_linux_namespaces.html">
            
                    
                    linux名字空间
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="cloud_杂记.html">
            
                <a href="cloud_杂记.html">
            
                    
                    云杂记
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="container_当代容器读书笔记.html">
            
                <a href="container_当代容器读书笔记.html">
            
                    
                    当代容器读书笔记
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4" data-path="multi-arch_docker_binfmt_misc.html">
            
                <a href="multi-arch_docker_binfmt_misc.html">
            
                    
                    multi-arch docker 和 binfmt_misc
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="as_title_vdevice.html">
            
                <a href="as_title_vdevice.html">
            
                    
                    CPU和device虚拟化
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="as_title_gvisor.html">
            
                <a href="as_title_gvisor.html">
            
                    
                    gvisor
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1.1" data-path="golang_gvisor代码_KVM.html">
            
                <a href="golang_gvisor代码_KVM.html">
            
                    
                    gvisor KVM模式代码
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.1.2" data-path="golang_gvisor调试.html">
            
                <a href="golang_gvisor调试.html">
            
                    
                    gvisor调试
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.1.3" data-path="golang_gvisor_ptrace.html">
            
                <a href="golang_gvisor_ptrace.html">
            
                    
                    gvisor ptrace模式介绍(网摘)
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="rust_vmm_brief.html">
            
                <a href="rust_vmm_brief.html">
            
                    
                    rust VMM(virtual machine monitor)
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.2.1" data-path="rust_vmm_简介.html">
            
                <a href="rust_vmm_简介.html">
            
                    
                    rust-vmm简介
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2.2" data-path="rust_firecracker_代码.html">
            
                <a href="rust_firecracker_代码.html">
            
                    
                    firecracker代码
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2.3" data-path="rust_firecracker_使用.html">
            
                <a href="rust_firecracker_使用.html">
            
                    
                    firecracker使用
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2.4" data-path="rust_cloud-hypervisor_代码.html">
            
                <a href="rust_cloud-hypervisor_代码.html">
            
                    
                    cloud hypervisor代码
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2.5" data-path="rust_cloud-hypervisor_使用.html">
            
                <a href="rust_cloud-hypervisor_使用.html">
            
                    
                    cloud hypervisor使用
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2.6" data-path="rust_cloud-hypervisor_问题与解决.html">
            
                <a href="rust_cloud-hypervisor_问题与解决.html">
            
                    
                    cloud hypervisor问题与解决
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2.7" data-path="rust_virtiofsd_代码.html">
            
                <a href="rust_virtiofsd_代码.html">
            
                    
                    virtiofsd代码阅读
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2.8" data-path="rust_virtio_vhost_libs.html">
            
                <a href="rust_virtio_vhost_libs.html">
            
                    
                    vhost virtio相关的rust库
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5.3" data-path="virtualization_virtio规范阅读笔记.html">
            
                <a href="virtualization_virtio规范阅读笔记.html">
            
                    
                    virtio规范阅读笔记.md
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.4" data-path="qemu_ovs_虚拟化环境.html">
            
                <a href="qemu_ovs_虚拟化环境.html">
            
                    
                    qemu OVS 虚拟化环境准备
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.5" data-path="qemu使用.html">
            
                <a href="qemu使用.html">
            
                    
                    Qemu使用(old)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.6" data-path="qemu_binary_translation.html">
            
                <a href="qemu_binary_translation.html">
            
                    
                    QEMU 指令翻译
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="as_title_networking.html">
            
                <a href="as_title_networking.html">
            
                    
                    计算机网络相关
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="networking_杂记2.html">
            
                <a href="networking_杂记2.html">
            
                    
                    networking杂记2
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="networking_杂记1.html">
            
                <a href="networking_杂记1.html">
            
                    
                    networking杂记1
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3" data-path="networking_优化linux网络栈_接收路径.html">
            
                <a href="networking_优化linux网络栈_接收路径.html">
            
                    
                    优化linux网络栈: 接收路径(网摘)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.4" data-path="networking_优化linux网络栈_发送路径.html">
            
                <a href="networking_优化linux网络栈_发送路径.html">
            
                    
                    优化linux网络栈: 发送路径(网摘)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.5" data-path="networking_Potential_Performance_Bottleneck_in_Linux_TCP.html">
            
                <a href="networking_Potential_Performance_Bottleneck_in_Linux_TCP.html">
            
                    
                    Potential Performance Bottleneck in Linux TCP(网摘)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.6" data-path="networking_xdp入门.html">
            
                <a href="networking_xdp入门.html">
            
                    
                    Get started with XDP(网摘)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.7" data-path="networking_linux收包路径图解.html">
            
                <a href="networking_linux收包路径图解.html">
            
                    
                    linux收包路径图解(网摘)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.8" data-path="vpp_compiling_on_alpine.md">
            
                <span>
            
                    
                    alpine编译vpp
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.8.1" data-path="vpp_host_interace.html">
            
                <a href="vpp_host_interace.html">
            
                    
                    vpp的host-interface
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6.9" data-path="as_title_qemu_ovs.html">
            
                <a href="as_title_qemu_ovs.html">
            
                    
                    Qemu OVS和DPDK
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.9.1" data-path="OVS_DPDK_编译运行.html">
            
                <a href="OVS_DPDK_编译运行.html">
            
                    
                    OVS-DPDK编译运行
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.9.2" data-path="OVS_架构和代码.html">
            
                <a href="OVS_架构和代码.html">
            
                    
                    OVS架构和代码
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.9.3" data-path="OVS_DPDK_performance_HXT_ARM_server.html">
            
                <a href="OVS_DPDK_performance_HXT_ARM_server.html">
            
                    
                    OVS-DPDK for ARM server 性能测试环境
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.9.4" data-path="DPDK_Mellanox.html">
            
                <a href="DPDK_Mellanox.html">
            
                    
                    DPDK Mellanox
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.9.5" data-path="OVS_phy-vm-phy.html">
            
                <a href="OVS_phy-vm-phy.html">
            
                    
                    OVS PHY-VM-PHY
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.9.6" data-path="networking_网络虚拟化用例记录.html">
            
                <a href="networking_网络虚拟化用例记录.html">
            
                    
                    网络虚拟化用例记录
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.9.7" data-path="networking_网络虚拟化操作记录.html">
            
                <a href="networking_网络虚拟化操作记录.html">
            
                    
                    网络虚拟化操作记录
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6.10" data-path="as_title_virtnet.html">
            
                <a href="as_title_virtnet.html">
            
                    
                    虚拟化网络
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.10.1" data-path="networking_tc_filter_连接veth和tap.html">
            
                <a href="networking_tc_filter_连接veth和tap.html">
            
                    
                    Connecting a veth device to tap
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.10.2" data-path="networking_multicast_vxlan_flannel.html">
            
                <a href="networking_multicast_vxlan_flannel.html">
            
                    
                    multicast vxlan和flannel
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.10.3" data-path="networking_virtio网络介绍.html">
            
                <a href="networking_virtio网络介绍.html">
            
                    
                    virtio网络介绍(网摘): vhost-net virtio-net vhost-user SRIOV
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.10.4" data-path="networking_virtualization_杂记.html">
            
                <a href="networking_virtualization_杂记.html">
            
                    
                    虚拟化网络杂记
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.10.5" data-path="networking_linux虚拟网络接口.html">
            
                <a href="networking_linux虚拟网络接口.html">
            
                    
                    linux虚拟网络接口(网摘)
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="as_title_arm_server.html">
            
                <a href="as_title_arm_server.html">
            
                    
                    ARM server
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" data-path="arm_server_杂记.html">
            
                <a href="arm_server_杂记.html">
            
                    
                    Arm server 杂记
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.2" data-path="server_知识点.html">
            
                <a href="server_知识点.html">
            
                    
                    server知识点
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="as_title_embedded.html">
            
                <a href="as_title_embedded.html">
            
                    
                    嵌入式系统开发调试
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.1" data-path="embedded_debugging.html">
            
                <a href="embedded_debugging.html">
            
                    
                    嵌入式调试杂记
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2" data-path="uboot_杂记.html">
            
                <a href="uboot_杂记.html">
            
                    
                    uboot杂记
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.3" data-path="buildroot_杂记.html">
            
                <a href="buildroot_杂记.html">
            
                    
                    buildroot杂记
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.4" data-path="toolchain_升级gcc问题解决.html">
            
                <a href="toolchain_升级gcc问题解决.html">
            
                    
                    升级GCC7.3问题解决
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.5" data-path="kernel_异常打印分析实例.html">
            
                <a href="kernel_异常打印分析实例.html">
            
                    
                    kernel bug异常打印分析
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="as_title_linuxdaily.html">
            
                <a href="as_title_linuxdaily.html">
            
                    
                    Linux工程实践
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.9.1" data-path="linux_日常使用.html">
            
                <a href="linux_日常使用.html">
            
                    
                    日常linux使用
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2" data-path="git_日常使用.html">
            
                <a href="git_日常使用.html">
            
                    
                    日常git使用
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.3" data-path="向kernel提交补丁.html">
            
                <a href="向kernel提交补丁.html">
            
                    
                    向kernel提交补丁
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.4" data-path="linux_ssh_relay.html">
            
                <a href="linux_ssh_relay.html">
            
                    
                    ssh relay
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.5" data-path="gitlab_ci.html">
            
                <a href="gitlab_ci.html">
            
                    
                    gitlab CI
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.6" data-path="docker_操作记录.html">
            
                <a href="docker_操作记录.html">
            
                    
                    docker操作记录
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.7" data-path="centos_操作记录.html">
            
                <a href="centos_操作记录.html">
            
                    
                    centos操作记录
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="as_title_golang.html">
            
                <a href="as_title_golang.html">
            
                    
                    Golang
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.1" data-path="as_title_golang1.html">
            
                <a href="as_title_golang1.html">
            
                    
                    入门
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.1.1" data-path="golang_语法基础.html">
            
                <a href="golang_语法基础.html">
            
                    
                    Golang 语法基础
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.1.2" data-path="golang_json性能.html">
            
                <a href="golang_json性能.html">
            
                    
                    Golang json性能比较
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.10.2" data-path="golang_原理.html">
            
                <a href="golang_原理.html">
            
                    
                    Golang 原理相关
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.2.1" data-path="golang_interface原理.html">
            
                <a href="golang_interface原理.html">
            
                    
                    Golang interface原理(网摘)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.2.2" data-path="golang_内存分配.html">
            
                <a href="golang_内存分配.html">
            
                    
                    Golang 内存分配(网摘)
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.10.3" data-path="golang_标准库.html">
            
                <a href="golang_标准库.html">
            
                    
                    Golang 标准库
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.4" data-path="golang_泛型.html">
            
                <a href="golang_泛型.html">
            
                    
                    Golang 泛型
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.5" data-path="golang_我的反射代码.html">
            
                <a href="golang_我的反射代码.html">
            
                    
                    Golang 我的反射代码
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.6" data-path="golang_问答.html">
            
                <a href="golang_问答.html">
            
                    
                    Golang 问答
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.7" data-path="golang_plugin.html">
            
                <a href="golang_plugin.html">
            
                    
                    Golang plugin
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.8" data-path="golang_高效go.html">
            
                <a href="golang_高效go.html">
            
                    
                    Golang 高效go
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.9" data-path="golang_进阶.html">
            
                <a href="golang_进阶.html">
            
                    
                    Golang 进阶
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.10" data-path="as_title_golang2.html">
            
                <a href="as_title_golang2.html">
            
                    
                    Golang 杂记
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.10.1" data-path="golang_杂记1.html">
            
                <a href="golang_杂记1.html">
            
                    
                    Golang 杂记1
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.10.2" data-path="golang_杂记2.html">
            
                <a href="golang_杂记2.html">
            
                    
                    Golang 杂记2
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.10.3" data-path="golang_杂记3.html">
            
                <a href="golang_杂记3.html">
            
                    
                    Golang 杂记3
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.10.4" data-path="golang_lib选型.html">
            
                <a href="golang_lib选型.html">
            
                    
                    Golang lib选型
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.10.5" data-path="golang_mod_proxy.html">
            
                <a href="golang_mod_proxy.html">
            
                    
                    go mod和go proxy
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.10.6" data-path="golang_汇编_arm64.html">
            
                <a href="golang_汇编_arm64.html">
            
                    
                    Golang 汇编语法
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.10.7" data-path="golang_cgo_swig.html">
            
                <a href="golang_cgo_swig.html">
            
                    
                    go调用c可以用swig
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.10.11" data-path="as_title_golang3.html">
            
                <a href="as_title_golang3.html">
            
                    
                    Golang 环境和工具链生成
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.11.1" data-path="golang_toolchain_ppc.html">
            
                <a href="golang_toolchain_ppc.html">
            
                    
                    go tools增加ppc32支持
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.11.2" data-path="golang_toolchain_compile_gccgo.html">
            
                <a href="golang_toolchain_compile_gccgo.html">
            
                    
                    编译gccgo
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.11.3" data-path="golang_go_on_mips.html">
            
                <a href="golang_go_on_mips.html">
            
                    
                    go on mips boards(not so updated)
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.11.3.1" data-path="golang_go_on_mips_part1.html">
            
                <a href="golang_go_on_mips_part1.html">
            
                    
                    part 1: cross compile go
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.11.3.2" data-path="golang_go_on_mips_part2.html">
            
                <a href="golang_go_on_mips_part2.html">
            
                    
                    part 2: build native go compiler
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.11.3.3" data-path="golang_go_on_mips_part3.html">
            
                <a href="golang_go_on_mips_part3.html">
            
                    
                    part 3: gccgo experiments
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.11.3.4" data-path="golang_go_on_mips_part4.html">
            
                <a href="golang_go_on_mips_part4.html">
            
                    
                    part 4: Golang json performance
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.11.3.5" data-path="golang_gentoo_on_mips_board_and_build_go.html">
            
                <a href="golang_gentoo_on_mips_board_and_build_go.html">
            
                    
                    Gentoo on mips board and build go
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.10.12" data-path="as_title_golang4.html">
            
                <a href="as_title_golang4.html">
            
                    
                    微服务
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.12.1" data-path="golang_micro.html">
            
                <a href="golang_micro.html">
            
                    
                    go-micro和micro
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.12.2" data-path="golang_微服务概念.html">
            
                <a href="golang_微服务概念.html">
            
                    
                    微服务概念
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.10.13" data-path="as_title_golang5.html">
            
                <a href="as_title_golang5.html">
            
                    
                    解释器和编解码
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.13.1" data-path="golang_yeagi.html">
            
                <a href="golang_yeagi.html">
            
                    
                    解释器yeagi
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.13.2" data-path="golang_tengo.html">
            
                <a href="golang_tengo.html">
            
                    
                    解释器tengo
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.13.3" data-path="golang_govaluate.html">
            
                <a href="golang_govaluate.html">
            
                    
                    解释器govaluate
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.13.4" data-path="golang_encoding_gotiny.html">
            
                <a href="golang_encoding_gotiny.html">
            
                    
                    gotiny编解码
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.13.5" data-path="golang_abs.html">
            
                <a href="golang_abs.html">
            
                    
                    解释器abs
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.10.14" data-path="as_title_golang6.html">
            
                <a href="as_title_golang6.html">
            
                    
                    调试和性能
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.14.1" data-path="golang_调试记录.html">
            
                <a href="golang_调试记录.html">
            
                    
                    Golang 调试记录
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.14.2" data-path="golang_topid性能优化.html">
            
                <a href="golang_topid性能优化.html">
            
                    
                    Golang topid性能优化
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.14.3" data-path="golang_gshell性能调试.html">
            
                <a href="golang_gshell性能调试.html">
            
                    
                    Golang gshell性能调试
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.10.15" data-path="as_title_golang7.html">
            
                <a href="as_title_golang7.html">
            
                    
                    网络和消息中间件
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.15.1" data-path="golang_zmq.html">
            
                <a href="golang_zmq.html">
            
                    
                    消息中间件基本概念和zero mq
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.15.2" data-path="golang_mango.html">
            
                <a href="golang_mango.html">
            
                    
                    消息中间件mango
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.15.3" data-path="golang_libp2p.html">
            
                <a href="golang_libp2p.html">
            
                    
                    Golang p2p网络
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.11" data-path="as_title_rust.html">
            
                <a href="as_title_rust.html">
            
                    
                    Rust
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.11.1" data-path="rust_入门_brief.html">
            
                <a href="rust_入门_brief.html">
            
                    
                    Rust 入门系列
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.11.1.1" data-path="rust_books.html">
            
                <a href="rust_books.html">
            
                    
                    Rust reference books
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.1.2" data-path="rust_入门1.html">
            
                <a href="rust_入门1.html">
            
                    
                    Rust 安装和基础语法
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.1.3" data-path="rust_入门2.html">
            
                <a href="rust_入门2.html">
            
                    
                    Rust 泛型和内存所有权
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.1.4" data-path="rust_入门3.html">
            
                <a href="rust_入门3.html">
            
                    
                    Rust 闭包 容器 迭代器 生成器 线程
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.1.5" data-path="rust_工程构建.html">
            
                <a href="rust_工程构建.html">
            
                    
                    Rust 工程构建
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.11.2" data-path="rust_coding_brief.html">
            
                <a href="rust_coding_brief.html">
            
                    
                    Rust 代码积累
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.11.2.1" data-path="rust_by_example_misc.html">
            
                <a href="rust_by_example_misc.html">
            
                    
                    Rust by example杂记
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.2.2" data-path="rust_序列化.html">
            
                <a href="rust_序列化.html">
            
                    
                    Rust 序列化原理
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.2.3" data-path="rust_知识点积累.html">
            
                <a href="rust_知识点积累.html">
            
                    
                    Rust 知识点更新
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.2.4" data-path="rust_adaptiveservice.html">
            
                <a href="rust_adaptiveservice.html">
            
                    
                    rust版本的adaptiveservice探索
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.2.5" data-path="rust_常用设施.html">
            
                <a href="rust_常用设施.html">
            
                    
                    Rust 常用设施
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.2.6" data-path="rust_代码小段.html">
            
                <a href="rust_代码小段.html">
            
                    
                    Rust 代码小段
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.2.7" data-path="rust_错误处理.html">
            
                <a href="rust_错误处理.html">
            
                    
                    Rust 错误处理(网摘)
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.11.3" data-path="others.html">
            
                <a href="others.html">
            
                    
                    其他
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.11.3.1" data-path="rust_mdbook_使用.html">
            
                <a href="rust_mdbook_使用.html">
            
                    
                    Rust 使用mdbook
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.12" data-path="as_title_scripts.html">
            
                <a href="as_title_scripts.html">
            
                    
                    脚本
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.12.1" data-path="shell_变量.html">
            
                <a href="shell_变量.html">
            
                    
                    shell变量
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.2" data-path="shell_基础篇.html">
            
                <a href="shell_基础篇.html">
            
                    
                    shell命令和脚本记录-基础篇
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.3" data-path="shell_高级篇.html">
            
                <a href="shell_高级篇.html">
            
                    
                    shell命令和脚本记录-高级篇
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.4" data-path="shell_脚本片段.html">
            
                <a href="shell_脚本片段.html">
            
                    
                    shell脚本片段
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.5" data-path="python_记录.html">
            
                <a href="python_记录.html">
            
                    
                    python记录
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.6" data-path="lua_记录.html">
            
                <a href="lua_记录.html">
            
                    
                    lua记录
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.7" data-path="shell_rds脚本阅读.html">
            
                <a href="shell_rds脚本阅读.html">
            
                    
                    RDS脚本阅读
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.8" data-path="Project_Euler.html">
            
                <a href="Project_Euler.html">
            
                    
                    Project Euler
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.13" data-path="as_title_app.html">
            
                <a href="as_title_app.html">
            
                    
                    应用相关
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.13.1" data-path="app_sysbench代码分析.html">
            
                <a href="app_sysbench代码分析.html">
            
                    
                    sysbench代码分析
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.14" data-path="as_title_algorithm.html">
            
                <a href="as_title_algorithm.html">
            
                    
                    算法相关
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.14.1" data-path="algorithm_radix_tree.html">
            
                <a href="algorithm_radix_tree.html">
            
                    
                    基数(radix)树(网摘)
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.15" data-path="as_title_cos.html">
            
                <a href="as_title_cos.html">
            
                    
                    C和Operating System
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.15.1" data-path="system_libc_part1.html">
            
                <a href="system_libc_part1.html">
            
                    
                    libc概览1
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.2" data-path="system_libc_part2.html">
            
                <a href="system_libc_part2.html">
            
                    
                    libc概览2
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.3" data-path="system_libc_part3.html">
            
                <a href="system_libc_part3.html">
            
                    
                    libc概览3
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.4" data-path="system_原理杂记.html">
            
                <a href="system_原理杂记.html">
            
                    
                    系统原理杂记
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.5" data-path="system_alpine.html">
            
                <a href="system_alpine.html">
            
                    
                    Alpine Linux
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.6" data-path="system_进程间通信.html">
            
                <a href="system_进程间通信.html">
            
                    
                    进程间通信
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.7" data-path="system_特殊功能fd.html">
            
                <a href="system_特殊功能fd.html">
            
                    
                    eventfd timerfd signalfd和fd共享
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.8" data-path="c_automake_autoconf.html">
            
                <a href="c_automake_autoconf.html">
            
                    
                    automake autoconf
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.9" data-path="makefile_原理和实践.html">
            
                <a href="makefile_原理和实践.html">
            
                    
                    makefile
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.10" data-path="c_编程杂记高级篇.html">
            
                <a href="c_编程杂记高级篇.html">
            
                    
                    C编程杂记高级篇
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.11" data-path="c_编程杂记基础篇.html">
            
                <a href="c_编程杂记基础篇.html">
            
                    
                    C编程杂记基础篇
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.12" data-path="c_networking_socket高阶用法.html">
            
                <a href="c_networking_socket高阶用法.html">
            
                    
                    网络编程: Advanced Socket Topics(网摘)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.13" data-path="c_protobuf介绍.html">
            
                <a href="c_protobuf介绍.html">
            
                    
                    序列化: protobuf介绍
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.14" data-path="c_进程间通信_共享文件和共享内存.html">
            
                <a href="c_进程间通信_共享文件和共享内存.html">
            
                    
                    进程间通信: 共享文件和共享内存(网摘)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.15" data-path="c_pthread_condition和mutex.html">
            
                <a href="c_pthread_condition和mutex.html">
            
                    
                    并发 任务 事件 和锁.md
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.16" data-path="kernel_user_space_howto.html">
            
                <a href="kernel_user_space_howto.html">
            
                    
                    kernel space和user space交互(网摘, linux2.6)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.17" data-path="CentOS_系统性能优化配置.html">
            
                <a href="CentOS_系统性能优化配置.html">
            
                    
                    CentOS 性能优化系统配置
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.18" data-path="OS_gentoo使用.html">
            
                <a href="OS_gentoo使用.html">
            
                    
                    gentoo使用记录
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.16" data-path="as_title_driver.html">
            
                <a href="as_title_driver.html">
            
                    
                    内核 设备和驱动相关
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.16.1" data-path="device_driver_地址空间类型和DMA.html">
            
                <a href="device_driver_地址空间类型和DMA.html">
            
                    
                    地址空间类型和DMA
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.2" data-path="platform_device_driver.html">
            
                <a href="platform_device_driver.html">
            
                    
                    平台驱动杂记
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.3" data-path="platform_device_driver2.html">
            
                <a href="platform_device_driver2.html">
            
                    
                    平台驱动杂记2
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.4" data-path="device_driver_pci驱动概述.html">
            
                <a href="device_driver_pci驱动概述.html">
            
                    
                    pci驱动概述
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.5" data-path="device_driver_内核中的时间和延迟操作.html">
            
                <a href="device_driver_内核中的时间和延迟操作.html">
            
                    
                    内核中的时间和延迟操作
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.6" data-path="device_driver_杂记.html">
            
                <a href="device_driver_杂记.html">
            
                    
                    驱动调试杂记
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.7" data-path="device_localbus_16bit读写.html">
            
                <a href="device_localbus_16bit读写.html">
            
                    
                    CPLD做8bit到16bit转换
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.8" data-path="driver_位域和大小端.html">
            
                <a href="driver_位域和大小端.html">
            
                    
                    位域和大小端
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.9" data-path="as_title_driver1.html">
            
                <a href="as_title_driver1.html">
            
                    
                    nand
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.16.9.1" data-path="device_driver_octeon_nand.html">
            
                <a href="device_driver_octeon_nand.html">
            
                    
                    octeon nand flash驱动
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.9.2" data-path="device_driver_nand概率写失败问题分析.html">
            
                <a href="device_driver_nand概率写失败问题分析.html">
            
                    
                    Nand flash概率写失败问题分析
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.16.10" data-path="octeon_remote_pci.html">
            
                <a href="octeon_remote_pci.html">
            
                    
                    octeon remote-pci.c阅读
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.11" data-path="Device_VFIO_notes.html">
            
                <a href="Device_VFIO_notes.html">
            
                    
                    VFIO简介
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.12" data-path="as_title_driver2.html">
            
                <a href="as_title_driver2.html">
            
                    
                    智能网卡和DPDK
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.16.12.1" data-path="smartNIC_智能网卡对比.html">
            
                <a href="smartNIC_智能网卡对比.html">
            
                    
                    智能网卡对比
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.12.2" data-path="octeon_pci_NIC.html">
            
                <a href="octeon_pci_NIC.html">
            
                    
                    octeon PCI NIC
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.12.3" data-path="as_title_driver3.html">
            
                <a href="as_title_driver3.html">
            
                    
                    octeon liquidIO
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.16.12.3.1" data-path="smartNIC_liquidIO_代码阅读app篇.html">
            
                <a href="smartNIC_liquidIO_代码阅读app篇.html">
            
                    
                    PCI-NIC 代码阅读 --app篇
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.12.3.2" data-path="smartNIC_liquidIO_代码阅读api篇.html">
            
                <a href="smartNIC_liquidIO_代码阅读api篇.html">
            
                    
                    PCI-NIC 代码阅读 --api篇
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.12.3.3" data-path="smartNIC_liquidIO_代码阅读driver篇之结构体.html">
            
                <a href="smartNIC_liquidIO_代码阅读driver篇之结构体.html">
            
                    
                    PCI-NIC 代码阅读 --driver篇之结构体
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.12.3.4" data-path="smartNIC_liquidIO_代码阅读driver篇.html">
            
                <a href="smartNIC_liquidIO_代码阅读driver篇.html">
            
                    
                    PCI-NIC 代码阅读 --driver篇
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.12.3.5" data-path="smartNIC_liquidIO_代码阅读真NIC篇.html">
            
                <a href="smartNIC_liquidIO_代码阅读真NIC篇.html">
            
                    
                    PCI-NIC 代码阅读 --真NIC篇
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.16.12.4" data-path="networking_dpdk使用_2014.html">
            
                <a href="networking_dpdk使用_2014.html">
            
                    
                    DPDK使用(2014)
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.16.13" data-path="device_nvme要点介绍.html">
            
                <a href="device_nvme要点介绍.html">
            
                    
                    nvme要点介绍
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.17" data-path="as_title_cpu.html">
            
                <a href="as_title_cpu.html">
            
                    
                    CPU Arch相关
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.17.1" data-path="CPU_interconnection_networks.html">
            
                <a href="CPU_interconnection_networks.html">
            
                    
                    CPU核互联模型
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.2" data-path="cache_CPU和cache一致性原理.html">
            
                <a href="cache_CPU和cache一致性原理.html">
            
                    
                    CPU和cache一致性原理
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.3" data-path="as_title_cpu1.html">
            
                <a href="as_title_cpu1.html">
            
                    
                    ARM64
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.17.3.1" data-path="CPU_ARM64_知识杂记.html">
            
                <a href="CPU_ARM64_知识杂记.html">
            
                    
                    aarch64架构知识杂记
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.3.2" data-path="CPU_ARM64_thunder_overview.html">
            
                <a href="CPU_ARM64_thunder_overview.html">
            
                    
                    thunder 概览
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.3.3" data-path="CPU_ARM64_thunder_开发板操作记录.html">
            
                <a href="CPU_ARM64_thunder_开发板操作记录.html">
            
                    
                    thunder 开发板操作记录
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.3.4" data-path="CPU_ARM64_thunder_bdk.html">
            
                <a href="CPU_ARM64_thunder_bdk.html">
            
                    
                    thunder BDK
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.3.5" data-path="CPU_ARM64_thunder_efi_rtc.html">
            
                <a href="CPU_ARM64_thunder_efi_rtc.html">
            
                    
                    thunder RTC时间和efi
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.3.6" data-path="CPU_ARM64_thunder_uefi_fdt.html">
            
                <a href="CPU_ARM64_thunder_uefi_fdt.html">
            
                    
                    thunder uefi和fdt
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.3.7" data-path="CPU_ARM64_thunder_atf.html">
            
                <a href="CPU_ARM64_thunder_atf.html">
            
                    
                    thunder atf
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.3.8" data-path="CPU_ARM64_thunder_kernel_boot.html">
            
                <a href="CPU_ARM64_thunder_kernel_boot.html">
            
                    
                    thunder kernel启动打印流程
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.17.4" data-path="as_title_cpu2.html">
            
                <a href="as_title_cpu2.html">
            
                    
                    PPC
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.17.4.1" data-path="CPU_PPC启动多核Linux_流程和内存映射.html">
            
                <a href="CPU_PPC启动多核Linux_流程和内存映射.html">
            
                    
                    PPC启动多核linux: 流程和内存映射
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.4.2" data-path="CPU_PPC_kernel升级记录.html">
            
                <a href="CPU_PPC_kernel升级记录.html">
            
                    
                    PPC kernel升级记录
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.17.5" data-path="as_title_cpu3.html">
            
                <a href="as_title_cpu3.html">
            
                    
                    MIPS
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.17.5.1" data-path="CPU_MIPS_octeon地址空间和寄存器访问.html">
            
                <a href="CPU_MIPS_octeon地址空间和寄存器访问.html">
            
                    
                    octeon 地址空间和寄存器访问
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.5.2" data-path="CPU_MIPS_octeon操作记录.html">
            
                <a href="CPU_MIPS_octeon操作记录.html">
            
                    
                    octeon 操作记录
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.5.3" data-path="CPU_MIPS_octeon_包处理性能.html">
            
                <a href="CPU_MIPS_octeon_包处理性能.html">
            
                    
                    octeon 系列处理器包处理性能
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.5.4" data-path="CPU_MIPS_octeon_ddr调试记录.html">
            
                <a href="CPU_MIPS_octeon_ddr调试记录.html">
            
                    
                    octeon DDR调试
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.5.5" data-path="CPU_MIPS_octeon_BDK.html">
            
                <a href="CPU_MIPS_octeon_BDK.html">
            
                    
                    octeon CN78xx BDK
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.5.6" data-path="kernel_增加ECC中断.html">
            
                <a href="kernel_增加ECC中断.html">
            
                    
                    octeon 增加ECC中断
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.5.7" data-path="CPU_MIPS_octeon_hw-ddr2代码走读.html">
            
                <a href="CPU_MIPS_octeon_hw-ddr2代码走读.html">
            
                    
                    octeon hw-ddr2代码走读
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.5.8" data-path="CPU_MIPS_octeon_reboot调试和ddr中断.html">
            
                <a href="CPU_MIPS_octeon_reboot调试和ddr中断.html">
            
                    
                    octeon reboot调试和DDR中断
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.5.9" data-path="CPU_MIPS_octeon中断.html">
            
                <a href="CPU_MIPS_octeon中断.html">
            
                    
                    octeon 中断
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.5.10" data-path="CPU_MIPS_octeon原子操作.html">
            
                <a href="CPU_MIPS_octeon原子操作.html">
            
                    
                    octeon 原子操作
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.5.11" data-path="CPU_MIPS_octeon网口代码分析.html">
            
                <a href="CPU_MIPS_octeon网口代码分析.html">
            
                    
                    octeon 网口代码分析
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            本书使用 GitBook 发布
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >systemtap基础</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div class="search-plus" id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <div id="anchor-navigation-ex-navbar"><i class="fa fa-navicon"></i><ul><li><span class="title-icon "></span><a href="#systemtap&#x5B66;&#x4E60;&#x8D44;&#x6599;"><b>1. </b>systemtap&#x5B66;&#x4E60;&#x8D44;&#x6599;</a></li><li><span class="title-icon "></span><a href="#systemtap&#x80FD;&#x5E72;&#x4EC0;&#x4E48;"><b>2. </b>systemtap&#x80FD;&#x5E72;&#x4EC0;&#x4E48;</a></li><ul><li><span class="title-icon "></span><a href="#uprobe&#x539F;&#x7406;"><b>2.1. </b>uprobe&#x539F;&#x7406;</a></li><li><span class="title-icon "></span><a href="#systemtap&#x5DE5;&#x4F5C;&#x539F;&#x7406;"><b>2.2. </b>systemtap&#x5DE5;&#x4F5C;&#x539F;&#x7406;</a></li></ul><li><span class="title-icon "></span><a href="#systemtap&#x57FA;&#x7840;"><b>3. </b>systemtap&#x57FA;&#x7840;</a></li><ul><li><span class="title-icon "></span><a href="#&#x57FA;&#x672C;&#x5B89;&#x88C5;"><b>3.1. </b>&#x57FA;&#x672C;&#x5B89;&#x88C5;</a></li><li><span class="title-icon "></span><a href="#systemtap&#x8BED;&#x6CD5;"><b>3.2. </b>systemtap&#x8BED;&#x6CD5;</a></li><ul><li><span class="title-icon "></span><a href="#&#x547D;&#x4EE4;&#x884C;&#x4F20;&#x53C2;"><b>3.2.1. </b>&#x547D;&#x4EE4;&#x884C;&#x4F20;&#x53C2;</a></li><li><span class="title-icon "></span><a href="#stp&#x547D;&#x4EE4;&#x7684;&#x7ED3;&#x675F;"><b>3.2.2. </b>stp&#x547D;&#x4EE4;&#x7684;&#x7ED3;&#x675F;</a></li><li><span class="title-icon "></span><a href="#&#x57FA;&#x672C;&#x8BED;&#x6CD5;"><b>3.2.3. </b>&#x57FA;&#x672C;&#x8BED;&#x6CD5;</a></li><li><span class="title-icon "></span><a href="#probepoints-man-stapprobes"><b>3.2.4. </b>probepoints man stapprobes</a></li></ul></ul><li><span class="title-icon "></span><a href="#expands-to"><b>4. </b>Expands to</a></li><li><span class="title-icon "></span><a href="#expands-to_1"><b>5. </b>Expands to</a></li><ul><ul><li><span class="title-icon "></span><a href="#&#x57FA;&#x672C;probe&#x8BED;&#x6CD5;"><b>5.1.1. </b>&#x57FA;&#x672C;probe&#x8BED;&#x6CD5;</a></li><li><span class="title-icon "></span><a href="#&#x51FD;&#x6570;&#x5B9A;&#x4E49;"><b>5.1.2. </b>&#x51FD;&#x6570;&#x5B9A;&#x4E49;</a></li></ul><li><span class="title-icon "></span><a href="#tapset"><b>5.2. </b>tapset</a></li><ul><li><span class="title-icon "></span><a href="#&#x4E0A;&#x4E0B;&#x6587;&#x65B9;&#x6CD5;"><b>5.2.1. </b>&#x4E0A;&#x4E0B;&#x6587;&#x65B9;&#x6CD5;</a></li><li><span class="title-icon "></span><a href="#&#x65F6;&#x95F4;&#x76F8;&#x5173;"><b>5.2.2. </b>&#x65F6;&#x95F4;&#x76F8;&#x5173;</a></li><li><span class="title-icon "></span><a href="#&#x5B57;&#x7B26;&#x4E32;&#x548C;&#x6570;&#x636E;&#x83B7;&#x53D6;"><b>5.2.3. </b>&#x5B57;&#x7B26;&#x4E32;&#x548C;&#x6570;&#x636E;&#x83B7;&#x53D6;</a></li><li><span class="title-icon "></span><a href="#&#x8C03;&#x7528;shell&#x547D;&#x4EE4;"><b>5.2.4. </b>&#x8C03;&#x7528;shell&#x547D;&#x4EE4;</a></li><li><span class="title-icon "></span><a href="#&#x5185;&#x5B58;&#x76F8;&#x5173;"><b>5.2.5. </b>&#x5185;&#x5B58;&#x76F8;&#x5173;</a></li><li><span class="title-icon "></span><a href="#&#x8FDB;&#x7A0B;&#x8FD0;&#x884C;&#x65F6;&#x95F4;&#x76F8;&#x5173;"><b>5.2.6. </b>&#x8FDB;&#x7A0B;&#x8FD0;&#x884C;&#x65F6;&#x95F4;&#x76F8;&#x5173;</a></li><li><span class="title-icon "></span><a href="#&#x8C03;&#x5EA6;&#x5668;&#x76F8;&#x5173;"><b>5.2.7. </b>&#x8C03;&#x5EA6;&#x5668;&#x76F8;&#x5173;</a></li><li><span class="title-icon "></span><a href="#io&#x5B50;&#x7CFB;&#x7EDF;&#x76F8;&#x5173;"><b>5.2.8. </b>IO&#x5B50;&#x7CFB;&#x7EDF;&#x76F8;&#x5173;</a></li><li><span class="title-icon "></span><a href="#irq-&#x76F8;&#x5173;"><b>5.2.9. </b>irq &#x76F8;&#x5173;</a></li><li><span class="title-icon "></span><a href="#&#x7F51;&#x7EDC;&#x76F8;&#x5173;"><b>5.2.10. </b>&#x7F51;&#x7EDC;&#x76F8;&#x5173;</a></li><li><span class="title-icon "></span><a href="#socket&#x76F8;&#x5173;"><b>5.2.11. </b>socket&#x76F8;&#x5173;</a></li><li><span class="title-icon "></span><a href="#&#x5185;&#x6838;&#x8FDB;&#x7A0B;&#x76F8;&#x5173;"><b>5.2.12. </b>&#x5185;&#x6838;&#x8FDB;&#x7A0B;&#x76F8;&#x5173;</a></li><li><span class="title-icon "></span><a href="#signal&#x76F8;&#x5173;"><b>5.2.13. </b>signal&#x76F8;&#x5173;</a></li><li><span class="title-icon "></span><a href="#errno&#x76F8;&#x5173;"><b>5.2.14. </b>errno&#x76F8;&#x5173;</a></li><li><span class="title-icon "></span><a href="#&#x76EE;&#x5F55;&#x9879;&#x76F8;&#x5173;"><b>5.2.15. </b>&#x76EE;&#x5F55;&#x9879;&#x76F8;&#x5173;</a></li><li><span class="title-icon "></span><a href="#exit&#x548C;printk"><b>5.2.16. </b>exit&#x548C;printk</a></li><li><span class="title-icon "></span><a href="#&#x6742;&#x9879;"><b>5.2.17. </b>&#x6742;&#x9879;</a></li><li><span class="title-icon "></span><a href="#tty-scsi-nfs-snmp-jason&#x7565;"><b>5.2.18. </b>tty scsi nfs snmp jason&#x7565;</a></li></ul></ul></ul></div><a href="#systemtap&#x5B66;&#x4E60;&#x8D44;&#x6599;" id="anchorNavigationExGoTop"><i class="fa fa-arrow-up"></i></a><ul>
<li><a href="#systemtap&#x5B66;&#x4E60;&#x8D44;&#x6599;">systemtap&#x5B66;&#x4E60;&#x8D44;&#x6599;</a></li>
<li><a href="#systemtap&#x80FD;&#x5E72;&#x4EC0;&#x4E48;">systemtap&#x80FD;&#x5E72;&#x4EC0;&#x4E48;</a><ul>
<li><a href="#uprobe&#x539F;&#x7406;">uprobe&#x539F;&#x7406;</a></li>
<li><a href="#systemtap&#x5DE5;&#x4F5C;&#x539F;&#x7406;">systemtap&#x5DE5;&#x4F5C;&#x539F;&#x7406;</a></li>
</ul>
</li>
<li><a href="#systemtap&#x57FA;&#x7840;">systemtap&#x57FA;&#x7840;</a><ul>
<li><a href="#&#x57FA;&#x672C;&#x5B89;&#x88C5;">&#x57FA;&#x672C;&#x5B89;&#x88C5;</a></li>
<li><a href="#systemtap&#x8BED;&#x6CD5;">systemtap&#x8BED;&#x6CD5;</a><ul>
<li><a href="#&#x547D;&#x4EE4;&#x884C;&#x4F20;&#x53C2;">&#x547D;&#x4EE4;&#x884C;&#x4F20;&#x53C2;</a></li>
<li><a href="#stp&#x547D;&#x4EE4;&#x7684;&#x7ED3;&#x675F;">stp&#x547D;&#x4EE4;&#x7684;&#x7ED3;&#x675F;</a></li>
<li><a href="#&#x57FA;&#x672C;&#x8BED;&#x6CD5;">&#x57FA;&#x672C;&#x8BED;&#x6CD5;</a></li>
<li><a href="#probepoints-man-stapprobes">probepoints <code>man stapprobes</code></a><ul>
<li><a href="#syscall&#x7CFB;&#x5217;aliases-&#x51FA;&#x81EA;tapset&#x5E93;-&#x6BCF;&#x4E2A;&#x7CFB;&#x7EDF;&#x8C03;&#x7528;&#x90FD;&#x6709;&#x4E00;&#x5BF9;probe&#x70B9;">syscall.*&#x7CFB;&#x5217;aliases, &#x51FA;&#x81EA;tapset&#x5E93;, &#x6BCF;&#x4E2A;&#x7CFB;&#x7EDF;&#x8C03;&#x7528;&#x90FD;&#x6709;&#x4E00;&#x5BF9;probe&#x70B9;</a></li>
<li><a href="#timer-aliases">timer aliases</a></li>
<li><a href="#dwarf&#x7C7B;&#x7684;probe">DWARF&#x7C7B;&#x7684;probe</a></li>
<li><a href="#&#x5176;&#x4ED6;probe&#x4E3E;&#x4F8B;">&#x5176;&#x4ED6;probe&#x4E3E;&#x4F8B;</a></li>
<li><a href="#&#x4E0A;&#x4E0B;&#x6587;&#x53D8;&#x91CF;">&#x4E0A;&#x4E0B;&#x6587;&#x53D8;&#x91CF;</a></li>
<li><a href="#&#x975E;dwarf&#x7C7B;&#x7684;probe">&#x975E;DWARF&#x7C7B;&#x7684;probe</a></li>
<li><a href="#kernel&#x9759;&#x6001;probe&#x70B9;">kernel&#x9759;&#x6001;probe&#x70B9;</a></li>
<li><a href="#&#x7528;&#x6237;&#x6001;probe">&#x7528;&#x6237;&#x6001;probe</a><ul>
<li><a href="#&#x975E;&#x7B26;&#x53F7;&#x7C7B;&#x7684;probe">&#x975E;&#x7B26;&#x53F7;&#x7C7B;&#x7684;probe</a></li>
<li><a href="#&#x7B26;&#x53F7;&#x7C7B;&#x7684;probe-&#x53EF;&#x4EE5;probe&#x7528;&#x6237;&#x6001;&#x7A0B;&#x5E8F;-&#x5171;&#x4EAB;&#x5E93;">&#x7B26;&#x53F7;&#x7C7B;&#x7684;probe, &#x53EF;&#x4EE5;probe&#x7528;&#x6237;&#x6001;&#x7A0B;&#x5E8F;, &#x5171;&#x4EAB;&#x5E93;</a></li>
</ul>
</li>
<li><a href="#java-probe">java probe</a></li>
<li><a href="#input-probe">input probe</a></li>
<li><a href="#netfilter-probe">netfilter probe</a></li>
<li><a href="#perf-probe">perf probe</a></li>
<li><a href="#python-probe">python probe</a></li>
<li><a href="#&#x786C;&#x4EF6;watchpoint&#x7C7B;&#x578B;probe">&#x786C;&#x4EF6;watchpoint&#x7C7B;&#x578B;probe</a></li>
<li><a href="#&#x4E00;&#x4E9B;&#x4F8B;&#x5B50;">&#x4E00;&#x4E9B;&#x4F8B;&#x5B50;</a></li>
</ul>
</li>
<li><a href="#&#x57FA;&#x672C;probe&#x8BED;&#x6CD5;">&#x57FA;&#x672C;probe&#x8BED;&#x6CD5;</a></li>
<li><a href="#&#x51FD;&#x6570;&#x5B9A;&#x4E49;">&#x51FD;&#x6570;&#x5B9A;&#x4E49;</a></li>
</ul>
</li>
<li><a href="#tapset">tapset</a><ul>
<li><a href="#&#x4E0A;&#x4E0B;&#x6587;&#x65B9;&#x6CD5;">&#x4E0A;&#x4E0B;&#x6587;&#x65B9;&#x6CD5;</a></li>
<li><a href="#&#x65F6;&#x95F4;&#x76F8;&#x5173;">&#x65F6;&#x95F4;&#x76F8;&#x5173;</a></li>
<li><a href="#&#x5B57;&#x7B26;&#x4E32;&#x548C;&#x6570;&#x636E;&#x83B7;&#x53D6;">&#x5B57;&#x7B26;&#x4E32;&#x548C;&#x6570;&#x636E;&#x83B7;&#x53D6;</a></li>
<li><a href="#&#x8C03;&#x7528;shell&#x547D;&#x4EE4;">&#x8C03;&#x7528;shell&#x547D;&#x4EE4;</a></li>
<li><a href="#&#x5185;&#x5B58;&#x76F8;&#x5173;">&#x5185;&#x5B58;&#x76F8;&#x5173;</a><ul>
<li><a href="#&#x65B9;&#x6CD5;">&#x65B9;&#x6CD5;</a></li>
<li><a href="#probe">probe</a></li>
</ul>
</li>
<li><a href="#&#x8FDB;&#x7A0B;&#x8FD0;&#x884C;&#x65F6;&#x95F4;&#x76F8;&#x5173;">&#x8FDB;&#x7A0B;&#x8FD0;&#x884C;&#x65F6;&#x95F4;&#x76F8;&#x5173;</a></li>
<li><a href="#&#x8C03;&#x5EA6;&#x5668;&#x76F8;&#x5173;">&#x8C03;&#x5EA6;&#x5668;&#x76F8;&#x5173;</a></li>
<li><a href="#io&#x5B50;&#x7CFB;&#x7EDF;&#x76F8;&#x5173;">IO&#x5B50;&#x7CFB;&#x7EDF;&#x76F8;&#x5173;</a></li>
<li><a href="#irq-&#x76F8;&#x5173;">irq &#x76F8;&#x5173;</a></li>
<li><a href="#&#x7F51;&#x7EDC;&#x76F8;&#x5173;">&#x7F51;&#x7EDC;&#x76F8;&#x5173;</a></li>
<li><a href="#socket&#x76F8;&#x5173;">socket&#x76F8;&#x5173;</a></li>
<li><a href="#&#x5185;&#x6838;&#x8FDB;&#x7A0B;&#x76F8;&#x5173;">&#x5185;&#x6838;&#x8FDB;&#x7A0B;&#x76F8;&#x5173;</a></li>
<li><a href="#signal&#x76F8;&#x5173;">signal&#x76F8;&#x5173;</a></li>
<li><a href="#errno&#x76F8;&#x5173;">errno&#x76F8;&#x5173;</a></li>
<li><a href="#&#x76EE;&#x5F55;&#x9879;&#x76F8;&#x5173;">&#x76EE;&#x5F55;&#x9879;&#x76F8;&#x5173;</a></li>
<li><a href="#exit&#x548C;printk">exit&#x548C;printk</a></li>
<li><a href="#&#x6742;&#x9879;">&#x6742;&#x9879;</a></li>
<li><a href="#tty-scsi-nfs-snmp-jason&#x7565;">tty scsi nfs snmp jason&#x7565;</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<h1 id="systemtap&#x5B66;&#x4E60;&#x8D44;&#x6599;"><a name="systemtap&#x5B66;&#x4E60;&#x8D44;&#x6599;" class="anchor-navigation-ex-anchor" href="#systemtap&#x5B66;&#x4E60;&#x8D44;&#x6599;"><i class="fa fa-link" aria-hidden="true"></i></a>1. systemtap&#x5B66;&#x4E60;&#x8D44;&#x6599;</h1>
<ul>
<li><a href="https://myaut.github.io/dtrace-stap-book/intro/foreword.html" target="_blank">https://myaut.github.io/dtrace-stap-book/intro/foreword.html</a></li>
<li><a href="https://help.eclipse.org/kepler/index.jsp?topic=%2Forg.eclipse.linuxtools.systemtap.ui.doc%2FLinux_Tools_Project%2FSystemtap%2FUser_Guide%2FUser-Guide.html" target="_blank">https://help.eclipse.org/kepler/index.jsp?topic=%2Forg.eclipse.linuxtools.systemtap.ui.doc%2FLinux_Tools_Project%2FSystemtap%2FUser_Guide%2FUser-Guide.html</a></li>
<li><a href="https://help.eclipse.org/mars/index.jsp?topic=%2Forg.eclipse.tracecompass.doc.user%2Fdoc%2FTrace-Compass-Main-Features.html" target="_blank">https://help.eclipse.org/mars/index.jsp?topic=%2Forg.eclipse.tracecompass.doc.user%2Fdoc%2FTrace-Compass-Main-Features.html</a></li>
<li><a href="https://landley.net/kdocs/ols/2007/ols2007v1-pages-215-224.pdf" target="_blank">https://landley.net/kdocs/ols/2007/ols2007v1-pages-215-224.pdf</a></li>
<li>suse&#x5F88;&#x597D;&#x7684;&#x5165;&#x95E8;&#x6559;&#x7A0B;:<br><a href="https://doc.opensuse.org/documentation/leap/tuning/html/book.sle.tuning/cha.tuning.systemtap.html" target="_blank">https://doc.opensuse.org/documentation/leap/tuning/html/book.sle.tuning/cha.tuning.systemtap.html</a></li>
<li>&#x5B98;&#x65B9;&#x4F8B;&#x5B50;:<br><a href="https://sourceware.org/systemtap/examples/" target="_blank">https://sourceware.org/systemtap/examples/</a></li>
<li><a href="https://help.eclipse.org/kepler/index.jsp?topic=%2Forg.eclipse.linuxtools.systemtap.ui.doc%2FLinux_Tools_Project%2FSystemtap%2FUser_Guide%2FUser-Guide.html" target="_blank">https://help.eclipse.org/kepler/index.jsp?topic=%2Forg.eclipse.linuxtools.systemtap.ui.doc%2FLinux_Tools_Project%2FSystemtap%2FUser_Guide%2FUser-Guide.html</a></li>
<li><a href="https://myaut.github.io/dtrace-stap-book/intro/foreword.html" target="_blank">https://myaut.github.io/dtrace-stap-book/intro/foreword.html</a></li>
</ul>
<h1 id="systemtap&#x80FD;&#x5E72;&#x4EC0;&#x4E48;"><a name="systemtap&#x80FD;&#x5E72;&#x4EC0;&#x4E48;" class="anchor-navigation-ex-anchor" href="#systemtap&#x80FD;&#x5E72;&#x4EC0;&#x4E48;"><i class="fa fa-link" aria-hidden="true"></i></a>2. systemtap&#x80FD;&#x5E72;&#x4EC0;&#x4E48;</h1>
<p>systemtap&#x662F;kprobe&#x548C;uprobe&#x7684;&#x524D;&#x7AEF;, &#x6211;&#x7684;&#x7406;&#x89E3;&#x662F;, &#x5B83;&#x80FD;&#x4EE5;&#x52A8;&#x6001;&#x7684;&#x65B9;&#x5F0F;&#x6765;probe kernel&#x6216;&#x8005;user&#x8FDB;&#x7A0B;(&#x4E2D;&#x65AD;&#x5B9E;&#x73B0;?).</p>
<p>&#x548C;perf probe&#x4E00;&#x6837;, &#x5E95;&#x5C42;&#x662F;&#x7C7B;&#x4F3C;&#x4E8E;<code>kprobe/uprobe</code>&#x63D0;&#x4F9B;&#x7684;<code>/sys/kernel/debug/tracing</code>&#x76EE;&#x5F55;&#x6811;&#x7684;&#x63A5;&#x53E3;, &#x4F46;&#x4E0D;&#x4E00;&#x6837;&#x7684;&#x662F;: perf&#x7684;&#x8F93;&#x51FA;&#x683C;&#x5F0F;&#x662F;&#x56FA;&#x5B9A;&#x7684;, &#x800C;systemtap&#x53EF;&#x4EE5;&#x5C06;&#x7528;&#x6237;&#x7684;&#x8C03;&#x8BD5;&#x811A;&#x672C;&#x8F6C;&#x6362;&#x6210;&#x5185;&#x6838;&#x6A21;&#x5757;, &#x6765;&#x5B9A;&#x5236;&#x5316;&#x8F93;&#x51FA;&#x6253;&#x5370;.</p>
<p>&#x5C06;&#x6765;ebpf&#x53EF;&#x80FD;&#x53D6;&#x4EE3;systemtap</p>
<p>&#x6CE8;&#x610F;probe&#x548C;trace point&#x7684;&#x533A;&#x522B;:</p>
<ul>
<li><p>probe&#x662F;&#x52A8;&#x6001;&#x6DFB;&#x52A0;&#x7684;, &#x6BD4;&#x5982;&#x52A0;&#x4E86;<code>gcc -pg</code>&#x9009;&#x9879;&#x65F6;, &#x5229;&#x7528;&#x66FF;&#x6362;&#x6389;<code>mcount</code>&#x51FD;&#x6570;&#x6765;&#x5B8C;&#x6210;probe; &#x4E0D;&#x4F7F;&#x80FD;&#x7684;&#x65F6;&#x5019;mcount&#x57FA;&#x672C;&#x5C31;&#x662F;<code>nop</code><br>&#x5982;&#x679C;&#x6CA1;&#x52A0;pg&#x9009;&#x9879;, &#x7CFB;&#x7EDF;&#x628A;probe&#x70B9;&#x7684;&#x4EE3;&#x7801;&#x66FF;&#x6362;&#x6210;&#x65AD;&#x70B9;&#x6307;&#x4EE4;(&#x6BD4;&#x5982;ARMv8&#x7684;BRK&#x6307;&#x4EE4;), &#x548C;gdb&#x6253;&#x65AD;&#x70B9;&#x539F;&#x7406;&#x7C7B;&#x4F3C;(&#x4F7F;&#x7528;ptrace&#x7CFB;&#x7EDF;&#x8C03;&#x7528;).<br>&#x4E0B;&#x56FE;&#x8868;&#x660E;&#x4E86;, systemtap&#x548C;uprobe&#x76F4;&#x63A5;&#x4F7F;&#x7528;&#x5185;&#x6838;&#x7684;utrace&#x6846;&#x67B6;, &#x800C;gdb&#x4F7F;&#x7528;ptrace, &#x540E;&#x8005;&#x5E95;&#x5C42;&#x4E5F;&#x662F;&#x8C03;&#x7528;utrace.<br>uprobe&#x8981;&#x6C42;kernel version&#x5927;&#x4E8E;3.5<br><img src="img/profiling_systemtap&#x57FA;&#x7840;_20221024144401.png" alt="">  </p>
</li>
<li><p>trace point&#x662F;&#x9759;&#x6001;&#x57CB;&#x597D;&#x7684;, &#x63D0;&#x524D;&#x5199;&#x597D;&#x7684;&#x51FD;&#x6570;</p>
</li>
</ul>
<h2 id="uprobe&#x539F;&#x7406;"><a name="uprobe&#x539F;&#x7406;" class="anchor-navigation-ex-anchor" href="#uprobe&#x539F;&#x7406;"><i class="fa fa-link" aria-hidden="true"></i></a>2.1. uprobe&#x539F;&#x7406;</h2>
<p>&#x7CFB;&#x7EDF;&#x628A;&#x88AB;probe&#x7684;&#x4EE3;&#x7801;<strong>&#x66FF;&#x6362;&#x6210;breakpoint&#x6307;&#x4EE4;</strong>, &#x5728;&#x5176;handler&#x91CC;&#x9762;&#x518D;&#x6267;&#x884C;&#x88AB;&#x66FF;&#x6362;&#x7684;&#x4EE3;&#x7801;, &#x540C;&#x65F6;&#x6267;&#x884C;&#x5176;&#x4ED6;debug&#x4EE3;&#x7801;.</p>
<blockquote>
<p>Since probes are associated with files, they affect all processes that run code from those files. A special copy is made of the page to contain the probe; in that copy, the instruction at the specified offset is copied and replaced by a breakpoint. When the breakpoint is hit by a running process, filter() will be called if present, and handler() will be run unless the filter said otherwise. Then the displaced instruction is executed (using the &quot;execute out of line&quot; mechanism described in this article) and control returns to the instruction following the breakpoint.<br>Uprobes thus implements a mechanism by which a kernel function can be invoked whenever a process executes a specific instruction location. One could imagine a number of things that said kernel function could do; there has been talk, for example, of using uprobes (and, perhaps someday, something derived from utrace) as a replacement for the much-maligned ptrace() system call. Tools like GDB could place breakpoints with uprobes; it might even be possible to load simple filters for conditional breakpoints into the kernel, speeding their execution considerably. Uprobes could also someday be a component of a Dtrace-like dynamic tracing functionality. For now, though, the interfaces for that kind of feature have not been added to the kernel; none have even been proposed.</p>
</blockquote>
<p>&#x53C2;&#x8003;: <a href="https://lwn.net/Articles/499190/" target="_blank">https://lwn.net/Articles/499190/</a></p>
<h2 id="systemtap&#x5DE5;&#x4F5C;&#x539F;&#x7406;"><a name="systemtap&#x5DE5;&#x4F5C;&#x539F;&#x7406;" class="anchor-navigation-ex-anchor" href="#systemtap&#x5DE5;&#x4F5C;&#x539F;&#x7406;"><i class="fa fa-link" aria-hidden="true"></i></a>2.2. systemtap&#x5DE5;&#x4F5C;&#x539F;&#x7406;</h2>
<p>systemtap&#x63D0;&#x4F9B;stap&#x547D;&#x4EE4;&#x884C;&#x548C;&#x4E00;&#x5957;&#x811A;&#x672C;&#x8BED;&#x8A00;&#x6765;&#x5B8C;&#x6210;&#x5BF9;&#x7CFB;&#x7EDF;&#x8FD0;&#x884C;&#x65F6;&#x6D3B;&#x52A8;&#x7684;&#x68C0;&#x6D4B;&#x548C;&#x6570;&#x636E;&#x6536;&#x96C6;.<br>stap&#x547D;&#x4EE4;&#x63A5;&#x53D7;systemtap&#x8BED;&#x8A00;&#x7684;&#x811A;&#x672C;<code>*.stp</code>, &#x7F16;&#x8BD1;&#x6210;C&#x8BED;&#x8A00;&#x7684;&#x5185;&#x6838;&#x6A21;&#x5757;, &#x7136;&#x540E;&#x7531;staprun&#x628A;&#x8BE5;&#x5185;&#x6838;&#x6A21;&#x5757;&#x63D2;&#x5165;&#x5185;&#x6838;&#x8FD0;&#x884C;, &#x5E76;&#x4E0E;&#x4E4B;&#x901A;&#x4FE1;, &#x628A;trace&#x6570;&#x636E;&#x4ECE;&#x5185;&#x6838;&#x8003;&#x51FA;&#x6765;, &#x4FDD;&#x5B58;&#x5230;&#x4E34;&#x65F6;&#x6587;&#x4EF6;&#x91CC;, &#x5728;probe&#x7ED3;&#x675F;&#x7684;&#x65F6;&#x5019;, staprun&#x4F1A;unload&#x8FD9;&#x4E2A;&#x5185;&#x6838;&#x6A21;&#x5757;. systemtap&#x811A;&#x672C;&#x80FD;&#x5B8C;&#x6210;&#x6570;&#x636E;&#x6536;&#x96C6;, &#x8FC7;&#x6EE4;, &#x6574;&#x7406;&#x7684;&#x529F;&#x80FD;, &#x6BD4;&#x8F83;&#x7075;&#x6D3B;.</p>
<p>stap&#x7F16;&#x8BD1;&#x540E;&#x7684;<code>*.c</code>&#x548C;<code>*.ko</code>&#x5728;<code>~/.systemtap</code>&#x8DEF;&#x5F84;&#x4E0B;, &#x6BD4;&#x5982;</p>
<pre class="language-"><code class="lang-shell">$ <span class="token function">sudo</span> <span class="token function">ls</span> /root/.systemtap/cache/37
stap_3789144b44a61fc185145ac98a2b5446_1298.c stap_3789144b44a61fc185145ac98a2b5446_1298_hash.log stap_3789144b44a61fc185145ac98a2b5446_1298.ko
</code></pre>
<p>.stp&#x811A;&#x672C;&#x548C;awk&#x548C;c&#x7C7B;&#x4F3C;,&#x652F;&#x6301;&#x7684;&#x6570;&#x636E;&#x7C7B;&#x578B;&#x6709;&#x6574;&#x578B;, &#x5B57;&#x7B26;&#x4E32;, &#x548C;&#x5173;&#x7CFB;&#x6570;&#x7EC4;, &#x6709;&#x70B9;&#x50CF;&#x52A8;&#x6001;&#x8BED;&#x8A00;&#x4E00;&#x6837;, &#x53D8;&#x91CF;&#x4E0D;&#x7528;&#x58F0;&#x660E;, &#x7531;&#x7F16;&#x8BD1;&#x5668;&#x63A8;&#x65AD;. &#x5176;&#x8BED;&#x6CD5;&#x53EF;&#x53C2;&#x8003;&#x5B98;&#x7F51;:  <a href="http://sourceware.org/systemtap/langref/" target="_blank">http://sourceware.org/systemtap/langref/</a>, &#x8FD8;&#x6709;&#x5F88;&#x591A;&#x4F8B;&#x5B50;:<a href="http://www.sourceware.org/systemtap/examples/" target="_blank">http://www.sourceware.org/systemtap/examples/</a></p>
<h1 id="systemtap&#x57FA;&#x7840;"><a name="systemtap&#x57FA;&#x7840;" class="anchor-navigation-ex-anchor" href="#systemtap&#x57FA;&#x7840;"><i class="fa fa-link" aria-hidden="true"></i></a>3. systemtap&#x57FA;&#x7840;</h1>
<h2 id="&#x57FA;&#x672C;&#x5B89;&#x88C5;"><a name="&#x57FA;&#x672C;&#x5B89;&#x88C5;" class="anchor-navigation-ex-anchor" href="#&#x57FA;&#x672C;&#x5B89;&#x88C5;"><i class="fa fa-link" aria-hidden="true"></i></a>3.1. &#x57FA;&#x672C;&#x5B89;&#x88C5;</h2>
<pre class="language-"><code class="lang-shell"><span class="token comment">#&#x5B89;&#x88C5;</span>
<span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> systemtap
<span class="token comment">#systemtap&#x9700;&#x8981;kernel&#x7684;debug&#x4FE1;&#x606F;, &#x5728;ubuntu&#x4E0A;&#x4F9D;&#x8D56;&#x4E8E;kernel&#x7684;dbg&#x5305;, &#x6BD4;&#x5982;linux-image-*-dbg linux-header-*</span>
<span class="token comment">#stap-prep&#x547D;&#x4EE4;&#x53EF;&#x4EE5;&#x5904;&#x7406;&#x8FD9;&#x4E9B;&#x4F9D;&#x8D56;, &#x4F46;ubuntu&#x4E0B;&#x8FD8;&#x9700;&#x8981;rpm&#x5DE5;&#x5177;, &#x8FD0;&#x884C;&#x5931;&#x8D25;</span>
stap-prep
<span class="token comment">#&#x5982;&#x679C;&#x662F;&#x81EA;&#x5DF1;&#x7F16;&#x7684;kernel, &#x9700;&#x8981;CONFIG_DEBUG_INFO CONFIG_KPROBES  CONFIG_DEBUG_FS CONFIG_RELAY.</span>

<span class="token comment">#CentOS&#x8981;&#x5B89;&#x88C5;kernel&#x76F8;&#x5173;&#x7684;debuginfo</span>
kernel-debuginfo
kernel-debuginfo-common-aarch64
kernel-devel
kernel-headers
kernel-tools
</code></pre>
<h2 id="systemtap&#x8BED;&#x6CD5;"><a name="systemtap&#x8BED;&#x6CD5;" class="anchor-navigation-ex-anchor" href="#systemtap&#x8BED;&#x6CD5;"><i class="fa fa-link" aria-hidden="true"></i></a>3.2. systemtap&#x8BED;&#x6CD5;</h2>
<ul>
<li>&#x8BE6;&#x7EC6;&#x8BED;&#x6CD5;&#x89C1; <a href="https://sourceware.org/systemtap/langref.pdf" target="_blank">https://sourceware.org/systemtap/langref.pdf</a>
<a href="https://sourceware.org/systemtap/SystemTap_Beginners_Guide/index.html" target="_blank">https://sourceware.org/systemtap/SystemTap_Beginners_Guide/index.html</a></li>
<li><code># // /* */</code>&#x90FD;&#x662F;&#x6CE8;&#x91CA;</li>
<li><code>;</code>&#x662F;&#x53EF;&#x9009;&#x7684;, { STMT1 STMT2 ... }&#x53EF;&#x4EE5;&#x4E0D;&#x7528;<code>;</code>&#x9694;&#x5F00;</li>
<li>&#x5728;guru mod(-g&#x9009;&#x9879;)&#x4E0B;, &#x7528;<code>%{ %}</code>&#x5305;&#x62EC;&#x7684;&#x90E8;&#x5206;&#x662F;C&#x4EE3;&#x7801;</li>
<li><code>man stap</code>&#x548C;<code>man stapprobes</code> <code>man stapref</code>&#x67E5;&#x770B;&#x8BE6;&#x7EC6;&#x8BED;&#x6CD5;</li>
<li>&#x5173;&#x952E;&#x8BCD;: <code>break continue delete else exit foreach for function global private if in next probe return try/catch while</code>, &#x6709;foreach&#x548C;in, &#x5F88;&#x6709;&#x52A8;&#x6001;&#x8BED;&#x8A00;&#x8303;&#x513F;.</li>
</ul>
<h3 id="&#x547D;&#x4EE4;&#x884C;&#x4F20;&#x53C2;"><a name="&#x547D;&#x4EE4;&#x884C;&#x4F20;&#x53C2;" class="anchor-navigation-ex-anchor" href="#&#x547D;&#x4EE4;&#x884C;&#x4F20;&#x53C2;"><i class="fa fa-link" aria-hidden="true"></i></a>3.2.1. &#x547D;&#x4EE4;&#x884C;&#x4F20;&#x53C2;</h3>
<p>&#x5BF9;stap&#x6765;&#x8BF4;, &#x53CC;&#x5F15;&#x53F7;&#x91CC;&#x7684;&#x53C2;&#x6570;&#x662F;&#x5B57;&#x7B26;&#x4E32;, &#x5426;&#x5219;&#x662F;integer
<code>$1 $2 ...</code> &#x8868;&#x793A;&#x547D;&#x4EE4;&#x884C;&#x4F4D;&#x7F6E;&#x53C2;&#x6570;, &#x4F46;&#x4F1A;&#x88AB;&#x89E3;&#x6790;;<code>$#</code>&#x662F;&#x53C2;&#x6570;&#x4E2A;&#x6570;
<code>@1 @2 ...</code> &#x540C;&#x6837;&#x8868;&#x793A;&#x547D;&#x4EE4;&#x884C;&#x53C2;&#x6570;, &#x4F46;&#x4F1A;&#x8FD4;&#x56DE;&#x539F;&#x59CB;&#x5B57;&#x7B26;&#x4E32;; <code>@#</code>&#x4E5F;&#x662F;&#x53C2;&#x6570;&#x4E2A;&#x6570;, &#x5B57;&#x7B26;&#x4E32;&#x5F62;&#x5F0F;</p>
<p>&#x8BBF;&#x95EE;&#x4E0D;&#x5B58;&#x5728;&#x7684;&#x53C2;&#x6570;&#x4F1A;&#x4EA7;&#x751F;&#x9519;&#x8BEF;.<br>&#x6BD4;&#x5982;:</p>
<pre class="language-"><code class="lang-shell">probe begin <span class="token punctuation">{</span> printf<span class="token punctuation">(</span><span class="token string">&quot;%d, %s<span class="token entity" title="\n">\n</span>&quot;</span>, <span class="token variable">$1</span>, @2<span class="token punctuation">)</span> <span class="token punctuation">}</span> 
<span class="token comment">#&#x7528;&#x4E0B;&#x9762;&#x547D;&#x4EE4;&#x8C03;&#x7528;</span>
stap example.stp <span class="token string">&apos;5+5&apos;</span> mystring
<span class="token comment">#&#x7ED3;&#x679C;&#x662F;</span>
<span class="token number">10</span>, mystring

<span class="token comment">#&#x53C2;&#x6570;&#x4E2A;&#x6570;</span>
$ <span class="token function">sudo</span> stap <span class="token parameter variable">-e</span> <span class="token string">&apos;probe begin {printf(&quot;hello %d\n&quot;, $#) exit()}&apos;</span> <span class="token number">1</span> <span class="token number">2</span> <span class="token number">3</span>
WARNING: unused <span class="token builtin class-name">command</span> line option <span class="token variable">$1</span>/@1
WARNING: unused <span class="token builtin class-name">command</span> line option <span class="token variable">$2</span>/@2
WARNING: unused <span class="token builtin class-name">command</span> line option <span class="token variable">$3</span>/@3
hello <span class="token number">3</span>
</code></pre>
<h3 id="stp&#x547D;&#x4EE4;&#x7684;&#x7ED3;&#x675F;"><a name="stp&#x547D;&#x4EE4;&#x7684;&#x7ED3;&#x675F;" class="anchor-navigation-ex-anchor" href="#stp&#x547D;&#x4EE4;&#x7684;&#x7ED3;&#x675F;"><i class="fa fa-link" aria-hidden="true"></i></a>3.2.2. stp&#x547D;&#x4EE4;&#x7684;&#x7ED3;&#x675F;</h3>
<ul>
<li>ctrl+c</li>
<li>&#x811A;&#x672C;&#x8C03;&#x7528;exit()</li>
<li>&#x811A;&#x672C;&#x9519;&#x8BEF;</li>
<li>&#x7528;-c CMD&#x9009;&#x9879;&#x8FD0;&#x884C;&#x7684;command&#x7ED3;&#x675F;; &#x6216;-x PID&#x7684;&#x8FDB;&#x7A0B;&#x7ED3;&#x675F;</li>
</ul>
<h3 id="&#x57FA;&#x672C;&#x8BED;&#x6CD5;"><a name="&#x57FA;&#x672C;&#x8BED;&#x6CD5;" class="anchor-navigation-ex-anchor" href="#&#x57FA;&#x672C;&#x8BED;&#x6CD5;"><i class="fa fa-link" aria-hidden="true"></i></a>3.2.3. &#x57FA;&#x672C;&#x8BED;&#x6CD5;</h3>
<pre class="language-"><code class="lang-shell"><span class="token comment">#&#x6574;&#x578B;&#x53D8;&#x91CF;</span>
var1 <span class="token operator">=</span> <span class="token number">5</span>
<span class="token comment">#global&#x53D8;&#x91CF;&#x5728;&#x4E00;&#x4E2A;systeamtap session&#x91CC;&#x9762;&#x88AB;&#x6240;&#x6709;probe&#x548C;function&#x5171;&#x4EAB;, &#x5E76;&#x53D1;&#x8BBF;&#x95EE;&#x4F1A;&#x81EA;&#x52A8;&#x88AB;lock&#x4FDD;&#x62A4;.</span>
global var2 <span class="token operator">=</span> <span class="token number">10</span>
<span class="token comment">#&#x5B57;&#x7B26;&#x4E32;&#x53D8;&#x91CF;</span>
var1 <span class="token operator">=</span> <span class="token string">&quot;string1&quot;</span>
global var2 <span class="token operator">=</span> <span class="token string">&quot;string2&quot;</span>
<span class="token comment">#&#x5173;&#x7CFB;&#x6570;&#x7EC4;&#x53D8;&#x91CF;</span>
global array1<span class="token punctuation">[</span><span class="token punctuation">]</span>
global array2<span class="token punctuation">[</span>SIZE<span class="token punctuation">]</span>
array<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">5</span>
array1 <span class="token punctuation">[</span>pid<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;name&quot;</span> <span class="token comment"># single numeric key</span>
array2 <span class="token punctuation">[</span><span class="token string">&quot;foo&quot;</span>,4,i++<span class="token punctuation">]</span> <span class="token operator">+=</span> <span class="token number">5</span> <span class="token comment"># vector of string/num/num keys</span>
<span class="token comment">#&#x5173;&#x7CFB;&#x6570;&#x7EC4;&#x6210;&#x5458;&#x5224;&#x65AD;</span>
if<span class="token punctuation">(</span><span class="token punctuation">[</span>index_expression<span class="token punctuation">]</span> <span class="token keyword">in</span> array_name<span class="token punctuation">)</span> statement
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;hello&quot;</span>,5,4<span class="token punctuation">]</span> <span class="token keyword">in</span> array2<span class="token punctuation">)</span> println <span class="token punctuation">(</span><span class="token string">&quot;yes&quot;</span><span class="token punctuation">)</span> <span class="token comment"># membership test</span>
<span class="token comment">#&#x5E26;%&#x7684;&#x5173;&#x7CFB;&#x6570;&#x7EC4;&#x8868;&#x793A;, &#x5982;&#x679C;&#x5143;&#x7D20;&#x8D85;&#x51FA;array&#x7684;size, &#x66F4;&#x8001;&#x7684;&#x5143;&#x7D20;&#x4F1A;&#x88AB;&#x66FF;&#x6362;&#x6389;.</span>
global wrapped_array1%<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span>, wrapped_array2%
<span class="token comment">#&#x4E0A;&#x4E0B;&#x6587;&#x53D8;&#x91CF;</span>
<span class="token variable">$var</span>
<span class="token comment">#&#x5B57;&#x7B26;&#x4E32;&#x8FDE;&#x63A5;&#x64CD;&#x4F5C;&#x7B26;</span>
<span class="token builtin class-name">.</span>
<span class="token comment">#&#x4E09;&#x5143;&#x8868;&#x8FBE;&#x5F0F;</span>
cond ? exp1 <span class="token builtin class-name">:</span> exp2
<span class="token comment">#&#x7EDF;&#x8BA1;&#x64CD;&#x4F5C;&#x7B26;, &#x4E0D;&#x662F;&#x7B80;&#x5355;&#x7D2F;&#x52A0;, &#x800C;&#x662F;&#x50CF;&#x8D26;&#x672C;&#x4E00;&#x6837;, &quot;&#x8BB0;&#x5F55;&quot;&#x6BCF;&#x4E00;&#x7B14;value, &#x7528;&#x4E8E;&#x540E;&#x7EED;&#x7EDF;&#x8BA1;</span>
var <span class="token operator">&lt;&lt;&lt;</span> value
<span class="token comment">#&#x4E3E;&#x4F8B;</span>
$ <span class="token function">sudo</span> stap <span class="token parameter variable">-e</span> <span class="token string">&apos;global x probe oneshot { for(i=1;i&lt;=5;i++) x&lt;&lt;&lt;i println(@hist_linear(x,0,10,1)) }&apos;</span>
value <span class="token operator">|</span>-------------------------------------------------- count
    <span class="token number">0</span> <span class="token operator">|</span> <span class="token number">0</span>
    <span class="token number">1</span> <span class="token operator">|</span>@ <span class="token number">1</span>
    <span class="token number">2</span> <span class="token operator">|</span>@ <span class="token number">1</span>
    <span class="token number">3</span> <span class="token operator">|</span>@ <span class="token number">1</span>
    <span class="token number">4</span> <span class="token operator">|</span>@ <span class="token number">1</span>
    <span class="token number">5</span> <span class="token operator">|</span>@ <span class="token number">1</span>
    <span class="token number">6</span> <span class="token operator">|</span> <span class="token number">0</span>
    <span class="token number">7</span> <span class="token operator">|</span> <span class="token number">0</span>
<span class="token comment">#&#x6216;&#x8005;</span>
$ <span class="token function">sudo</span> stap - <span class="token operator">&lt;&lt;</span> <span class="token string">EOF
probe timer.profile {
  x[1] &lt;&lt;&lt; pid()
  x[2] &lt;&lt;&lt; uid()
  y &lt;&lt;&lt; tid()
}
global x // an array containing aggregates
global y // a scalar
probe end {
  foreach ([i] in x @count+) {
     printf (&quot;x[%d]: avg %d = sum %d / count %d<span class="token entity" title="\n">\n</span>&quot;,
             i, @avg(x[i]), @sum(x[i]), @count(x[i]))
     println (@hist_log(x[i]))
  }
  println (&quot;y:&quot;)
  println (@hist_log(y))
}
EOF</span>


<span class="token comment">#&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;</span>
exp <span class="token operator">=~</span> regex
exp <span class="token operator">!</span>~ regex
<span class="token comment">#&#x5339;&#x914D;&#x4E0A;&#x7684;&#x90E8;&#x5206;&#x53EF;&#x4EE5;&#x7528;tapset&#x91CC;matched()&#x65B9;&#x6CD5;&#x5F97;&#x5230;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">&quot;an example string&quot;</span> <span class="token operator">=~</span> <span class="token string">&quot;str(ing)&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    matched<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> // -<span class="token operator">&gt;</span> returns <span class="token string">&quot;string&quot;</span>, the matched substring
    matched<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> // -<span class="token operator">&gt;</span> returns <span class="token string">&quot;ing&quot;</span>, the 1st matched subexpression
    ngroups<span class="token punctuation">(</span><span class="token punctuation">)</span> // -<span class="token operator">&gt;</span> returns <span class="token number">2</span>, the number of matched <span class="token function">groups</span>
<span class="token punctuation">}</span>


<span class="token comment">#&#x8FED;&#x4EE3;&#x5F62;&#x5F0F;, &#x8BED;&#x6CD5;&#x5F88;&#x5F3A;&#x5927;</span>
<span class="token comment">#&#x5728;VAR&#x6216;&#x8005;ARRAY&#x540E;&#x9762;&#x52A0;+&#x6216;-&#x8868;&#x793A;&#x6309;&#x7167;key&#x6216;&#x8005;value&#x6392;&#x5E8F;&#x540E;&#x7684;&#x987A;&#x5E8F;&#x8FED;&#x4EE3;, +/-&#x8868;&#x793A;&#x6B63;&#x5411;&#x6392;&#x5E8F;&#x6216;&#x8005;&#x662F;&#x5012;&#x5E8F;.</span>
foreach <span class="token punctuation">(</span>VAR <span class="token keyword">in</span> ARRAY <span class="token punctuation">[</span> limit EXP <span class="token punctuation">]</span><span class="token punctuation">)</span> STMT
<span class="token comment">#key&#x662F;tuple&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#x7684;&#x4F7F;&#x7528;, &#x53EF;&#x4EE5;&#x9650;&#x5B9A;index&#x7684;&#x8303;&#x56F4;, &#x53EF;&#x4EE5;&#x7528;*&#x6765;&#x901A;&#x914D;.</span>
foreach <span class="token punctuation">(</span><span class="token punctuation">[</span>VAR1, VAR2, <span class="token punctuation">..</span>.<span class="token punctuation">]</span> <span class="token keyword">in</span> ARRAY <span class="token punctuation">[</span>INDEX1, INDEX2, <span class="token punctuation">..</span>.<span class="token punctuation">]</span> <span class="token punctuation">[</span> limit EXP <span class="token punctuation">]</span><span class="token punctuation">)</span> STMT
<span class="token comment">#VAR0&#x5C31;&#x662F;ARRAY[VAR]</span>
foreach <span class="token punctuation">(</span>VAR0 <span class="token operator">=</span> VAR <span class="token keyword">in</span> ARRAY <span class="token punctuation">[</span> limit EXP <span class="token punctuation">]</span><span class="token punctuation">)</span> STMT
foreach <span class="token punctuation">(</span>variable <span class="token keyword">in</span> array<span class="token punctuation">)</span> statement
foreach <span class="token punctuation">(</span><span class="token punctuation">[</span>var1,var2,<span class="token punctuation">..</span>.<span class="token punctuation">]</span> <span class="token keyword">in</span> array<span class="token punctuation">)</span> statement
<span class="token keyword">for</span> <span class="token punctuation">(</span>expression<span class="token punctuation">;</span> expression<span class="token punctuation">;</span> expression<span class="token punctuation">)</span> statement
<span class="token keyword">while</span> <span class="token punctuation">(</span>expression<span class="token punctuation">)</span> statement
<span class="token comment">#&#x58F0;&#x660E;</span>
<span class="token keyword">function</span> name <span class="token punctuation">(</span>variable <span class="token builtin class-name">:</span> type, <span class="token punctuation">..</span>.<span class="token punctuation">)</span> <span class="token punctuation">{</span> statement <span class="token punctuation">}</span>
<span class="token keyword">function</span> name <span class="token builtin class-name">:</span> <span class="token builtin class-name">type</span> <span class="token punctuation">(</span>variable <span class="token builtin class-name">:</span> type, <span class="token punctuation">..</span>.<span class="token punctuation">)</span> <span class="token punctuation">{</span> statement <span class="token punctuation">}</span>
<span class="token keyword">function</span> name <span class="token builtin class-name">:</span> <span class="token builtin class-name">type</span> <span class="token punctuation">(</span>variable <span class="token builtin class-name">:</span> type, <span class="token punctuation">..</span>.<span class="token punctuation">)</span> %<span class="token punctuation">{</span> c_statement %<span class="token punctuation">}</span>
probe probepoint <span class="token punctuation">{</span> statement <span class="token punctuation">}</span>
probe label <span class="token operator">=</span> probepoint <span class="token punctuation">{</span> statement <span class="token punctuation">}</span>
<span class="token comment">#&#x9519;&#x8BEF;&#x5904;&#x7406;</span>
try <span class="token punctuation">{</span> STMT1 <span class="token punctuation">}</span> catch<span class="token punctuation">(</span>VAR<span class="token punctuation">)</span> <span class="token punctuation">{</span> STMT2 <span class="token punctuation">}</span>
<span class="token comment">#&#x9884;&#x5904;&#x7406;, &#x7C7B;&#x4F3C;&#x4E8E;c&#x8BED;&#x8A00;&#x9884;&#x5904;&#x7406;&#x8BED;&#x53E5;, </span>
%<span class="token punctuation">(</span> expression %? true_tokens %: false_tokens %<span class="token punctuation">)</span>
@define NAME<span class="token punctuation">(</span>PARAM_1, PARAM_2, <span class="token punctuation">..</span>.<span class="token punctuation">)</span> %<span class="token punctuation">(</span> BODY %<span class="token punctuation">)</span>
@define foo %<span class="token punctuation">(</span>
     %<span class="token punctuation">(</span> CONFIG_UTRACE <span class="token operator">==</span> <span class="token string">&quot;y&quot;</span> %? process.syscall %: **ERROR** %<span class="token punctuation">)</span>
 %<span class="token punctuation">)</span>
@define add<span class="token punctuation">(</span>a,b<span class="token punctuation">)</span> %<span class="token punctuation">(</span> <span class="token variable"><span class="token punctuation">((</span>@a<span class="token punctuation">)</span><span class="token operator">+</span><span class="token punctuation">(</span>@b<span class="token punctuation">))</span></span> %<span class="token punctuation">)</span>
<span class="token comment">#&#x5185;&#x7F6E;&#x65B9;&#x6CD5;</span>
<span class="token comment">##&#x7EDF;&#x8BA1;&#x76F8;&#x5173;</span>
@avg <span class="token punctuation">(</span>variable<span class="token punctuation">)</span>
@count <span class="token punctuation">(</span>variable<span class="token punctuation">)</span>
@hist_linear <span class="token punctuation">(</span>variable, N, N, N<span class="token punctuation">)</span>
@hist_log <span class="token punctuation">(</span>variable<span class="token punctuation">)</span>
@max <span class="token punctuation">(</span>variable<span class="token punctuation">)</span>
@min <span class="token punctuation">(</span>variable<span class="token punctuation">)</span>
@sum <span class="token punctuation">(</span>variable<span class="token punctuation">)</span>
<span class="token comment">#&#x6BD4;&#x5982;: &#x6CE8;&#x610F;, &#x8FD9;&#x91CC;&#x76F4;&#x63A5;println(x)&#x662F;&#x4E0D;&#x884C;&#x7684;, &#x4F30;&#x8BA1;&#x7EDF;&#x8BA1;&#x53D8;&#x91CF;x&#x53EA;&#x80FD;&#x7528;&#x7EDF;&#x8BA1;&#x65B9;&#x6CD5;&#x6765;&#x8BA1;&#x7B97;.</span>
<span class="token function">sudo</span> stap <span class="token parameter variable">-e</span> <span class="token string">&apos;global x probe oneshot { for(i=1;i&lt;=5;i++) x&lt;&lt;&lt;i println(@hist_log(x)) }&apos;</span>
<span class="token comment">##&#x6253;&#x5370;&#x76F8;&#x5173;</span>
print <span class="token punctuation">(</span>variable<span class="token punctuation">)</span>
<span class="token builtin class-name">printf</span> <span class="token punctuation">(</span>format:string, variable, <span class="token punctuation">..</span>.<span class="token punctuation">)</span>
printd <span class="token punctuation">(</span>delimiter:string, variable, <span class="token punctuation">..</span>.<span class="token punctuation">)</span>
printdln <span class="token punctuation">(</span>delimiter:string, variable, <span class="token punctuation">..</span>.<span class="token punctuation">)</span>
println <span class="token punctuation">(</span><span class="token punctuation">)</span>
sprint:string <span class="token punctuation">(</span>variable<span class="token punctuation">)</span>
sprintf:string <span class="token punctuation">(</span>format:string, variable, <span class="token punctuation">..</span>.<span class="token punctuation">)</span>
<span class="token comment">##&#x6307;&#x9488;&#x8BBF;&#x95EE;: &#x5F53;p&#x662F;&#x4E2A;&#x6307;&#x9488;&#x65F6;, &#x7F16;&#x8BD1;&#x5668;&#x4E0D;&#x77E5;&#x9053;&#x5B83;&#x7684;&#x7ED3;&#x6784;, &#x6B64;&#x65F6;&#x9700;&#x8981;&#x7528;cast&#x6765;&#x6307;&#x660E;</span>
@cast<span class="token punctuation">(</span>p, <span class="token string">&quot;type_name&quot;</span><span class="token punctuation">[</span>, <span class="token string">&quot;module&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>-<span class="token operator">&gt;</span>member
<span class="token comment">#&#x6BD4;&#x5982;:</span>
@cast<span class="token punctuation">(</span>tv, <span class="token string">&quot;timeval&quot;</span>, <span class="token string">&quot;&lt;sys/time.h&gt;&quot;</span><span class="token punctuation">)</span>-<span class="token operator">&gt;</span>tv_sec
@cast<span class="token punctuation">(</span>task, <span class="token string">&quot;task_struct&quot;</span>, <span class="token string">&quot;kernel&lt;linux/sched.h&gt;&quot;</span><span class="token punctuation">)</span>-<span class="token operator">&gt;</span>tgid
<span class="token comment">#&#x8FD9;&#x4E2A;&#x5389;&#x5BB3;&#x4E86;, &#x8FDE;&#x7EED;&#x4E24;&#x6B21;&#x7ED3;&#x6784;&#x4F53;&#x6210;&#x5458;&#x89E3;&#x6790;</span>
@cast<span class="token punctuation">(</span>task, <span class="token string">&quot;task_struct&quot;</span>,<span class="token string">&quot;kernel&lt;linux/sched.h&gt;&lt;linux/fs_struct.h&gt;&quot;</span><span class="token punctuation">)</span>-<span class="token operator">&gt;</span>fs-<span class="token operator">&gt;</span>umask


<span class="token comment">#tapset&#x5E93;&#x51FD;&#x6570;</span>
addr:long <span class="token punctuation">(</span><span class="token punctuation">)</span>
backtrace:string <span class="token punctuation">(</span><span class="token punctuation">)</span>
caller:string <span class="token punctuation">(</span><span class="token punctuation">)</span>
caller_addr:long <span class="token punctuation">(</span><span class="token punctuation">)</span>
cmdline_args:string <span class="token punctuation">(</span>N:long,m:long,delim:string<span class="token punctuation">)</span>
env_var:string <span class="token punctuation">(</span>name:string<span class="token punctuation">)</span>
execname:string <span class="token punctuation">(</span><span class="token punctuation">)</span>
isinstr:long<span class="token punctuation">(</span>s1:string,s2:string<span class="token punctuation">)</span>
modname:string <span class="token punctuation">(</span><span class="token punctuation">)</span>
pid:long <span class="token punctuation">(</span><span class="token punctuation">)</span>
print_backtrace <span class="token punctuation">(</span><span class="token punctuation">)</span>
probefunc:string <span class="token punctuation">(</span><span class="token punctuation">)</span>
strlen:long<span class="token punctuation">(</span>str:string<span class="token punctuation">)</span>
strtol:long<span class="token punctuation">(</span>str:string,base:long<span class="token punctuation">)</span>
</code></pre>
<h3 id="probepoints-man-stapprobes"><a name="probepoints-man-stapprobes" class="anchor-navigation-ex-anchor" href="#probepoints-man-stapprobes"><i class="fa fa-link" aria-hidden="true"></i></a>3.2.4. probepoints man stapprobes</h3>
<ul>
<li>&#x4EE5;?&#x7ED3;&#x5C3E;&#x7684;probe&#x8868;&#x793A;optional, &#x6CA1;&#x6709;&#x4E5F;&#x4E0D;&#x4F1A;&#x62A5;&#x9519;</li>
<li>&#x4EE5;!&#x7ED3;&#x5C3E;&#x7684;probe&#x8868;&#x793A;both optional and sufficient, &#x610F;&#x601D;&#x662F;&#x5982;&#x679C;&#x627E;&#x5230;&#x4E86;&#x5BF9;&#x5E94;&#x7684;probe&#x70B9;, &#x90A3;&#x4EE5;&#x9017;&#x53F7;&#x9694;&#x5F00;&#x7684;probe list&#x91CC;&#x540E;&#x9762;&#x7684;probe&#x90FD;&#x4E0D;&#x4F1A;&#x751F;&#x6548;&#x4E86;.</li>
<li>probe&#x5C55;&#x5F00;<br>```shell
syscall.{write,read}<h1 id="expands-to"><a name="expands-to" class="anchor-navigation-ex-anchor" href="#expands-to"><i class="fa fa-link" aria-hidden="true"></i></a>4. Expands to</h1>
syscall.write, syscall.read</li>
</ul>
<p>{kernel,module(&quot;nfs&quot;)}.function(&quot;nfs*&quot;)!</p>
<h1 id="expands-to_1"><a name="expands-to_1" class="anchor-navigation-ex-anchor" href="#expands-to_1"><i class="fa fa-link" aria-hidden="true"></i></a>5. Expands to</h1>
<p>kernel.function(&quot;nfs<em>&quot;)!, module(&quot;nfs&quot;).function(&quot;nfs</em>&quot;)!</p>
<pre class="language-"><code>
#### syscall.*&#x7CFB;&#x5217;aliases, &#x51FA;&#x81EA;tapset&#x5E93;, &#x6BCF;&#x4E2A;&#x7CFB;&#x7EDF;&#x8C03;&#x7528;&#x90FD;&#x6709;&#x4E00;&#x5BF9;probe&#x70B9;
```shell
syscall.NAME
syscall.NAME.return
</code></pre><p>&#x4E00;&#x822C;&#x7684;, &#x7CFB;&#x7EDF;&#x8C03;&#x7528;&#x7684;&#x53C2;&#x6570;&#x90FD;&#x4F1A;&#x88AB;&#x5BFC;&#x51FA;&#x5230;system&#x811A;&#x672C;&#x91CC;, &#x53EF;&#x76F4;&#x63A5;&#x4F7F;&#x7528;, &#x6BD4;&#x5982;<code>syscall.open</code>&#x7684;<code>filename, flags, and mode</code>&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x4F5C;&#x4E3A;&#x53D8;&#x91CF;&#x4F7F;&#x7528;.</p>
<p>&#x6B64;&#x5916;, &#x901A;&#x5E38;tapset&#x8FD8;&#x5BF9;aliases&#x6DFB;&#x52A0;&#x4E86;&#x4EE5;&#x4E0B;&#x51E0;&#x4E2A;&#x53D8;&#x91CF;:</p>
<pre class="language-"><code class="lang-shell">argstr &#x53C2;&#x6570;str
name syscall&#x540D;&#x5B57;
retstr &#x8FD4;&#x56DE;&#x503C;str
</code></pre>
<h4 id="timer-aliases"><a name="timer-aliases" class="anchor-navigation-ex-anchor" href="#timer-aliases"><i class="fa fa-link" aria-hidden="true"></i></a>timer aliases</h4>
<p>timer aliases&#x662F;&#x5F02;&#x6B65;&#x7684;probe, &#x610F;&#x601D;&#x662F;&#x5B83;&#x4E0D;&#x50CF;syscall proble&#x4E00;&#x6837;, &#x662F;&#x5339;&#x914D;&#x7CBE;&#x786E;&#x6307;&#x4EE4;&#x5730;&#x5740;&#x7684;, CPU&#x6267;&#x884C;&#x5230;&#x8FD9;&#x4E2A;&#x5730;&#x5740;&#x5C31;&#x4F1A;&#x89E6;&#x53D1;&#x8FD9;&#x4E2A;probe&#x4E8B;&#x4EF6;.</p>
<p>&#x5F02;&#x6B65;&#x7684;probe&#x6CA1;&#x6709;&#x7CBE;&#x786E;&#x5730;&#x5740;, &#x6BD4;&#x5982;&#x4E0B;&#x9762;, N&#x8868;&#x793A;N&#x4E2A;jiffies&#x540E;, probe&#x7684;handler&#x88AB;&#x8C03;&#x7528;</p>
<pre class="language-"><code class="lang-shell">timer.jiffies<span class="token punctuation">(</span>N<span class="token punctuation">)</span>
timer.jiffies<span class="token punctuation">(</span>N<span class="token punctuation">)</span>.randomize<span class="token punctuation">(</span>M<span class="token punctuation">)</span>
</code></pre>
<p>&#x6216;&#x8005;&#x53EF;&#x4EE5;&#x6BEB;&#x79D2;&#x4E3A;&#x5355;&#x4F4D;:</p>
<pre class="language-"><code class="lang-shell">timer.ms<span class="token punctuation">(</span>N<span class="token punctuation">)</span>
timer.ms<span class="token punctuation">(</span>N<span class="token punctuation">)</span>.randomize<span class="token punctuation">(</span>M<span class="token punctuation">)</span>
</code></pre>
<p>&#x6216;&#x8005;&#x4EE5;CPU tick&#x4E3A;&#x5355;&#x4F4D;</p>
<pre class="language-"><code class="lang-shell">timer.profile
</code></pre>
<h4 id="dwarf&#x7C7B;&#x7684;probe"><a name="dwarf&#x7C7B;&#x7684;probe" class="anchor-navigation-ex-anchor" href="#dwarf&#x7C7B;&#x7684;probe"><i class="fa fa-link" aria-hidden="true"></i></a>DWARF&#x7C7B;&#x7684;probe</h4>
<pre class="language-"><code class="lang-shell">kernel.function<span class="token punctuation">(</span>PATTERN<span class="token punctuation">)</span>
kernel.function<span class="token punctuation">(</span>PATTERN<span class="token punctuation">)</span>.call
kernel.function<span class="token punctuation">(</span>PATTERN<span class="token punctuation">)</span>.return
kernel.function<span class="token punctuation">(</span>PATTERN<span class="token punctuation">)</span>.return.maxactive<span class="token punctuation">(</span>VALUE<span class="token punctuation">)</span>
kernel.function<span class="token punctuation">(</span>PATTERN<span class="token punctuation">)</span>.inline
kernel.function<span class="token punctuation">(</span>PATTERN<span class="token punctuation">)</span>.label<span class="token punctuation">(</span>LPATTERN<span class="token punctuation">)</span>
module<span class="token punctuation">(</span>MPATTERN<span class="token punctuation">)</span>.function<span class="token punctuation">(</span>PATTERN<span class="token punctuation">)</span>
module<span class="token punctuation">(</span>MPATTERN<span class="token punctuation">)</span>.function<span class="token punctuation">(</span>PATTERN<span class="token punctuation">)</span>.call
module<span class="token punctuation">(</span>MPATTERN<span class="token punctuation">)</span>.function<span class="token punctuation">(</span>PATTERN<span class="token punctuation">)</span>.return.maxactive<span class="token punctuation">(</span>VALUE<span class="token punctuation">)</span>
module<span class="token punctuation">(</span>MPATTERN<span class="token punctuation">)</span>.function<span class="token punctuation">(</span>PATTERN<span class="token punctuation">)</span>.inline
module<span class="token punctuation">(</span>MPATTERN<span class="token punctuation">)</span>.statement<span class="token punctuation">(</span>PATTERN<span class="token punctuation">)</span> 
kernel.statement<span class="token punctuation">(</span>PATTERN<span class="token punctuation">)</span>
kernel.statement<span class="token punctuation">(</span>ADDRESS<span class="token punctuation">)</span>.absolute
process<span class="token punctuation">(</span><span class="token string">&quot;PATH&quot;</span><span class="token punctuation">)</span>.function<span class="token punctuation">(</span><span class="token string">&quot;NAME&quot;</span><span class="token punctuation">)</span>
process<span class="token punctuation">(</span><span class="token string">&quot;PATH&quot;</span><span class="token punctuation">)</span>.statement<span class="token punctuation">(</span><span class="token string">&quot;*@FILE.c:123&quot;</span><span class="token punctuation">)</span>
process<span class="token punctuation">(</span><span class="token string">&quot;PATH&quot;</span><span class="token punctuation">)</span>.library<span class="token punctuation">(</span><span class="token string">&quot;PATH&quot;</span><span class="token punctuation">)</span>.function<span class="token punctuation">(</span><span class="token string">&quot;NAME&quot;</span><span class="token punctuation">)</span>
process<span class="token punctuation">(</span><span class="token string">&quot;PATH&quot;</span><span class="token punctuation">)</span>.function<span class="token punctuation">(</span><span class="token string">&quot;*&quot;</span><span class="token punctuation">)</span>.return
process<span class="token punctuation">(</span>PID<span class="token punctuation">)</span>.function<span class="token punctuation">(</span><span class="token string">&quot;NAME&quot;</span><span class="token punctuation">)</span>
process<span class="token punctuation">(</span>PID<span class="token punctuation">)</span>.function<span class="token punctuation">(</span><span class="token string">&quot;myfun&quot;</span><span class="token punctuation">)</span>.label<span class="token punctuation">(</span><span class="token string">&quot;foo&quot;</span><span class="token punctuation">)</span>
process<span class="token punctuation">(</span>PID<span class="token punctuation">)</span>.plt<span class="token punctuation">(</span><span class="token string">&quot;NAME&quot;</span><span class="token punctuation">)</span>
process<span class="token punctuation">(</span>PID<span class="token punctuation">)</span>.statement<span class="token punctuation">(</span>ADDRESS<span class="token punctuation">)</span>.absolute
</code></pre>
<p>probe&#x53EF;&#x4EE5;&#x662F;<code>.function .return .inline .call .exported .statement .statement.nearest .callee .callees</code></p>
<pre class="language-"><code class="lang-shell">.function
       Places a probe near the beginning of the named function, so that parameters are available as context variables.


.return
       Places a probe at the moment after the <span class="token builtin class-name">return</span> from the named function, so the <span class="token builtin class-name">return</span> value is available as the <span class="token string">&quot;<span class="token variable">$return</span>&quot;</span> context variable.


.inline
       Filters the results to include only instances of inlined functions. Note that inlined functions <span class="token keyword">do</span> not have an identifiable <span class="token builtin class-name">return</span> point, so .return is not supported on .inline
       probes.


.call Filters the results to include only non-inlined functions <span class="token punctuation">(</span>the opposite <span class="token builtin class-name">set</span> of .inline<span class="token punctuation">)</span>


.exported
       Filters the results to include only exported functions.


.statement
       Places a probe at the exact spot, exposing those <span class="token builtin class-name">local</span> variables that are visible there.


.statement.nearest
       Places a probe at the nearest available line number <span class="token keyword">for</span> each line number given <span class="token keyword">in</span> the statement.


.callee
       Places a probe on the callee <span class="token keyword">function</span> given <span class="token keyword">in</span> the .callee modifier, where the callee must be a <span class="token keyword">function</span> called by the target <span class="token keyword">function</span> given <span class="token keyword">in</span> .function. The advantage of doing
       this over directly probing the callee <span class="token keyword">function</span> is that this probe point is run only when the callee is called from the target <span class="token keyword">function</span> <span class="token punctuation">(</span>add the <span class="token parameter variable">-DSTAP_CALLEE_MATCHALL</span> directive to
       override this when calling stap<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">))</span>.


       Note that only callees that can be statically determined are available. For example, calls through <span class="token keyword">function</span> pointers are not available. Additionally, calls to functions located <span class="token keyword">in</span>
       other objects <span class="token punctuation">(</span>e.g. libraries<span class="token punctuation">)</span> are not available <span class="token punctuation">(</span>instead use another probe point<span class="token punctuation">)</span>. This feature will only work <span class="token keyword">for</span> code compiled with GCC <span class="token number">4.7</span>+.


.callees
       Shortcut <span class="token keyword">for</span> .callee<span class="token punctuation">(</span><span class="token string">&quot;*&quot;</span><span class="token punctuation">)</span>, <span class="token function">which</span> places a probe on all callees of the function.


.callees<span class="token punctuation">(</span>DEPTH<span class="token punctuation">)</span>
       Recursively places probes on callees. For example, .callees<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> will probe both callees of the target function, as well as callees of those callees. And .callees<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span> goes one level
       deeper, etc<span class="token punctuation">..</span>. A callee probe at depth N is only triggered when the N callers <span class="token keyword">in</span> the callstack match those that were statically determined during analysis <span class="token punctuation">(</span>this also may be over&#x2010;
       ridden using -DSTAP_CALLEE_MATCHALL<span class="token punctuation">)</span>.
</code></pre>
<h4 id="&#x5176;&#x4ED6;probe&#x4E3E;&#x4F8B;"><a name="&#x5176;&#x4ED6;probe&#x4E3E;&#x4F8B;" class="anchor-navigation-ex-anchor" href="#&#x5176;&#x4ED6;probe&#x4E3E;&#x4F8B;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x5176;&#x4ED6;probe&#x4E3E;&#x4F8B;</h4>
<pre class="language-"><code class="lang-shell">java<span class="token punctuation">(</span><span class="token string">&quot;PNAME&quot;</span><span class="token punctuation">)</span>.class<span class="token punctuation">(</span><span class="token string">&quot;CLASSNAME&quot;</span><span class="token punctuation">)</span>.method<span class="token punctuation">(</span><span class="token string">&quot;PATTERN&quot;</span><span class="token punctuation">)</span>
java<span class="token punctuation">(</span>PID<span class="token punctuation">)</span>.class<span class="token punctuation">(</span><span class="token string">&quot;CLASSNAME&quot;</span><span class="token punctuation">)</span>.method<span class="token punctuation">(</span><span class="token string">&quot;PATTERN&quot;</span><span class="token punctuation">)</span>
python2.module<span class="token punctuation">(</span><span class="token string">&quot;MODULENAME&quot;</span><span class="token punctuation">)</span>.function<span class="token punctuation">(</span><span class="token string">&quot;PATTERN&quot;</span><span class="token punctuation">)</span>.return
python3.module<span class="token punctuation">(</span><span class="token string">&quot;MODULENAME&quot;</span><span class="token punctuation">)</span>.function<span class="token punctuation">(</span><span class="token string">&quot;PATTERN&quot;</span><span class="token punctuation">)</span>
</code></pre>
<h4 id="&#x4E0A;&#x4E0B;&#x6587;&#x53D8;&#x91CF;"><a name="&#x4E0A;&#x4E0B;&#x6587;&#x53D8;&#x91CF;" class="anchor-navigation-ex-anchor" href="#&#x4E0A;&#x4E0B;&#x6587;&#x53D8;&#x91CF;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x4E0A;&#x4E0B;&#x6587;&#x53D8;&#x91CF;</h4>
<pre class="language-"><code class="lang-shell"><span class="token variable">$var</span> &#x6574;&#x578B;&#x7684;&#x8BDD;, &#x4F1A;&#x88AB;cast&#x4E3A;64bit int, &#x5B57;&#x7B26;&#x4E32;&#x6307;&#x9488;&#x7684;&#x8BDD;, &#x53EF;&#x80FD;&#x88AB;kernel_string&#x6216;user_string&#x65B9;&#x6CD5;&#x62F7;&#x8D1D;&#x4E3A;string&#x7C7B;&#x578B;&#x7684;systemtap&#x811A;&#x672C;&#x53D8;&#x91CF;.
<span class="token comment">#var&#x7684;&#x53E6;&#x5916;&#x7684;&#x5F62;&#x5F0F;</span>
@var<span class="token punctuation">(</span><span class="token string">&quot;varname&quot;</span><span class="token punctuation">)</span>
@var<span class="token punctuation">(</span><span class="token string">&quot;varname@src/file.c&quot;</span><span class="token punctuation">)</span>
<span class="token variable">$var</span>-<span class="token operator">&gt;</span>field &#x7ED3;&#x6784;&#x4F53;&#x53D8;&#x91CF;&#x8BBF;&#x95EE;
<span class="token variable">$var</span><span class="token punctuation">[</span>N<span class="token punctuation">]</span> &#x6570;&#x7EC4;&#x8BBF;&#x95EE;
<span class="token comment">#&#x51E0;&#x79CD;&#x7279;&#x6B8A;&#x7684;&#x53D8;&#x91CF;</span>
<span class="token variable">$return</span> &#x5728;return&#x7C7B;&#x578B;&#x7684;probe&#x4E2D;&#x8868;&#x793A;&#x8FD4;&#x56DE;&#x503C;
<span class="token variable">$$</span>vars &#x6269;&#x5C55;&#x4E3A;&#x5B57;&#x7B26;&#x4E32;&#x5F62;&#x5F0F;&#x7684;&#x5F53;&#x524D;probe&#x70B9;&#x4E0A;&#x53EF;&#x89C1;&#x7684;&#x6240;&#x6709;&#x53D8;&#x91CF;, &#x76F8;&#x5F53;&#x4E8E;&#x628A;&#x6240;&#x6709;&#x53D8;&#x91CF;&#x90FD;sprintf&#x5230;&#x4E00;&#x4E2A;&#x5B57;&#x7B26;&#x4E32;&#x91CC;, &#x6709;&#x7684;&#x4F1A;&#x88AB;&#x6253;&#x5370;&#x4E3A;?, &#x610F;&#x601D;&#x662F;&#x53D8;&#x91CF;&#x7684;&#x8FD0;&#x884C;&#x5730;&#x5740;&#x4E0D;&#x53EF;&#x77E5;.
<span class="token variable">$$</span>locals &#x53EA;&#x662F;<span class="token variable">$$</span>vars&#x7684;&#x5B50;&#x96C6;, &#x8868;&#x793A;&#x5C40;&#x90E8;&#x53D8;&#x91CF;
<span class="token variable">$$</span>parms &#x53EA;&#x662F;<span class="token variable">$$</span>vars&#x7684;&#x5B50;&#x96C6;, &#x8868;&#x793A;&#x51FD;&#x6570;&#x53C2;&#x6570;
<span class="token variable">$$</span><span class="token builtin class-name">return</span> &#x5BF9;return&#x7C7B;&#x578B;&#x7684;probe&#x6709;&#x6548;, &#x610F;&#x601D;&#x662F;return&#x503C;&#x8F6C;&#x4E3A;&#x5B57;&#x7B26;&#x4E32;
<span class="token operator">&amp;</span> <span class="token variable">$EXPR</span> &#x53D8;&#x91CF;&#x5730;&#x5740;
@defined<span class="token punctuation">(</span><span class="token variable">$EXPR</span><span class="token punctuation">)</span> <span class="token number">0</span>&#x6216;1, &#x8868;&#x793A;&#x662F;&#x5426;&#x8FD9;&#x4E2A;&#x4E0A;&#x4E0B;&#x6587;&#x53D8;&#x91CF;&#x53EF;&#x4EE5;&#x89E3;&#x6790;, &#x5178;&#x578B;&#x7528;&#x6CD5;&#x662F;@defined<span class="token punctuation">(</span><span class="token variable">$foo</span>-<span class="token operator">&gt;</span>bar<span class="token punctuation">)</span> ? <span class="token variable">$foo</span>-<span class="token operator">&gt;</span>bar <span class="token builtin class-name">:</span> <span class="token number">0</span>
<span class="token variable">$EXPR</span>$ &#x6269;&#x5C55;&#x4E3A;<span class="token variable">$EXPR</span>&#x7684;&#x6240;&#x6709;&#x6210;&#x5458;&#x7684;&#x5B57;&#x7B26;&#x4E32;, &#x76F8;&#x5F53;&#x4E8E;sprintf <span class="token variable">$EXPR</span>-<span class="token operator">&gt;</span>a <span class="token variable">$EXPR</span>-<span class="token operator">&gt;</span>b
<span class="token variable">$EXPR</span><span class="token variable">$$</span> &#x6269;&#x5C55;&#x4E3A;<span class="token variable">$EXPR</span>&#x7684;&#x6240;&#x6709;&#x6210;&#x5458;&#x53CA;&#x5176;&#x5B50;&#x6210;&#x5458;&#x7684;&#x5B57;&#x7B26;&#x4E32;
<span class="token comment">#snapshots&#x53D8;&#x91CF;: &#x5BF9;return&#x7C7B;&#x578B;&#x7684;probe&#x6765;&#x8BF4;, &#x53EF;&#x4EE5;&#x8BBF;&#x95EE;snapsht&#x7C7B;&#x578B;&#x7684;&#x53D8;&#x91CF;, &#x8FD9;&#x4E9B;&#x53D8;&#x91CF;&#x662F;&#x5728;funtion entry&#x7684;&#x65F6;&#x5019;&#x4FDD;&#x5B58;&#x4E0B;&#x6765;&#x7684;</span>
@entry<span class="token punctuation">(</span><span class="token variable">$var</span><span class="token punctuation">)</span> 
<span class="token comment">#&#x6BD4;&#x5982;, &#x8BA1;&#x7B97;&#x51FD;&#x6570;&#x8FD0;&#x884C;&#x65F6;&#x95F4;</span>
 probe kernel.function<span class="token punctuation">(</span><span class="token string">&quot;do_filp_open&quot;</span><span class="token punctuation">)</span>.return <span class="token punctuation">{</span>
    println<span class="token punctuation">(</span> get_timeofday_us<span class="token punctuation">(</span><span class="token punctuation">)</span> - @entry<span class="token punctuation">(</span>get_timeofday_us<span class="token punctuation">(</span><span class="token punctuation">))</span> <span class="token punctuation">)</span>
 <span class="token punctuation">}</span>
</code></pre>
<h4 id="&#x975E;dwarf&#x7C7B;&#x7684;probe"><a name="&#x975E;dwarf&#x7C7B;&#x7684;probe" class="anchor-navigation-ex-anchor" href="#&#x975E;dwarf&#x7C7B;&#x7684;probe"><i class="fa fa-link" aria-hidden="true"></i></a>&#x975E;DWARF&#x7C7B;&#x7684;probe</h4>
<p>&#x6CA1;&#x6709;DWARF&#x8C03;&#x8BD5;&#x4FE1;&#x606F;&#x7684;, &#x53EF;&#x4EE5;&#x7528;kprobe&#x5F00;&#x5934;&#x7684;probe, &#x6BD4;&#x5982;</p>
<pre class="language-"><code class="lang-shell">kprobe.function<span class="token punctuation">(</span>FUNCTION<span class="token punctuation">)</span>
kprobe.function<span class="token punctuation">(</span>FUNCTION<span class="token punctuation">)</span>.call
kprobe.function<span class="token punctuation">(</span>FUNCTION<span class="token punctuation">)</span>.return
kprobe.module<span class="token punctuation">(</span>NAME<span class="token punctuation">)</span>.function<span class="token punctuation">(</span>FUNCTION<span class="token punctuation">)</span>
kprobe.statement<span class="token punctuation">(</span>ADDRESS<span class="token punctuation">)</span>.absolute
</code></pre>
<h4 id="kernel&#x9759;&#x6001;probe&#x70B9;"><a name="kernel&#x9759;&#x6001;probe&#x70B9;" class="anchor-navigation-ex-anchor" href="#kernel&#x9759;&#x6001;probe&#x70B9;"><i class="fa fa-link" aria-hidden="true"></i></a>kernel&#x9759;&#x6001;probe&#x70B9;</h4>
<pre class="language-"><code class="lang-shell">stap <span class="token parameter variable">-l</span> <span class="token string">&apos;kernel.trace(&quot;*&quot;)&apos;</span>
stap <span class="token parameter variable">-l</span> <span class="token string">&apos;kernel.trace(&quot;sched*&quot;)&apos;</span>
stap <span class="token parameter variable">-l</span> <span class="token string">&apos;kernel.trace(&quot;bcache*&quot;)&apos;</span>
stap <span class="token parameter variable">-l</span> <span class="token string">&apos;kernel.trace(&quot;block*&quot;)&apos;</span>
stap <span class="token parameter variable">-l</span> <span class="token string">&apos;kernel.trace(&quot;bpf*&quot;)&apos;</span>
stap <span class="token parameter variable">-l</span> <span class="token string">&apos;kernel.trace(&quot;cgroup*&quot;)&apos;</span>
stap <span class="token parameter variable">-l</span> <span class="token string">&apos;kernel.trace(&quot;clk*&quot;)&apos;</span>
stap <span class="token parameter variable">-l</span> <span class="token string">&apos;kernel.trace(&quot;ext4*&quot;)&apos;</span>
stap <span class="token parameter variable">-l</span> <span class="token string">&apos;kernel.trace(&quot;ipi*&quot;)&apos;</span>
stap <span class="token parameter variable">-l</span> <span class="token string">&apos;kernel.trace(&quot;irq*&quot;)&apos;</span>
stap <span class="token parameter variable">-l</span> <span class="token string">&apos;kernel.trace(&quot;kvm*&quot;)&apos;</span>
stap <span class="token parameter variable">-l</span> <span class="token string">&apos;kernel.trace(&quot;net*&quot;)&apos;</span>
</code></pre>
<h4 id="&#x7528;&#x6237;&#x6001;probe"><a name="&#x7528;&#x6237;&#x6001;probe" class="anchor-navigation-ex-anchor" href="#&#x7528;&#x6237;&#x6001;probe"><i class="fa fa-link" aria-hidden="true"></i></a>&#x7528;&#x6237;&#x6001;probe</h4>
<p>&#x7528;&#x6237;&#x6001;probe&#x9700;&#x8981;&#x5185;&#x6838;&#x914D;&#x7F6E;&#x652F;&#x6301;utrace&#x6216;&#x8005;&#x5185;&#x6838;&#x7248;&#x672C;3.5&#x4EE5;&#x4E0A;&#x652F;&#x6301;uprobe</p>
<p>&#x67E5;&#x770B;&#x7CFB;&#x7EDF;&#x662F;&#x5426;&#x652F;&#x6301;uprobe</p>
<pre class="language-"><code class="lang-shell"><span class="token comment">#&#x5728;kernel3.5&#x4EE5;&#x540E;</span>
$ <span class="token function">cat</span> /boot/config-4.14.62-5.hxt.aarch64 <span class="token operator">|</span> <span class="token function">grep</span> <span class="token parameter variable">-i</span> uprobe
<span class="token assign-left variable">CONFIG_ARCH_SUPPORTS_UPROBES</span><span class="token operator">=</span>y
<span class="token assign-left variable">CONFIG_UPROBES</span><span class="token operator">=</span>y
<span class="token assign-left variable">CONFIG_UPROBE_EVENTS</span><span class="token operator">=</span>y
<span class="token comment">#&#x5728;kernel3.5&#x4E4B;&#x524D;</span>
&#x770B;CONFIG_UTRACE<span class="token operator">=</span>y
</code></pre>
<h5 id="&#x975E;&#x7B26;&#x53F7;&#x7C7B;&#x7684;probe"><a name="&#x975E;&#x7B26;&#x53F7;&#x7C7B;&#x7684;probe" class="anchor-navigation-ex-anchor" href="#&#x975E;&#x7B26;&#x53F7;&#x7C7B;&#x7684;probe"><i class="fa fa-link" aria-hidden="true"></i></a>&#x975E;&#x7B26;&#x53F7;&#x7C7B;&#x7684;probe</h5>
<pre class="language-"><code class="lang-shell"><span class="token comment">#&#x4F7F;&#x7528;&#x865A;&#x62DF;&#x5730;&#x5740;&#x4F5C;&#x4E3A;probe</span>
process<span class="token punctuation">(</span>PID<span class="token punctuation">)</span>.statement<span class="token punctuation">(</span>ADDRESS<span class="token punctuation">)</span>.absolute
<span class="token comment">#&#x4E00;&#x822C;&#x7684;&#x7528;&#x6237;&#x6001;probe&#x9700;&#x8981;&#x6307;&#x5B9A;pid&#x6216;&#x8005;fullpath, &#x6BD4;&#x5982;</span>
process<span class="token punctuation">(</span>PID<span class="token punctuation">)</span>.begin
process<span class="token punctuation">(</span><span class="token string">&quot;FULLPATH&quot;</span><span class="token punctuation">)</span>.begin
process<span class="token punctuation">(</span>PID<span class="token punctuation">)</span>.thread.begin
process<span class="token punctuation">(</span>PID<span class="token punctuation">)</span>.end
process<span class="token punctuation">(</span>PID<span class="token punctuation">)</span>.syscall
process<span class="token punctuation">(</span><span class="token string">&quot;FULLPATH&quot;</span><span class="token punctuation">)</span>.insn
process<span class="token punctuation">(</span><span class="token string">&quot;FULLPATH&quot;</span><span class="token punctuation">)</span>.insn.block
<span class="token comment">#&#x4EE5;&#x4E0A;insn&#x8868;&#x793A;&#x5355;&#x6B65;&#x6267;&#x884C;&#x4F1A;&#x89E6;&#x53D1;probe event, insn.block&#x8868;&#x793A;&#x5757;&#x6267;&#x884C;&#x89E6;&#x53D1;</span>
<span class="token comment">#&#x4F46;&#x6709;&#x4E9B;&#x4E0D;&#x5E26;PID&#x7684;&#x6216;&#x4E0D;&#x5E26;FULLPATH&#x7684;, &#x4E5F;&#x53EF;&#x4EE5;&#x7528;stap&#x547D;&#x4EE4;&#x884C; -c -x&#x6765;&#x6307;&#x5B9A;</span>
<span class="token parameter variable">-c</span> CMD start the probes, run CMD, and <span class="token builtin class-name">exit</span> when it finishes
<span class="token parameter variable">-x</span> PID sets target<span class="token punctuation">(</span><span class="token punctuation">)</span> to PID
process.begin
process.thread.end
<span class="token comment">#&#x7CFB;&#x7EDF;&#x8C03;&#x7528;&#x53F7;&#x4FDD;&#x5B58;&#x5728;$syscall, &#x524D;6&#x4E2A;&#x53C2;&#x6570;&#x5206;&#x522B;&#x662F;$arg1,$arg2, ...</span>
process.syscall
process.syscall.return
<span class="token comment">#&#x4E0D;&#x6307;&#x5B9A;PID&#x6216;FULLPATH&#x7684;, &#x4F1A;&#x5BF9;&#x6240;&#x6709;&#x7528;&#x6237;&#x8FDB;&#x7A0B;probe</span>


<span class="token comment">#&#x5728;&#x7528;&#x6237;&#x4EE3;&#x7801;&#x91CC;&#x6709;STAP_PROBE1(PROVIDER,LABEL,arg1)&#x5B8F;&#x7684;, &#x662F;sys/sdt.h&#x63D0;&#x4F9B;&#x7684;&#x9759;&#x6001;probe&#x70B9;, &#x53EF;&#x4EE5;&#x7528;&#x4E0B;&#x9762;&#x7684;&#x5F62;&#x5F0F;&#x89E6;&#x53D1;:</span>
process<span class="token punctuation">(</span><span class="token string">&quot;PATH&quot;</span><span class="token punctuation">)</span>.mark<span class="token punctuation">(</span><span class="token string">&quot;LABEL&quot;</span><span class="token punctuation">)</span>
process<span class="token punctuation">(</span><span class="token string">&quot;PATH&quot;</span><span class="token punctuation">)</span>.provider<span class="token punctuation">(</span><span class="token string">&quot;PROVIDER&quot;</span><span class="token punctuation">)</span>.mark<span class="token punctuation">(</span><span class="token string">&quot;LABEL&quot;</span><span class="token punctuation">)</span>
</code></pre>
<h5 id="&#x7B26;&#x53F7;&#x7C7B;&#x7684;probe-&#x53EF;&#x4EE5;probe&#x7528;&#x6237;&#x6001;&#x7A0B;&#x5E8F;-&#x5171;&#x4EAB;&#x5E93;"><a name="&#x7B26;&#x53F7;&#x7C7B;&#x7684;probe-&#x53EF;&#x4EE5;probe&#x7528;&#x6237;&#x6001;&#x7A0B;&#x5E8F;-&#x5171;&#x4EAB;&#x5E93;" class="anchor-navigation-ex-anchor" href="#&#x7B26;&#x53F7;&#x7C7B;&#x7684;probe-&#x53EF;&#x4EE5;probe&#x7528;&#x6237;&#x6001;&#x7A0B;&#x5E8F;-&#x5171;&#x4EAB;&#x5E93;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x7B26;&#x53F7;&#x7C7B;&#x7684;probe, &#x53EF;&#x4EE5;probe&#x7528;&#x6237;&#x6001;&#x7A0B;&#x5E8F;, &#x5171;&#x4EAB;&#x5E93;</h5>
<pre class="language-"><code class="lang-shell">process<span class="token punctuation">(</span><span class="token string">&quot;PATH&quot;</span><span class="token punctuation">)</span>.function<span class="token punctuation">(</span><span class="token string">&quot;NAME&quot;</span><span class="token punctuation">)</span>
process<span class="token punctuation">(</span><span class="token string">&quot;PATH&quot;</span><span class="token punctuation">)</span>.statement<span class="token punctuation">(</span><span class="token string">&quot;*@FILE.c:123&quot;</span><span class="token punctuation">)</span>
process<span class="token punctuation">(</span><span class="token string">&quot;PATH&quot;</span><span class="token punctuation">)</span>.plt<span class="token punctuation">(</span><span class="token string">&quot;NAME&quot;</span><span class="token punctuation">)</span>
process<span class="token punctuation">(</span><span class="token string">&quot;PATH&quot;</span><span class="token punctuation">)</span>.library<span class="token punctuation">(</span><span class="token string">&quot;PATH&quot;</span><span class="token punctuation">)</span>.plt<span class="token punctuation">(</span><span class="token string">&quot;NAME&quot;</span><span class="token punctuation">)</span>
process<span class="token punctuation">(</span><span class="token string">&quot;PATH&quot;</span><span class="token punctuation">)</span>.library<span class="token punctuation">(</span><span class="token string">&quot;PATH&quot;</span><span class="token punctuation">)</span>.function<span class="token punctuation">(</span><span class="token string">&quot;NAME&quot;</span><span class="token punctuation">)</span>
process<span class="token punctuation">(</span><span class="token string">&quot;PATH&quot;</span><span class="token punctuation">)</span>.library<span class="token punctuation">(</span><span class="token string">&quot;PATH&quot;</span><span class="token punctuation">)</span>.statement<span class="token punctuation">(</span><span class="token string">&quot;*@FILE.c:123&quot;</span><span class="token punctuation">)</span>
process<span class="token punctuation">(</span><span class="token string">&quot;PATH&quot;</span><span class="token punctuation">)</span>.function<span class="token punctuation">(</span><span class="token string">&quot;*&quot;</span><span class="token punctuation">)</span>.return
process<span class="token punctuation">(</span><span class="token string">&quot;PATH&quot;</span><span class="token punctuation">)</span>.function<span class="token punctuation">(</span><span class="token string">&quot;myfun&quot;</span><span class="token punctuation">)</span>.label<span class="token punctuation">(</span><span class="token string">&quot;foo&quot;</span><span class="token punctuation">)</span>
process<span class="token punctuation">(</span><span class="token string">&quot;PATH&quot;</span><span class="token punctuation">)</span>.function<span class="token punctuation">(</span><span class="token string">&quot;foo&quot;</span><span class="token punctuation">)</span>.callee<span class="token punctuation">(</span><span class="token string">&quot;bar&quot;</span><span class="token punctuation">)</span>
process<span class="token punctuation">(</span><span class="token string">&quot;PATH&quot;</span><span class="token punctuation">)</span>.plt<span class="token punctuation">(</span><span class="token string">&quot;NAME&quot;</span><span class="token punctuation">)</span>.return
process<span class="token punctuation">(</span>PID<span class="token punctuation">)</span>.function<span class="token punctuation">(</span><span class="token string">&quot;NAME&quot;</span><span class="token punctuation">)</span>
process<span class="token punctuation">(</span>PID<span class="token punctuation">)</span>.statement<span class="token punctuation">(</span><span class="token string">&quot;*@FILE.c:123&quot;</span><span class="token punctuation">)</span>
process<span class="token punctuation">(</span>PID<span class="token punctuation">)</span>.plt<span class="token punctuation">(</span><span class="token string">&quot;NAME&quot;</span><span class="token punctuation">)</span>
<span class="token comment"># PLT&#x6BB5;&#x7684;&#x4F5C;&#x7528;&#x662F;&#x8DF3;&#x8F6C;&#x5230;GOT&#x8868;, &#x540E;&#x8005;&#x7528;&#x4E8E;&#x5728;&#x8FD0;&#x884C;&#x65F6;&#x786E;&#x5B9A;&#x52A8;&#x6001;&#x5E93;&#x7684;&#x5730;&#x5740;; &#x6240;&#x4EE5;&#x770B;&#x5230;&#x51FD;&#x6570;&#x8C03;&#x8DF3;&#x8F6C;&#x5230;plt, &#x5C31;&#x77E5;&#x9053;&#x5B83;&#x8981;&#x8C03;&#x7528;&#x5171;&#x4EAB;&#x5E93;&#x91CC;&#x9762;&#x7684;&#x51FD;&#x6570;&#x4E86;.</span>
</code></pre>
<h4 id="java-probe"><a name="java-probe" class="anchor-navigation-ex-anchor" href="#java-probe"><i class="fa fa-link" aria-hidden="true"></i></a>java probe</h4>
<p>systemtap&#x4F7F;&#x7528;JBoss&#x91CC;&#x9762;&#x7684;Byteman&#x8C03;&#x8BD5;&#x5DE5;&#x5177;&#x6765;&#x505A;&#x540E;&#x7AEF;</p>
<pre class="language-"><code class="lang-shell">java<span class="token punctuation">(</span><span class="token string">&quot;PNAME&quot;</span><span class="token punctuation">)</span>.class<span class="token punctuation">(</span><span class="token string">&quot;CLASSNAME&quot;</span><span class="token punctuation">)</span>.method<span class="token punctuation">(</span><span class="token string">&quot;PATTERN&quot;</span><span class="token punctuation">)</span>
java<span class="token punctuation">(</span><span class="token string">&quot;PNAME&quot;</span><span class="token punctuation">)</span>.class<span class="token punctuation">(</span><span class="token string">&quot;CLASSNAME&quot;</span><span class="token punctuation">)</span>.method<span class="token punctuation">(</span><span class="token string">&quot;PATTERN&quot;</span><span class="token punctuation">)</span>.return
</code></pre>
<h4 id="input-probe"><a name="input-probe" class="anchor-navigation-ex-anchor" href="#input-probe"><i class="fa fa-link" aria-hidden="true"></i></a>input probe</h4>
<pre class="language-"><code class="lang-shell">input.char
input.line
<span class="token comment">#&#x5176;&#x5E95;&#x5C42;&#x662F;&#x7528;procfs(&quot;__stdin&quot;).write&#x5B9E;&#x73B0;&#x7684;,&#x540E;&#x8005;&#x662F;procfs&#x7C7B;&#x578B;&#x7684;probe</span>
</code></pre>
<h4 id="netfilter-probe"><a name="netfilter-probe" class="anchor-navigation-ex-anchor" href="#netfilter-probe"><i class="fa fa-link" aria-hidden="true"></i></a>netfilter probe</h4>
<pre class="language-"><code class="lang-shell">netfilter.hook<span class="token punctuation">(</span><span class="token string">&quot;HOOKNAME&quot;</span><span class="token punctuation">)</span>.pf<span class="token punctuation">(</span><span class="token string">&quot;PROTOCOL_F&quot;</span><span class="token punctuation">)</span>
netfilter.pf<span class="token punctuation">(</span><span class="token string">&quot;PROTOCOL_F&quot;</span><span class="token punctuation">)</span>.hook<span class="token punctuation">(</span><span class="token string">&quot;HOOKNAME&quot;</span><span class="token punctuation">)</span>
</code></pre>
<h4 id="perf-probe"><a name="perf-probe" class="anchor-navigation-ex-anchor" href="#perf-probe"><i class="fa fa-link" aria-hidden="true"></i></a>perf probe</h4>
<p>&#x4F7F;&#x7528;PMU event&#x505A;probe, &#x8FD9;&#x4E9B;event&#x7528;&quot;type&quot;&#x548C;&quot;config&quot;&#x63CF;&#x8FF0;, &#x8BE6;&#x89C1;<code>perf_event_attr</code>&#x7ED3;&#x6784;&#x4F53;, &#x91C7;&#x6837;&#x9891;&#x7387;&#x7528;&quot;sample_period&quot;&#x548C;&quot;sample_freq&quot;&#x63A7;&#x5236;</p>
<p>&#x5177;&#x4F53;&#x5B9A;&#x4E49;&#x89C1;<code>linux/perf_event.h</code></p>
<pre class="language-"><code class="lang-shell">probe perf.type<span class="token punctuation">(</span>NN<span class="token punctuation">)</span>.config<span class="token punctuation">(</span>MM<span class="token punctuation">)</span>.sample<span class="token punctuation">(</span>XX<span class="token punctuation">)</span>
probe perf.type<span class="token punctuation">(</span>NN<span class="token punctuation">)</span>.config<span class="token punctuation">(</span>MM<span class="token punctuation">)</span>.hz<span class="token punctuation">(</span>XX<span class="token punctuation">)</span>
probe perf.type<span class="token punctuation">(</span>NN<span class="token punctuation">)</span>.config<span class="token punctuation">(</span>MM<span class="token punctuation">)</span>
probe perf.type<span class="token punctuation">(</span>NN<span class="token punctuation">)</span>.config<span class="token punctuation">(</span>MM<span class="token punctuation">)</span>.process<span class="token punctuation">(</span><span class="token string">&quot;PROC&quot;</span><span class="token punctuation">)</span>
<span class="token comment">#.counter&#x8868;&#x793A;&#x8BE5;perf handler&#x4E0D;&#x4F1A;&#x88AB;&#x672C;&#x8EAB;&#x7684;probe&#x89E6;&#x53D1;, &#x800C;&#x662F;&#x5728;&#x7528;&#x6237;probe&#x4E2D;, &#x6309;&#x9700;&#x8BFB;&#x53D6;</span>
probe perf.type<span class="token punctuation">(</span>NN<span class="token punctuation">)</span>.config<span class="token punctuation">(</span>MM<span class="token punctuation">)</span>.counter<span class="token punctuation">(</span><span class="token string">&quot;COUNTER&quot;</span><span class="token punctuation">)</span>
probe perf.type<span class="token punctuation">(</span>NN<span class="token punctuation">)</span>.config<span class="token punctuation">(</span>MM<span class="token punctuation">)</span>.process<span class="token punctuation">(</span><span class="token string">&quot;PROC&quot;</span><span class="token punctuation">)</span>.counter<span class="token punctuation">(</span><span class="token string">&quot;NAME&quot;</span><span class="token punctuation">)</span>
<span class="token comment">#.counter&#x4F7F;&#x7528;:</span>
process<span class="token punctuation">(</span><span class="token string">&quot;PROC&quot;</span><span class="token punctuation">)</span>.statement<span class="token punctuation">(</span><span class="token string">&quot;func@file&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>stat <span class="token operator">&lt;&lt;&lt;</span> @perf<span class="token punctuation">(</span><span class="token string">&quot;NAME&quot;</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
</code></pre>
<h4 id="python-probe"><a name="python-probe" class="anchor-navigation-ex-anchor" href="#python-probe"><i class="fa fa-link" aria-hidden="true"></i></a>python probe</h4>
<pre class="language-"><code class="lang-shell"><span class="token comment">#pythone probe&#x9700;&#x8981;HelperSDT&#x7684;&#x652F;&#x6301;, &#x5728;&#x652F;&#x6301;pythone&#x811A;&#x672C;&#x65F6;&#x52A0;&#x4E0A;:</span>
stap foo.stp <span class="token parameter variable">-c</span> <span class="token string">&quot;python -m HelperSDT foo.py&quot;</span>
<span class="token comment">#probe&#x4E3E;&#x4F8B;:</span>
python2.module<span class="token punctuation">(</span><span class="token string">&quot;MPATTERN&quot;</span><span class="token punctuation">)</span>.function<span class="token punctuation">(</span><span class="token string">&quot;PATTERN&quot;</span><span class="token punctuation">)</span>
python2.module<span class="token punctuation">(</span><span class="token string">&quot;MPATTERN&quot;</span><span class="token punctuation">)</span>.function<span class="token punctuation">(</span><span class="token string">&quot;PATTERN&quot;</span><span class="token punctuation">)</span>.call
python2.module<span class="token punctuation">(</span><span class="token string">&quot;MPATTERN&quot;</span><span class="token punctuation">)</span>.function<span class="token punctuation">(</span><span class="token string">&quot;PATTERN&quot;</span><span class="token punctuation">)</span>.return
python3.module<span class="token punctuation">(</span><span class="token string">&quot;MPATTERN&quot;</span><span class="token punctuation">)</span>.function<span class="token punctuation">(</span><span class="token string">&quot;PATTERN&quot;</span><span class="token punctuation">)</span>
python3.module<span class="token punctuation">(</span><span class="token string">&quot;MPATTERN&quot;</span><span class="token punctuation">)</span>.function<span class="token punctuation">(</span><span class="token string">&quot;PATTERN&quot;</span><span class="token punctuation">)</span>.call
python3.module<span class="token punctuation">(</span><span class="token string">&quot;MPATTERN&quot;</span><span class="token punctuation">)</span>.function<span class="token punctuation">(</span><span class="token string">&quot;PATTERN&quot;</span><span class="token punctuation">)</span>.return
</code></pre>
<h4 id="&#x786C;&#x4EF6;watchpoint&#x7C7B;&#x578B;probe"><a name="&#x786C;&#x4EF6;watchpoint&#x7C7B;&#x578B;probe" class="anchor-navigation-ex-anchor" href="#&#x786C;&#x4EF6;watchpoint&#x7C7B;&#x578B;probe"><i class="fa fa-link" aria-hidden="true"></i></a>&#x786C;&#x4EF6;watchpoint&#x7C7B;&#x578B;probe</h4>
<pre class="language-"><code class="lang-shell">probe kernel.data<span class="token punctuation">(</span>ADDRESS<span class="token punctuation">)</span>.write
probe kernel.data<span class="token punctuation">(</span>ADDRESS<span class="token punctuation">)</span>.rw
probe kernel.data<span class="token punctuation">(</span>ADDRESS<span class="token punctuation">)</span>.length<span class="token punctuation">(</span>LEN<span class="token punctuation">)</span>.write
probe kernel.data<span class="token punctuation">(</span>ADDRESS<span class="token punctuation">)</span>.length<span class="token punctuation">(</span>LEN<span class="token punctuation">)</span>.rw
probe kernel.data<span class="token punctuation">(</span><span class="token string">&quot;SYMBOL_NAME&quot;</span><span class="token punctuation">)</span>.write
probe kernel.data<span class="token punctuation">(</span><span class="token string">&quot;SYMBOL_NAME&quot;</span><span class="token punctuation">)</span>.rw
</code></pre>
<h4 id="&#x4E00;&#x4E9B;&#x4F8B;&#x5B50;"><a name="&#x4E00;&#x4E9B;&#x4F8B;&#x5B50;" class="anchor-navigation-ex-anchor" href="#&#x4E00;&#x4E9B;&#x4F8B;&#x5B50;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x4E00;&#x4E9B;&#x4F8B;&#x5B50;</h4>
<pre class="language-"><code class="lang-shell">       begin, end, end
              refers to the startup and normal <span class="token function">shutdown</span> of the session. In this case, the handler would run once during startup and twice during shutdown.


       timer.jiffies<span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span>.randomize<span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span>
              refers to a periodic interrupt, every <span class="token number">1000</span> +/- <span class="token number">200</span> jiffies.


       kernel.function<span class="token punctuation">(</span><span class="token string">&quot;*init*&quot;</span><span class="token punctuation">)</span>, kernel.function<span class="token punctuation">(</span><span class="token string">&quot;*exit*&quot;</span><span class="token punctuation">)</span>
              refers to all kernel functions with <span class="token string">&quot;init&quot;</span> or <span class="token string">&quot;exit&quot;</span> <span class="token keyword">in</span> the name.


       kernel.function<span class="token punctuation">(</span><span class="token string">&quot;*@kernel/time.c:240&quot;</span><span class="token punctuation">)</span>
              refers to any functions within the <span class="token string">&quot;kernel/time.c&quot;</span> <span class="token function">file</span> that span line <span class="token number">240</span>. Note that this is not a probe at the statement at that line number. Use the kernel.statement probe instead.


       kernel.trace<span class="token punctuation">(</span><span class="token string">&quot;sched_*&quot;</span><span class="token punctuation">)</span>
              refers to all scheduler-related <span class="token punctuation">(</span>really, prefixed<span class="token punctuation">)</span> tracepoints <span class="token keyword">in</span> the kernel.


       kernel.mark<span class="token punctuation">(</span><span class="token string">&quot;getuid&quot;</span><span class="token punctuation">)</span>
              refers to an obsolete STAP_MARK<span class="token punctuation">(</span>getuid, <span class="token punctuation">..</span>.<span class="token punctuation">)</span> macro call <span class="token keyword">in</span> the kernel.


       module<span class="token punctuation">(</span><span class="token string">&quot;usb*&quot;</span><span class="token punctuation">)</span>.function<span class="token punctuation">(</span><span class="token string">&quot;*sync*&quot;</span><span class="token punctuation">)</span>.return
              refers to the moment of <span class="token builtin class-name">return</span> from all functions with <span class="token string">&quot;sync&quot;</span> <span class="token keyword">in</span> the name <span class="token keyword">in</span> any of the USB drivers.


       kernel.statement<span class="token punctuation">(</span>0xc0044852<span class="token punctuation">)</span>
              refers to the first byte of the statement whose compiled instructions include the given address <span class="token keyword">in</span> the kernel.


       kernel.statement<span class="token punctuation">(</span><span class="token string">&quot;*@kernel/time.c:296&quot;</span><span class="token punctuation">)</span>
              refers to the statement of line <span class="token number">296</span> within <span class="token string">&quot;kernel/time.c&quot;</span><span class="token builtin class-name">.</span>


       kernel.statement<span class="token punctuation">(</span><span class="token string">&quot;bio_init@fs/bio.c+3&quot;</span><span class="token punctuation">)</span>
              refers to the statement at line bio_init+3 within <span class="token string">&quot;fs/bio.c&quot;</span><span class="token builtin class-name">.</span>


       kernel.data<span class="token punctuation">(</span><span class="token string">&quot;pid_max&quot;</span><span class="token punctuation">)</span>.write
              refers to a hardware breakpoint of <span class="token builtin class-name">type</span> <span class="token string">&quot;write&quot;</span> <span class="token builtin class-name">set</span> on pid_max


       syscall.*.return
              refers to the group of probe aliases with any name <span class="token keyword">in</span> the third position
</code></pre>
<h3 id="&#x57FA;&#x672C;probe&#x8BED;&#x6CD5;"><a name="&#x57FA;&#x672C;probe&#x8BED;&#x6CD5;" class="anchor-navigation-ex-anchor" href="#&#x57FA;&#x672C;probe&#x8BED;&#x6CD5;"><i class="fa fa-link" aria-hidden="true"></i></a>5.1.1. &#x57FA;&#x672C;probe&#x8BED;&#x6CD5;</h3>
<pre class="language-"><code class="lang-shell"><span class="token comment">#PROBEPOINT&#x662F;&#x7F16;&#x8BD1;&#x5668;&#x5B9A;&#x4E49;&#x7684;probe point, &#x4EE5;&#x53CA;tapset&#x5E93;&#x4E5F;&#x7528;alias&#x5B9A;&#x4E49;&#x4E86;&#x8FDB;&#x4E00;&#x6B65;&#x7684;&#x63A2;&#x6D4B;&#x70B9;</span>
probe PROBEPOINT <span class="token punctuation">[</span>, PROBEPOINT<span class="token punctuation">]</span> <span class="token punctuation">{</span> <span class="token punctuation">[</span>STMT <span class="token punctuation">..</span>.<span class="token punctuation">]</span> <span class="token punctuation">}</span>
<span class="token comment">#&#x8FD9;&#x91CC;&#x7684;if&#x662F;arming condition,&#x610F;&#x601D;&#x662F;&#x6761;&#x4EF6;&#x771F;&#x65F6;probe&#x5728;&#x88AB;&#x88C5;&#x8F7D;&#x751F;&#x6548;, &#x5728;&#x5176;&#x5931;&#x6548;&#x671F;&#x95F4;, &#x53EF;&#x80FD;&#x4F1A;&#x4E22;&#x5931;&#x90E8;&#x5206;probe event</span>
probe PROBEPOINT <span class="token punctuation">[</span>, PROBEPOINT<span class="token punctuation">]</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>CONDITION<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">[</span>STMT <span class="token punctuation">..</span>.<span class="token punctuation">]</span> <span class="token punctuation">}</span>


<span class="token comment">#alias&#x7528;&#x6CD5;</span>
<span class="token comment">##&#x5E8F;&#x8A00;&#x58F0;&#x660E;: &#x7528;=&#x58F0;&#x660E;&#x7684;alias&#x662F;&#x5E8F;&#x8A00;&#x58F0;&#x660E;, &#x8868;&#x793A;&#x5728;&#x4F7F;&#x7528;&#x8BE5;alias&#x7684;probe, &#x5148;&#x6267;&#x884C;&#x5E8F;&#x8A00;&#x58F0;&#x660E;&#x7684;&#x5185;&#x5BB9;.</span>
probe syscall.read <span class="token operator">=</span> kernel.function<span class="token punctuation">(</span><span class="token string">&quot;sys_read&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    fildes <span class="token operator">=</span> <span class="token variable">$fd</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>execname<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">&quot;init&quot;</span><span class="token punctuation">)</span> next <span class="token comment"># skip rest of probe</span>
<span class="token punctuation">}</span>
<span class="token comment">##&#x540E;&#x8BB0;&#x58F0;&#x660E;: &#x7528;+=&#x58F0;&#x660E;&#x7684;alias&#x662F;&#x540E;&#x8BB0;&#x58F0;&#x660E;, &#x8868;&#x793A;&#x5728;&#x4F7F;&#x7528;&#x8BE5;alias&#x7684;probe, &#x6700;&#x540E;&#x6267;&#x884C;&#x540E;&#x8BB0;&#x58F0;&#x660E;&#x7684;&#x5185;&#x5BB9;.</span>
probe syscall.read <span class="token operator">+=</span> kernel.function<span class="token punctuation">(</span><span class="token string">&quot;sys_read&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>tracethis<span class="token punctuation">)</span> println <span class="token punctuation">(</span><span class="token variable">$fd</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">##&#x4F7F;&#x7528;&#x65F6;: &#x8BE5;&#x4F8B;&#x5B50;&#x5148;&#x4F7F;&#x7528;&#x4E86;&#x5E8F;&#x8A00;&#x58F0;&#x660E;&#x5B9A;&#x4E49;&#x7684;&#x53D8;&#x91CF;fildes, &#x7136;&#x540E;&#x7F6E;&#x6761;&#x4EF6;tracethis &#x4E3A;1&#x7ED9;&#x540E;&#x8BB0;&#x58F0;&#x660E;&#x4F7F;&#x7528;, &#x540E;&#x8BB0;&#x58F0;&#x660E;&#x4F1A;print&#x8FD9;&#x4E2A;fd.</span>
probe syscall.read <span class="token punctuation">{</span>
    printf<span class="token punctuation">(</span><span class="token string">&quot;reading fd=%d<span class="token entity" title="\n">\n</span>&quot;</span>, fildes<span class="token punctuation">)</span> 
    <span class="token keyword">if</span> <span class="token punctuation">(</span>fildes <span class="token operator">&gt;</span> <span class="token number">10</span><span class="token punctuation">)</span> tracethis <span class="token operator">=</span> <span class="token number">1</span>
<span class="token punctuation">}</span>
</code></pre>
<h3 id="&#x51FD;&#x6570;&#x5B9A;&#x4E49;"><a name="&#x51FD;&#x6570;&#x5B9A;&#x4E49;" class="anchor-navigation-ex-anchor" href="#&#x51FD;&#x6570;&#x5B9A;&#x4E49;"><i class="fa fa-link" aria-hidden="true"></i></a>5.1.2. &#x51FD;&#x6570;&#x5B9A;&#x4E49;</h3>
<p>&#x51FD;&#x6570;&#x7684;&#x8FD4;&#x56DE;&#x503C;&#x53EA;&#x80FD;&#x662F;&#x4E00;&#x4E2A;&#x6574;&#x578B;&#x6216;&#x5B57;&#x7B26;&#x4E32;</p>
<pre class="language-"><code class="lang-shell"><span class="token comment">#&#x51FD;&#x6570;&#x5B9A;&#x4E49;&#x53EF;&#x4EE5;&#x4E0D;&#x8981;&#x7C7B;&#x578B;&#x58F0;&#x660E;, &#x7531;&#x7F16;&#x8BD1;&#x5668;&#x63A8;&#x65AD;</span>
<span class="token keyword">function</span> thisfn <span class="token punctuation">(</span>arg1, arg2<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin class-name">return</span> arg1 + arg2
<span class="token punctuation">}</span>
<span class="token comment">#&#x4E5F;&#x53EF;&#x4EE5;&#x5E26;&#x663E;&#x5F0F;&#x58F0;&#x660E;</span>
<span class="token keyword">function</span> thatfn:string <span class="token punctuation">(</span>arg1:long, arg2<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin class-name">return</span> sprint<span class="token punctuation">(</span>arg1<span class="token punctuation">)</span> <span class="token builtin class-name">.</span> arg2
<span class="token punctuation">}</span>
</code></pre>
<h2 id="tapset"><a name="tapset" class="anchor-navigation-ex-anchor" href="#tapset"><i class="fa fa-link" aria-hidden="true"></i></a>5.2. tapset</h2>
<p>systemtap&#x8FD8;&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x4E9B;&#x6807;&#x51C6;&#x5E93;&#x7684;<code>.stp</code>&#x811A;&#x672C;, &#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x4E9B;&#x5E38;&#x7528;&#x7684;&#x65B9;&#x6CD5;.
&#x5E93;&#x7684;&#x8DEF;&#x5F84;&#x662F;<code>/usr/share/systemtap/tapset/</code></p>
<p>tapset&#x5E93;&#x63D0;&#x4F9B;&#x4E86;&#x975E;&#x5E38;&#x591A;&#x7684;&#x65B9;&#x6CD5;&#x548C;&#x9884;&#x5B9A;&#x4E49;&#x7684;probe, &#x8BE6;&#x89C1;<a href="https://sourceware.org/systemtap/tapsets/" target="_blank">https://sourceware.org/systemtap/tapsets/</a></p>
<h3 id="&#x4E0A;&#x4E0B;&#x6587;&#x65B9;&#x6CD5;"><a name="&#x4E0A;&#x4E0B;&#x6587;&#x65B9;&#x6CD5;" class="anchor-navigation-ex-anchor" href="#&#x4E0A;&#x4E0B;&#x6587;&#x65B9;&#x6CD5;"><i class="fa fa-link" aria-hidden="true"></i></a>5.2.1. &#x4E0A;&#x4E0B;&#x6587;&#x65B9;&#x6CD5;</h3>
<pre class="language-"><code class="lang-shell"><span class="token comment">#&#x8FD4;&#x56DE;&#x76EE;&#x6807;&#x8FDB;&#x7A0B;pid, &#x76EE;&#x6807;&#x8FDB;&#x7A0B;&#x662F;&#x7528;-x PID &#x6216;-c CMD&#x7684;&#x8FDB;&#x7A0B;</span>
target:long<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">#&#x8FD4;&#x56DE;&#x5F53;&#x524D;pid</span>
pid:long<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">#pid&#x8F6C;&#x7A0B;&#x5E8F;&#x540D;, &#x4F20;&#x5165;tid&#x4E5F;&#x4E00;&#x6837;&#x53EF;&#x4EE5;&#x7528;, &#x8FD4;&#x56DE;&#x7EBF;&#x7A0B;&#x540D;, &#x4E0D;&#x4E00;&#x5B9A;&#x548C;&#x5176;&#x8FDB;&#x7A0B;&#x540D;&#x4E00;&#x6837;.</span>
pid2execname:string<span class="token punctuation">(</span>pid:long<span class="token punctuation">)</span>
<span class="token comment">#pid&#x8F6C;task&#x6307;&#x9488;, task&#x6307;&#x9488;&#x540E;&#x9762;&#x5F88;&#x6709;&#x7528;, &#x6709;&#x4E00;&#x7CFB;&#x5217;task_xxx&#x7684;&#x65B9;&#x6CD5;&#x53EF;&#x4EE5;&#x8C03;&#x7528;</span>
pid2task:long<span class="token punctuation">(</span>pid:long<span class="token punctuation">)</span>
<span class="token comment">#&#x6BD4;&#x5982;, 38717&#x662F;tid, &#x5176;&#x5BF9;&#x5E94;&#x7684;pid&#x662F;38715</span>
$ <span class="token function">sudo</span> stap <span class="token parameter variable">-e</span> <span class="token string">&apos;probe begin{target=target() task=pid2task(target) printf(&quot;%s %x %d \n&quot;,pid2execname(target),task,task_pid(task)) exit()}&apos;</span> <span class="token parameter variable">-x</span> <span class="token number">38717</span>
eal-intr-thread ffff8017dc94c000 <span class="token number">38715</span>

<span class="token comment">#&#x8FD4;&#x56DE;&#x5F53;&#x524D;probe&#x7684;&#x5730;&#x5740;, &#x6CA1;&#x6709;&#x5730;&#x5740;&#x7684;&#x8FD4;&#x56DE;0</span>
addr:long<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">#&#x8FD4;&#x56DE;&#x5F53;&#x524D;probe&#x7684;&#x51FD;&#x6570;</span>
probefunc:string<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">#&#x8FD4;&#x56DE;&#x8C03;&#x7528;&#x6808;&#x7684;&#x5B57;&#x7B26;&#x4E32;, 16&#x8FDB;&#x5236;&#x5730;&#x5740;&#x683C;&#x5F0F;, &#x53EF;&#x4EE5;&#x63A5;&#x7740;&#x7528;print_stack&#x6765;&#x6253;&#x5370;&#x5E26;&#x7B26;&#x53F7;&#x8868;&#x7684;&#x4FE1;&#x606F;</span>
backtrace:string<span class="token punctuation">(</span><span class="token punctuation">)</span>
callers:string<span class="token punctuation">(</span>n:long<span class="token punctuation">)</span> &#x8FD4;&#x56DE;n&#x7EA7;&#x8C03;&#x7528;&#x7684;16&#x8FDB;&#x5236;&#x5730;&#x5740;, -1&#x8868;&#x793A;&#x5168;&#x90E8;&#x8C03;&#x7528;&#x6808;. 
print_stack<span class="token punctuation">(</span>stk:string<span class="token punctuation">)</span>
ustack:long<span class="token punctuation">(</span>n:long<span class="token punctuation">)</span> 
ucallers:string<span class="token punctuation">(</span>n:long<span class="token punctuation">)</span>
print_syms<span class="token punctuation">(</span>callers:string<span class="token punctuation">)</span> &#x63A8;&#x8350;&#x7528;&#x8FD9;&#x4E2A;&#x6253;&#x5370;kernel&#x8C03;&#x7528;&#x6808;, &#x548C;callers&#x8054;&#x7528;
sprint_backtrace:string<span class="token punctuation">(</span><span class="token punctuation">)</span>
sprint_stack:string<span class="token punctuation">(</span>stk:string<span class="token punctuation">)</span>
stack:long<span class="token punctuation">(</span>n:long<span class="token punctuation">)</span>
<span class="token comment">#&#x76F8;&#x5F53;&#x4E8E;print_ustack(ubacktrace), &#x6253;&#x5370;&#x7528;&#x6237;&#x6001;&#x8C03;&#x7528;&#x6808;</span>
print_ubacktrace<span class="token punctuation">(</span><span class="token punctuation">)</span>


print_usyms<span class="token punctuation">(</span>callers:string<span class="token punctuation">)</span> &#x63A8;&#x8350;&#x7528;&#x8FD9;&#x4E2A;&#x6253;&#x5370;&#x7528;&#x6237;&#x6001;&#x8C03;&#x7528;&#x6808;, &#x548C;ucallers&#x8054;&#x7528;
print_ubacktrace_brief<span class="token punctuation">(</span><span class="token punctuation">)</span>
sprint_ustack:string<span class="token punctuation">(</span>stk:string<span class="token punctuation">)</span>
sprint_ubacktrace:string<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">#&#x8FD4;&#x56DE;caller&#x5B57;&#x7B26;&#x4E32;, &#x53EF;&#x4EE5;&#x7528;print_syms(callers:string)&#x540E;&#x7EED;&#x6253;&#x5370;&#x5E26;&#x7B26;&#x53F7;&#x8868;&#x7684;&#x4FE1;&#x606F;</span>
caller:string<span class="token punctuation">(</span><span class="token punctuation">)</span>
callers:string<span class="token punctuation">(</span>n:long<span class="token punctuation">)</span>
<span class="token comment">#&#x8FD4;&#x56DE;arg</span>
cmdline_arg:string<span class="token punctuation">(</span>n:long<span class="token punctuation">)</span>
cmdline_args:string<span class="token punctuation">(</span>n:long,m:long,delim:string<span class="token punctuation">)</span>
cmdline_str:string<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">#&#x8FD4;&#x56DE;&#x5F53;&#x524D;cpu&#x53F7;</span>
cpu:long<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">#&#x8FD4;&#x56DE;&#x73AF;&#x5883;&#x53D8;&#x91CF;</span>
env_var:string<span class="token punctuation">(</span>name:string<span class="token punctuation">)</span>
<span class="token comment">#&#x8FD4;&#x56DE;&#x672C;probe&#x540D;</span>
pn:string<span class="token punctuation">(</span><span class="token punctuation">)</span>
pp<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">#&#x8FD4;&#x56DE;effective gid&#x4EE5;&#x53CA;&#x5404;&#x79CD;id: pid gid ppid tid uid&#x7B49;&#x7B49;</span>
egid:long<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">..</span>.
<span class="token comment">#&#x8FD4;&#x56DE;&#x7A0B;&#x5E8F;&#x540D;</span>
execname:string<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">#&#x8FD4;&#x56DE;&#x5BC4;&#x5B58;&#x5668;&#x7684;&#x503C;, &#x5BF9;aarch64&#x6765;&#x8BF4;, &#x662F;x0, x1, ... x30, fp, lr, sp, pc, and orig_x0.</span>
register:long<span class="token punctuation">(</span>name:string<span class="token punctuation">)</span>

<span class="token comment">#&#x8FD4;&#x56DE;&#x7B26;&#x53F7;&#x540D;</span>
symname:string<span class="token punctuation">(</span>addr:long<span class="token punctuation">)</span>
</code></pre>
<h3 id="&#x65F6;&#x95F4;&#x76F8;&#x5173;"><a name="&#x65F6;&#x95F4;&#x76F8;&#x5173;" class="anchor-navigation-ex-anchor" href="#&#x65F6;&#x95F4;&#x76F8;&#x5173;"><i class="fa fa-link" aria-hidden="true"></i></a>5.2.2. &#x65F6;&#x95F4;&#x76F8;&#x5173;</h3>
<pre class="language-"><code class="lang-shell"><span class="token comment">#&#x8FD4;&#x56DE;&#x5F53;&#x524D;&#x7684;HZ</span>
HZ:long<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">#cpu clock&#x65F6;&#x95F4;, ms ns s us</span>
cpu_clock_ms:long<span class="token punctuation">(</span>cpu:long<span class="token punctuation">)</span>
<span class="token comment">#gettimeofday, ms ns s us, &#x4ECE;1970&#x5E74;&#x5F00;&#x59CB;</span>
gettimeofday_ms:long<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">#jiffies, cycle</span>
jiffies:long<span class="token punctuation">(</span><span class="token punctuation">)</span>
get_cycles:long<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">#&#x8FD4;&#x56DE;&#x201C;Wed Jun 30 21:49:08 1993&#x201D;&#x683C;&#x5F0F;&#x7684;&#x65F6;&#x95F4;</span>
ctime:string<span class="token punctuation">(</span>epochsecs:long<span class="token punctuation">)</span>
ctime:string<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
<h3 id="&#x5B57;&#x7B26;&#x4E32;&#x548C;&#x6570;&#x636E;&#x83B7;&#x53D6;"><a name="&#x5B57;&#x7B26;&#x4E32;&#x548C;&#x6570;&#x636E;&#x83B7;&#x53D6;" class="anchor-navigation-ex-anchor" href="#&#x5B57;&#x7B26;&#x4E32;&#x548C;&#x6570;&#x636E;&#x83B7;&#x53D6;"><i class="fa fa-link" aria-hidden="true"></i></a>5.2.3. &#x5B57;&#x7B26;&#x4E32;&#x548C;&#x6570;&#x636E;&#x83B7;&#x53D6;</h3>
<p>&#x8FD9;&#x90E8;&#x5206;tapset&#x63D0;&#x4F9B;&#x4E86;&#x4ECE;kernel&#x7A7A;&#x95F4;&#x548C;&#x4ECE;user&#x7A7A;&#x95F4;&#x8BFB;&#x53D6;&#x6570;&#x636E;&#x7684;&#x65B9;&#x6CD5;</p>
<pre class="language-"><code class="lang-shell"><span class="token comment">#string&#x7684;&#x9996;&#x4E2A;char&#x662F;&#x5426;&#x4E3A;digit</span>
isdigit:long<span class="token punctuation">(</span>str:string<span class="token punctuation">)</span>
<span class="token comment">#&#x8FD4;&#x56DE;1&#x5982;&#x679C;s2&#x5728;s1&#x91CC;, &#x5426;&#x5219;&#x8FD4;&#x56DE;0</span>
isinstr:long<span class="token punctuation">(</span>s1:string,s2:string<span class="token punctuation">)</span>
<span class="token comment">#&#x7528;&#x5728;&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5224;&#x65AD;&#x4E4B;&#x540E;, &#x8FD4;&#x56DE;&#x7B2C;n&#x4E2A;match&#x7684;&#x5B57;&#x7B26;&#x4E32;</span>
matched:string<span class="token punctuation">(</span>n:long<span class="token punctuation">)</span>
<span class="token comment">#&#x6B64;&#x5916;&#x8FD8;&#x6709;&#x5B57;&#x7B26;&#x4E32;&#x66FF;&#x6362;, strtol&#x7B49;&#x5E38;&#x89C1;&#x64CD;&#x4F5C;</span>
<span class="token comment">#&#x8BFB;&#x5185;&#x6838;&#x7684;atomic&#x53D8;&#x91CF;</span>
atomic_read:long<span class="token punctuation">(</span>addr:long<span class="token punctuation">)</span>
<span class="token comment">#&#x4ECE;kernel&#x8BFB;&#x53D6;buffer</span>
kernel_buffer_quoted:string<span class="token punctuation">(</span>addr:long,inlen:long<span class="token punctuation">)</span>
<span class="token comment">#&#x4ECE;kernel&#x8BFB;int, addr&#x662F;&#x5730;&#x5740;</span>
kernel_int:long<span class="token punctuation">(</span>addr:long<span class="token punctuation">)</span>
<span class="token comment">#&#x4ECE;user&#x7A7A;&#x95F4;&#x8BFB;char</span>
user_char:long<span class="token punctuation">(</span>addr:long<span class="token punctuation">)</span>


<span class="token comment">#&#x4EE5;&#x4E0B;&#x5199;&#x64CD;&#x4F5C;&#x9700;&#x8981;guru mode(-g)</span>
<span class="token comment">#&#x5199;&#x5185;&#x6838;&#x7A7A;&#x95F4; </span>
set_kernel_long<span class="token punctuation">(</span>addr:long,val:long<span class="token punctuation">)</span>
<span class="token comment">#&#x5199;&#x7528;&#x6237;&#x7A7A;&#x95F4;</span>
set_user_int<span class="token punctuation">(</span>addr:long,val:long<span class="token punctuation">)</span>
</code></pre>
<h3 id="&#x8C03;&#x7528;shell&#x547D;&#x4EE4;"><a name="&#x8C03;&#x7528;shell&#x547D;&#x4EE4;" class="anchor-navigation-ex-anchor" href="#&#x8C03;&#x7528;shell&#x547D;&#x4EE4;"><i class="fa fa-link" aria-hidden="true"></i></a>5.2.4. &#x8C03;&#x7528;shell&#x547D;&#x4EE4;</h3>
<pre class="language-"><code class="lang-shell"><span class="token comment">#&#x5728;probe handler&#x6267;&#x884C;&#x5B8C;&#x4EE5;&#x540E;, &#x518D;&#x6267;&#x884C;cmd</span>
system<span class="token punctuation">(</span>cmd:string<span class="token punctuation">)</span>
</code></pre>
<h3 id="&#x5185;&#x5B58;&#x76F8;&#x5173;"><a name="&#x5185;&#x5B58;&#x76F8;&#x5173;" class="anchor-navigation-ex-anchor" href="#&#x5185;&#x5B58;&#x76F8;&#x5173;"><i class="fa fa-link" aria-hidden="true"></i></a>5.2.5. &#x5185;&#x5B58;&#x76F8;&#x5173;</h3>
<h4 id="&#x65B9;&#x6CD5;"><a name="&#x65B9;&#x6CD5;" class="anchor-navigation-ex-anchor" href="#&#x65B9;&#x6CD5;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x65B9;&#x6CD5;</h4>
<pre class="language-"><code class="lang-shell"><span class="token comment">#&#x8FD4;&#x56DE;&#x5185;&#x5B58;&#x5730;&#x5740;&#x5728;&#x54EA;&#x4E2A;NUMA&#x4E0A;</span>
addr_to_node:long<span class="token punctuation">(</span>addr:long<span class="token punctuation">)</span>
<span class="token comment">#&#x8FD4;&#x56DE;&#x6BD4;&#x5982;5M 6G&#x4E4B;&#x7C7B;&#x7684;</span>
bytes_to_string:string<span class="token punctuation">(</span>bytes:long<span class="token punctuation">)</span>
<span class="token comment">#&#x8FD4;&#x56DE;page size</span>
mem_page_size:long<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">#&#x8FD4;&#x56DE;&#x8FDB;&#x7A0B;&#x7684;&#x5185;&#x5B58;&#x4F7F;&#x7528;&#x5927;&#x5C0F; data rss shr txt</span>
proc_mem_data:long<span class="token punctuation">(</span><span class="token punctuation">)</span>
proc_mem_data:long<span class="token punctuation">(</span>pid:long<span class="token punctuation">)</span>
</code></pre>
<h4 id="probe"><a name="probe" class="anchor-navigation-ex-anchor" href="#probe"><i class="fa fa-link" aria-hidden="true"></i></a>probe</h4>
<pre class="language-"><code class="lang-shell">probe::vm.brk &#x2014; Fires when a brk is requested <span class="token punctuation">(</span>i.e. the heap will be resized<span class="token punctuation">)</span>
probe::vm.kfree &#x2014; Fires when kfree is requested
probe::vm.kmalloc &#x2014; Fires when kmalloc is requested
probe::vm.kmalloc_node &#x2014; Fires when kmalloc_node is requested
probe::vm.kmem_cache_alloc &#x2014; Fires when kmem_cache_alloc is requested
probe::vm.kmem_cache_alloc_node &#x2014; Fires when kmem_cache_alloc_node is requested
probe::vm.kmem_cache_free &#x2014; Fires when kmem_cache_free is requested
probe::vm.mmap &#x2014; Fires when an mmap is requested
probe::vm.munmap &#x2014; Fires when an munmap is requested
probe::vm.oom_kill &#x2014; Fires when a thread is selected <span class="token keyword">for</span> termination by the OOM killer
probe::vm.pagefault &#x2014; Records that a page fault occurred
probe::vm.pagefault.return &#x2014; Indicates what <span class="token builtin class-name">type</span> of fault occurred
probe::vm.write_shared &#x2014; Attempts at writing to a shared page
probe::vm.write_shared_copy &#x2014; Page copy <span class="token keyword">for</span> shared page <span class="token function">write</span>
</code></pre>
<h3 id="&#x8FDB;&#x7A0B;&#x8FD0;&#x884C;&#x65F6;&#x95F4;&#x76F8;&#x5173;"><a name="&#x8FDB;&#x7A0B;&#x8FD0;&#x884C;&#x65F6;&#x95F4;&#x76F8;&#x5173;" class="anchor-navigation-ex-anchor" href="#&#x8FDB;&#x7A0B;&#x8FD0;&#x884C;&#x65F6;&#x95F4;&#x76F8;&#x5173;"><i class="fa fa-link" aria-hidden="true"></i></a>5.2.6. &#x8FDB;&#x7A0B;&#x8FD0;&#x884C;&#x65F6;&#x95F4;&#x76F8;&#x5173;</h3>
<pre class="language-"><code class="lang-shell">function::cputime_to_msecs &#x2014; Translates the given cputime into milliseconds
function::cputime_to_string &#x2014; Human readable string <span class="token keyword">for</span> given cputime
function::cputime_to_usecs &#x2014; Translates the given cputime into microseconds
function::msecs_to_string &#x2014; Human readable string <span class="token keyword">for</span> given milliseconds
function::nsecs_to_string &#x2014; Human readable string <span class="token keyword">for</span> given nanoseconds
function::task_start_time &#x2014; Start <span class="token function">time</span> of the given task
function::task_stime &#x2014; System <span class="token function">time</span> of the task
function::task_time_string &#x2014; Human readable string of task <span class="token function">time</span> usage
function::task_time_string_tid &#x2014; Human readable string of task <span class="token function">time</span> usage
function::task_utime &#x2014; User <span class="token function">time</span> of the task
function::usecs_to_string &#x2014; Human readable string <span class="token keyword">for</span> given microseconds
</code></pre>
<h3 id="&#x8C03;&#x5EA6;&#x5668;&#x76F8;&#x5173;"><a name="&#x8C03;&#x5EA6;&#x5668;&#x76F8;&#x5173;" class="anchor-navigation-ex-anchor" href="#&#x8C03;&#x5EA6;&#x5668;&#x76F8;&#x5173;"><i class="fa fa-link" aria-hidden="true"></i></a>5.2.7. &#x8C03;&#x5EA6;&#x5668;&#x76F8;&#x5173;</h3>
<pre class="language-"><code class="lang-shell">probe::scheduler.balance &#x2014; A cpu attempting to <span class="token function">find</span> <span class="token function">more</span> work.
probe::scheduler.cpu_off &#x2014; Process is about to stop running on a cpu
probe::scheduler.cpu_on &#x2014; Process is beginning execution on a cpu
probe::scheduler.ctxswitch &#x2014; A context switch is occuring.
probe::scheduler.kthread_stop &#x2014; A thread created by kthread_create is being stopped
probe::scheduler.kthread_stop.return &#x2014; A kthread is stopped and gets the <span class="token builtin class-name">return</span> value
probe::scheduler.migrate &#x2014; Task migrating across cpus
probe::scheduler.process_exit &#x2014; Process exiting
probe::scheduler.process_fork &#x2014; Process forked
probe::scheduler.process_free &#x2014; Scheduler freeing a data structure <span class="token keyword">for</span> a process
probe::scheduler.process_wait &#x2014; Scheduler starting to <span class="token function">wait</span> on a process
probe::scheduler.signal_send &#x2014; Sending a signal
probe::scheduler.tick &#x2014; Schedulers internal tick, a processes timeslice accounting is updated
probe::scheduler.wait_task &#x2014; Waiting on a task to unschedule <span class="token punctuation">(</span>become inactive<span class="token punctuation">)</span>
probe::scheduler.wakeup &#x2014; Task is woken up
probe::scheduler.wakeup_new &#x2014; Newly created task is woken up <span class="token keyword">for</span> the first <span class="token function">time</span>
</code></pre>
<h3 id="io&#x5B50;&#x7CFB;&#x7EDF;&#x76F8;&#x5173;"><a name="io&#x5B50;&#x7CFB;&#x7EDF;&#x76F8;&#x5173;" class="anchor-navigation-ex-anchor" href="#io&#x5B50;&#x7CFB;&#x7EDF;&#x76F8;&#x5173;"><i class="fa fa-link" aria-hidden="true"></i></a>5.2.8. IO&#x5B50;&#x7CFB;&#x7EDF;&#x76F8;&#x5173;</h3>
<pre class="language-"><code class="lang-shell">probe::ioblock.end &#x2014; Fires whenever a block I/O transfer is complete.
probe::ioblock.request &#x2014; Fires whenever making a generic block I/O request.
probe::ioblock_trace.bounce &#x2014; Fires whenever a buffer bounce is needed <span class="token keyword">for</span> at least one page of a block IO request.
probe::ioblock_trace.end &#x2014; Fires whenever a block I/O transfer is complete.
probe::ioblock_trace.request &#x2014; Fires just as a generic block I/O request is created <span class="token keyword">for</span> a bio.
probe::ioscheduler.elv_add_request &#x2014; probe to indicate request is added to the request queue.
probe::ioscheduler.elv_add_request.kp &#x2014; kprobe based probe to indicate that a request was added to the request queue
probe::ioscheduler.elv_add_request.tp &#x2014; tracepoint based probe to indicate a request is added to the request queue.
probe::ioscheduler.elv_completed_request &#x2014; Fires when a request is completed
probe::ioscheduler.elv_next_request &#x2014; Fires when a request is retrieved from the request queue
probe::ioscheduler.elv_next_request.return &#x2014; Fires when a request retrieval issues a <span class="token builtin class-name">return</span> signal
probe::ioscheduler_trace.elv_abort_request &#x2014; Fires when a request is aborted.
probe::ioscheduler_trace.elv_completed_request &#x2014; Fires when a request is
probe::ioscheduler_trace.elv_issue_request &#x2014; Fires when a request is
probe::ioscheduler_trace.elv_requeue_request &#x2014; Fires when a request is
probe::ioscheduler_trace.plug &#x2014; Fires when a request queue is plugged<span class="token punctuation">;</span>
probe::ioscheduler_trace.unplug_io &#x2014; Fires when a request queue is unplugged<span class="token punctuation">;</span>
probe::ioscheduler_trace.unplug_timer &#x2014; Fires when unplug timer associated
</code></pre>
<h3 id="irq-&#x76F8;&#x5173;"><a name="irq-&#x76F8;&#x5173;" class="anchor-navigation-ex-anchor" href="#irq-&#x76F8;&#x5173;"><i class="fa fa-link" aria-hidden="true"></i></a>5.2.9. irq &#x76F8;&#x5173;</h3>
<pre class="language-"><code class="lang-shell">probe::irq_handler.entry &#x2014; Execution of interrupt handler starting
probe::irq_handler.exit &#x2014; Execution of interrupt handler completed
probe::softirq.entry &#x2014; Execution of handler <span class="token keyword">for</span> a pending softirq starting
probe::softirq.exit &#x2014; Execution of handler <span class="token keyword">for</span> a pending softirq completed
probe::workqueue.create &#x2014; Creating a new workqueue
probe::workqueue.destroy &#x2014; Destroying workqueue
probe::workqueue.execute &#x2014; Executing deferred work
probe::workqueue.insert &#x2014; Queuing work on a workqueue
</code></pre>
<h3 id="&#x7F51;&#x7EDC;&#x76F8;&#x5173;"><a name="&#x7F51;&#x7EDC;&#x76F8;&#x5173;" class="anchor-navigation-ex-anchor" href="#&#x7F51;&#x7EDC;&#x76F8;&#x5173;"><i class="fa fa-link" aria-hidden="true"></i></a>5.2.10. &#x7F51;&#x7EDC;&#x76F8;&#x5173;</h3>
<pre class="language-"><code class="lang-shell">function::format_ipaddr &#x2014; Returns a string representation <span class="token keyword">for</span> an IP address
function::htonl &#x2014; Convert <span class="token number">32</span>-bit long from <span class="token function">host</span> to network order
function::htonll &#x2014; Convert <span class="token number">64</span>-bit long long from <span class="token function">host</span> to network order
function::htons &#x2014; Convert <span class="token number">16</span>-bit short from <span class="token function">host</span> to network order
function::ip_ntop &#x2014; Returns a string representation <span class="token keyword">for</span> an IPv4 address
function::ntohl &#x2014; Convert <span class="token number">32</span>-bit long from network to <span class="token function">host</span> order
function::ntohll &#x2014; Convert <span class="token number">64</span>-bit long long from network to <span class="token function">host</span> order
function::ntohs &#x2014; Convert <span class="token number">16</span>-bit short from network to <span class="token function">host</span> order
probe::netdev.change_mac &#x2014; Called when the netdev_name has the MAC changed
probe::netdev.change_mtu &#x2014; Called when the netdev MTU is changed
probe::netdev.change_rx_flag &#x2014; Called when the device RX flag will be changed
probe::netdev.close &#x2014; Called when the device is closed
probe::netdev.get_stats &#x2014; Called when someone asks the device statistics
probe::netdev.hard_transmit &#x2014; Called when the devices is going to TX <span class="token punctuation">(</span>hard<span class="token punctuation">)</span>
probe::netdev.ioctl &#x2014; Called when the device suffers an IOCTL
probe::netdev.open &#x2014; Called when the device is opened
probe::netdev.receive &#x2014; Data received from network device.
probe::netdev.register &#x2014; Called when the device is registered
probe::netdev.rx &#x2014; Called when the device is going to receive a packet
probe::netdev.set_promiscuity &#x2014; Called when the device enters/leaves promiscuity
probe::netdev.transmit &#x2014; Network device transmitting buffer
probe::netdev.unregister &#x2014; Called when the device is being unregistered
probe::netfilter.arp.forward &#x2014; - Called <span class="token keyword">for</span> each ARP packet to be forwarded
probe::netfilter.arp.in &#x2014; - Called <span class="token keyword">for</span> each incoming ARP packet
probe::netfilter.arp.out &#x2014; - Called <span class="token keyword">for</span> each outgoing ARP packet
probe::netfilter.bridge.forward &#x2014; Called on an incoming bridging packet destined <span class="token keyword">for</span> some other computer
probe::netfilter.bridge.local_in &#x2014; Called on a bridging packet destined <span class="token keyword">for</span> the <span class="token builtin class-name">local</span> computer
probe::netfilter.bridge.local_out &#x2014; Called on a bridging packet coming from a <span class="token builtin class-name">local</span> process
probe::netfilter.bridge.post_routing &#x2014; - Called before a bridging packet hits the wire
probe::netfilter.bridge.pre_routing &#x2014; - Called before a bridging packet is routed
probe::netfilter.ip.forward &#x2014; Called on an incoming IP packet addressed to some other computer
probe::netfilter.ip.local_in &#x2014; Called on an incoming IP packet addressed to the <span class="token builtin class-name">local</span> computer
probe::netfilter.ip.local_out &#x2014; Called on an outgoing IP packet
probe::netfilter.ip.post_routing &#x2014; Called immediately before an outgoing IP packet leaves the computer
probe::netfilter.ip.pre_routing &#x2014; Called before an IP packet is routed
probe::sunrpc.clnt.bind_new_program &#x2014; Bind a new RPC program to an existing client
probe::sunrpc.clnt.call_async &#x2014; Make an asynchronous RPC call
probe::sunrpc.clnt.call_sync &#x2014; Make a synchronous RPC call
probe::sunrpc.clnt.clone_client &#x2014; Clone an RPC client structure
probe::sunrpc.clnt.create_client &#x2014; Create an RPC client
probe::sunrpc.clnt.restart_call &#x2014; Restart an asynchronous RPC call
probe::sunrpc.clnt.shutdown_client &#x2014; Shutdown an RPC client
probe::sunrpc.sched.delay &#x2014; Delay an RPC task
probe::sunrpc.sched.execute &#x2014; Execute the RPC `scheduler&apos;
probe::sunrpc.sched.new_task &#x2014; Create new task <span class="token keyword">for</span> the specified client
probe::sunrpc.sched.release_task &#x2014; Release all resources associated with a task
probe::sunrpc.svc.create &#x2014; Create an RPC <span class="token function">service</span>
probe::sunrpc.svc.destroy &#x2014; Destroy an RPC <span class="token function">service</span>
probe::sunrpc.svc.drop &#x2014; Drop RPC request
probe::sunrpc.svc.process &#x2014; Process an RPC request
probe::sunrpc.svc.recv &#x2014; Listen <span class="token keyword">for</span> the next RPC request on any socket
probe::sunrpc.svc.register &#x2014; Register an RPC <span class="token function">service</span> with the <span class="token builtin class-name">local</span> portmapper
probe::sunrpc.svc.send &#x2014; Return reply to RPC client
probe::tcp.disconnect &#x2014; TCP socket disconnection
probe::tcp.disconnect.return &#x2014; TCP socket disconnection complete
probe::tcp.receive &#x2014; Called when a TCP packet is received
probe::tcp.recvmsg &#x2014; Receiving TCP message
probe::tcp.recvmsg.return &#x2014; Receiving TCP message complete
probe::tcp.sendmsg &#x2014; Sending a tcp message
probe::tcp.sendmsg.return &#x2014; Sending TCP message is <span class="token keyword">done</span>
probe::tcp.setsockopt &#x2014; Call to setsockopt
probe::tcp.setsockopt.return &#x2014; Return from setsockopt
probe::udp.disconnect &#x2014; Fires when a process requests <span class="token keyword">for</span> a UDP disconnection
probe::udp.disconnect.return &#x2014; UDP has been disconnected successfully
probe::udp.recvmsg &#x2014; Fires whenever a UDP message is received
probe::udp.recvmsg.return &#x2014; Fires whenever an attempt to receive a UDP message received is completed
probe::udp.sendmsg &#x2014; Fires whenever a process sends a UDP message
probe::udp.sendmsg.return &#x2014; Fires whenever an attempt to send a UDP message is completed
</code></pre>
<h3 id="socket&#x76F8;&#x5173;"><a name="socket&#x76F8;&#x5173;" class="anchor-navigation-ex-anchor" href="#socket&#x76F8;&#x5173;"><i class="fa fa-link" aria-hidden="true"></i></a>5.2.11. socket&#x76F8;&#x5173;</h3>
<pre class="language-"><code class="lang-shell">function::inet_get_ip_source &#x2014; Provide IP <span class="token builtin class-name">source</span> address string <span class="token keyword">for</span> a kernel socket
function::inet_get_local_port &#x2014; Provide <span class="token builtin class-name">local</span> port number <span class="token keyword">for</span> a kernel socket
function::sock_fam_num2str &#x2014; Given a protocol family number, <span class="token builtin class-name">return</span> a string representation
function::sock_fam_str2num &#x2014; Given a protocol family name <span class="token punctuation">(</span>string<span class="token punctuation">)</span>, <span class="token builtin class-name">return</span> the corresponding protocol family number
function::sock_prot_num2str &#x2014; Given a protocol number, <span class="token builtin class-name">return</span> a string representation
function::sock_prot_str2num &#x2014; Given a protocol name <span class="token punctuation">(</span>string<span class="token punctuation">)</span>, <span class="token builtin class-name">return</span> the corresponding protocol number
function::sock_state_num2str &#x2014; Given a socket state number, <span class="token builtin class-name">return</span> a string representation
function::sock_state_str2num &#x2014; Given a socket state string, <span class="token builtin class-name">return</span> the corresponding state number
probe::socket.aio_read &#x2014; Receiving message via sock_aio_read
probe::socket.aio_read.return &#x2014; Conclusion of message received via sock_aio_read
probe::socket.aio_write &#x2014; Message send via sock_aio_write
probe::socket.aio_write.return &#x2014; Conclusion of message send via sock_aio_write
probe::socket.close &#x2014; Close a socket
probe::socket.close.return &#x2014; Return from closing a socket
probe::socket.create &#x2014; Creation of a socket
probe::socket.create.return &#x2014; Return from Creation of a socket
probe::socket.read_iter &#x2014; Receiving message via sock_read_iter
probe::socket.read_iter.return &#x2014; Conclusion of message received via sock_read_iter
probe::socket.readv &#x2014; Receiving a message via sock_readv
probe::socket.readv.return &#x2014; Conclusion of receiving a message via sock_readv
probe::socket.receive &#x2014; Message received on a socket.
probe::socket.recvmsg &#x2014; Message being received on socket
probe::socket.recvmsg.return &#x2014; Return from Message being received on socket
probe::socket.send &#x2014; Message sent on a socket.
probe::socket.sendmsg &#x2014; Message is currently being sent on a socket.
probe::socket.sendmsg.return &#x2014; Return from socket.sendmsg.
probe::socket.write_iter &#x2014; Message send via sock_write_iter
probe::socket.write_iter.return &#x2014; Conclusion of message send via sock_write_iter
probe::socket.writev &#x2014; Message sent via socket_writev
probe::socket.writev.return &#x2014; Conclusion of message sent via socket_writev
</code></pre>
<h3 id="&#x5185;&#x6838;&#x8FDB;&#x7A0B;&#x76F8;&#x5173;"><a name="&#x5185;&#x6838;&#x8FDB;&#x7A0B;&#x76F8;&#x5173;" class="anchor-navigation-ex-anchor" href="#&#x5185;&#x6838;&#x8FDB;&#x7A0B;&#x76F8;&#x5173;"><i class="fa fa-link" aria-hidden="true"></i></a>5.2.12. &#x5185;&#x6838;&#x8FDB;&#x7A0B;&#x76F8;&#x5173;</h3>
<pre class="language-"><code class="lang-shell">function::get_loadavg_index &#x2014; Get the load average <span class="token keyword">for</span> a specified interval
function::sprint_loadavg &#x2014; Report a pretty-printed load average
function::target_set_pid &#x2014; Does pid descend from target process?
function::target_set_report &#x2014; Print a report about the target <span class="token builtin class-name">set</span>
probe::kprocess.create &#x2014; Fires whenever a new process or thread is successfully created
probe::kprocess.exec &#x2014; Attempt to <span class="token builtin class-name">exec</span> to a new program
probe::kprocess.exec_complete &#x2014; Return from <span class="token builtin class-name">exec</span> to a new program
probe::kprocess.exit &#x2014; Exit from process
probe::kprocess.release &#x2014; Process released
probe::kprocess.start &#x2014; Starting new process
</code></pre>
<h3 id="signal&#x76F8;&#x5173;"><a name="signal&#x76F8;&#x5173;" class="anchor-navigation-ex-anchor" href="#signal&#x76F8;&#x5173;"><i class="fa fa-link" aria-hidden="true"></i></a>5.2.13. signal&#x76F8;&#x5173;</h3>
<pre class="language-"><code class="lang-shell">function::get_sa_flags &#x2014; Returns the numeric value of sa_flags
function::get_sa_handler &#x2014; Returns the numeric value of sa_handler
function::is_sig_blocked &#x2014; Returns <span class="token number">1</span> <span class="token keyword">if</span> the signal is currently blocked, or <span class="token number">0</span> <span class="token keyword">if</span> it is not
function::sa_flags_str &#x2014; Returns the string representation of sa_flags
function::sa_handler_str &#x2014; Returns the string representation of an sa_handler
function::signal_str &#x2014; Returns the string representation of a signal number
function::sigset_mask_str &#x2014; Returns the string representation of a sigset
probe::signal.check_ignored &#x2014; Checking to see signal is ignored
probe::signal.check_ignored.return &#x2014; Check to see signal is ignored completed
probe::signal.checkperm &#x2014; Check being performed on a sent signal
probe::signal.checkperm.return &#x2014; Check performed on a sent signal completed
probe::signal.do_action &#x2014; Examining or changing a signal action
probe::signal.do_action.return &#x2014; Examining or changing a signal action completed
probe::signal.flush &#x2014; Flushing all pending signals <span class="token keyword">for</span> a task
probe::signal.force_segv &#x2014; Forcing send of SIGSEGV
probe::signal.force_segv.return &#x2014; Forcing send of SIGSEGV complete
probe::signal.handle &#x2014; Signal handler being invoked
probe::signal.handle.return &#x2014; Signal handler invocation completed
probe::signal.pending &#x2014; Examining pending signal
probe::signal.pending.return &#x2014; Examination of pending signal completed
probe::signal.procmask &#x2014; Examining or changing blocked signals
probe::signal.procmask.return &#x2014; Examining or changing blocked signals completed
probe::signal.send &#x2014; Signal being sent to a process
probe::signal.send.return &#x2014; Signal being sent to a process completed <span class="token punctuation">(</span>deprecated <span class="token keyword">in</span> SystemTap <span class="token number">2.1</span><span class="token punctuation">)</span>
probe::signal.send_sig_queue &#x2014; Queuing a signal to a process
probe::signal.send_sig_queue.return &#x2014; Queuing a signal to a process completed
probe::signal.sys_tgkill &#x2014; Sending <span class="token function">kill</span> signal to a thread group
probe::signal.sys_tgkill.return &#x2014; Sending <span class="token function">kill</span> signal to a thread group completed
probe::signal.sys_tkill &#x2014; Sending a <span class="token function">kill</span> signal to a thread
probe::signal.syskill &#x2014; Sending <span class="token function">kill</span> signal to a process
probe::signal.syskill.return &#x2014; Sending <span class="token function">kill</span> signal completed
probe::signal.systkill.return &#x2014; Sending <span class="token function">kill</span> signal to a thread completed
probe::signal.wakeup &#x2014; Sleeping process being wakened <span class="token keyword">for</span> signal
</code></pre>
<h3 id="errno&#x76F8;&#x5173;"><a name="errno&#x76F8;&#x5173;" class="anchor-navigation-ex-anchor" href="#errno&#x76F8;&#x5173;"><i class="fa fa-link" aria-hidden="true"></i></a>5.2.14. errno&#x76F8;&#x5173;</h3>
<pre class="language-"><code class="lang-shell">function::errno_str &#x2014; Symbolic string associated with error code
function::return_str &#x2014; Formats the <span class="token builtin class-name">return</span> value as a string
function::returnstr &#x2014; Formats the <span class="token builtin class-name">return</span> value as a string
function::returnval &#x2014; Possible <span class="token builtin class-name">return</span> value of probed <span class="token keyword">function</span>
</code></pre>
<h3 id="&#x76EE;&#x5F55;&#x9879;&#x76F8;&#x5173;"><a name="&#x76EE;&#x5F55;&#x9879;&#x76F8;&#x5173;" class="anchor-navigation-ex-anchor" href="#&#x76EE;&#x5F55;&#x9879;&#x76F8;&#x5173;"><i class="fa fa-link" aria-hidden="true"></i></a>5.2.15. &#x76EE;&#x5F55;&#x9879;&#x76F8;&#x5173;</h3>
<pre class="language-"><code class="lang-shell">function::d_name &#x2014; get the dirent name
function::d_path &#x2014; get the full nameidata path
function::fullpath_struct_file &#x2014; get the full path
function::fullpath_struct_nameidata &#x2014; get the full nameidata path
function::fullpath_struct_path &#x2014; get the full path
function::inode_name &#x2014; get the inode name
function::inode_path &#x2014; get the path to an inode
function::real_mount &#x2014; get the <span class="token string">&apos;struct mount&apos;</span> pointer
function::reverse_path_walk &#x2014; get the full dirent path
function::task_dentry_path &#x2014; get the full dentry path
</code></pre>
<h3 id="exit&#x548C;printk"><a name="exit&#x548C;printk" class="anchor-navigation-ex-anchor" href="#exit&#x548C;printk"><i class="fa fa-link" aria-hidden="true"></i></a>5.2.16. exit&#x548C;printk</h3>
<pre class="language-"><code class="lang-shell">function::abort &#x2014; Immediately shutting down probing script.
function::assert &#x2014; evaluate assertion
function::error &#x2014; Send an error message
function::exit &#x2014; Start shutting down probing script.
function::ftrace &#x2014; Send a message to the ftrace ring-buffer
function::log &#x2014; Send a line to the common trace buffer
function::printk &#x2014; Send a message to the kernel trace buffer
function::warn &#x2014; Send a line to the warning stream
</code></pre>
<h3 id="&#x6742;&#x9879;"><a name="&#x6742;&#x9879;" class="anchor-navigation-ex-anchor" href="#&#x6742;&#x9879;"><i class="fa fa-link" aria-hidden="true"></i></a>5.2.17. &#x6742;&#x9879;</h3>
<pre class="language-"><code class="lang-shell"><span class="token comment">#&#x968F;&#x673A;&#x6570;</span>
randint:long<span class="token punctuation">(</span>n:long<span class="token punctuation">)</span>
<span class="token comment">#&#x5EF6;&#x8FDF;</span>
mdelay<span class="token punctuation">(</span>ms:long<span class="token punctuation">)</span>
udelay<span class="token punctuation">(</span>us:long<span class="token punctuation">)</span>
<span class="token comment">#&#x8C03;&#x7528;kernek panic</span>
panic<span class="token punctuation">(</span>msg:string<span class="token punctuation">)</span>
<span class="token comment">#&#x8C03;&#x7528;kernel raise&#x53D1;signal</span>
raise<span class="token punctuation">(</span>signo:long<span class="token punctuation">)</span>
<span class="token comment">#&#x7F29;&#x8FDB;</span>
indent:string<span class="token punctuation">(</span>delta:long<span class="token punctuation">)</span>
thread_indent:string<span class="token punctuation">(</span>delta:long<span class="token punctuation">)</span>
</code></pre>
<h3 id="tty-scsi-nfs-snmp-jason&#x7565;"><a name="tty-scsi-nfs-snmp-jason&#x7565;" class="anchor-navigation-ex-anchor" href="#tty-scsi-nfs-snmp-jason&#x7565;"><i class="fa fa-link" aria-hidden="true"></i></a>5.2.18. tty scsi nfs snmp jason&#x7565;</h3>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="profiling_systemtap实例.html" class="navigation navigation-prev " aria-label="Previous page: systemtap实例">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="profiling_perf-tools_example.html" class="navigation navigation-next " aria-label="Next page: perf-tools 系统tracing工具集">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"systemtap基础","level":"1.3.2.12","depth":3,"next":{"title":"perf-tools 系统tracing工具集","level":"1.3.2.13","depth":3,"path":"notes/profiling_perf-tools_example.md","ref":"notes/profiling_perf-tools_example.md","articles":[]},"previous":{"title":"systemtap实例","level":"1.3.2.11","depth":3,"path":"notes/profiling_systemtap实例.md","ref":"notes/profiling_systemtap实例.md","articles":[]},"dir":"ltr"},"config":{"plugins":["-livereload","-sharing","-lunr","-search","search-plus","-highlight","theme-comscore","prism","code","chapter-fold","github","splitter","wide-page","hide-navigation-buttons","anchor-navigation-ex","sequence@0.1.1","mermaid-gb3"],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"chapter-fold":{},"prism":{"css":["prismjs/themes/prism.css"],"ignore":["mermaid","sequence"]},"sequence":{"theme":"simple"},"github":{"url":"https://github.com/Bai-Yingjie/Bai-Yingjie.github.io"},"splitter":{},"wide-page":{},"code":{"copyButtons":true},"fontsettings":{"theme":"white","family":"sans","size":2},"hide-navigation-buttons":{},"mermaid-gb3":{},"anchor-navigation-ex":{"mode":"float","pageTop":{"level1Icon":"","level2Icon":"","level3Icon":"","showLevelIcon":false},"isRewritePageTitle":true,"showLevel":true,"tocLevel1Icon":"fa fa-hand-o-right","tocLevel2Icon":"fa fa-hand-o-right","tocLevel3Icon":"fa fa-hand-o-right","showGoTop":true,"isShowTocTitleIcon":true,"printLog":false,"multipleH1":true,"associatedWithSummary":true,"float":{"floatIcon":"fa fa-navicon","level1Icon":"","level2Icon":"","level3Icon":"","showLevelIcon":false}},"theme-comscore":{},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false},"search-plus":{}},"theme":"default","author":"Bai Yingjie","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"My Notes","language":"zh-hans","gitbook":"*"},"file":{"path":"notes/profiling_systemtap基础.md","mtime":"2024-08-09T01:44:23.304Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2024-08-09T01:45:15.886Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-search-plus/jquery.mark.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search-plus/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-code/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-chapter-fold/chapter-fold.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-github/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-splitter/splitter.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-mermaid-gb3/book/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-theme-comscore/test.js"></script>
        
    

    <script src="../gitbook/gitbook-plugin-mermaid-gb3/mermaid/mermaid.min.js"></script>

    </body>
</html>



<!DOCTYPE HTML>
<html lang="zh-hans" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Rust 序列化原理 · My Notes</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        <meta name="author" content="Bai Yingjie">
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search-plus/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-prism/prism-shades-of-purple.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-expandable-chapters-small/expandable-chapters-small.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-disqus/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-splitter/splitter.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-wide-page/wide.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-hide-navigation-buttons/index.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-anchor-navigation-ex/style/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="rust_知识点积累.html" />
    
    
    <link rel="prev" href="rust_coding_brief.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="输入并搜索" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    简介
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="as_title.html">
            
                <a href="as_title.html">
            
                    
                    CPU和device虚拟化
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="as_title.html">
            
                <a href="as_title.html">
            
                    
                    gvisor
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1.1" data-path="golang_gvisor代码_KVM.html">
            
                <a href="golang_gvisor代码_KVM.html">
            
                    
                    gvisor KVM模式代码
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.2" data-path="golang_gvisor调试.html">
            
                <a href="golang_gvisor调试.html">
            
                    
                    gvisor调试
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.3" data-path="golang_gvisor_ptrace.html">
            
                <a href="golang_gvisor_ptrace.html">
            
                    
                    gvisor ptrace模式介绍(网摘)
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="rust_vmm_brief.html">
            
                <a href="rust_vmm_brief.html">
            
                    
                    rust VMM(virtual machine monitor)
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.2.1" data-path="rust_vmm_简介.html">
            
                <a href="rust_vmm_简介.html">
            
                    
                    rust-vmm简介
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.2" data-path="rust_firecracker_代码.html">
            
                <a href="rust_firecracker_代码.html">
            
                    
                    firecracker代码
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.3" data-path="rust_firecracker_使用.html">
            
                <a href="rust_firecracker_使用.html">
            
                    
                    firecracker使用
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.4" data-path="rust_cloud-hypervisor_代码.html">
            
                <a href="rust_cloud-hypervisor_代码.html">
            
                    
                    cloud hypervisor代码
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.5" data-path="rust_cloud-hypervisor_使用.html">
            
                <a href="rust_cloud-hypervisor_使用.html">
            
                    
                    cloud hypervisor使用
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.6" data-path="rust_cloud-hypervisor_问题与解决.html">
            
                <a href="rust_cloud-hypervisor_问题与解决.html">
            
                    
                    cloud hypervisor问题与解决
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="qemu使用.html">
            
                <a href="qemu使用.html">
            
                    
                    Qemu使用
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="as_title.html">
            
                <a href="as_title.html">
            
                    
                    虚拟化网络
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="networking_virtualization_杂记.html">
            
                <a href="networking_virtualization_杂记.html">
            
                    
                    虚拟化网络杂记
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="networking_linux虚拟网络接口.html">
            
                <a href="networking_linux虚拟网络接口.html">
            
                    
                    linux虚拟网络接口(网摘)
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="as_title.html">
            
                <a href="as_title.html">
            
                    
                    开源
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="my_opensource.html">
            
                <a href="my_opensource.html">
            
                    
                    我的开源项目
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="my_upstream.html">
            
                <a href="my_upstream.html">
            
                    
                    我的upstream commit
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="as_title.html">
            
                <a href="as_title.html">
            
                    
                    Golang
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="as_title.html">
            
                <a href="as_title.html">
            
                    
                    入门
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1.1" data-path="golang_语法基础.html">
            
                <a href="golang_语法基础.html">
            
                    
                    Golang 语法基础
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.1.2" data-path="golang_json性能.html">
            
                <a href="golang_json性能.html">
            
                    
                    Golang json性能比较
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="golang_原理.html">
            
                <a href="golang_原理.html">
            
                    
                    Golang 原理相关
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.2.1" data-path="golang_interface原理.html">
            
                <a href="golang_interface原理.html">
            
                    
                    Golang interface原理(网摘)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2.2" data-path="golang_内存分配.html">
            
                <a href="golang_内存分配.html">
            
                    
                    Golang 内存分配(网摘)
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5.3" data-path="golang_标准库.html">
            
                <a href="golang_标准库.html">
            
                    
                    Golang 标准库
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.4" data-path="golang_我的反射代码.html">
            
                <a href="golang_我的反射代码.html">
            
                    
                    Golang 我的反射代码
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.5" data-path="golang_问答.html">
            
                <a href="golang_问答.html">
            
                    
                    Golang 问答
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.6" data-path="golang_高效go.html">
            
                <a href="golang_高效go.html">
            
                    
                    Golang 高效go
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.7" data-path="golang_进阶.html">
            
                <a href="golang_进阶.html">
            
                    
                    Golang 进阶
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.8" data-path="as_title.html">
            
                <a href="as_title.html">
            
                    
                    Golang 杂记
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.8.1" data-path="golang_杂记1.html">
            
                <a href="golang_杂记1.html">
            
                    
                    Golang 杂记1
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.8.2" data-path="golang_杂记2.html">
            
                <a href="golang_杂记2.html">
            
                    
                    Golang 杂记2
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.8.3" data-path="golang_杂记3.html">
            
                <a href="golang_杂记3.html">
            
                    
                    Golang 杂记3
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.8.4" data-path="golang_lib选型.html">
            
                <a href="golang_lib选型.html">
            
                    
                    Golang lib选型
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.8.5" data-path="golang_mod_proxy.html">
            
                <a href="golang_mod_proxy.html">
            
                    
                    go mod和go proxy
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.8.6" data-path="golang_汇编_arm64.html">
            
                <a href="golang_汇编_arm64.html">
            
                    
                    Golang 汇编语法和arm64小知识
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.8.7" data-path="golang_cgo_swig.html">
            
                <a href="golang_cgo_swig.html">
            
                    
                    go调用c可以用swig
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5.9" data-path="as_title.html">
            
                <a href="as_title.html">
            
                    
                    Golang 环境和工具链生成
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.9.1" data-path="golang_toolchain_ppc.html">
            
                <a href="golang_toolchain_ppc.html">
            
                    
                    go tools增加ppc32支持.md
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.9.2" data-path="golang_toolchain_compile_gccgo.html">
            
                <a href="golang_toolchain_compile_gccgo.html">
            
                    
                    编译gccgo
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.9.3" data-path="golang_go_on_mips.html">
            
                <a href="golang_go_on_mips.html">
            
                    
                    go on mips boards(not so updated)
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.9.3.1" data-path="golang_go_on_mips_part1.html">
            
                <a href="golang_go_on_mips_part1.html">
            
                    
                    part 1: cross compile go
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.9.3.2" data-path="golang_go_on_mips_part2.html">
            
                <a href="golang_go_on_mips_part2.html">
            
                    
                    part 2: build native go compiler
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.9.3.3" data-path="golang_go_on_mips_part3.html">
            
                <a href="golang_go_on_mips_part3.html">
            
                    
                    part 3: gccgo experiments
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.9.3.4" data-path="golang_go_on_mips_part4.html">
            
                <a href="golang_go_on_mips_part4.html">
            
                    
                    part 4: Golang json performance
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.9.3.5" data-path="golang_gentoo_on_mips_board_and_build_go.html">
            
                <a href="golang_gentoo_on_mips_board_and_build_go.html">
            
                    
                    Gentoo on mips board and build go
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5.10" data-path="as_title.html">
            
                <a href="as_title.html">
            
                    
                    微服务
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.10.1" data-path="golang_micro.html">
            
                <a href="golang_micro.html">
            
                    
                    go-micro和micro
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.10.2" data-path="golang_微服务概念.html">
            
                <a href="golang_微服务概念.html">
            
                    
                    微服务概念
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5.11" data-path="as_title.html">
            
                <a href="as_title.html">
            
                    
                    解释器和编解码
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.11.1" data-path="golang_yeagi.html">
            
                <a href="golang_yeagi.html">
            
                    
                    解释器yeagi
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.11.2" data-path="golang_tengo.html">
            
                <a href="golang_tengo.html">
            
                    
                    解释器tengo
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.11.3" data-path="golang_govaluate.html">
            
                <a href="golang_govaluate.html">
            
                    
                    解释器govaluate
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.11.4" data-path="golang_encoding_gotiny.html">
            
                <a href="golang_encoding_gotiny.html">
            
                    
                    gotiny编解码
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.11.5" data-path="golang_abs.html">
            
                <a href="golang_abs.html">
            
                    
                    解释器abs
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5.12" data-path="as_title.html">
            
                <a href="as_title.html">
            
                    
                    调试和性能
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.12.1" data-path="golang_调试记录.html">
            
                <a href="golang_调试记录.html">
            
                    
                    Golang 调试记录
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.12.2" data-path="golang_topid性能优化.html">
            
                <a href="golang_topid性能优化.html">
            
                    
                    Golang topid性能优化
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.12.3" data-path="golang_gshell性能调试.html">
            
                <a href="golang_gshell性能调试.html">
            
                    
                    Golang gshell性能调试
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5.13" data-path="as_title.html">
            
                <a href="as_title.html">
            
                    
                    网络和消息中间件
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.13.1" data-path="golang_zmq.html">
            
                <a href="golang_zmq.html">
            
                    
                    消息中间件基本概念和zero mq
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.13.2" data-path="golang_mango.html">
            
                <a href="golang_mango.html">
            
                    
                    消息中间件mango
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.13.3" data-path="golang_libp2p.html">
            
                <a href="golang_libp2p.html">
            
                    
                    Golang p2p网络
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="as_title.html">
            
                <a href="as_title.html">
            
                    
                    Rust
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="rust_入门_brief.html">
            
                <a href="rust_入门_brief.html">
            
                    
                    Rust 入门系列
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1.1" data-path="rust_books.html">
            
                <a href="rust_books.html">
            
                    
                    Rust reference books
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.1.2" data-path="rust_入门1.html">
            
                <a href="rust_入门1.html">
            
                    
                    Rust 安装和基础语法
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.1.3" data-path="rust_入门2.html">
            
                <a href="rust_入门2.html">
            
                    
                    Rust 泛型和内存所有权
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.1.4" data-path="rust_入门3.html">
            
                <a href="rust_入门3.html">
            
                    
                    Rust 闭包 容器 迭代器 生成器 线程
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.1.5" data-path="rust_工程构建.html">
            
                <a href="rust_工程构建.html">
            
                    
                    Rust 工程构建
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="rust_coding_brief.html">
            
                <a href="rust_coding_brief.html">
            
                    
                    Rust 代码积累
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter active" data-level="1.6.2.1" data-path="rust_序列化.html">
            
                <a href="rust_序列化.html">
            
                    
                    Rust 序列化原理
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2.2" data-path="rust_知识点积累.html">
            
                <a href="rust_知识点积累.html">
            
                    
                    Rust 知识点更新
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2.3" data-path="rust_adaptiveservice.html">
            
                <a href="rust_adaptiveservice.html">
            
                    
                    rust版本的adaptiveservice探索
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2.4" data-path="rust_常用设施.html">
            
                <a href="rust_常用设施.html">
            
                    
                    Rust 常用设施
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2.5" data-path="rust_代码小段.html">
            
                <a href="rust_代码小段.html">
            
                    
                    Rust 代码小段
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6.3" data-path="others.html">
            
                <a href="others.html">
            
                    
                    其他
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.3.1" data-path="rust_mdbook_使用.html">
            
                <a href="rust_mdbook_使用.html">
            
                    
                    Rust 使用mdbook
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="as_title.html">
            
                <a href="as_title.html">
            
                    
                    ARM server
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" data-path="arm_server_杂记.html">
            
                <a href="arm_server_杂记.html">
            
                    
                    Rust 杂记
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="as_title.html">
            
                <a href="as_title.html">
            
                    
                    脚本
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.1" data-path="shell_变量.html">
            
                <a href="shell_变量.html">
            
                    
                    shell变量
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2" data-path="shell_基础篇.html">
            
                <a href="shell_基础篇.html">
            
                    
                    shell命令和脚本记录-基础篇
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.3" data-path="shell_高级篇.html">
            
                <a href="shell_高级篇.html">
            
                    
                    shell命令和脚本记录-高级篇
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.4" data-path="shell_脚本片段.html">
            
                <a href="shell_脚本片段.html">
            
                    
                    shell脚本片段
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.5" data-path="python_记录.html">
            
                <a href="python_记录.html">
            
                    
                    python记录
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.6" data-path="lua_记录.html">
            
                <a href="lua_记录.html">
            
                    
                    lua记录
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.7" data-path="shell_rds脚本阅读.html">
            
                <a href="shell_rds脚本阅读.html">
            
                    
                    RDS脚本阅读
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.8" data-path="Project_Euler.html">
            
                <a href="Project_Euler.html">
            
                    
                    Project Euler
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="as_title.html">
            
                <a href="as_title.html">
            
                    
                    CPU Arch相关
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.9.1" data-path="as_title.html">
            
                <a href="as_title.html">
            
                    
                    ARM64
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.9.1.1" data-path="CPU_ARM64_thunder_overview.html">
            
                <a href="CPU_ARM64_thunder_overview.html">
            
                    
                    thunder 概览
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.1.2" data-path="CPU_ARM64_thunder_开发板操作记录.html">
            
                <a href="CPU_ARM64_thunder_开发板操作记录.html">
            
                    
                    thunder 开发板操作记录
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.1.3" data-path="CPU_ARM64_thunder_bdk.html">
            
                <a href="CPU_ARM64_thunder_bdk.html">
            
                    
                    thunder BDK
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.1.4" data-path="CPU_ARM64_thunder_efi_rtc.html">
            
                <a href="CPU_ARM64_thunder_efi_rtc.html">
            
                    
                    thunder RTC时间和efi
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.9.2" data-path="as_title.html">
            
                <a href="as_title.html">
            
                    
                    PPC
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.9.2.1" data-path="CPU_PPC启动多核Linux_流程和内存映射.html">
            
                <a href="CPU_PPC启动多核Linux_流程和内存映射.html">
            
                    
                    PPC启动多核linux: 流程和内存映射
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2.2" data-path="CPU_PPC_kernel升级记录.html">
            
                <a href="CPU_PPC_kernel升级记录.html">
            
                    
                    PPC kernel升级记录
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.9.3" data-path="as_title.html">
            
                <a href="as_title.html">
            
                    
                    MIPS
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.9.3.1" data-path="CPU_MIPS_octeon地址空间和寄存器访问.html">
            
                <a href="CPU_MIPS_octeon地址空间和寄存器访问.html">
            
                    
                    octeon 地址空间和寄存器访问
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.3.2" data-path="CPU_MIPS_octeon操作记录.html">
            
                <a href="CPU_MIPS_octeon操作记录.html">
            
                    
                    octeon 操作记录
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.3.3" data-path="CPU_MIPS_octeon_包处理性能.html">
            
                <a href="CPU_MIPS_octeon_包处理性能.html">
            
                    
                    octeon 系列处理器包处理性能
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.3.4" data-path="CPU_MIPS_octeon_ddr调试记录.html">
            
                <a href="CPU_MIPS_octeon_ddr调试记录.html">
            
                    
                    octeon DDR调试
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.3.5" data-path="CPU_MIPS_octeon_BDK.html">
            
                <a href="CPU_MIPS_octeon_BDK.html">
            
                    
                    octeon CN78xx BDK
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.3.6" data-path="kernel_增加ECC中断.html">
            
                <a href="kernel_增加ECC中断.html">
            
                    
                    octeon 增加ECC中断
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.3.7" data-path="CPU_MIPS_octeon_hw-ddr2代码走读.html">
            
                <a href="CPU_MIPS_octeon_hw-ddr2代码走读.html">
            
                    
                    octeon hw-ddr2代码走读
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.3.8" data-path="CPU_MIPS_octeon_reboot调试和ddr中断.html">
            
                <a href="CPU_MIPS_octeon_reboot调试和ddr中断.html">
            
                    
                    octeon reboot调试和DDR中断
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.3.9" data-path="CPU_MIPS_octeon中断.html">
            
                <a href="CPU_MIPS_octeon中断.html">
            
                    
                    octeon 中断
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.3.10" data-path="CPU_MIPS_octeon原子操作.html">
            
                <a href="CPU_MIPS_octeon原子操作.html">
            
                    
                    octeon 原子操作
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.3.11" data-path="CPU_MIPS_octeon网口代码分析.html">
            
                <a href="CPU_MIPS_octeon网口代码分析.html">
            
                    
                    octeon 网口代码分析
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="as_title.html">
            
                <a href="as_title.html">
            
                    
                    设备和驱动相关
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.1" data-path="device_driver_杂记.html">
            
                <a href="device_driver_杂记.html">
            
                    
                    驱动杂记
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.2" data-path="device_localbus_16bit读写.html">
            
                <a href="device_localbus_16bit读写.html">
            
                    
                    CPLD做8bit到16bit转换
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.3" data-path="as_title.html">
            
                <a href="as_title.html">
            
                    
                    nand
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.3.1" data-path="device_driver_octeon_nand.html">
            
                <a href="device_driver_octeon_nand.html">
            
                    
                    octeon nand flash驱动
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.3.2" data-path="device_driver_nand概率写失败问题分析.html">
            
                <a href="device_driver_nand概率写失败问题分析.html">
            
                    
                    Nand flash概率写失败问题分析
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.10.4" data-path="octeon_remote_pci.html">
            
                <a href="octeon_remote_pci.html">
            
                    
                    octeon remote-pci.c阅读
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.5" data-path="as_title.html">
            
                <a href="as_title.html">
            
                    
                    智能网卡和DPDK
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.5.1" data-path="octeon_pci_NIC.html">
            
                <a href="octeon_pci_NIC.html">
            
                    
                    octeon PCI NIC
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.5.2" data-path="as_title.html">
            
                <a href="as_title.html">
            
                    
                    octeon liquidIO
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.5.2.1" data-path="smartNIC_liquidIO_代码阅读app篇.html">
            
                <a href="smartNIC_liquidIO_代码阅读app篇.html">
            
                    
                    PCI-NIC 代码阅读 --app篇
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.5.2.2" data-path="smartNIC_liquidIO_代码阅读api篇.html">
            
                <a href="smartNIC_liquidIO_代码阅读api篇.html">
            
                    
                    PCI-NIC 代码阅读 --api篇
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.5.2.3" data-path="smartNIC_liquidIO_代码阅读driver篇之结构体.html">
            
                <a href="smartNIC_liquidIO_代码阅读driver篇之结构体.html">
            
                    
                    PCI-NIC 代码阅读 --driver篇之结构体
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.5.2.4" data-path="smartNIC_liquidIO_代码阅读driver篇.html">
            
                <a href="smartNIC_liquidIO_代码阅读driver篇.html">
            
                    
                    PCI-NIC 代码阅读 --driver篇
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.5.2.5" data-path="smartNIC_liquidIO_代码阅读真NIC篇.html">
            
                <a href="smartNIC_liquidIO_代码阅读真NIC篇.html">
            
                    
                    PCI-NIC 代码阅读 --真NIC篇
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.10.5.3" data-path="networking_dpdk使用_2014.html">
            
                <a href="networking_dpdk使用_2014.html">
            
                    
                    DPDK使用(2014)
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.11" data-path="as_title.html">
            
                <a href="as_title.html">
            
                    
                    Linux 开发调试
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.11.1" data-path="as_title.html">
            
                <a href="as_title.html">
            
                    
                    Operating System
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.11.1.1" data-path="system_libc_part1.html">
            
                <a href="system_libc_part1.html">
            
                    
                    libc概览1
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.1.2" data-path="system_libc_part2.html">
            
                <a href="system_libc_part2.html">
            
                    
                    libc概览2
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.1.3" data-path="system_libc_part3.html">
            
                <a href="system_libc_part3.html">
            
                    
                    libc概览3
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.1.4" data-path="system_原理杂记.html">
            
                <a href="system_原理杂记.html">
            
                    
                    系统原理杂记
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.1.5" data-path="system_alpine.html">
            
                <a href="system_alpine.html">
            
                    
                    Alpine Linux
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.1.6" data-path="system_进程间通信.html">
            
                <a href="system_进程间通信.html">
            
                    
                    进程间通信
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.1.7" data-path="system_特殊功能fd.html">
            
                <a href="system_特殊功能fd.html">
            
                    
                    eventfd timerfd signalfd和fd共享
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.11.2" data-path="as_title.html">
            
                <a href="as_title.html">
            
                    
                    嵌入式系统开发调试
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.11.2.1" data-path="embedded_debugging.html">
            
                <a href="embedded_debugging.html">
            
                    
                    嵌入式调试杂记
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.2.2" data-path="uboot_杂记.html">
            
                <a href="uboot_杂记.html">
            
                    
                    uboot杂记
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.2.3" data-path="buildroot_杂记.html">
            
                <a href="buildroot_杂记.html">
            
                    
                    buildroot杂记
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.2.4" data-path="toolchain_升级gcc问题解决.html">
            
                <a href="toolchain_升级gcc问题解决.html">
            
                    
                    升级GCC7.3问题解决
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.12" data-path="as_title.html">
            
                <a href="as_title.html">
            
                    
                    工程实践
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.12.1" data-path="gitlab_ci.html">
            
                <a href="gitlab_ci.html">
            
                    
                    gitlab CI
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            本书使用 GitBook 发布
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >Rust 序列化原理</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div class="search-plus" id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <div id="anchor-navigation-ex-navbar"><i class="fa fa-navicon"></i><ul><li><span class="title-icon "></span><a href="#&#x4E3B;&#x6D41;&#x7684;serde&#x6846;&#x67B6;"><b>1. </b>&#x4E3B;&#x6D41;&#x7684;serde&#x6846;&#x67B6;</a></li><ul><li><span class="title-icon "></span><a href="#&#x7B80;&#x5355;&#x4F8B;&#x5B50;"><b>1.1. </b>&#x7B80;&#x5355;&#x4F8B;&#x5B50;</a></li><li><span class="title-icon "></span><a href="#serdejson"><b>1.2. </b>serde_json</a></li><ul><li><span class="title-icon "></span><a href="#&#x7406;&#x8BBA;"><b>1.2.1. </b>&#x7406;&#x8BBA;</a></li><li><span class="title-icon "></span><a href="#untype&#x7684;&#x4F8B;&#x5B50;"><b>1.2.2. </b>untype&#x7684;&#x4F8B;&#x5B50;</a></li><li><span class="title-icon "></span><a href="#index&#x64CD;&#x4F5C;&#x7B26;&#x91CD;&#x8F7D;"><b>1.2.3. </b>Index&#x64CD;&#x4F5C;&#x7B26;&#x91CD;&#x8F7D;</a></li><li><span class="title-icon "></span><a href="#&#x53CD;&#x5E8F;&#x5217;&#x5316;&#x81EA;&#x5B9A;&#x4E49;struct"><b>1.2.4. </b>&#x53CD;&#x5E8F;&#x5217;&#x5316;&#x81EA;&#x5B9A;&#x4E49;struct</a></li><li><span class="title-icon "></span><a href="#json&#x5B8F;&#x6784;&#x5EFA;json"><b>1.2.5. </b>json!&#x5B8F;&#x6784;&#x5EFA;json</a></li><li><span class="title-icon "></span><a href="#&#x5E8F;&#x5217;&#x5316;&#x7ED3;&#x6784;&#x4F53;"><b>1.2.6. </b>&#x5E8F;&#x5217;&#x5316;&#x7ED3;&#x6784;&#x4F53;</a></li><li><span class="title-icon "></span><a href="#&#x6027;&#x80FD;"><b>1.2.7. </b>&#x6027;&#x80FD;</a></li><li><span class="title-icon "></span><a href="#&#x4F9D;&#x8D56;"><b>1.2.8. </b>&#x4F9D;&#x8D56;</a></li></ul><li><span class="title-icon "></span><a href="#&#x7406;&#x8BBA;_1"><b>1.3. </b>&#x7406;&#x8BBA;</a></li><ul><li><span class="title-icon "></span><a href="#29&#x79CD;&#x7C7B;&#x578B;"><b>1.3.1. </b>29&#x79CD;&#x7C7B;&#x578B;</a></li><li><span class="title-icon "></span><a href="#derive"><b>1.3.2. </b>derive</a></li><li><span class="title-icon "></span><a href="#&#x5C5E;&#x6027;"><b>1.3.3. </b>&#x5C5E;&#x6027;</a></li><li><span class="title-icon "></span><a href="#&#x81EA;&#x5DF1;&#x5B9E;&#x73B0;&#x5E8F;&#x5217;&#x5316;"><b>1.3.4. </b>&#x81EA;&#x5DF1;&#x5B9E;&#x73B0;&#x5E8F;&#x5217;&#x5316;</a></li></ul></ul></ul></div><a href="#&#x4E3B;&#x6D41;&#x7684;serde&#x6846;&#x67B6;" id="anchorNavigationExGoTop"><i class="fa fa-arrow-up"></i></a><ul>
<li><a href="#&#x4E3B;&#x6D41;&#x7684;serde&#x6846;&#x67B6;">&#x4E3B;&#x6D41;&#x7684;serde&#x6846;&#x67B6;</a><ul>
<li><a href="#&#x7B80;&#x5355;&#x4F8B;&#x5B50;">&#x7B80;&#x5355;&#x4F8B;&#x5B50;</a></li>
<li><a href="#serde_json">serde_json</a><ul>
<li><a href="#&#x7406;&#x8BBA;">&#x7406;&#x8BBA;</a></li>
<li><a href="#untype&#x7684;&#x4F8B;&#x5B50;">untype&#x7684;&#x4F8B;&#x5B50;</a></li>
<li><a href="#index&#x64CD;&#x4F5C;&#x7B26;&#x91CD;&#x8F7D;">Index&#x64CD;&#x4F5C;&#x7B26;&#x91CD;&#x8F7D;</a></li>
<li><a href="#&#x53CD;&#x5E8F;&#x5217;&#x5316;&#x81EA;&#x5B9A;&#x4E49;struct">&#x53CD;&#x5E8F;&#x5217;&#x5316;&#x81EA;&#x5B9A;&#x4E49;struct</a></li>
<li><a href="#json&#x5B8F;&#x6784;&#x5EFA;json">json!&#x5B8F;&#x6784;&#x5EFA;json</a></li>
<li><a href="#&#x5E8F;&#x5217;&#x5316;&#x7ED3;&#x6784;&#x4F53;">&#x5E8F;&#x5217;&#x5316;&#x7ED3;&#x6784;&#x4F53;</a></li>
<li><a href="#&#x6027;&#x80FD;">&#x6027;&#x80FD;</a></li>
<li><a href="#&#x4F9D;&#x8D56;">&#x4F9D;&#x8D56;</a></li>
</ul>
</li>
<li><a href="#&#x7406;&#x8BBA;-1">&#x7406;&#x8BBA;</a><ul>
<li><a href="#29&#x79CD;&#x7C7B;&#x578B;">29&#x79CD;&#x7C7B;&#x578B;</a></li>
<li><a href="#derive">derive</a></li>
<li><a href="#&#x5C5E;&#x6027;">&#x5C5E;&#x6027;</a></li>
<li><a href="#&#x81EA;&#x5DF1;&#x5B9E;&#x73B0;&#x5E8F;&#x5217;&#x5316;">&#x81EA;&#x5DF1;&#x5B9E;&#x73B0;&#x5E8F;&#x5217;&#x5316;</a><ul>
<li><a href="#&#x5E8F;&#x5217;&#x5316;">&#x5E8F;&#x5217;&#x5316;</a></li>
<li><a href="#&#x53CD;&#x5E8F;&#x5217;&#x5316;">&#x53CD;&#x5E8F;&#x5217;&#x5316;</a></li>
<li><a href="#&#x53CD;&#x5E8F;&#x5217;&#x5316;&#x7684;zero-copy&#x548C;&#x751F;&#x547D;&#x5468;&#x671F;&#x6807;&#x8BB0;">&#x53CD;&#x5E8F;&#x5217;&#x5316;&#x7684;zero copy&#x548C;&#x751F;&#x547D;&#x5468;&#x671F;&#x6807;&#x8BB0;</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h1 id="&#x4E3B;&#x6D41;&#x7684;serde&#x6846;&#x67B6;"><a name="&#x4E3B;&#x6D41;&#x7684;serde&#x6846;&#x67B6;" class="anchor-navigation-ex-anchor" href="#&#x4E3B;&#x6D41;&#x7684;serde&#x6846;&#x67B6;"><i class="fa fa-link" aria-hidden="true"></i></a>1. &#x4E3B;&#x6D41;&#x7684;serde&#x6846;&#x67B6;</h1>
<p><strong>Serde is a framework for _ser_ializing and _de_serializing Rust data structures efficiently and generically.</strong></p>
<h2 id="&#x7B80;&#x5355;&#x4F8B;&#x5B50;"><a name="&#x7B80;&#x5355;&#x4F8B;&#x5B50;" class="anchor-navigation-ex-anchor" href="#&#x7B80;&#x5355;&#x4F8B;&#x5B50;"><i class="fa fa-link" aria-hidden="true"></i></a>1.1. &#x7B80;&#x5355;&#x4F8B;&#x5B50;</h2>
<pre class="language-"><code class="lang-rust"><span class="token keyword">use</span> <span class="token namespace">serde<span class="token punctuation">::</span></span><span class="token punctuation">{</span><span class="token class-name">Serialize</span><span class="token punctuation">,</span> <span class="token class-name">Deserialize</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">extern</span> <span class="token keyword">crate</span> <span class="token module-declaration namespace">serde_json</span><span class="token punctuation">;</span> <span class="token comment">// 1.0.82</span>

<span class="token attribute attr-name">#[derive(Serialize, Deserialize, Debug)]</span>
<span class="token keyword">struct</span> <span class="token type-definition class-name">Point</span> <span class="token punctuation">{</span>
    x<span class="token punctuation">:</span> <span class="token keyword">i32</span><span class="token punctuation">,</span>
    y<span class="token punctuation">:</span> <span class="token keyword">i32</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token keyword">fn</span> <span class="token function-definition function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> point <span class="token operator">=</span> <span class="token class-name">Point</span> <span class="token punctuation">{</span> x<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token comment">// Convert the Point to a JSON string.</span>
    <span class="token keyword">let</span> serialized <span class="token operator">=</span> <span class="token namespace">serde_json<span class="token punctuation">::</span></span><span class="token function">to_string</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>point<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">unwrap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Prints serialized = {&quot;x&quot;:1,&quot;y&quot;:2}</span>
    <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">&quot;serialized = {}&quot;</span><span class="token punctuation">,</span> serialized<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Convert the JSON string back to a Point.</span>
    <span class="token keyword">let</span> deserialized<span class="token punctuation">:</span> <span class="token class-name">Point</span> <span class="token operator">=</span> <span class="token namespace">serde_json<span class="token punctuation">::</span></span><span class="token function">from_str</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>serialized<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">unwrap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Prints deserialized = Point { x: 1, y: 2 }</span>
    <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">&quot;deserialized = {:?}&quot;</span><span class="token punctuation">,</span> deserialized<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<h2 id="serdejson"><a name="serdejson" class="anchor-navigation-ex-anchor" href="#serdejson"><i class="fa fa-link" aria-hidden="true"></i></a>1.2. serde_json</h2>
<h3 id="&#x7406;&#x8BBA;"><a name="&#x7406;&#x8BBA;" class="anchor-navigation-ex-anchor" href="#&#x7406;&#x8BBA;"><i class="fa fa-link" aria-hidden="true"></i></a>1.2.1. &#x7406;&#x8BBA;</h3>
<p>&#x6BD4;&#x5982;&#x4E0B;&#x9762;&#x7684;json</p>
<pre class="language-"><code class="lang-json"><span class="token punctuation">{</span>
    <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;John Doe&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;age&quot;</span><span class="token operator">:</span> <span class="token number">43</span><span class="token punctuation">,</span>
    <span class="token property">&quot;address&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;street&quot;</span><span class="token operator">:</span> <span class="token string">&quot;10 Downing Street&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;city&quot;</span><span class="token operator">:</span> <span class="token string">&quot;London&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;phones&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">&quot;+44 1234567&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;+44 2345678&quot;</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre>
<p>json&#x4E2D;&#x7684;&#x6BCF;&#x4E2A;&quot;value&quot;, &#x90FD;&#x662F;&#x4E00;&#x4E2A;<a href="https://docs.serde.rs/serde_json/value/enum.Value.html" target="_blank"><code>serde_json::Value</code></a></p>
<pre class="language-"><code class="lang-rust"><span class="token keyword">enum</span> <span class="token type-definition class-name">Value</span> <span class="token punctuation">{</span>
    <span class="token class-name">Null</span><span class="token punctuation">,</span>
    <span class="token class-name">Bool</span><span class="token punctuation">(</span><span class="token keyword">bool</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token class-name">Number</span><span class="token punctuation">(</span><span class="token class-name">Number</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token class-name">String</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token class-name">Vec</span><span class="token operator">&lt;</span><span class="token class-name">Value</span><span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token operator">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Value</span><span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre>
<ul>
<li>&#x7528;<a href="https://docs.serde.rs/serde_json/de/fn.from_str.html" target="_blank"><code>serde_json::from_str</code></a>&#x4ECE;string&#x91CC;&#x53CD;&#x5E8F;&#x5217;&#x5316;json</li>
<li>&#x7528;<a href="https://docs.serde.rs/serde_json/de/fn.from_slice.html" target="_blank"><code>from_slice</code></a>&#x4ECE;<code>&amp;[u8]</code>&#x53CD;&#x5E8F;&#x5217;&#x5316;json</li>
<li>&#x7528;<a href="https://docs.serde.rs/serde_json/de/fn.from_reader.html" target="_blank"><code>from_reader</code></a>&#x4ECE;&#x6587;&#x4EF6;&#x6216;&#x8005;TCP&#x7684;socket&#x7684;<code>io::Read</code>&#x53CD;&#x5E8F;&#x5217;&#x5316;json</li>
</ul>
<h3 id="untype&#x7684;&#x4F8B;&#x5B50;"><a name="untype&#x7684;&#x4F8B;&#x5B50;" class="anchor-navigation-ex-anchor" href="#untype&#x7684;&#x4F8B;&#x5B50;"><i class="fa fa-link" aria-hidden="true"></i></a>1.2.2. untype&#x7684;&#x4F8B;&#x5B50;</h3>
<p>&#x6240;&#x8C13;&#x7684;untype&#x5C31;&#x662F;&#x8BF4;&#x6CA1;&#x6709;&#x9884;&#x5B9A;&#x4E49;&#x597D;&#x4E00;&#x4E2A;struct, &#x800C;&#x662F;&#x76F4;&#x63A5;&#x4ECE;JSON&#x5B57;&#x7B26;&#x4E32;&#x91CC;&#x53CD;&#x5E8F;&#x5217;&#x5316;&#x51FA;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;, &#x8FD9;&#x4E2A;&#x5BF9;&#x8C61;&#x7684;&#x7C7B;&#x578B;&#x6C38;&#x8FDC;&#x662F;<code>serde_json::Value</code></p>
<pre class="language-"><code class="lang-rust"><span class="token keyword">use</span> <span class="token namespace">serde_json<span class="token punctuation">::</span></span><span class="token punctuation">{</span><span class="token class-name">Result</span><span class="token punctuation">,</span> <span class="token class-name">Value</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">fn</span> <span class="token function-definition function">untyped_example</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> <span class="token class-name">Result</span><span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// Some JSON input data as a &amp;str. Maybe this comes from the user.</span>
    <span class="token keyword">let</span> data <span class="token operator">=</span> <span class="token string">r#&quot;
        {
            &quot;name&quot;: &quot;John Doe&quot;,
            &quot;age&quot;: 43,
            &quot;phones&quot;: [
                &quot;+44 1234567&quot;,
                &quot;+44 2345678&quot;
            ]
        }&quot;#</span><span class="token punctuation">;</span>

    <span class="token comment">// Parse the string of data into serde_json::Value.</span>
    <span class="token keyword">let</span> v<span class="token punctuation">:</span> <span class="token class-name">Value</span> <span class="token operator">=</span> <span class="token namespace">serde_json<span class="token punctuation">::</span></span><span class="token function">from_str</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">;</span>

    <span class="token comment">// Access parts of the data by indexing with square brackets.</span>
    <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">&quot;Please call {} at the number {}&quot;</span><span class="token punctuation">,</span> v<span class="token punctuation">[</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> v<span class="token punctuation">[</span><span class="token string">&quot;phones&quot;</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">Ok</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">fn</span> <span class="token function-definition function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">untyped_example</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//&#x7ED3;&#x679C;</span>
<span class="token class-name">Please</span> call <span class="token string">&quot;John Doe&quot;</span> at the number <span class="token string">&quot;+44 1234567&quot;</span>
</code></pre>
<p>rust&#x7684;enum&#x771F;&#x662F;&#x5F3A;&#x5927;, &#x53EF;&#x4EE5;&#x5BF9;<code>serde_json::Value</code>&#x5728;&#x8FD0;&#x884C;&#x65F6;&#x505A;&#x5404;&#x79CD;&#x64CD;&#x4F5C;, &#x6BD4;&#x5982;<code>v[&quot;name&quot;]</code>, &#x751A;&#x81F3;<code>v[&quot;phones&quot;][0]</code>&#x90FD;&#x662F;&#x5408;&#x6CD5;&#x7684;. -- &#x662F;&#x56E0;&#x4E3A;<code>serde_json::Value</code>&#x81EA;&#x5DF1;&#x5B9E;&#x73B0;&#x4E86;<code>Index</code>&#x64CD;&#x4F5C;&#x7B26;.
&#x663E;&#x7136;&#x6211;&#x4EEC;&#x77E5;&#x9053;&#x8FD9;&#x4E9B;&#x662F;&#x5408;&#x7406;&#x7684;, &#x90A3;&#x5982;&#x679C;&#x6545;&#x610F;&#x7528;&quot;&#x4E0D;&#x53EF;&#x80FD;&quot;&#x7684;key&#x53BB;&#x8BBF;&#x95EE;&#x5462;?</p>
<p>&#x6BD4;&#x5982;:</p>
<pre class="language-"><code class="lang-rust"><span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">&quot;Please call {} at the number {}&quot;</span><span class="token punctuation">,</span> v<span class="token punctuation">[</span><span class="token string">&quot;nnnnnnnnnnnn&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> v<span class="token punctuation">[</span><span class="token string">&quot;phones&quot;</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//&#x80FD;&#x6B63;&#x5E38;&#x8FD0;&#x884C;, &#x6CA1;&#x6709;&#x5D29;&#x6E83;, &#x6CA1;&#x6709;index&#x8D8A;&#x754C;, &#x7ED3;&#x679C;&#x4E3A;null</span>
<span class="token class-name">Please</span> call null at the number null
</code></pre>
<p>&#x5982;&#x679C;&#x6700;&#x540E;&#x6574;&#x4E2A;&#x6253;&#x5370;v, &#x4F1A;&#x5F97;&#x5230;:</p>
<pre class="language-"><code class="lang-rust"><span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">&quot;{:?}&quot;</span><span class="token punctuation">,</span> v<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//&#x7ED3;&#x679C;</span>
<span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">:</span> <span class="token class-name">Number</span><span class="token punctuation">(</span><span class="token number">43</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;name&quot;</span><span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">(</span><span class="token string">&quot;John Doe&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;phones&quot;</span><span class="token punctuation">:</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token class-name">String</span><span class="token punctuation">(</span><span class="token string">&quot;+44 1234567&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">(</span><span class="token string">&quot;+44 2345678&quot;</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<h3 id="index&#x64CD;&#x4F5C;&#x7B26;&#x91CD;&#x8F7D;"><a name="index&#x64CD;&#x4F5C;&#x7B26;&#x91CD;&#x8F7D;" class="anchor-navigation-ex-anchor" href="#index&#x64CD;&#x4F5C;&#x7B26;&#x91CD;&#x8F7D;"><i class="fa fa-link" aria-hidden="true"></i></a>1.2.3. Index&#x64CD;&#x4F5C;&#x7B26;&#x91CD;&#x8F7D;</h3>
<p>&#x770B;&#x8D77;&#x6765;v&#x652F;&#x6301;&#x7528;index&#x6765;&#x8BBF;&#x95EE;, &#x662F;&#x8FD9;&#x4E2A;&#x5E93;&#x6709;&#x7279;&#x6B8A;&#x7684;&#x5B9E;&#x73B0;:
<code>https://github.com/serde-rs/json/blob/master/src/value/index.rs</code></p>
<pre class="language-"><code class="lang-rust"><span class="token keyword">impl</span><span class="token operator">&lt;</span><span class="token class-name">I</span><span class="token operator">&gt;</span> <span class="token namespace">ops<span class="token punctuation">::</span></span><span class="token class-name">Index</span><span class="token operator">&lt;</span><span class="token class-name">I</span><span class="token operator">&gt;</span> <span class="token keyword">for</span> <span class="token class-name">Value</span>
<span class="token keyword">where</span>
    <span class="token class-name">I</span><span class="token punctuation">:</span> <span class="token class-name">Index</span><span class="token punctuation">,</span>
<span class="token punctuation">{</span>
    <span class="token punctuation">...</span>
<span class="token punctuation">}</span>
</code></pre>
<p>&#x8FD9;&#x4E2A;Index&#x662F;&#x4E0B;&#x9762;:
&#x5173;&#x952E;&#x5148;match v&#x7684;&#x7C7B;&#x578B;, &#x518D;&#x64CD;&#x4F5C;. &#x76F8;&#x5F53;&#x4E8E;&#x64CD;&#x4F5C;&#x7B26;&#x91CD;&#x8F7D;, &#x5E94;&#x8BE5;&#x662F;rust&#x6BD4;&#x8F83;&#x9AD8;&#x9636;&#x7684;&#x7528;&#x6CD5;.</p>
<pre class="language-"><code class="lang-rust"><span class="token keyword">impl</span> <span class="token class-name">Index</span> <span class="token keyword">for</span> <span class="token keyword">str</span> <span class="token punctuation">{</span>
    <span class="token keyword">fn</span> <span class="token function-definition function">index_into</span><span class="token operator">&lt;</span><span class="token lifetime-annotation symbol">&apos;v</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token keyword">self</span><span class="token punctuation">,</span> v<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token lifetime-annotation symbol">&apos;v</span> <span class="token class-name">Value</span><span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> <span class="token class-name">Option</span><span class="token operator">&lt;</span><span class="token operator">&amp;</span><span class="token lifetime-annotation symbol">&apos;v</span> <span class="token class-name">Value</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">match</span> v <span class="token punctuation">{</span>
            <span class="token class-name">Value</span><span class="token punctuation">::</span><span class="token class-name">Object</span><span class="token punctuation">(</span>map<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token keyword">self</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            _ <span class="token operator">=&gt;</span> <span class="token class-name">None</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">fn</span> <span class="token function-definition function">index_into_mut</span><span class="token operator">&lt;</span><span class="token lifetime-annotation symbol">&apos;v</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token keyword">self</span><span class="token punctuation">,</span> v<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token lifetime-annotation symbol">&apos;v</span> <span class="token keyword">mut</span> <span class="token class-name">Value</span><span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> <span class="token class-name">Option</span><span class="token operator">&lt;</span><span class="token operator">&amp;</span><span class="token lifetime-annotation symbol">&apos;v</span> <span class="token keyword">mut</span> <span class="token class-name">Value</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">match</span> v <span class="token punctuation">{</span>
            <span class="token class-name">Value</span><span class="token punctuation">::</span><span class="token class-name">Object</span><span class="token punctuation">(</span>map<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> map<span class="token punctuation">.</span><span class="token function">get_mut</span><span class="token punctuation">(</span><span class="token keyword">self</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            _ <span class="token operator">=&gt;</span> <span class="token class-name">None</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">fn</span> <span class="token function-definition function">index_or_insert</span><span class="token operator">&lt;</span><span class="token lifetime-annotation symbol">&apos;v</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token keyword">self</span><span class="token punctuation">,</span> v<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token lifetime-annotation symbol">&apos;v</span> <span class="token keyword">mut</span> <span class="token class-name">Value</span><span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> <span class="token operator">&amp;</span><span class="token lifetime-annotation symbol">&apos;v</span> <span class="token keyword">mut</span> <span class="token class-name">Value</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token keyword">let</span> <span class="token class-name">Value</span><span class="token punctuation">::</span><span class="token class-name">Null</span> <span class="token operator">=</span> v <span class="token punctuation">{</span>
            <span class="token operator">*</span>v <span class="token operator">=</span> <span class="token class-name">Value</span><span class="token punctuation">::</span><span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">match</span> v <span class="token punctuation">{</span>
            <span class="token class-name">Value</span><span class="token punctuation">::</span><span class="token class-name">Object</span><span class="token punctuation">(</span>map<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> map<span class="token punctuation">.</span><span class="token function">entry</span><span class="token punctuation">(</span><span class="token keyword">self</span><span class="token punctuation">.</span><span class="token function">to_owned</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">or_insert</span><span class="token punctuation">(</span><span class="token class-name">Value</span><span class="token punctuation">::</span><span class="token class-name">Null</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            _ <span class="token operator">=&gt;</span> <span class="token macro property">panic!</span><span class="token punctuation">(</span><span class="token string">&quot;cannot access key {:?} in JSON {}&quot;</span><span class="token punctuation">,</span> <span class="token keyword">self</span><span class="token punctuation">,</span> <span class="token class-name">Type</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>&#x81EA;&#x5DF1;&#x5B9E;&#x73B0;&#x7684;Index&#x903B;&#x8F91;:</p>
<blockquote>
<p>The result of square bracket indexing like <code>v[&quot;name&quot;]</code> is a borrow of the data at that index, so the type is <code>&amp;Value</code>. A JSON map can be indexed with string keys, while a JSON array can be indexed with integer keys. If the type of the data is not right for the type with which it is being indexed, or if a map does not contain the key being indexed, or if the index into a vector is out of bounds, the returned element is <code>Value::Null</code>.</p>
</blockquote>
<h3 id="&#x53CD;&#x5E8F;&#x5217;&#x5316;&#x81EA;&#x5B9A;&#x4E49;struct"><a name="&#x53CD;&#x5E8F;&#x5217;&#x5316;&#x81EA;&#x5B9A;&#x4E49;struct" class="anchor-navigation-ex-anchor" href="#&#x53CD;&#x5E8F;&#x5217;&#x5316;&#x81EA;&#x5B9A;&#x4E49;struct"><i class="fa fa-link" aria-hidden="true"></i></a>1.2.4. &#x53CD;&#x5E8F;&#x5217;&#x5316;&#x81EA;&#x5B9A;&#x4E49;struct</h3>
<p>&#x4E0A;&#x9762;untype&#x7684;&#x4F8B;&#x5B50;&#x4E2D;, &#x53CD;&#x5E8F;&#x5217;&#x5316;&#x51FA;&#x6765;&#x7684;&#x5BF9;&#x8C61;&#x53EA;&#x80FD;&#x662F;<code>serde_json::Value</code>, &#x867D;&#x7136;&#x4E5F;&#x53EF;&#x4EE5;&#x6309;&#x7167;json&#x5BF9;&#x53F7;&#x5165;&#x5EA7;&#x7684;&#x8BBF;&#x95EE;&#x91CC;&#x9762;&#x7684;filed, &#x4F46;&#x5B9E;&#x9645;&#x662F;&#x8D70;&#x7684;&quot;&#x901A;&#x7528;&quot;&#x4EE3;&#x7801;.
&#x4E0B;&#x9762;&#x7684;&#x4F8B;&#x5B50;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;strongly typed&#x7ED3;&#x6784;&#x4F53;:</p>
<pre class="language-"><code class="lang-rust"><span class="token keyword">use</span> <span class="token namespace">serde<span class="token punctuation">::</span></span><span class="token punctuation">{</span><span class="token class-name">Deserialize</span><span class="token punctuation">,</span> <span class="token class-name">Serialize</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token namespace">serde_json<span class="token punctuation">::</span></span><span class="token class-name">Result</span><span class="token punctuation">;</span>

<span class="token attribute attr-name">#[derive(Serialize, Deserialize)]</span>
<span class="token keyword">struct</span> <span class="token type-definition class-name">Person</span> <span class="token punctuation">{</span>
    name<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">,</span>
    age<span class="token punctuation">:</span> <span class="token keyword">u8</span><span class="token punctuation">,</span>
    phones<span class="token punctuation">:</span> <span class="token class-name">Vec</span><span class="token operator">&lt;</span><span class="token class-name">String</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token keyword">fn</span> <span class="token function-definition function">typed_example</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> <span class="token class-name">Result</span><span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// Some JSON input data as a &amp;str. Maybe this comes from the user.</span>
    <span class="token keyword">let</span> data <span class="token operator">=</span> <span class="token string">r#&quot;
        {
            &quot;name&quot;: &quot;John Doe&quot;,
            &quot;age&quot;: 43,
            &quot;phones&quot;: [
                &quot;+44 1234567&quot;,
                &quot;+44 2345678&quot;
            ]
        }&quot;#</span><span class="token punctuation">;</span>

    <span class="token comment">// Parse the string of data into a Person object. This is exactly the</span>
    <span class="token comment">// same function as the one that produced serde_json::Value above, but</span>
    <span class="token comment">// now we are asking it for a Person as output.</span>
    <span class="token keyword">let</span> p<span class="token punctuation">:</span> <span class="token class-name">Person</span> <span class="token operator">=</span> <span class="token namespace">serde_json<span class="token punctuation">::</span></span><span class="token function">from_str</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">;</span> <span class="token comment">//&#x540C;&#x6837;&#x662F;from_str&#x8FD9;&#x4E2A;API, &#x4F1A;&#x6839;&#x636E;&#x5DE6;&#x4FA7;&#x53D8;&#x91CF;&#x7684;type&#x6765;&#x9002;&#x914D;, &#x5F3A;&#x5927;!</span>

    <span class="token comment">// Do things just like with any other Rust data structure.</span>
    <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">&quot;Please call {} at the number {}&quot;</span><span class="token punctuation">,</span> p<span class="token punctuation">.</span>name<span class="token punctuation">,</span> p<span class="token punctuation">.</span>phones<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//&#x8FD9;&#x91CC;&#x5BF9;name&#x7684;&#x8BBF;&#x95EE;&#x4E5F;&#x53D8;&#x6210;&#x4E86;p.name</span>

    <span class="token class-name">Ok</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
<blockquote>
<p>This is the same <code>serde_json::from_str</code> function as before, but this time we assign the return value to a variable of type <code>Person</code> so Serde will automatically interpret the input data as a <code>Person</code> and produce informative error messages if the layout does not conform to what a <code>Person</code> is expected to look like.</p>
<p>Any type that implements Serde&apos;s <code>Deserialize</code> trait can be deserialized this way. This includes built-in Rust standard library types like <code>Vec<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>T</span><span class="token punctuation">&gt;</span></span></code> and <code>HashMap<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>K,</span> <span class="token attr-name">V</span><span class="token punctuation">&gt;</span></span></code>, as well as any structs or enums annotated with <code>#[derive(Deserialize)]</code>.</p>
</blockquote>
<p>from_str()&#x4F1A;&#x8FD4;&#x56DE;&#x4E0D;&#x540C;&#x7684;&#x7C7B;&#x578B;, &#x662F;&#x56E0;&#x4E3A;&#x5B83;&#x662F;&#x4E2A;&#x6CDB;&#x578B;&#x51FD;&#x6570;:</p>
<pre class="language-"><code class="lang-rust"><span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function-definition function">from_str</span><span class="token operator">&lt;</span><span class="token lifetime-annotation symbol">&apos;a</span><span class="token punctuation">,</span> <span class="token class-name">T</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>s<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token lifetime-annotation symbol">&apos;a</span> <span class="token keyword">str</span><span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> <span class="token class-name">Result</span><span class="token operator">&lt;</span><span class="token class-name">T</span><span class="token operator">&gt;</span>
<span class="token keyword">where</span>
    <span class="token class-name">T</span><span class="token punctuation">:</span> <span class="token namespace">de<span class="token punctuation">::</span></span><span class="token class-name">Deserialize</span><span class="token operator">&lt;</span><span class="token lifetime-annotation symbol">&apos;a</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
<span class="token punctuation">{</span>
    <span class="token comment">//&#x8FD9;&#x91CC;&#x5B9E;&#x9645;&#x4E0A;&#x662F;return from_trait(read::StrRead::new(s))</span>
    <span class="token comment">//&#x4F34;&#x968F;&#x7740;return, &#x8FD4;&#x56DE;&#x7C7B;&#x578B;T&#x88AB;&#x4F20;&#x9012;&#x8FDB;from_trait</span>
    <span class="token function">from_trait</span><span class="token punctuation">(</span><span class="token namespace">read<span class="token punctuation">::</span></span><span class="token class-name">StrRead</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
<p>&#x8FD9;&#x4E2A;&#x6CDB;&#x578B;&#x51FD;&#x6570;&#x5B9E;&#x4F8B;&#x5316;&#x7C7B;&#x578B;T&#x7684;&#x4F20;&#x5165;&#x662F;&#x4ECE;&#x8FD4;&#x56DE;&#x503C;<code>Result<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>T</span><span class="token punctuation">&gt;</span></span></code>&#x63A8;&#x65AD;&#x51FA;&#x6765;&#x7684;. &#x800C;&#x8FD9;&#x4E2A;&#x8FD4;&#x56DE;&#x503C;&#x4ECE;&#x53D8;&#x91CF;&#x7C7B;&#x578B;&#x800C;&#x6765;:<br><code>let p: Person = serde_json::from_str(data)?</code><br>&#x7F16;&#x8BD1;&#x5668;&#x63A8;&#x65AD;&#x51FA;<code>T</code>&#x5C31;&#x662F;<code>Person</code></p>
<p>from_str&#x7EE7;&#x7EED;&#x628A;&#x8FD9;&#x4E2A;&#x7C7B;&#x578B;&#x4F20;&#x9012;&#x7ED9;from_trait.</p>
<pre class="language-"><code class="lang-rust"><span class="token keyword">fn</span> <span class="token function-definition function">from_trait</span><span class="token operator">&lt;</span><span class="token lifetime-annotation symbol">&apos;de</span><span class="token punctuation">,</span> <span class="token class-name">R</span><span class="token punctuation">,</span> <span class="token class-name">T</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>read<span class="token punctuation">:</span> <span class="token class-name">R</span><span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> <span class="token class-name">Result</span><span class="token operator">&lt;</span><span class="token class-name">T</span><span class="token operator">&gt;</span>
<span class="token keyword">where</span>
    <span class="token class-name">R</span><span class="token punctuation">:</span> <span class="token class-name">Read</span><span class="token operator">&lt;</span><span class="token lifetime-annotation symbol">&apos;de</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
    <span class="token class-name">T</span><span class="token punctuation">:</span> <span class="token namespace">de<span class="token punctuation">::</span></span><span class="token class-name">Deserialize</span><span class="token operator">&lt;</span><span class="token lifetime-annotation symbol">&apos;de</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
<span class="token punctuation">{</span>
    <span class="token keyword">let</span> <span class="token keyword">mut</span> de <span class="token operator">=</span> <span class="token class-name">Deserializer</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span>read<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> value <span class="token operator">=</span> <span class="token macro property">tri!</span><span class="token punctuation">(</span><span class="token namespace">de<span class="token punctuation">::</span></span><span class="token class-name">Deserialize</span><span class="token punctuation">::</span><span class="token function">deserialize</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token keyword">mut</span> de<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Make sure the whole stream has been consumed.</span>
    <span class="token macro property">tri!</span><span class="token punctuation">(</span>de<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Ok</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
<h3 id="json&#x5B8F;&#x6784;&#x5EFA;json"><a name="json&#x5B8F;&#x6784;&#x5EFA;json" class="anchor-navigation-ex-anchor" href="#json&#x5B8F;&#x6784;&#x5EFA;json"><i class="fa fa-link" aria-hidden="true"></i></a>1.2.5. json!&#x5B8F;&#x6784;&#x5EFA;json</h3>
<p>serde_json&#x63D0;&#x4F9B;&#x4E86;<code>json!</code>&#x5B8F;&#x6765;&#x5728;&#x4EE3;&#x7801;&#x91CC;&#x5B9A;&#x4E49;&#x539F;&#x59CB;json&#x6587;&#x672C;&#x6570;&#x636E;.</p>
<pre class="language-"><code class="lang-rust"><span class="token keyword">use</span> <span class="token namespace">serde_json<span class="token punctuation">::</span></span>json<span class="token punctuation">;</span>

<span class="token keyword">fn</span> <span class="token function-definition function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// The type of `john` is `serde_json::Value`</span>
    <span class="token keyword">let</span> john <span class="token operator">=</span> <span class="token macro property">json!</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token string">&quot;name&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;John Doe&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;age&quot;</span><span class="token punctuation">:</span> <span class="token number">43</span><span class="token punctuation">,</span>
        <span class="token string">&quot;phones&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
            <span class="token string">&quot;+44 1234567&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;+44 2345678&quot;</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">&quot;first phone number: {}&quot;</span><span class="token punctuation">,</span> john<span class="token punctuation">[</span><span class="token string">&quot;phones&quot;</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Convert to a string of JSON and print it out</span>
    <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">&quot;{}&quot;</span><span class="token punctuation">,</span> john<span class="token punctuation">.</span><span class="token function">to_string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>json&#x5B8F;&#x8FD8;&#x63D0;&#x4F9B;&#x66F4;&#x9AD8;&#x7EA7;&#x7684;&#x529F;&#x80FD;: &#x5F15;&#x7528;&#x53D8;&#x91CF;</p>
<pre class="language-"><code class="lang-rust"><span class="token keyword">let</span> full_name <span class="token operator">=</span> <span class="token string">&quot;John Doe&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> age_last_year <span class="token operator">=</span> <span class="token number">42</span><span class="token punctuation">;</span>

<span class="token comment">// The type of `john` is `serde_json::Value`</span>
<span class="token keyword">let</span> john <span class="token operator">=</span> <span class="token macro property">json!</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token string">&quot;name&quot;</span><span class="token punctuation">:</span> full_name<span class="token punctuation">,</span>
    <span class="token string">&quot;age&quot;</span><span class="token punctuation">:</span> age_last_year <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token comment">//&#x8FD9;&#x91CC;&#x53EF;&#x4EE5;&#x5F15;&#x7528;&#x4E0A;&#x9762;&#x7684;&#x53D8;&#x91CF;</span>
    <span class="token string">&quot;phones&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
        <span class="token macro property">format!</span><span class="token punctuation">(</span><span class="token string">&quot;+44 {}&quot;</span><span class="token punctuation">,</span> <span class="token function">random_phone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//&#x4E5F;&#x53EF;&#x4EE5;&#x8C03;&#x7528;&#x5176;&#x4ED6;&#x5B8F;&#x548C;&#x51FD;&#x6570;</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<blockquote>
<p>One neat thing about the <code>json!</code> macro is that variables and expressions can be interpolated directly into the JSON value as you are building it. Serde will check at compile time that the value you are interpolating is able to be represented as JSON.</p>
</blockquote>
<h3 id="&#x5E8F;&#x5217;&#x5316;&#x7ED3;&#x6784;&#x4F53;"><a name="&#x5E8F;&#x5217;&#x5316;&#x7ED3;&#x6784;&#x4F53;" class="anchor-navigation-ex-anchor" href="#&#x5E8F;&#x5217;&#x5316;&#x7ED3;&#x6784;&#x4F53;"><i class="fa fa-link" aria-hidden="true"></i></a>1.2.6. &#x5E8F;&#x5217;&#x5316;&#x7ED3;&#x6784;&#x4F53;</h3>
<ul>
<li><a href="https://docs.serde.rs/serde_json/ser/fn.to_string.html" target="_blank"><code>serde_json::to_string</code></a> &#x5E8F;&#x5217;&#x5316;&#x5230;string</li>
<li><a href="https://docs.serde.rs/serde_json/ser/fn.to_vec.html" target="_blank"><code>serde_json::to_vec</code></a>&#x5E8F;&#x5217;&#x5316;&#x5230;<code>Vec<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>u8</span><span class="token punctuation">&gt;</span></span></code></li>
<li><a href="https://docs.serde.rs/serde_json/ser/fn.to_writer.html" target="_blank"><code>serde_json::to_writer</code></a>&#x5E8F;&#x5217;&#x5316;&#x5230;&#x6587;&#x4EF6;&#x6216;&#x8005;TCP stream</li>
</ul>
<blockquote>
<p>Any type that implements Serde&apos;s <code>Serialize</code> trait can be serialized this way. This includes built-in Rust standard library types like <code>Vec<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>T</span><span class="token punctuation">&gt;</span></span></code> and <code>HashMap<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>K,</span> <span class="token attr-name">V</span><span class="token punctuation">&gt;</span></span></code>, as well as any structs or enums annotated with <code>#[derive(Serialize)]</code>.</p>
</blockquote>
<h3 id="&#x6027;&#x80FD;"><a name="&#x6027;&#x80FD;" class="anchor-navigation-ex-anchor" href="#&#x6027;&#x80FD;"><i class="fa fa-link" aria-hidden="true"></i></a>1.2.7. &#x6027;&#x80FD;</h3>
<p>&#x6027;&#x80FD;&#x5F88;&#x597D;. &#x6BD4;&#x6700;&#x5FEB;&#x7684;C&#x5B9E;&#x73B0;&#x8FD8;&#x5FEB;</p>
<blockquote>
<p>It is fast. You should expect in the ballpark of 500 to 1000 megabytes per second deserialization and 600 to 900 megabytes per second serialization, depending on the characteristics of your data. This is competitive with the fastest C and C++ JSON libraries or even 30% faster for many use cases. Benchmarks live in the <a href="https://github.com/serde-rs/json-benchmark" target="_blank">serde-rs/json-benchmark</a> repo.</p>
</blockquote>
<h3 id="&#x4F9D;&#x8D56;"><a name="&#x4F9D;&#x8D56;" class="anchor-navigation-ex-anchor" href="#&#x4F9D;&#x8D56;"><i class="fa fa-link" aria-hidden="true"></i></a>1.2.8. &#x4F9D;&#x8D56;</h3>
<p>&#x53EA;&#x4F9D;&#x8D56;&#x5185;&#x5B58;allocator. &#x53EF;&#x4EE5;&#x7981;&#x6B62;&#x5176;&#x4ED6;default&#x7684;feature, &#x53EA;&#x4FDD;&#x7559;alloc</p>
<blockquote>
<p>Disable the default &quot;std&quot; feature and enable the &quot;alloc&quot; feature:</p>
<pre class="language-"><code class="lang-toml"><span class="token punctuation">[</span><span class="token table class-name">dependencies</span><span class="token punctuation">]</span>
<span class="token key property">serde_json</span> <span class="token punctuation">=</span> <span class="token punctuation">{</span> <span class="token key property">version</span> <span class="token punctuation">=</span> <span class="token string">&quot;1.0&quot;</span><span class="token punctuation">,</span> <span class="token key property">default-features</span> <span class="token punctuation">=</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token key property">features</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span><span class="token string">&quot;alloc&quot;</span><span class="token punctuation">]</span> <span class="token punctuation">}</span>
</code></pre>
</blockquote>
<h2 id="&#x7406;&#x8BBA;_1"><a name="&#x7406;&#x8BBA;_1" class="anchor-navigation-ex-anchor" href="#&#x7406;&#x8BBA;_1"><i class="fa fa-link" aria-hidden="true"></i></a>1.3. &#x7406;&#x8BBA;</h2>
<p>&#x4E0D;&#x540C;&#x4E8E;&#x5176;&#x4ED6;&#x4F7F;&#x7528;&#x53D1;&#x5C04;&#x6765;&#x5B9E;&#x73B0;&#x5E8F;&#x5217;&#x5316;&#x7684;&#x8BED;&#x8A00;, serde&#x7528;&#x7684;&#x662F;rust&#x7684;trait.
&#x5B9E;&#x73B0;&#x4E86;Serde&apos;s <code>Serialize</code> and <code>Deserialize</code>&#x7684;struct&#x90FD;&#x53EF;&#x4EE5;&#x88AB;&#x5E8F;&#x5217;&#x5316;/&#x53CD;&#x5E8F;&#x5217;&#x5316;.</p>
<h3 id="29&#x79CD;&#x7C7B;&#x578B;"><a name="29&#x79CD;&#x7C7B;&#x578B;" class="anchor-navigation-ex-anchor" href="#29&#x79CD;&#x7C7B;&#x578B;"><i class="fa fa-link" aria-hidden="true"></i></a>1.3.1. 29&#x79CD;&#x7C7B;&#x578B;</h3>
<p>serde&#x5F52;&#x7EB3;&#x4E86;29&#x79CD;&#x57FA;&#x7840;&#x7C7B;&#x578B;: &#x6CE8;&#x610F;&#x6CA1;&#x6709;&#x6307;&#x9488;! &#x8FD9;&#x70B9;&#x548C;tinygo&#x4E0D;&#x4E00;&#x6837;, tinygo&#x7528;&#x4E86;&#x53CD;&#x5C04;, &#x800C;&#x53CD;&#x5C04;&#x662F;&#x652F;&#x6301;&#x6307;&#x9488;&#x7684;.</p>
<ul>
<li><strong>14 primitive types</strong><ul>
<li>bool</li>
<li>i8, i16, i32, i64, i128</li>
<li>u8, u16, u32, u64, u128</li>
<li>f32, f64</li>
<li>char</li>
</ul>
</li>
<li><strong>string</strong><ul>
<li>UTF-8 bytes with a length and no null terminator. May contain 0-bytes.</li>
<li>When serializing, all strings are handled equally. When deserializing, there are three flavors of strings: transient, owned, and borrowed. This distinction is explained in <a href="https://serde.rs/lifetimes.html" target="_blank">Understanding deserializer lifetimes</a> and is a key way that Serde enabled efficient zero-copy deserialization.</li>
</ul>
</li>
<li><strong>byte array</strong> - [u8]<ul>
<li>Similar to strings, during deserialization byte arrays can be transient, owned, or borrowed.</li>
</ul>
</li>
<li><strong>option</strong><ul>
<li>Either none or some value.</li>
</ul>
</li>
<li><strong>unit</strong><ul>
<li>The type of <code>()</code> in Rust. It represents an anonymous value containing no data.</li>
</ul>
</li>
<li><strong>unit_struct</strong><ul>
<li>For example <code>struct Unit</code> or <code>PhantomData<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>T</span><span class="token punctuation">&gt;</span></span></code>. It represents a named value containing no data.</li>
</ul>
</li>
<li><strong>unit_variant</strong><ul>
<li>For example the <code>E::A</code> and <code>E::B</code> in <code>enum E { A, B }</code>.</li>
</ul>
</li>
<li><strong>newtype_struct</strong><ul>
<li>For example <code>struct Millimeters(u8)</code>.</li>
</ul>
</li>
<li><strong>newtype_variant</strong><ul>
<li>For example the <code>E::N</code> in <code>enum E { N(u8) }</code>.</li>
</ul>
</li>
<li><strong>seq</strong><ul>
<li>A variably sized heterogeneous sequence of values, for example <code>Vec<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>T</span><span class="token punctuation">&gt;</span></span></code> or <code>HashSet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>T</span><span class="token punctuation">&gt;</span></span></code>. When serializing, the length may or may not be known before iterating through all the data. When deserializing, the length is determined by looking at the serialized data. Note that a homogeneous Rust collection like <code>vec![Value::Bool(true), Value::Char(&apos;c&apos;)]</code> may serialize as a heterogeneous Serde seq, in this case containing a Serde bool followed by a Serde char.</li>
</ul>
</li>
<li><strong>tuple</strong><ul>
<li>A statically sized heterogeneous sequence of values for which the length will be known at deserialization time without looking at the serialized data, for example <code>(u8,)</code> or <code>(String, u64, Vec<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>T</span><span class="token punctuation">&gt;</span></span>)</code> or <code>[u64; 10]</code>.</li>
</ul>
</li>
<li><strong>tuple_struct</strong><ul>
<li>A named tuple, for example <code>struct Rgb(u8, u8, u8)</code>.</li>
</ul>
</li>
<li><strong>tuple_variant</strong><ul>
<li>For example the <code>E::T</code> in <code>enum E { T(u8, u8) }</code>.</li>
</ul>
</li>
<li><strong>map</strong><ul>
<li>A variably sized heterogeneous key-value pairing, for example <code>BTreeMap<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>K,</span> <span class="token attr-name">V</span><span class="token punctuation">&gt;</span></span></code>. When serializing, the length may or may not be known before iterating through all the entries. When deserializing, the length is determined by looking at the serialized data.</li>
</ul>
</li>
<li><strong>struct</strong><ul>
<li>A statically sized heterogeneous key-value pairing in which the keys are compile-time constant strings and will be known at deserialization time without looking at the serialized data, for example <code>struct S { r: u8, g: u8, b: u8 }</code>.</li>
</ul>
</li>
<li><strong>struct_variant</strong><ul>
<li>For example the <code>E::S</code> in <code>enum E { S { r: u8, g: u8, b: u8 } }</code>.</li>
</ul>
</li>
</ul>
<p>&#x5927;&#x591A;&#x6570;&#x7684;rust&#x7C7B;&#x578B;, &#x90FD;&#x80FD;&#x6620;&#x5C04;&#x5230;serde&#x7C7B;&#x578B;:</p>
<ul>
<li>rust bool --&gt; serde bool</li>
<li>rust Rgb(u8,u8,u8) --&gt; serde tuple struct
...</li>
</ul>
<h3 id="derive"><a name="derive" class="anchor-navigation-ex-anchor" href="#derive"><i class="fa fa-link" aria-hidden="true"></i></a>1.3.2. derive</h3>
<p>&#x7528;<code>#[derive(Serialize, Deserialize)]</code>&#x7ED9;&#x6BCF;&#x4E2A;&#x7ED3;&#x6784;&#x4F53;&#x751F;&#x6210;&#x4E00;&#x5BF9;<code>Serialize</code> and <code>Deserialize</code> traits.</p>
<h3 id="&#x5C5E;&#x6027;"><a name="&#x5C5E;&#x6027;" class="anchor-navigation-ex-anchor" href="#&#x5C5E;&#x6027;"><i class="fa fa-link" aria-hidden="true"></i></a>1.3.3. &#x5C5E;&#x6027;</h3>
<p>&#x6709;&#x5F88;&#x591A;&#x5B9E;&#x7528;&#x7684;&#x5C5E;&#x6027;, &#x6BD4;&#x5982;:</p>
<pre class="language-"><code class="lang-rust"><span class="token attribute attr-name">#[serde(rename = <span class="token string">&quot;name&quot;</span>)]</span>
<span class="token attribute attr-name">#[serde(rename_all = <span class="token string">&quot;...&quot;</span>)]</span> <span class="token comment">//&#x6BD4;&#x5982;UPPERCASE, camelCase...&#x7B49;&#x7B49;</span>
<span class="token attribute attr-name">#[serde(default)]</span>
<span class="token attribute attr-name">#[serde(alias = <span class="token string">&quot;name&quot;</span>)]</span>
<span class="token attribute attr-name">#[serde(flatten)]</span>
<span class="token punctuation">...</span>&#x5F88;&#x591A;<span class="token punctuation">...</span>
</code></pre>
<h3 id="&#x81EA;&#x5DF1;&#x5B9E;&#x73B0;&#x5E8F;&#x5217;&#x5316;"><a name="&#x81EA;&#x5DF1;&#x5B9E;&#x73B0;&#x5E8F;&#x5217;&#x5316;" class="anchor-navigation-ex-anchor" href="#&#x81EA;&#x5DF1;&#x5B9E;&#x73B0;&#x5E8F;&#x5217;&#x5316;"><i class="fa fa-link" aria-hidden="true"></i></a>1.3.4. &#x81EA;&#x5DF1;&#x5B9E;&#x73B0;&#x5E8F;&#x5217;&#x5316;</h3>
<p>&#x4E00;&#x822C;&#x7528;<code>#[derive(Serialize, Deserialize)]</code>&#x914D;&#x5408;<a href="https://serde.rs/attributes.html" target="_blank">attributes</a>&#x5C31;&#x591F;&#x4E86;. &#x4F46;&#x7279;&#x6B8A;case&#x5982;&#x679C;&#x60F3;&#x81EA;&#x5B9A;&#x4E49;&#x5E8F;&#x5217;&#x5316;, &#x53EF;&#x4EE5;&#x81EA;&#x5DF1;&#x5B9E;&#x73B0;<a href="https://docs.serde.rs/serde/ser/trait.Serialize.html" target="_blank"><code>Serialize</code></a> and <a href="https://docs.serde.rs/serde/de/trait.Deserialize.html" target="_blank"><code>Deserialize</code></a>&#x8FD9;&#x4E24;&#x4E2A;trait</p>
<p>&#x6BCF;&#x4E2A;trait&#x90FD;&#x53EA;&#x6709;&#x4E00;&#x4E2A;&#x65B9;&#x6CD5;</p>
<pre class="language-"><code class="lang-rust"><span class="token keyword">pub</span> <span class="token keyword">trait</span> <span class="token type-definition class-name">Serialize</span> <span class="token punctuation">{</span>
    <span class="token keyword">fn</span> <span class="token function-definition function">serialize</span><span class="token operator">&lt;</span><span class="token class-name">S</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token keyword">self</span><span class="token punctuation">,</span> serializer<span class="token punctuation">:</span> <span class="token class-name">S</span><span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> <span class="token class-name">Result</span><span class="token operator">&lt;</span><span class="token class-name">S</span><span class="token punctuation">::</span><span class="token class-name">Ok</span><span class="token punctuation">,</span> <span class="token class-name">S</span><span class="token punctuation">::</span><span class="token class-name">Error</span><span class="token operator">&gt;</span>
    <span class="token keyword">where</span>
        <span class="token class-name">S</span><span class="token punctuation">:</span> <span class="token class-name">Serializer</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">pub</span> <span class="token keyword">trait</span> <span class="token type-definition class-name">Deserialize</span><span class="token operator">&lt;</span><span class="token lifetime-annotation symbol">&apos;de</span><span class="token operator">&gt;</span><span class="token punctuation">:</span> <span class="token class-name">Sized</span> <span class="token punctuation">{</span>
    <span class="token keyword">fn</span> <span class="token function-definition function">deserialize</span><span class="token operator">&lt;</span><span class="token class-name">D</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>deserializer<span class="token punctuation">:</span> <span class="token class-name">D</span><span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> <span class="token class-name">Result</span><span class="token operator">&lt;</span><span class="token keyword">Self</span><span class="token punctuation">,</span> <span class="token class-name">D</span><span class="token punctuation">::</span><span class="token class-name">Error</span><span class="token operator">&gt;</span>
    <span class="token keyword">where</span>
        <span class="token class-name">D</span><span class="token punctuation">:</span> <span class="token class-name">Deserializer</span><span class="token operator">&lt;</span><span class="token lifetime-annotation symbol">&apos;de</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<h4 id="&#x5E8F;&#x5217;&#x5316;"><a name="&#x5E8F;&#x5217;&#x5316;" class="anchor-navigation-ex-anchor" href="#&#x5E8F;&#x5217;&#x5316;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x5E8F;&#x5217;&#x5316;</h4>
<pre class="language-"><code class="lang-rust"><span class="token keyword">pub</span> <span class="token keyword">trait</span> <span class="token type-definition class-name">Serialize</span> <span class="token punctuation">{</span>
    <span class="token keyword">fn</span> <span class="token function-definition function">serialize</span><span class="token operator">&lt;</span><span class="token class-name">S</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token keyword">self</span><span class="token punctuation">,</span> serializer<span class="token punctuation">:</span> <span class="token class-name">S</span><span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> <span class="token class-name">Result</span><span class="token operator">&lt;</span><span class="token class-name">S</span><span class="token punctuation">::</span><span class="token class-name">Ok</span><span class="token punctuation">,</span> <span class="token class-name">S</span><span class="token punctuation">::</span><span class="token class-name">Error</span><span class="token operator">&gt;</span>
    <span class="token keyword">where</span>
        <span class="token class-name">S</span><span class="token punctuation">:</span> <span class="token class-name">Serializer</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>This method&apos;s job is to take your type (<code>&amp;self</code>) and map it into the <a href="https://serde.rs/data-model.html" target="_blank">Serde data model</a> by invoking exactly one of the methods on the given <a href="https://docs.serde.rs/serde/ser/trait.Serializer.html" target="_blank"><code>Serializer</code></a>.</p>
<p>Serializer&#x4E5F;&#x662F;&#x4E2A;trait, &#x8FD9;&#x4E2A;trait&#x662F;&#x4E0D;&#x540C;&#x7C7B;&#x578B;&#x7684;format(&#x6BD4;&#x5982;json, Bincode&#x7B49;). &#x5E76;&#x4E0D;&#x662F;&#x6240;&#x6709;&#x7684;&#x5E8F;&#x5217;&#x5316;&#x8F93;&#x51FA;&#x90FD;&#x662F;text&#x6216;&#x8005;bin&#x7684;, &#x6BD4;&#x5982;<code>serde_json::value::Serializer</code>(&#x6CE8;&#x610F;, &#x4E0D;&#x662F;<code>serde_json::serializer</code>)&#x5C31;&#x5E8F;&#x5217;&#x5316;&#x5230;&#x5185;&#x5B58;.</p>
<p>serde&#x628A;&#x7ED3;&#x6784;&#x4F53;&#x7684;&#x5230;29&#x79CD;&#x5185;&#x90E8;&#x6570;&#x636E;&#x7C7B;&#x578B;&#x62BD;&#x8C61;&#x6210;<code>trait Serialize</code>, &#x800C;&#x628A;29&#x79CD;&#x6570;&#x636E;&#x7C7B;&#x578B;&#x5230;&#x8F93;&#x51FA;format, &#x62BD;&#x8C61;&#x6210;<code>trait Serializer</code>, &#x8BA9;&#x4E8C;&#x8005;&#x89E3;&#x8026;: &#x4ECE;&#x7ED3;&#x6784;&#x4F53;&#x5230;29&#x79CD;&#x6570;&#x636E;&#x7C7B;&#x578B;OK, &#x5C31;&#x548C;&#x6700;&#x540E;&#x7684;output&#x683C;&#x5F0F;&#x65E0;&#x5173;. &#x8FD9;&#x662F;&#x4E2A;&#x5F88;&#x5DE7;&#x5999;&#x7684;&#x8BBE;&#x8BA1;.</p>
<p><a href="https://docs.rs/serde/latest/serde/trait.Serialize.html" target="_blank"><code>Serialize</code></a> ==&gt; 29&#x79CD;&#x5185;&#x90E8;&#x6570;&#x636E;&#x7C7B;&#x578B; ==&gt; <a href="https://docs.serde.rs/serde/ser/trait.Serializer.html" target="_blank"><code>Serializer</code></a></p>
<p>&#x6BD4;&#x5982;&#x5E8F;&#x5217;&#x5316;&#x4E00;&#x4E2A;Map</p>
<pre class="language-"><code class="lang-rust"><span class="token keyword">impl</span><span class="token operator">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span> <span class="token class-name">V</span><span class="token operator">&gt;</span> <span class="token class-name">Serialize</span> <span class="token keyword">for</span> <span class="token class-name">MyMap</span><span class="token operator">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span> <span class="token class-name">V</span><span class="token operator">&gt;</span>
<span class="token keyword">where</span>
    <span class="token class-name">K</span><span class="token punctuation">:</span> <span class="token class-name">Serialize</span><span class="token punctuation">,</span>
    <span class="token class-name">V</span><span class="token punctuation">:</span> <span class="token class-name">Serialize</span><span class="token punctuation">,</span>
<span class="token punctuation">{</span>
    <span class="token keyword">fn</span> <span class="token function-definition function">serialize</span><span class="token operator">&lt;</span><span class="token class-name">S</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token keyword">self</span><span class="token punctuation">,</span> serializer<span class="token punctuation">:</span> <span class="token class-name">S</span><span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> <span class="token class-name">Result</span><span class="token operator">&lt;</span><span class="token class-name">S</span><span class="token punctuation">::</span><span class="token class-name">Ok</span><span class="token punctuation">,</span> <span class="token class-name">S</span><span class="token punctuation">::</span><span class="token class-name">Error</span><span class="token operator">&gt;</span>
    <span class="token keyword">where</span>
        <span class="token class-name">S</span><span class="token punctuation">:</span> <span class="token class-name">Serializer</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">let</span> <span class="token keyword">mut</span> map <span class="token operator">=</span> serializer<span class="token punctuation">.</span><span class="token function">serialize_map</span><span class="token punctuation">(</span><span class="token class-name">Some</span><span class="token punctuation">(</span><span class="token keyword">self</span><span class="token punctuation">.</span><span class="token function">len</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span>k<span class="token punctuation">,</span> v<span class="token punctuation">)</span> <span class="token keyword">in</span> <span class="token keyword">self</span> <span class="token punctuation">{</span> <span class="token comment">//&#x56E0;&#x4E3A;&#x77E5;&#x9053;self&#x5C31;&#x662F;&#x4E2A;map, &#x6240;&#x4EE5;&#x80FD;&#x7528;for in</span>
            map<span class="token punctuation">.</span><span class="token function">serialize_entry</span><span class="token punctuation">(</span>k<span class="token punctuation">,</span> v<span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        map<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>&#x7ED3;&#x6784;&#x4F53;&#x6709;4&#x7C7B;: &#x666E;&#x901A;&#x7ED3;&#x6784;&#x4F53;, tuple&#x7ED3;&#x6784;&#x4F53;, newtype, unit&#x7ED3;&#x6784;&#x4F53;</p>
<pre class="language-"><code class="lang-rust"><span class="token comment">// An ordinary struct. Use three-step process:</span>
<span class="token comment">//   1. serialize_struct</span>
<span class="token comment">//   2. serialize_field</span>
<span class="token comment">//   3. end</span>
<span class="token keyword">struct</span> <span class="token type-definition class-name">Color</span> <span class="token punctuation">{</span>
    r<span class="token punctuation">:</span> <span class="token keyword">u8</span><span class="token punctuation">,</span>
    g<span class="token punctuation">:</span> <span class="token keyword">u8</span><span class="token punctuation">,</span>
    b<span class="token punctuation">:</span> <span class="token keyword">u8</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token comment">// A tuple struct. Use three-step process:</span>
<span class="token comment">//   1. serialize_tuple_struct</span>
<span class="token comment">//   2. serialize_field</span>
<span class="token comment">//   3. end</span>
<span class="token keyword">struct</span> <span class="token type-definition class-name">Point2D</span><span class="token punctuation">(</span><span class="token keyword">f64</span><span class="token punctuation">,</span> <span class="token keyword">f64</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// A newtype struct. Use serialize_newtype_struct.</span>
<span class="token keyword">struct</span> <span class="token type-definition class-name">Inches</span><span class="token punctuation">(</span><span class="token keyword">u64</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// A unit struct. Use serialize_unit_struct.</span>
<span class="token keyword">struct</span> <span class="token type-definition class-name">Instance</span><span class="token punctuation">;</span>
</code></pre>
<h4 id="&#x53CD;&#x5E8F;&#x5217;&#x5316;"><a name="&#x53CD;&#x5E8F;&#x5217;&#x5316;" class="anchor-navigation-ex-anchor" href="#&#x53CD;&#x5E8F;&#x5217;&#x5316;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x53CD;&#x5E8F;&#x5217;&#x5316;</h4>
<pre class="language-"><code class="lang-rust"><span class="token keyword">pub</span> <span class="token keyword">trait</span> <span class="token type-definition class-name">Deserialize</span><span class="token operator">&lt;</span><span class="token lifetime-annotation symbol">&apos;de</span><span class="token operator">&gt;</span><span class="token punctuation">:</span> <span class="token class-name">Sized</span> <span class="token punctuation">{</span>
    <span class="token keyword">fn</span> <span class="token function-definition function">deserialize</span><span class="token operator">&lt;</span><span class="token class-name">D</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>deserializer<span class="token punctuation">:</span> <span class="token class-name">D</span><span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> <span class="token class-name">Result</span><span class="token operator">&lt;</span><span class="token keyword">Self</span><span class="token punctuation">,</span> <span class="token class-name">D</span><span class="token punctuation">::</span><span class="token class-name">Error</span><span class="token operator">&gt;</span>
    <span class="token keyword">where</span>
        <span class="token class-name">D</span><span class="token punctuation">:</span> <span class="token class-name">Deserializer</span><span class="token operator">&lt;</span><span class="token lifetime-annotation symbol">&apos;de</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<blockquote>
<p>This method&apos;s job is to map the type into the <a href="https://serde.rs/data-model.html" target="_blank">Serde data model</a> by providing the <a href="https://docs.serde.rs/serde/trait.Deserializer.html" target="_blank"><code>Deserializer</code></a> with a <a href="https://docs.serde.rs/serde/de/trait.Visitor.html" target="_blank"><code>Visitor</code></a> that can be driven by the <code>Deserializer</code> to construct an instance of your type.</p>
</blockquote>
<p><code>Deserializer</code>&#x9700;&#x8981;deserialize&#x4F20;&#x5165;visitor trait.</p>
<p>&#x53CD;&#x5E8F;&#x5217;&#x5316;&#x6BD4;&#x5E8F;&#x5217;&#x5316;&#x66F4;&#x590D;&#x6742;&#x70B9;. &#x5927;&#x4F53;&#x4E0A;&#x6839;&#x636E;&#x5E8F;&#x5217;&#x5316;&#x7684;format&#x4E0D;&#x540C;, &#x53EF;&#x4EE5;&#x5206;&#x4E3A;:</p>
<ul>
<li>&#x81EA;&#x89E3;&#x91CA;&#x7684;&#x6587;&#x672C;. &#x6BD4;&#x5982;json, &#x5E8F;&#x5217;&#x5316;&#x540E;&#x7684;&#x6587;&#x672C;&#x5C31;&#x80FD;&#x770B;&#x51FA;&#x6765;&#x5BF9;&#x5E94;&#x7684;&#x7ED3;&#x6784;&#x4F53;.
&#x8FD9;&#x4E2A;&#x60C5;&#x51B5;&#x53EF;&#x4EE5;&#x7528;&#x901A;&#x7528;&#x7684;&#x53CD;&#x5E8F;&#x5217;&#x5316;<code>apideserialize_any</code>, &#x4EA7;&#x751F;&#x7684;&#x5BF9;&#x8C61;&#x662F;<code>serde_json::Value</code></li>
<li>&#x975E;&#x81EA;&#x89E3;&#x91CA;&#x7684;bincode. &#x6BD4;&#x5982;&#x4E8C;&#x8FDB;&#x5236;&#x7684;&#x5E8F;&#x5217;&#x5316;&#x65B9;&#x5F0F;, &#x53EA;&#x770B;output&#x662F;&#x4E0D;&#x53EF;&#x80FD;&#x77E5;&#x9053;&#x539F;&#x59CB;&#x7ED3;&#x6784;&#x4F53;&#x7684;layout&#x7684;.
&#x8FD9;&#x4E2A;&#x60C5;&#x51B5;&#x9700;&#x8981;&#x7F16;&#x7A0B;&#x65F6;&#x660E;&#x786E;&#x76EE;&#x6807;&#x7ED3;&#x6784;&#x4F53;&#x7684;&#x7C7B;&#x578B;, &#x4EA7;&#x751F;&#x7684;&#x5BF9;&#x8C61;&#x662F;&#x975E;<code>serde_json::Value</code></li>
</ul>
<h4 id="&#x53CD;&#x5E8F;&#x5217;&#x5316;&#x7684;zero-copy&#x548C;&#x751F;&#x547D;&#x5468;&#x671F;&#x6807;&#x8BB0;"><a name="&#x53CD;&#x5E8F;&#x5217;&#x5316;&#x7684;zero-copy&#x548C;&#x751F;&#x547D;&#x5468;&#x671F;&#x6807;&#x8BB0;" class="anchor-navigation-ex-anchor" href="#&#x53CD;&#x5E8F;&#x5217;&#x5316;&#x7684;zero-copy&#x548C;&#x751F;&#x547D;&#x5468;&#x671F;&#x6807;&#x8BB0;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x53CD;&#x5E8F;&#x5217;&#x5316;&#x7684;zero copy&#x548C;&#x751F;&#x547D;&#x5468;&#x671F;&#x6807;&#x8BB0;</h4>
<p>rust&#x80FD;&#x505A;&#x5230;zero copy&#x662F;&#x56E0;&#x4E3A;&#x751F;&#x6210;&#x7684;&#x76EE;&#x6807;&#x7ED3;&#x6784;&#x4F53;, &#x80FD;&#x5F15;&#x7528;&#x539F;&#x59CB;buffer&#x91CC;&#x9762;&#x7684;&#x6BD4;&#x5982;string&#x7B49;&#x7C7B;&#x578B;, &#x4E0D;&#x7528;&#x62F7;&#x8D1D;. &#x56E0;&#x4E3A;&#x6709;&#x751F;&#x547D;&#x5468;&#x671F;&#x6807;&#x8BB0;.
&#x6BD4;&#x5982;:</p>
<pre class="language-"><code class="lang-rust"><span class="token attribute attr-name">#[derive(Deserialize)]</span>
<span class="token keyword">struct</span> <span class="token type-definition class-name">User</span><span class="token operator">&lt;</span><span class="token lifetime-annotation symbol">&apos;a</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    id<span class="token punctuation">:</span> <span class="token keyword">u32</span><span class="token punctuation">,</span>
    name<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token lifetime-annotation symbol">&apos;a</span> <span class="token keyword">str</span><span class="token punctuation">,</span>
    screen_name<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token lifetime-annotation symbol">&apos;a</span> <span class="token keyword">str</span><span class="token punctuation">,</span>
    location<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token lifetime-annotation symbol">&apos;a</span> <span class="token keyword">str</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre>
<blockquote>
<p>Zero-copy deserialization means deserializing into a data structure, like the <code>User</code> struct above, that borrows string or byte array data from the string or byte array holding the input. This avoids allocating memory to store a string for each individual field and then copying string data out of the input over to the newly allocated field. Rust guarantees that the input data outlives the period during which the output data structure is in scope, meaning it is impossible to have dangling pointer errors as a result of losing the input data while the output data structure still refers to it.</p>
</blockquote>
<p>&#x4E0A;&#x9762;&#x7684;<code>User</code>&#x7ED3;&#x6784;&#x4F53;&#x6709;&#x591A;&#x4E2A;&#x5BF9;str&#x7684;&#x5F15;&#x7528;, &#x8FD9;&#x4E9B;&#x5F15;&#x7528;&#x76F4;&#x63A5;&#x5F15;&#x7528;&#x5230;&#x539F;&#x59CB;buffer, &#x6CA1;&#x6709;&#x62F7;&#x8D1D;. rust&#x4FDD;&#x8BC1;&#x539F;&#x59CB;buffer&#x4F1A;&#x4E00;&#x76F4;&#x6709;&#x6548;&#x76F4;&#x5230;&#x8FD9;&#x4E2A;&#x7ED3;&#x6784;&#x4F53;&#x7684;&#x751F;&#x547D;&#x5468;&#x671F;&#x7ED3;&#x675F;.
&#x6CE8;: <code>User</code>&#x7ED3;&#x6784;&#x4F53;&#x672C;&#x8EAB;&#x4E0D;&#x7528;&#x751F;&#x547D;&#x5468;&#x671F;&#x6807;&#x8BB0;, &#x5B83;&#x7684;&#x6807;&#x8BB0;<code>&apos;a</code>&#x662F;&#x7ED9;&#x91CC;&#x9762;&#x7684;&#x6210;&#x5458;&#x7528;&#x7684;, &#x8868;&#x793A;&#x6240;&#x6709;&#x6210;&#x5458;&#x90FD;&#x6709;&#x540C;&#x6837;&#x7684;&#x751F;&#x547D;&#x5468;&#x671F;.</p>
<p>&#x53CD;&#x5E8F;&#x5217;&#x5316;&#x7684;&#x590D;&#x6742;&#x70B9;&#x5728;&#x4E8E;, &#x76EE;&#x6807;&#x7ED3;&#x6784;&#x4F53;&#x8981;&#x5206;&#x914D;&#x5185;&#x5B58;:</p>
<ul>
<li><p><strong><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>&apos;de,</span> <span class="token attr-name">T</span><span class="token punctuation">&gt;</span></span> where T: Deserialize<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>&apos;de</span><span class="token punctuation">&gt;</span></span></code></strong>
&#x5176;&#x5F15;&#x7528;&#x7684;&#x5185;&#x5B58;&#x53EF;&#x80FD;&#x6765;&#x81EA;&#x539F;&#x59CB;input&#x7684;buffer&#x4E2D;, &#x6BD4;&#x5982;<code>serde_json::from_str</code>&#x4E2D;, &#x539F;&#x59CB;str&#x7684;&#x751F;&#x547D;&#x5468;&#x671F;&#x4E5F;&#x662F;caller&#x63D0;&#x4F9B;&#x7684;, &#x5E26;&#x751F;&#x547D;&#x5468;&#x671F;&#x6807;&#x8BB0;&#x7684;, &#x5C31;&#x53EF;&#x4EE5;&#x88AB;&#x6700;&#x7EC8;&#x7684;&#x76EE;&#x6807;&#x7ED3;&#x6784;&#x4F53;&#x5F15;&#x7528;.</p>
<blockquote>
<p>This means &quot;T can be deserialized from <strong>some</strong> lifetime.&quot; The caller gets to decide what lifetime that is. Typically this is used when the caller also provides the data that is being deserialized from, for example in a function like <a href="https://docs.serde.rs/serde_json/fn.from_str.html" target="_blank"><code>serde_json::from_str</code></a>. In that case the input data must also have lifetime <code>&apos;de</code>, for example it could be <code>&amp;&apos;de str</code>.</p>
</blockquote>
</li>
<li><p><strong><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>T</span><span class="token punctuation">&gt;</span></span> where T: DeserializeOwned</code></strong>
&#x539F;&#x59CB;&#x7684;input, &#x4EE5;&#x53CA;&#x5176;&#x4F34;&#x968F;&#x7684;buffer, &#x5728;&#x53CD;&#x5E8F;&#x5217;&#x5316;&#x4E4B;&#x540E;&#x4F1A;&#x88AB;free. &#x6B64;&#x65F6;&#x4E0D;&#x80FD;&#x5F15;&#x7528;. &#x6BD4;&#x5982;io&#x7684;reader</p>
<blockquote>
<p>This means &quot;T can be deserialized from <strong>any</strong> lifetime.&quot; The callee gets to decide what lifetime. Usually this is because the data that is being deserialized from is going to be thrown away before the function returns, so T must not be allowed to borrow from it. For example a function that accepts base64-encoded data as input, decodes it from base64, deserializes a value of type T, then throws away the result of base64 decoding. Another common use of this bound is functions that deserialize from an IO stream, such as <a href="https://docs.serde.rs/serde_json/fn.from_reader.html" target="_blank"><code>serde_json::from_reader</code></a>.</p>
</blockquote>
</li>
</ul>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="rust_coding_brief.html" class="navigation navigation-prev " aria-label="Previous page: Rust 代码积累">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="rust_知识点积累.html" class="navigation navigation-next " aria-label="Next page: Rust 知识点更新">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Rust 序列化原理","level":"1.6.2.1","depth":3,"next":{"title":"Rust 知识点更新","level":"1.6.2.2","depth":3,"path":"notes/rust_知识点积累.md","ref":"notes/rust_知识点积累.md","articles":[]},"previous":{"title":"Rust 代码积累","level":"1.6.2","depth":2,"path":"notes/rust_coding_brief.md","ref":"notes/rust_coding_brief.md","articles":[{"title":"Rust 序列化原理","level":"1.6.2.1","depth":3,"path":"notes/rust_序列化.md","ref":"notes/rust_序列化.md","articles":[]},{"title":"Rust 知识点更新","level":"1.6.2.2","depth":3,"path":"notes/rust_知识点积累.md","ref":"notes/rust_知识点积累.md","articles":[]},{"title":"rust版本的adaptiveservice探索","level":"1.6.2.3","depth":3,"path":"notes/rust_adaptiveservice.md","ref":"notes/rust_adaptiveservice.md","articles":[]},{"title":"Rust 常用设施","level":"1.6.2.4","depth":3,"path":"notes/rust_常用设施.md","ref":"notes/rust_常用设施.md","articles":[]},{"title":"Rust 代码小段","level":"1.6.2.5","depth":3,"path":"notes/rust_代码小段.md","ref":"notes/rust_代码小段.md","articles":[]}]},"dir":"ltr"},"config":{"plugins":["-sharing","-lunr","-search","search-plus","-highlight","prism","prism-themes","expandable-chapters-small","github","disqus","splitter","wide-page","hide-navigation-buttons","anchor-navigation-ex","sequence"],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"prism":{"css":["prism-themes/themes/prism-shades-of-purple.css"]},"disqus":{"useIdentifier":false,"shortName":"bai-yingjie-notes"},"sequence":{"theme":"simple"},"github":{"url":"https://github.com/Bai-Yingjie/Bai-Yingjie.github.io"},"splitter":{},"wide-page":{},"fontsettings":{"theme":"white","family":"sans","size":2},"hide-navigation-buttons":{},"anchor-navigation-ex":{"mode":"float","pageTop":{"level1Icon":"","level2Icon":"","level3Icon":"","showLevelIcon":false},"isRewritePageTitle":true,"showLevel":true,"tocLevel1Icon":"fa fa-hand-o-right","tocLevel2Icon":"fa fa-hand-o-right","tocLevel3Icon":"fa fa-hand-o-right","showGoTop":true,"isShowTocTitleIcon":true,"printLog":false,"multipleH1":true,"associatedWithSummary":true,"float":{"floatIcon":"fa fa-navicon","level1Icon":"","level2Icon":"","level3Icon":"","showLevelIcon":false}},"prism-themes":{},"expandable-chapters-small":{},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false},"search-plus":{}},"theme":"default","author":"Bai Yingjie","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"My Notes","language":"zh-hans","gitbook":"*"},"file":{"path":"notes/rust_序列化.md","mtime":"2022-09-28T09:49:30.179Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2022-09-28T09:50:23.479Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-search-plus/jquery.mark.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search-plus/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-expandable-chapters-small/expandable-chapters-small.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-github/plugin.js"></script>
        
    
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/URI.js/1.16.1/URI.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-disqus/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-splitter/splitter.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>



<!DOCTYPE HTML>
<html lang="zh-hans" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Alpine Linux · My Notes</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        <meta name="author" content="Bai Yingjie">
        
        
    
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search-plus/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-prism/prism.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-code/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-chapter-fold/chapter-fold.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-splitter/splitter.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-wide-page/wide.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-hide-navigation-buttons/index.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-anchor-navigation-ex/style/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-mermaid-gb3/mermaid/mermaid.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-theme-comscore/test.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    


    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="system_进程间通信.html" />
    
    
    <link rel="prev" href="system_原理杂记.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="输入并搜索" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    简介
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.1.1" data-path="recent_topics.html">
            
                <a href="recent_topics.html">
            
                    
                    recent topics
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="as_title_kaiyuan.html">
            
                <a href="as_title_kaiyuan.html">
            
                    
                    开源
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="my_opensource.html">
            
                <a href="my_opensource.html">
            
                    
                    我的开源项目
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="my_upstream.html">
            
                <a href="my_upstream.html">
            
                    
                    我的upstream commit
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="as_title_system.html">
            
                <a href="as_title_system.html">
            
                    
                    系统分析和性能
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="as_title_perf_misc.html">
            
                <a href="as_title_perf_misc.html">
            
                    
                    调试和分析记录系列
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1.1" data-path="profiling_调试和分析记录5.html">
            
                <a href="profiling_调试和分析记录5.html">
            
                    
                    调试和分析记录5
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.2" data-path="profiling_调试和分析记录4.html">
            
                <a href="profiling_调试和分析记录4.html">
            
                    
                    调试和分析记录4
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.3" data-path="profiling_调试和分析记录3.html">
            
                <a href="profiling_调试和分析记录3.html">
            
                    
                    调试和分析记录3
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.4" data-path="profiling_调试和分析记录2.html">
            
                <a href="profiling_调试和分析记录2.html">
            
                    
                    调试和分析记录2
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.5" data-path="profiling_调试和分析记录1.html">
            
                <a href="profiling_调试和分析记录1.html">
            
                    
                    调试和分析记录1
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="调试和分析工具概览.html">
            
                <a href="调试和分析工具概览.html">
            
                    
                    profiling和debugging工具相关
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.2.1" data-path="profiling_Linux内核调试的方式以及工具集锦.html">
            
                <a href="profiling_Linux内核调试的方式以及工具集锦.html">
            
                    
                    Linux内核调试的方式以及工具集锦(网摘)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.2" data-path="profiling_user_space_Ptrace_Utrace_Uprobes.html">
            
                <a href="profiling_user_space_Ptrace_Utrace_Uprobes.html">
            
                    
                    Ptrace, Utrace, Uprobes: Lightweight, Dynamic Tracing of User Apps
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.3" data-path="debugging_gdb备忘录.html">
            
                <a href="debugging_gdb备忘录.html">
            
                    
                    gdb备忘录
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.4" data-path="profiling_perf命令备忘录.html">
            
                <a href="profiling_perf命令备忘录.html">
            
                    
                    perf命令备忘录
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.5" data-path="profiling_perf命令备忘录2.html">
            
                <a href="profiling_perf命令备忘录2.html">
            
                    
                    perf命令备忘录2
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.6" data-path="profiling_perf学习笔记之实战篇.html">
            
                <a href="profiling_perf学习笔记之实战篇.html">
            
                    
                    perf学习笔记之实战篇
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.7" data-path="profiling_perf学习笔记之入门篇.html">
            
                <a href="profiling_perf学习笔记之入门篇.html">
            
                    
                    perf学习笔记之入门篇
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.8" data-path="profiling_用kprobe和perf_记录函数参数.html">
            
                <a href="profiling_用kprobe和perf_记录函数参数.html">
            
                    
                    使用kprobe和perf结合记录函数参数
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.9" data-path="profiling_ftrace和trace-cmd记录.html">
            
                <a href="profiling_ftrace和trace-cmd记录.html">
            
                    
                    ftrace和trace-cmd记录
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.10" data-path="profiling_ftrace使用实例.html">
            
                <a href="profiling_ftrace使用实例.html">
            
                    
                    ftrace使用实例
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.11" data-path="profiling_systemtap实例.html">
            
                <a href="profiling_systemtap实例.html">
            
                    
                    systemtap实例
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.12" data-path="profiling_systemtap基础.html">
            
                <a href="profiling_systemtap基础.html">
            
                    
                    systemtap基础
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.13" data-path="profiling_perf-tools_example.html">
            
                <a href="profiling_perf-tools_example.html">
            
                    
                    perf-tools 系统tracing工具集
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.14" data-path="profiling_Comparing_SystemTap_and_bpftrace.html">
            
                <a href="profiling_Comparing_SystemTap_and_bpftrace.html">
            
                    
                    Comparing SystemTap and bpftrace(网摘)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.15" data-path="system_analysis_bcc和ebpf.html">
            
                <a href="system_analysis_bcc和ebpf.html">
            
                    
                    bcc和ebpf(starting)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.16" data-path="profiling_valgrind体验.html">
            
                <a href="profiling_valgrind体验.html">
            
                    
                    体验valgrind
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="as_title_os_perf.html">
            
                <a href="as_title_os_perf.html">
            
                    
                    profiling和debugging实例
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.3.1" data-path="debugging_gshellos_socket_leak.html">
            
                <a href="debugging_gshellos_socket_leak.html">
            
                    
                    gshell socket leak调查
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3.2" data-path="profiling_调查ftrace显示调用栈全0问题.html">
            
                <a href="profiling_调查ftrace显示调用栈全0问题.html">
            
                    
                    调查ftrace显示调用栈全0问题
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3.3" data-path="profiling_eoe_filter写tap设备失败问题.html">
            
                <a href="profiling_eoe_filter写tap设备失败问题.html">
            
                    
                    eoe_filter写tap设备失败问题
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3.4" data-path="performance_ovs进程调查.html">
            
                <a href="performance_ovs进程调查.html">
            
                    
                    OVS进程调查
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3.5" data-path="performance_ping流程和函数调用解析.html">
            
                <a href="performance_ping流程和函数调用解析.html">
            
                    
                    ping流程和函数调用解析
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3.6" data-path="profiling_VM互相ping场景下的延迟分析.html">
            
                <a href="profiling_VM互相ping场景下的延迟分析.html">
            
                    
                    VM互相ping场景下的延迟分析
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3.7" data-path="debugging_ftrace_谁创建了bond0设备.html">
            
                <a href="debugging_ftrace_谁创建了bond0设备.html">
            
                    
                    谁创建了bond0设备: ftrace kprobe uprobe perf综合使用
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3.8" data-path="profiling_unixbench之filecopy分析.html">
            
                <a href="profiling_unixbench之filecopy分析.html">
            
                    
                    unixbench之file copy分析
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3.9" data-path="profiling_lmbench之lat_tcp分析.html">
            
                <a href="profiling_lmbench之lat_tcp分析.html">
            
                    
                    lmbench之lat_tcp分析
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.4" data-path="as_title_arch_perf.html">
            
                <a href="as_title_arch_perf.html">
            
                    
                    CPU ARCH相关
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.4.1" data-path="performance_CPU_microarchiteture_pmu.html">
            
                <a href="performance_CPU_microarchiteture_pmu.html">
            
                    
                    Top-down Microarchitecture Analysis Method(网摘)
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="as_title_cloud.html">
            
                <a href="as_title_cloud.html">
            
                    
                    Cloud和容器相关
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="cloud_杂记.html">
            
                <a href="cloud_杂记.html">
            
                    
                    云杂记
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="container_当代容器读书笔记.html">
            
                <a href="container_当代容器读书笔记.html">
            
                    
                    当代容器读书笔记
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="as_title_vdevice.html">
            
                <a href="as_title_vdevice.html">
            
                    
                    CPU和device虚拟化
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="as_title_gvisor.html">
            
                <a href="as_title_gvisor.html">
            
                    
                    gvisor
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1.1" data-path="golang_gvisor代码_KVM.html">
            
                <a href="golang_gvisor代码_KVM.html">
            
                    
                    gvisor KVM模式代码
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.1.2" data-path="golang_gvisor调试.html">
            
                <a href="golang_gvisor调试.html">
            
                    
                    gvisor调试
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.1.3" data-path="golang_gvisor_ptrace.html">
            
                <a href="golang_gvisor_ptrace.html">
            
                    
                    gvisor ptrace模式介绍(网摘)
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="rust_vmm_brief.html">
            
                <a href="rust_vmm_brief.html">
            
                    
                    rust VMM(virtual machine monitor)
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.2.1" data-path="rust_vmm_简介.html">
            
                <a href="rust_vmm_简介.html">
            
                    
                    rust-vmm简介
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2.2" data-path="rust_firecracker_代码.html">
            
                <a href="rust_firecracker_代码.html">
            
                    
                    firecracker代码
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2.3" data-path="rust_firecracker_使用.html">
            
                <a href="rust_firecracker_使用.html">
            
                    
                    firecracker使用
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2.4" data-path="rust_cloud-hypervisor_代码.html">
            
                <a href="rust_cloud-hypervisor_代码.html">
            
                    
                    cloud hypervisor代码
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2.5" data-path="rust_cloud-hypervisor_使用.html">
            
                <a href="rust_cloud-hypervisor_使用.html">
            
                    
                    cloud hypervisor使用
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2.6" data-path="rust_cloud-hypervisor_问题与解决.html">
            
                <a href="rust_cloud-hypervisor_问题与解决.html">
            
                    
                    cloud hypervisor问题与解决
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2.7" data-path="rust_virtiofsd_代码.html">
            
                <a href="rust_virtiofsd_代码.html">
            
                    
                    virtiofsd代码阅读
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2.8" data-path="rust_virtio_vhost_libs.html">
            
                <a href="rust_virtio_vhost_libs.html">
            
                    
                    vhost virtio相关的rust库
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5.3" data-path="virtualization_virtio规范阅读笔记.html">
            
                <a href="virtualization_virtio规范阅读笔记.html">
            
                    
                    virtio规范阅读笔记.md
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.4" data-path="qemu_ovs_虚拟化环境.html">
            
                <a href="qemu_ovs_虚拟化环境.html">
            
                    
                    qemu OVS 虚拟化环境准备
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.5" data-path="qemu使用.html">
            
                <a href="qemu使用.html">
            
                    
                    Qemu使用(old)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.6" data-path="qemu_binary_translation.html">
            
                <a href="qemu_binary_translation.html">
            
                    
                    QEMU 指令翻译
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="as_title_networking.html">
            
                <a href="as_title_networking.html">
            
                    
                    计算机网络相关
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="networking_杂记2.html">
            
                <a href="networking_杂记2.html">
            
                    
                    networking杂记2
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="networking_杂记1.html">
            
                <a href="networking_杂记1.html">
            
                    
                    networking杂记1
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3" data-path="networking_优化linux网络栈_接收路径.html">
            
                <a href="networking_优化linux网络栈_接收路径.html">
            
                    
                    优化linux网络栈: 接收路径(网摘)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.4" data-path="networking_优化linux网络栈_发送路径.html">
            
                <a href="networking_优化linux网络栈_发送路径.html">
            
                    
                    优化linux网络栈: 发送路径(网摘)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.5" data-path="networking_Potential_Performance_Bottleneck_in_Linux_TCP.html">
            
                <a href="networking_Potential_Performance_Bottleneck_in_Linux_TCP.html">
            
                    
                    Potential Performance Bottleneck in Linux TCP(网摘)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.6" data-path="networking_xdp入门.html">
            
                <a href="networking_xdp入门.html">
            
                    
                    Get started with XDP(网摘)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.7" data-path="networking_linux收包路径图解.html">
            
                <a href="networking_linux收包路径图解.html">
            
                    
                    linux收包路径图解(网摘)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.8" data-path="vpp_compiling_on_alpine.md">
            
                <span>
            
                    
                    alpine编译vpp
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.9" data-path="as_title_qemu_ovs.html">
            
                <a href="as_title_qemu_ovs.html">
            
                    
                    Qemu OVS和DPDK
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.9.1" data-path="OVS_DPDK_编译运行.html">
            
                <a href="OVS_DPDK_编译运行.html">
            
                    
                    OVS-DPDK编译运行
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.9.2" data-path="OVS_架构和代码.html">
            
                <a href="OVS_架构和代码.html">
            
                    
                    OVS架构和代码
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.9.3" data-path="OVS_DPDK_performance_HXT_ARM_server.html">
            
                <a href="OVS_DPDK_performance_HXT_ARM_server.html">
            
                    
                    OVS-DPDK for ARM server 性能测试环境
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.9.4" data-path="DPDK_Mellanox.html">
            
                <a href="DPDK_Mellanox.html">
            
                    
                    DPDK Mellanox
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.9.5" data-path="OVS_phy-vm-phy.html">
            
                <a href="OVS_phy-vm-phy.html">
            
                    
                    OVS PHY-VM-PHY
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.9.6" data-path="networking_网络虚拟化用例记录.html">
            
                <a href="networking_网络虚拟化用例记录.html">
            
                    
                    网络虚拟化用例记录
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.9.7" data-path="networking_网络虚拟化操作记录.html">
            
                <a href="networking_网络虚拟化操作记录.html">
            
                    
                    网络虚拟化操作记录
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6.10" data-path="as_title_virtnet.html">
            
                <a href="as_title_virtnet.html">
            
                    
                    虚拟化网络
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.10.1" data-path="networking_tc_filter_连接veth和tap.html">
            
                <a href="networking_tc_filter_连接veth和tap.html">
            
                    
                    Connecting a veth device to tap
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.10.2" data-path="networking_multicast_vxlan_flannel.html">
            
                <a href="networking_multicast_vxlan_flannel.html">
            
                    
                    multicast vxlan和flannel
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.10.3" data-path="networking_virtio网络介绍.html">
            
                <a href="networking_virtio网络介绍.html">
            
                    
                    virtio网络介绍(网摘): vhost-net virtio-net vhost-user SRIOV
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.10.4" data-path="networking_virtualization_杂记.html">
            
                <a href="networking_virtualization_杂记.html">
            
                    
                    虚拟化网络杂记
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.10.5" data-path="networking_linux虚拟网络接口.html">
            
                <a href="networking_linux虚拟网络接口.html">
            
                    
                    linux虚拟网络接口(网摘)
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="as_title_arm_server.html">
            
                <a href="as_title_arm_server.html">
            
                    
                    ARM server
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" data-path="arm_server_杂记.html">
            
                <a href="arm_server_杂记.html">
            
                    
                    Arm server 杂记
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.2" data-path="server_知识点.html">
            
                <a href="server_知识点.html">
            
                    
                    server知识点
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="as_title_embedded.html">
            
                <a href="as_title_embedded.html">
            
                    
                    嵌入式系统开发调试
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.1" data-path="embedded_debugging.html">
            
                <a href="embedded_debugging.html">
            
                    
                    嵌入式调试杂记
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2" data-path="uboot_杂记.html">
            
                <a href="uboot_杂记.html">
            
                    
                    uboot杂记
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.3" data-path="buildroot_杂记.html">
            
                <a href="buildroot_杂记.html">
            
                    
                    buildroot杂记
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.4" data-path="toolchain_升级gcc问题解决.html">
            
                <a href="toolchain_升级gcc问题解决.html">
            
                    
                    升级GCC7.3问题解决
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.5" data-path="kernel_异常打印分析实例.html">
            
                <a href="kernel_异常打印分析实例.html">
            
                    
                    kernel bug异常打印分析
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="as_title_linuxdaily.html">
            
                <a href="as_title_linuxdaily.html">
            
                    
                    Linux工程实践
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.9.1" data-path="linux_日常使用.html">
            
                <a href="linux_日常使用.html">
            
                    
                    日常linux使用
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2" data-path="git_日常使用.html">
            
                <a href="git_日常使用.html">
            
                    
                    日常git使用
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.3" data-path="向kernel提交补丁.html">
            
                <a href="向kernel提交补丁.html">
            
                    
                    向kernel提交补丁
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.4" data-path="linux_ssh_relay.html">
            
                <a href="linux_ssh_relay.html">
            
                    
                    ssh relay
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.5" data-path="gitlab_ci.html">
            
                <a href="gitlab_ci.html">
            
                    
                    gitlab CI
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.6" data-path="docker_操作记录.html">
            
                <a href="docker_操作记录.html">
            
                    
                    docker操作记录
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.7" data-path="centos_操作记录.html">
            
                <a href="centos_操作记录.html">
            
                    
                    centos操作记录
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="as_title_golang.html">
            
                <a href="as_title_golang.html">
            
                    
                    Golang
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.1" data-path="as_title_golang1.html">
            
                <a href="as_title_golang1.html">
            
                    
                    入门
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.1.1" data-path="golang_语法基础.html">
            
                <a href="golang_语法基础.html">
            
                    
                    Golang 语法基础
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.1.2" data-path="golang_json性能.html">
            
                <a href="golang_json性能.html">
            
                    
                    Golang json性能比较
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.10.2" data-path="golang_原理.html">
            
                <a href="golang_原理.html">
            
                    
                    Golang 原理相关
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.2.1" data-path="golang_interface原理.html">
            
                <a href="golang_interface原理.html">
            
                    
                    Golang interface原理(网摘)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.2.2" data-path="golang_内存分配.html">
            
                <a href="golang_内存分配.html">
            
                    
                    Golang 内存分配(网摘)
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.10.3" data-path="golang_标准库.html">
            
                <a href="golang_标准库.html">
            
                    
                    Golang 标准库
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.4" data-path="golang_泛型.html">
            
                <a href="golang_泛型.html">
            
                    
                    Golang 泛型
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.5" data-path="golang_我的反射代码.html">
            
                <a href="golang_我的反射代码.html">
            
                    
                    Golang 我的反射代码
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.6" data-path="golang_问答.html">
            
                <a href="golang_问答.html">
            
                    
                    Golang 问答
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.7" data-path="golang_高效go.html">
            
                <a href="golang_高效go.html">
            
                    
                    Golang 高效go
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.8" data-path="golang_进阶.html">
            
                <a href="golang_进阶.html">
            
                    
                    Golang 进阶
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.9" data-path="as_title_golang2.html">
            
                <a href="as_title_golang2.html">
            
                    
                    Golang 杂记
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.9.1" data-path="golang_杂记1.html">
            
                <a href="golang_杂记1.html">
            
                    
                    Golang 杂记1
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.9.2" data-path="golang_杂记2.html">
            
                <a href="golang_杂记2.html">
            
                    
                    Golang 杂记2
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.9.3" data-path="golang_杂记3.html">
            
                <a href="golang_杂记3.html">
            
                    
                    Golang 杂记3
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.9.4" data-path="golang_lib选型.html">
            
                <a href="golang_lib选型.html">
            
                    
                    Golang lib选型
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.9.5" data-path="golang_mod_proxy.html">
            
                <a href="golang_mod_proxy.html">
            
                    
                    go mod和go proxy
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.9.6" data-path="golang_汇编_arm64.html">
            
                <a href="golang_汇编_arm64.html">
            
                    
                    Golang 汇编语法
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.9.7" data-path="golang_cgo_swig.html">
            
                <a href="golang_cgo_swig.html">
            
                    
                    go调用c可以用swig
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.10.10" data-path="as_title_golang3.html">
            
                <a href="as_title_golang3.html">
            
                    
                    Golang 环境和工具链生成
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.10.1" data-path="golang_toolchain_ppc.html">
            
                <a href="golang_toolchain_ppc.html">
            
                    
                    go tools增加ppc32支持
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.10.2" data-path="golang_toolchain_compile_gccgo.html">
            
                <a href="golang_toolchain_compile_gccgo.html">
            
                    
                    编译gccgo
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.10.3" data-path="golang_go_on_mips.html">
            
                <a href="golang_go_on_mips.html">
            
                    
                    go on mips boards(not so updated)
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.10.3.1" data-path="golang_go_on_mips_part1.html">
            
                <a href="golang_go_on_mips_part1.html">
            
                    
                    part 1: cross compile go
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.10.3.2" data-path="golang_go_on_mips_part2.html">
            
                <a href="golang_go_on_mips_part2.html">
            
                    
                    part 2: build native go compiler
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.10.3.3" data-path="golang_go_on_mips_part3.html">
            
                <a href="golang_go_on_mips_part3.html">
            
                    
                    part 3: gccgo experiments
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.10.3.4" data-path="golang_go_on_mips_part4.html">
            
                <a href="golang_go_on_mips_part4.html">
            
                    
                    part 4: Golang json performance
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.10.3.5" data-path="golang_gentoo_on_mips_board_and_build_go.html">
            
                <a href="golang_gentoo_on_mips_board_and_build_go.html">
            
                    
                    Gentoo on mips board and build go
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.10.11" data-path="as_title_golang4.html">
            
                <a href="as_title_golang4.html">
            
                    
                    微服务
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.11.1" data-path="golang_micro.html">
            
                <a href="golang_micro.html">
            
                    
                    go-micro和micro
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.11.2" data-path="golang_微服务概念.html">
            
                <a href="golang_微服务概念.html">
            
                    
                    微服务概念
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.10.12" data-path="as_title_golang5.html">
            
                <a href="as_title_golang5.html">
            
                    
                    解释器和编解码
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.12.1" data-path="golang_yeagi.html">
            
                <a href="golang_yeagi.html">
            
                    
                    解释器yeagi
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.12.2" data-path="golang_tengo.html">
            
                <a href="golang_tengo.html">
            
                    
                    解释器tengo
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.12.3" data-path="golang_govaluate.html">
            
                <a href="golang_govaluate.html">
            
                    
                    解释器govaluate
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.12.4" data-path="golang_encoding_gotiny.html">
            
                <a href="golang_encoding_gotiny.html">
            
                    
                    gotiny编解码
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.12.5" data-path="golang_abs.html">
            
                <a href="golang_abs.html">
            
                    
                    解释器abs
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.10.13" data-path="as_title_golang6.html">
            
                <a href="as_title_golang6.html">
            
                    
                    调试和性能
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.13.1" data-path="golang_调试记录.html">
            
                <a href="golang_调试记录.html">
            
                    
                    Golang 调试记录
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.13.2" data-path="golang_topid性能优化.html">
            
                <a href="golang_topid性能优化.html">
            
                    
                    Golang topid性能优化
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.13.3" data-path="golang_gshell性能调试.html">
            
                <a href="golang_gshell性能调试.html">
            
                    
                    Golang gshell性能调试
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.10.14" data-path="as_title_golang7.html">
            
                <a href="as_title_golang7.html">
            
                    
                    网络和消息中间件
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.14.1" data-path="golang_zmq.html">
            
                <a href="golang_zmq.html">
            
                    
                    消息中间件基本概念和zero mq
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.14.2" data-path="golang_mango.html">
            
                <a href="golang_mango.html">
            
                    
                    消息中间件mango
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.14.3" data-path="golang_libp2p.html">
            
                <a href="golang_libp2p.html">
            
                    
                    Golang p2p网络
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.11" data-path="as_title_rust.html">
            
                <a href="as_title_rust.html">
            
                    
                    Rust
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.11.1" data-path="rust_入门_brief.html">
            
                <a href="rust_入门_brief.html">
            
                    
                    Rust 入门系列
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.11.1.1" data-path="rust_books.html">
            
                <a href="rust_books.html">
            
                    
                    Rust reference books
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.1.2" data-path="rust_入门1.html">
            
                <a href="rust_入门1.html">
            
                    
                    Rust 安装和基础语法
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.1.3" data-path="rust_入门2.html">
            
                <a href="rust_入门2.html">
            
                    
                    Rust 泛型和内存所有权
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.1.4" data-path="rust_入门3.html">
            
                <a href="rust_入门3.html">
            
                    
                    Rust 闭包 容器 迭代器 生成器 线程
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.1.5" data-path="rust_工程构建.html">
            
                <a href="rust_工程构建.html">
            
                    
                    Rust 工程构建
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.11.2" data-path="rust_coding_brief.html">
            
                <a href="rust_coding_brief.html">
            
                    
                    Rust 代码积累
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.11.2.1" data-path="rust_by_example_misc.html">
            
                <a href="rust_by_example_misc.html">
            
                    
                    Rust by example杂记
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.2.2" data-path="rust_序列化.html">
            
                <a href="rust_序列化.html">
            
                    
                    Rust 序列化原理
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.2.3" data-path="rust_知识点积累.html">
            
                <a href="rust_知识点积累.html">
            
                    
                    Rust 知识点更新
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.2.4" data-path="rust_adaptiveservice.html">
            
                <a href="rust_adaptiveservice.html">
            
                    
                    rust版本的adaptiveservice探索
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.2.5" data-path="rust_常用设施.html">
            
                <a href="rust_常用设施.html">
            
                    
                    Rust 常用设施
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.2.6" data-path="rust_代码小段.html">
            
                <a href="rust_代码小段.html">
            
                    
                    Rust 代码小段
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.11.3" data-path="others.html">
            
                <a href="others.html">
            
                    
                    其他
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.11.3.1" data-path="rust_mdbook_使用.html">
            
                <a href="rust_mdbook_使用.html">
            
                    
                    Rust 使用mdbook
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.12" data-path="as_title_scripts.html">
            
                <a href="as_title_scripts.html">
            
                    
                    脚本
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.12.1" data-path="shell_变量.html">
            
                <a href="shell_变量.html">
            
                    
                    shell变量
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.2" data-path="shell_基础篇.html">
            
                <a href="shell_基础篇.html">
            
                    
                    shell命令和脚本记录-基础篇
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.3" data-path="shell_高级篇.html">
            
                <a href="shell_高级篇.html">
            
                    
                    shell命令和脚本记录-高级篇
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.4" data-path="shell_脚本片段.html">
            
                <a href="shell_脚本片段.html">
            
                    
                    shell脚本片段
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.5" data-path="python_记录.html">
            
                <a href="python_记录.html">
            
                    
                    python记录
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.6" data-path="lua_记录.html">
            
                <a href="lua_记录.html">
            
                    
                    lua记录
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.7" data-path="shell_rds脚本阅读.html">
            
                <a href="shell_rds脚本阅读.html">
            
                    
                    RDS脚本阅读
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.8" data-path="Project_Euler.html">
            
                <a href="Project_Euler.html">
            
                    
                    Project Euler
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.13" data-path="as_title_app.html">
            
                <a href="as_title_app.html">
            
                    
                    应用相关
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.13.1" data-path="app_sysbench代码分析.html">
            
                <a href="app_sysbench代码分析.html">
            
                    
                    sysbench代码分析
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.14" data-path="as_title_algorithm.html">
            
                <a href="as_title_algorithm.html">
            
                    
                    算法相关
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.14.1" data-path="algorithm_radix_tree.html">
            
                <a href="algorithm_radix_tree.html">
            
                    
                    基数(radix)树(网摘)
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.15" data-path="as_title_cos.html">
            
                <a href="as_title_cos.html">
            
                    
                    C和Operating System
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.15.1" data-path="system_libc_part1.html">
            
                <a href="system_libc_part1.html">
            
                    
                    libc概览1
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.2" data-path="system_libc_part2.html">
            
                <a href="system_libc_part2.html">
            
                    
                    libc概览2
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.3" data-path="system_libc_part3.html">
            
                <a href="system_libc_part3.html">
            
                    
                    libc概览3
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.4" data-path="system_原理杂记.html">
            
                <a href="system_原理杂记.html">
            
                    
                    系统原理杂记
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.15.5" data-path="system_alpine.html">
            
                <a href="system_alpine.html">
            
                    
                    Alpine Linux
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.6" data-path="system_进程间通信.html">
            
                <a href="system_进程间通信.html">
            
                    
                    进程间通信
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.7" data-path="system_特殊功能fd.html">
            
                <a href="system_特殊功能fd.html">
            
                    
                    eventfd timerfd signalfd和fd共享
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.8" data-path="c_automake_autoconf.html">
            
                <a href="c_automake_autoconf.html">
            
                    
                    automake autoconf
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.9" data-path="makefile_原理和实践.html">
            
                <a href="makefile_原理和实践.html">
            
                    
                    makefile
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.10" data-path="c_编程杂记高级篇.html">
            
                <a href="c_编程杂记高级篇.html">
            
                    
                    C编程杂记高级篇
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.11" data-path="c_编程杂记基础篇.html">
            
                <a href="c_编程杂记基础篇.html">
            
                    
                    C编程杂记基础篇
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.12" data-path="c_networking_socket高阶用法.html">
            
                <a href="c_networking_socket高阶用法.html">
            
                    
                    网络编程: Advanced Socket Topics(网摘)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.13" data-path="c_protobuf介绍.html">
            
                <a href="c_protobuf介绍.html">
            
                    
                    序列化: protobuf介绍
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.14" data-path="c_进程间通信_共享文件和共享内存.html">
            
                <a href="c_进程间通信_共享文件和共享内存.html">
            
                    
                    进程间通信: 共享文件和共享内存(网摘)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.15" data-path="c_pthread_condition和mutex.html">
            
                <a href="c_pthread_condition和mutex.html">
            
                    
                    并发 任务 事件 和锁.md
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.16" data-path="kernel_user_space_howto.html">
            
                <a href="kernel_user_space_howto.html">
            
                    
                    kernel space和user space交互(网摘, linux2.6)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.17" data-path="CentOS_系统性能优化配置.html">
            
                <a href="CentOS_系统性能优化配置.html">
            
                    
                    CentOS 性能优化系统配置
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.18" data-path="OS_gentoo使用.html">
            
                <a href="OS_gentoo使用.html">
            
                    
                    gentoo使用记录
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.16" data-path="as_title_driver.html">
            
                <a href="as_title_driver.html">
            
                    
                    内核 设备和驱动相关
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.16.1" data-path="device_driver_地址空间类型和DMA.html">
            
                <a href="device_driver_地址空间类型和DMA.html">
            
                    
                    地址空间类型和DMA
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.2" data-path="platform_device_driver.html">
            
                <a href="platform_device_driver.html">
            
                    
                    平台驱动杂记
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.3" data-path="platform_device_driver2.html">
            
                <a href="platform_device_driver2.html">
            
                    
                    平台驱动杂记2
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.4" data-path="device_driver_pci驱动概述.html">
            
                <a href="device_driver_pci驱动概述.html">
            
                    
                    pci驱动概述
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.5" data-path="device_driver_内核中的时间和延迟操作.html">
            
                <a href="device_driver_内核中的时间和延迟操作.html">
            
                    
                    内核中的时间和延迟操作
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.6" data-path="device_driver_杂记.html">
            
                <a href="device_driver_杂记.html">
            
                    
                    驱动调试杂记
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.7" data-path="device_localbus_16bit读写.html">
            
                <a href="device_localbus_16bit读写.html">
            
                    
                    CPLD做8bit到16bit转换
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.8" data-path="driver_位域和大小端.html">
            
                <a href="driver_位域和大小端.html">
            
                    
                    位域和大小端
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.9" data-path="as_title_driver1.html">
            
                <a href="as_title_driver1.html">
            
                    
                    nand
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.16.9.1" data-path="device_driver_octeon_nand.html">
            
                <a href="device_driver_octeon_nand.html">
            
                    
                    octeon nand flash驱动
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.9.2" data-path="device_driver_nand概率写失败问题分析.html">
            
                <a href="device_driver_nand概率写失败问题分析.html">
            
                    
                    Nand flash概率写失败问题分析
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.16.10" data-path="octeon_remote_pci.html">
            
                <a href="octeon_remote_pci.html">
            
                    
                    octeon remote-pci.c阅读
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.11" data-path="Device_VFIO_notes.html">
            
                <a href="Device_VFIO_notes.html">
            
                    
                    VFIO简介
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.12" data-path="as_title_driver2.html">
            
                <a href="as_title_driver2.html">
            
                    
                    智能网卡和DPDK
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.16.12.1" data-path="smartNIC_智能网卡对比.html">
            
                <a href="smartNIC_智能网卡对比.html">
            
                    
                    智能网卡对比
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.12.2" data-path="octeon_pci_NIC.html">
            
                <a href="octeon_pci_NIC.html">
            
                    
                    octeon PCI NIC
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.12.3" data-path="as_title_driver3.html">
            
                <a href="as_title_driver3.html">
            
                    
                    octeon liquidIO
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.16.12.3.1" data-path="smartNIC_liquidIO_代码阅读app篇.html">
            
                <a href="smartNIC_liquidIO_代码阅读app篇.html">
            
                    
                    PCI-NIC 代码阅读 --app篇
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.12.3.2" data-path="smartNIC_liquidIO_代码阅读api篇.html">
            
                <a href="smartNIC_liquidIO_代码阅读api篇.html">
            
                    
                    PCI-NIC 代码阅读 --api篇
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.12.3.3" data-path="smartNIC_liquidIO_代码阅读driver篇之结构体.html">
            
                <a href="smartNIC_liquidIO_代码阅读driver篇之结构体.html">
            
                    
                    PCI-NIC 代码阅读 --driver篇之结构体
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.12.3.4" data-path="smartNIC_liquidIO_代码阅读driver篇.html">
            
                <a href="smartNIC_liquidIO_代码阅读driver篇.html">
            
                    
                    PCI-NIC 代码阅读 --driver篇
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.12.3.5" data-path="smartNIC_liquidIO_代码阅读真NIC篇.html">
            
                <a href="smartNIC_liquidIO_代码阅读真NIC篇.html">
            
                    
                    PCI-NIC 代码阅读 --真NIC篇
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.16.12.4" data-path="networking_dpdk使用_2014.html">
            
                <a href="networking_dpdk使用_2014.html">
            
                    
                    DPDK使用(2014)
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.16.13" data-path="device_nvme要点介绍.html">
            
                <a href="device_nvme要点介绍.html">
            
                    
                    nvme要点介绍
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.17" data-path="as_title_cpu.html">
            
                <a href="as_title_cpu.html">
            
                    
                    CPU Arch相关
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.17.1" data-path="CPU_interconnection_networks.html">
            
                <a href="CPU_interconnection_networks.html">
            
                    
                    CPU核互联模型
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.2" data-path="cache_CPU和cache一致性原理.html">
            
                <a href="cache_CPU和cache一致性原理.html">
            
                    
                    CPU和cache一致性原理
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.3" data-path="as_title_cpu1.html">
            
                <a href="as_title_cpu1.html">
            
                    
                    ARM64
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.17.3.1" data-path="CPU_ARM64_知识杂记.html">
            
                <a href="CPU_ARM64_知识杂记.html">
            
                    
                    aarch64架构知识杂记
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.3.2" data-path="CPU_ARM64_thunder_overview.html">
            
                <a href="CPU_ARM64_thunder_overview.html">
            
                    
                    thunder 概览
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.3.3" data-path="CPU_ARM64_thunder_开发板操作记录.html">
            
                <a href="CPU_ARM64_thunder_开发板操作记录.html">
            
                    
                    thunder 开发板操作记录
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.3.4" data-path="CPU_ARM64_thunder_bdk.html">
            
                <a href="CPU_ARM64_thunder_bdk.html">
            
                    
                    thunder BDK
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.3.5" data-path="CPU_ARM64_thunder_efi_rtc.html">
            
                <a href="CPU_ARM64_thunder_efi_rtc.html">
            
                    
                    thunder RTC时间和efi
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.3.6" data-path="CPU_ARM64_thunder_uefi_fdt.html">
            
                <a href="CPU_ARM64_thunder_uefi_fdt.html">
            
                    
                    thunder uefi和fdt
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.3.7" data-path="CPU_ARM64_thunder_atf.html">
            
                <a href="CPU_ARM64_thunder_atf.html">
            
                    
                    thunder atf
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.3.8" data-path="CPU_ARM64_thunder_kernel_boot.html">
            
                <a href="CPU_ARM64_thunder_kernel_boot.html">
            
                    
                    thunder kernel启动打印流程
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.17.4" data-path="as_title_cpu2.html">
            
                <a href="as_title_cpu2.html">
            
                    
                    PPC
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.17.4.1" data-path="CPU_PPC启动多核Linux_流程和内存映射.html">
            
                <a href="CPU_PPC启动多核Linux_流程和内存映射.html">
            
                    
                    PPC启动多核linux: 流程和内存映射
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.4.2" data-path="CPU_PPC_kernel升级记录.html">
            
                <a href="CPU_PPC_kernel升级记录.html">
            
                    
                    PPC kernel升级记录
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.17.5" data-path="as_title_cpu3.html">
            
                <a href="as_title_cpu3.html">
            
                    
                    MIPS
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.17.5.1" data-path="CPU_MIPS_octeon地址空间和寄存器访问.html">
            
                <a href="CPU_MIPS_octeon地址空间和寄存器访问.html">
            
                    
                    octeon 地址空间和寄存器访问
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.5.2" data-path="CPU_MIPS_octeon操作记录.html">
            
                <a href="CPU_MIPS_octeon操作记录.html">
            
                    
                    octeon 操作记录
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.5.3" data-path="CPU_MIPS_octeon_包处理性能.html">
            
                <a href="CPU_MIPS_octeon_包处理性能.html">
            
                    
                    octeon 系列处理器包处理性能
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.5.4" data-path="CPU_MIPS_octeon_ddr调试记录.html">
            
                <a href="CPU_MIPS_octeon_ddr调试记录.html">
            
                    
                    octeon DDR调试
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.5.5" data-path="CPU_MIPS_octeon_BDK.html">
            
                <a href="CPU_MIPS_octeon_BDK.html">
            
                    
                    octeon CN78xx BDK
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.5.6" data-path="kernel_增加ECC中断.html">
            
                <a href="kernel_增加ECC中断.html">
            
                    
                    octeon 增加ECC中断
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.5.7" data-path="CPU_MIPS_octeon_hw-ddr2代码走读.html">
            
                <a href="CPU_MIPS_octeon_hw-ddr2代码走读.html">
            
                    
                    octeon hw-ddr2代码走读
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.5.8" data-path="CPU_MIPS_octeon_reboot调试和ddr中断.html">
            
                <a href="CPU_MIPS_octeon_reboot调试和ddr中断.html">
            
                    
                    octeon reboot调试和DDR中断
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.5.9" data-path="CPU_MIPS_octeon中断.html">
            
                <a href="CPU_MIPS_octeon中断.html">
            
                    
                    octeon 中断
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.5.10" data-path="CPU_MIPS_octeon原子操作.html">
            
                <a href="CPU_MIPS_octeon原子操作.html">
            
                    
                    octeon 原子操作
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.5.11" data-path="CPU_MIPS_octeon网口代码分析.html">
            
                <a href="CPU_MIPS_octeon网口代码分析.html">
            
                    
                    octeon 网口代码分析
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            本书使用 GitBook 发布
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >Alpine Linux</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div class="search-plus" id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <div id="anchor-navigation-ex-navbar"><i class="fa fa-navicon"></i><ul><li><span class="title-icon "></span><a href="#&#x73B0;&#x4EE3;&#x5316;&#x7684;&#x5DE5;&#x7A0B;&#x7CFB;&#x7EDF;"><b>1. </b>&#x73B0;&#x4EE3;&#x5316;&#x7684;&#x5DE5;&#x7A0B;&#x7CFB;&#x7EDF;</a></li><li><span class="title-icon "></span><a href="#&#x4F7F;&#x7528;subgroup&#x6765;&#x7EC4;&#x7EC7;repo"><b>2. </b>&#x4F7F;&#x7528;subgroup&#x6765;&#x7EC4;&#x7EC7;repo</a></li><li><span class="title-icon "></span><a href="#&#x7EC4;&#x7EC7;&#x6E05;&#x723D;-&#x6E90;&#x4EE3;&#x7801;&#x5E72;&#x51C0;"><b>3. </b>&#x7EC4;&#x7EC7;&#x6E05;&#x723D;, &#x6E90;&#x4EE3;&#x7801;&#x5E72;&#x51C0;</a></li><li><span class="title-icon "></span><a href="#&#x53D1;&#x5E03;&#x5468;&#x671F;"><b>4. </b>&#x53D1;&#x5E03;&#x5468;&#x671F;</a></li><li><span class="title-icon "></span><a href="#aports"><b>5. </b>aports</a></li><ul><li><span class="title-icon "></span><a href="#&#x4EA4;&#x53C9;&#x7F16;&#x8BD1;"><b>5.1. </b>&#x4EA4;&#x53C9;&#x7F16;&#x8BD1;</a></li><ul><li><span class="title-icon "></span><a href="#&#x4EA4;&#x53C9;&#x7F16;&#x8BD1;&#x6982;&#x5FF5;"><b>5.1.1. </b>&#x4EA4;&#x53C9;&#x7F16;&#x8BD1;&#x6982;&#x5FF5;</a></li><li><span class="title-icon "></span><a href="#alpine&#x4E2D;&#x7684;&#x4E0D;&#x540C;arch"><b>5.1.2. </b>alpine&#x4E2D;&#x7684;&#x4E0D;&#x540C;arch</a></li><li><span class="title-icon "></span><a href="#&#x7ED3;&#x8BBA;"><b>5.1.3. </b>&#x7ED3;&#x8BBA;</a></li></ul><li><span class="title-icon "></span><a href="#chost&#x5728;alpine&#x4E2D;&#x7684;&#x5E94;&#x7528;"><b>5.2. </b>CHOST&#x5728;alpine&#x4E2D;&#x7684;&#x5E94;&#x7528;</a></li></ul><li><span class="title-icon "></span><a href="#openrc"><b>6. </b>openrc</a></li><li><span class="title-icon "></span><a href="#musl-libc"><b>7. </b>musl libc</a></li><li><span class="title-icon "></span><a href="#&#x7F16;&#x8BD1;htop&#x5B9E;&#x4F8B;"><b>8. </b>&#x7F16;&#x8BD1;htop&#x5B9E;&#x4F8B;</a></li><ul><li><span class="title-icon "></span><a href="#&#x51C6;&#x5907;alpine&#x7F16;&#x8BD1;&#x73AF;&#x5883;"><b>8.1. </b>&#x51C6;&#x5907;alpine&#x7F16;&#x8BD1;&#x73AF;&#x5883;</a></li><ul><li><span class="title-icon "></span><a href="#&#x5B89;&#x88C5;alpine-sdk"><b>8.1.1. </b>&#x5B89;&#x88C5;alpine-sdk</a></li><li><span class="title-icon "></span><a href="#&#x51C6;&#x5907;&#x666E;&#x901A;&#x7528;&#x6237;"><b>8.1.2. </b>&#x51C6;&#x5907;&#x666E;&#x901A;&#x7528;&#x6237;</a></li></ul><li><span class="title-icon "></span><a href="#&#x547D;&#x4EE4;&#x6C47;&#x603B;"><b>8.2. </b>&#x547D;&#x4EE4;&#x6C47;&#x603B;</a></li><li><span class="title-icon "></span><a href="#&#x5F00;&#x59CB;&#x7F16;&#x8BD1;htop"><b>8.3. </b>&#x5F00;&#x59CB;&#x7F16;&#x8BD1;htop</a></li><ul><li><span class="title-icon "></span><a href="#abuild-checksum"><b>8.3.1. </b>abuild checksum</a></li><li><span class="title-icon "></span><a href="#abuild--r"><b>8.3.2. </b>abuild -r</a></li><li><span class="title-icon "></span><a href="#&#x6D4B;&#x8BD5;&#x672C;&#x5730;&#x7F16;&#x8BD1;&#x7684;apk"><b>8.3.3. </b>&#x6D4B;&#x8BD5;&#x672C;&#x5730;&#x7F16;&#x8BD1;&#x7684;apk</a></li><li><span class="title-icon "></span><a href="#&#x7F16;&#x8BD1;&#x9009;&#x9879;&#x7531;etcabuildconf&#x6307;&#x5B9A;"><b>8.3.4. </b>&#x7F16;&#x8BD1;&#x9009;&#x9879;&#x7531;/etc/abuild.conf&#x6307;&#x5B9A;</a></li></ul></ul><li><span class="title-icon "></span><a href="#packages"><b>9. </b>packages</a></li><ul><li><span class="title-icon "></span><a href="#build-base"><b>9.1. </b>build-base</a></li></ul><li><span class="title-icon "></span><a href="#abuild"><b>10. </b>abuild</a></li><ul><li><span class="title-icon "></span><a href="#abuildin"><b>10.1. </b>abuild.in</a></li><li><span class="title-icon "></span><a href="#functionssh"><b>10.2. </b>functions.sh</a></li><li><span class="title-icon "></span><a href="#&#x652F;&#x6301;&#x4EA4;&#x53C9;&#x7F16;&#x8BD1;"><b>10.3. </b>&#x652F;&#x6301;&#x4EA4;&#x53C9;&#x7F16;&#x8BD1;</a></li><li><span class="title-icon "></span><a href="#&#x4EA4;&#x53C9;&#x7F16;&#x8BD1;&#x5B9E;&#x4F8B;"><b>10.4. </b>&#x4EA4;&#x53C9;&#x7F16;&#x8BD1;&#x5B9E;&#x4F8B;</a></li><li><span class="title-icon "></span><a href="#&#x5904;&#x7406;&#x4F9D;&#x8D56;"><b>10.5. </b>&#x5904;&#x7406;&#x4F9D;&#x8D56;</a></li></ul><li><span class="title-icon "></span><a href="#apk&#x4F7F;&#x7528;"><b>11. </b>apk&#x4F7F;&#x7528;</a></li><ul><li><span class="title-icon "></span><a href="#bootstrap"><b>11.1. </b>bootstrap</a></li><li><span class="title-icon "></span><a href="#&#x7F16;&#x8BD1;gccgo-for-ppc"><b>11.2. </b>&#x7F16;&#x8BD1;gccgo for ppc</a></li><li><span class="title-icon "></span><a href="#&#x4F7F;&#x7528;&#x4EA4;&#x53C9;&#x7F16;&#x8BD1;&#x7684;gccgo&#x5DE5;&#x5177;&#x94FE;"><b>11.3. </b>&#x4F7F;&#x7528;&#x4EA4;&#x53C9;&#x7F16;&#x8BD1;&#x7684;gccgo&#x5DE5;&#x5177;&#x94FE;</a></li><ul><li><span class="title-icon "></span><a href="#&#x8C03;&#x8BD5;&#x8FC7;&#x7A0B;"><b>11.3.1. </b>&#x8C03;&#x8BD5;&#x8FC7;&#x7A0B;</a></li><li><span class="title-icon "></span><a href="#context&#x76F8;&#x5173;&#x7B26;&#x53F7;&#x627E;&#x4E0D;&#x5230;&#x7684;&#x95EE;&#x9898;"><b>11.3.2. </b>context&#x76F8;&#x5173;&#x7B26;&#x53F7;&#x627E;&#x4E0D;&#x5230;&#x7684;&#x95EE;&#x9898;</a></li><li><span class="title-icon "></span><a href="#&#x6700;&#x7EC8;&#x64CD;&#x4F5C;"><b>11.3.3. </b>&#x6700;&#x7EC8;&#x64CD;&#x4F5C;</a></li><li><span class="title-icon "></span><a href="#gccgo&#x5DE5;&#x5177;&#x94FE;&#x91CC;&#x6709;&#x4EC0;&#x4E48;"><b>11.3.4. </b>gccgo&#x5DE5;&#x5177;&#x94FE;&#x91CC;&#x6709;&#x4EC0;&#x4E48;</a></li></ul><li><span class="title-icon "></span><a href="#&#x7F16;&#x8BD1;gcgo&#x524D;&#x7AEF;"><b>11.4. </b>&#x7F16;&#x8BD1;gcgo&#x524D;&#x7AEF;</a></li></ul><li><span class="title-icon "></span><a href="#repository-&#x7EF4;&#x62A4;"><b>12. </b>repository &#x7EF4;&#x62A4;</a></li><ul><li><span class="title-icon "></span><a href="#apk-index&#x6587;&#x4EF6;"><b>12.1. </b>apk index&#x6587;&#x4EF6;</a></li><li><span class="title-icon "></span><a href="#&#x4E0A;&#x4F20;&#x7F16;&#x8BD1;&#x597D;&#x7684;apk"><b>12.2. </b>&#x4E0A;&#x4F20;&#x7F16;&#x8BD1;&#x597D;&#x7684;apk</a></li><li><span class="title-icon "></span><a href="#&#x66F4;&#x65B0;apkindextargz&#x6587;&#x4EF6;"><b>12.3. </b>&#x66F4;&#x65B0;APKINDEX.tar.gz&#x6587;&#x4EF6;</a></li><ul><li><span class="title-icon "></span><a href="#&#x89E3;&#x51B3;&#x7B7E;&#x540D;&#x95EE;&#x9898;"><b>12.3.1. </b>&#x89E3;&#x51B3;&#x7B7E;&#x540D;&#x95EE;&#x9898;</a></li></ul><li><span class="title-icon "></span><a href="#&#x66F4;&#x65B0;apk-index&#x547D;&#x4EE4;&#x5B8C;&#x6574;&#x7248;&#x589E;&#x91CF;&#x65B9;&#x5F0F;"><b>12.4. </b>&#x66F4;&#x65B0;apk index&#x547D;&#x4EE4;&#x5B8C;&#x6574;&#x7248;(&#x589E;&#x91CF;&#x65B9;&#x5F0F;)</a></li><li><span class="title-icon "></span><a href="#&#x4E0B;&#x8F7D;&#x5E76;&#x91CD;&#x5EFA;index&#x91CD;&#x6253;&#x5305;&#x65B9;&#x5F0F;"><b>12.5. </b>&#x4E0B;&#x8F7D;&#x5E76;&#x91CD;&#x5EFA;index(&#x91CD;&#x6253;&#x5305;&#x65B9;&#x5F0F;)</a></li><li><span class="title-icon "></span><a href="#&#x4E0A;&#x4F20;"><b>12.6. </b>&#x4E0A;&#x4F20;</a></li><li><span class="title-icon "></span><a href="#&#x5220;&#x9664;main"><b>12.7. </b>&#x5220;&#x9664;main</a></li></ul><li><span class="title-icon "></span><a href="#apkbuild-&#x6587;&#x4EF6;"><b>13. </b>APKBUILD &#x6587;&#x4EF6;</a></li><ul><li><span class="title-icon "></span><a href="#depends"><b>13.1. </b>depends</a></li><li><span class="title-icon "></span><a href="#dependsdev"><b>13.2. </b>depends_dev</a></li><li><span class="title-icon "></span><a href="#&#x5B50;package&#x4F9D;&#x8D56;"><b>13.3. </b>&#x5B50;package&#x4F9D;&#x8D56;</a></li></ul></ul></div><a href="#&#x73B0;&#x4EE3;&#x5316;&#x7684;&#x5DE5;&#x7A0B;&#x7CFB;&#x7EDF;" id="anchorNavigationExGoTop"><i class="fa fa-arrow-up"></i></a><ul>
<li><a href="#&#x73B0;&#x4EE3;&#x5316;&#x7684;&#x5DE5;&#x7A0B;&#x7CFB;&#x7EDF;">&#x73B0;&#x4EE3;&#x5316;&#x7684;&#x5DE5;&#x7A0B;&#x7CFB;&#x7EDF;</a></li>
<li><a href="#&#x4F7F;&#x7528;subgroup&#x6765;&#x7EC4;&#x7EC7;repo">&#x4F7F;&#x7528;subgroup&#x6765;&#x7EC4;&#x7EC7;repo</a></li>
<li><a href="#&#x7EC4;&#x7EC7;&#x6E05;&#x723D;-&#x6E90;&#x4EE3;&#x7801;&#x5E72;&#x51C0;">&#x7EC4;&#x7EC7;&#x6E05;&#x723D;, &#x6E90;&#x4EE3;&#x7801;&#x5E72;&#x51C0;</a></li>
<li><a href="#&#x53D1;&#x5E03;&#x5468;&#x671F;">&#x53D1;&#x5E03;&#x5468;&#x671F;</a></li>
<li><a href="#aports">aports</a><ul>
<li><a href="#&#x4EA4;&#x53C9;&#x7F16;&#x8BD1;">&#x4EA4;&#x53C9;&#x7F16;&#x8BD1;</a><ul>
<li><a href="#&#x4EA4;&#x53C9;&#x7F16;&#x8BD1;&#x6982;&#x5FF5;">&#x4EA4;&#x53C9;&#x7F16;&#x8BD1;&#x6982;&#x5FF5;</a></li>
<li><a href="#alpine&#x4E2D;&#x7684;&#x4E0D;&#x540C;arch">alpine&#x4E2D;&#x7684;&#x4E0D;&#x540C;arch</a></li>
<li><a href="#&#x7ED3;&#x8BBA;">&#x7ED3;&#x8BBA;</a></li>
</ul>
</li>
<li><a href="#chost&#x5728;alpine&#x4E2D;&#x7684;&#x5E94;&#x7528;">CHOST&#x5728;alpine&#x4E2D;&#x7684;&#x5E94;&#x7528;</a></li>
</ul>
</li>
<li><a href="#openrc">openrc</a></li>
<li><a href="#musl-libc">musl libc</a></li>
<li><a href="#&#x7F16;&#x8BD1;htop&#x5B9E;&#x4F8B;">&#x7F16;&#x8BD1;htop&#x5B9E;&#x4F8B;</a><ul>
<li><a href="#&#x51C6;&#x5907;alpine&#x7F16;&#x8BD1;&#x73AF;&#x5883;">&#x51C6;&#x5907;alpine&#x7F16;&#x8BD1;&#x73AF;&#x5883;</a><ul>
<li><a href="#&#x5B89;&#x88C5;alpine-sdk">&#x5B89;&#x88C5;alpine-sdk</a></li>
<li><a href="#&#x51C6;&#x5907;&#x666E;&#x901A;&#x7528;&#x6237;">&#x51C6;&#x5907;&#x666E;&#x901A;&#x7528;&#x6237;</a></li>
</ul>
</li>
<li><a href="#&#x547D;&#x4EE4;&#x6C47;&#x603B;">&#x547D;&#x4EE4;&#x6C47;&#x603B;</a></li>
<li><a href="#&#x5F00;&#x59CB;&#x7F16;&#x8BD1;htop">&#x5F00;&#x59CB;&#x7F16;&#x8BD1;htop</a><ul>
<li><a href="#abuild-checksum"><code>abuild checksum</code></a></li>
<li><a href="#abuild--r"><code>abuild -r</code></a></li>
<li><a href="#&#x6D4B;&#x8BD5;&#x672C;&#x5730;&#x7F16;&#x8BD1;&#x7684;apk">&#x6D4B;&#x8BD5;&#x672C;&#x5730;&#x7F16;&#x8BD1;&#x7684;apk</a></li>
<li><a href="#&#x7F16;&#x8BD1;&#x9009;&#x9879;&#x7531;etcabuildconf&#x6307;&#x5B9A;">&#x7F16;&#x8BD1;&#x9009;&#x9879;&#x7531;<code>/etc/abuild.conf</code>&#x6307;&#x5B9A;</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#packages">packages</a><ul>
<li><a href="#build-base">build-base</a></li>
</ul>
</li>
<li><a href="#abuild">abuild</a><ul>
<li><a href="#abuildin">abuild.in</a></li>
<li><a href="#functionssh">functions.sh</a></li>
<li><a href="#&#x652F;&#x6301;&#x4EA4;&#x53C9;&#x7F16;&#x8BD1;">&#x652F;&#x6301;&#x4EA4;&#x53C9;&#x7F16;&#x8BD1;</a></li>
<li><a href="#&#x4EA4;&#x53C9;&#x7F16;&#x8BD1;&#x5B9E;&#x4F8B;">&#x4EA4;&#x53C9;&#x7F16;&#x8BD1;&#x5B9E;&#x4F8B;</a></li>
<li><a href="#&#x5904;&#x7406;&#x4F9D;&#x8D56;">&#x5904;&#x7406;&#x4F9D;&#x8D56;</a></li>
</ul>
</li>
<li><a href="#apk&#x4F7F;&#x7528;">apk&#x4F7F;&#x7528;</a><ul>
<li><a href="#bootstrap">bootstrap</a></li>
<li><a href="#&#x7F16;&#x8BD1;gccgo-for-ppc">&#x7F16;&#x8BD1;gccgo for ppc</a></li>
<li><a href="#&#x4F7F;&#x7528;&#x4EA4;&#x53C9;&#x7F16;&#x8BD1;&#x7684;gccgo&#x5DE5;&#x5177;&#x94FE;">&#x4F7F;&#x7528;&#x4EA4;&#x53C9;&#x7F16;&#x8BD1;&#x7684;gccgo&#x5DE5;&#x5177;&#x94FE;</a><ul>
<li><a href="#&#x8C03;&#x8BD5;&#x8FC7;&#x7A0B;">&#x8C03;&#x8BD5;&#x8FC7;&#x7A0B;</a></li>
<li><a href="#context&#x76F8;&#x5173;&#x7B26;&#x53F7;&#x627E;&#x4E0D;&#x5230;&#x7684;&#x95EE;&#x9898;">context&#x76F8;&#x5173;&#x7B26;&#x53F7;&#x627E;&#x4E0D;&#x5230;&#x7684;&#x95EE;&#x9898;</a></li>
<li><a href="#&#x6700;&#x7EC8;&#x64CD;&#x4F5C;">&#x6700;&#x7EC8;&#x64CD;&#x4F5C;</a></li>
<li><a href="#gccgo&#x5DE5;&#x5177;&#x94FE;&#x91CC;&#x6709;&#x4EC0;&#x4E48;">gccgo&#x5DE5;&#x5177;&#x94FE;&#x91CC;&#x6709;&#x4EC0;&#x4E48;</a></li>
</ul>
</li>
<li><a href="#&#x7F16;&#x8BD1;gcgo&#x524D;&#x7AEF;">&#x7F16;&#x8BD1;gcgo&#x524D;&#x7AEF;</a></li>
</ul>
</li>
<li><a href="#repository-&#x7EF4;&#x62A4;">repository &#x7EF4;&#x62A4;</a><ul>
<li><a href="#apk-index&#x6587;&#x4EF6;">apk index&#x6587;&#x4EF6;</a></li>
<li><a href="#&#x4E0A;&#x4F20;&#x7F16;&#x8BD1;&#x597D;&#x7684;apk">&#x4E0A;&#x4F20;&#x7F16;&#x8BD1;&#x597D;&#x7684;apk</a></li>
<li><a href="#&#x66F4;&#x65B0;apkindextargz&#x6587;&#x4EF6;">&#x66F4;&#x65B0;<code>APKINDEX.tar.gz</code>&#x6587;&#x4EF6;</a><ul>
<li><a href="#&#x89E3;&#x51B3;&#x7B7E;&#x540D;&#x95EE;&#x9898;">&#x89E3;&#x51B3;&#x7B7E;&#x540D;&#x95EE;&#x9898;</a></li>
</ul>
</li>
<li><a href="#&#x66F4;&#x65B0;apk-index&#x547D;&#x4EE4;&#x5B8C;&#x6574;&#x7248;&#x589E;&#x91CF;&#x65B9;&#x5F0F;">&#x66F4;&#x65B0;apk index&#x547D;&#x4EE4;&#x5B8C;&#x6574;&#x7248;(&#x589E;&#x91CF;&#x65B9;&#x5F0F;)</a></li>
<li><a href="#&#x4E0B;&#x8F7D;&#x5E76;&#x91CD;&#x5EFA;index&#x91CD;&#x6253;&#x5305;&#x65B9;&#x5F0F;">&#x4E0B;&#x8F7D;&#x5E76;&#x91CD;&#x5EFA;index(&#x91CD;&#x6253;&#x5305;&#x65B9;&#x5F0F;)</a></li>
<li><a href="#&#x4E0A;&#x4F20;">&#x4E0A;&#x4F20;</a></li>
<li><a href="#&#x5220;&#x9664;main">&#x5220;&#x9664;main</a></li>
</ul>
</li>
<li><a href="#apkbuild-&#x6587;&#x4EF6;">APKBUILD &#x6587;&#x4EF6;</a><ul>
<li><a href="#depends">depends</a></li>
<li><a href="#depends_dev">depends_dev</a></li>
<li><a href="#&#x5B50;package&#x4F9D;&#x8D56;">&#x5B50;package&#x4F9D;&#x8D56;</a></li>
</ul>
</li>
</ul>
<h1 id="&#x73B0;&#x4EE3;&#x5316;&#x7684;&#x5DE5;&#x7A0B;&#x7CFB;&#x7EDF;"><a name="&#x73B0;&#x4EE3;&#x5316;&#x7684;&#x5DE5;&#x7A0B;&#x7CFB;&#x7EDF;" class="anchor-navigation-ex-anchor" href="#&#x73B0;&#x4EE3;&#x5316;&#x7684;&#x5DE5;&#x7A0B;&#x7CFB;&#x7EDF;"><i class="fa fa-link" aria-hidden="true"></i></a>1. &#x73B0;&#x4EE3;&#x5316;&#x7684;&#x5DE5;&#x7A0B;&#x7CFB;&#x7EDF;</h1>
<p>alpine linux&#x7684;&#x5168;&#x90E8;&#x5F00;&#x53D1;&#x90FD;&#x5728;<br><a href="https://gitlab.alpinelinux.org/alpine" target="_blank">https://gitlab.alpinelinux.org/alpine</a><br>mirror: <a href="https://git.alpinelinux.org/" target="_blank">https://git.alpinelinux.org/</a></p>
<ul>
<li>&#x81EA;&#x5DF1;&#x642D;&#x5EFA;&#x7684;gitlab&#x670D;&#x52A1;&#x5668;, &#x5141;&#x8BB8;&#x5916;&#x90E8;&#x7528;&#x6237;&#x6CE8;&#x518C;, fork&#x5E93;, &#x5E76;&#x63D0;&#x4EA4;MR</li>
<li>&#x4F7F;&#x7528;gitlab-ci&#x7684;CI/CD&#x505A;build test</li>
<li>&#x7528;gitlab issue&#x6765;&#x8DDF;&#x8E2A;bug</li>
<li>&#x6587;&#x6863;&#x4E5F;&#x662F;repo&#x7BA1;&#x7406;, &#x4F7F;&#x7528;<a href="https://docs.antora.org/antora/latest/playbook/" target="_blank">Antora Playbook</a>&#x53D1;&#x5E03;, &#x7F51;&#x9875;&#x5165;&#x53E3;&#x662F; <a href="https://alpinelinux.org/" target="_blank">https://alpinelinux.org/</a></li>
</ul>
<h1 id="&#x4F7F;&#x7528;subgroup&#x6765;&#x7EC4;&#x7EC7;repo"><a name="&#x4F7F;&#x7528;subgroup&#x6765;&#x7EC4;&#x7EC7;repo" class="anchor-navigation-ex-anchor" href="#&#x4F7F;&#x7528;subgroup&#x6765;&#x7EC4;&#x7EC7;repo"><i class="fa fa-link" aria-hidden="true"></i></a>2. &#x4F7F;&#x7528;subgroup&#x6765;&#x7EC4;&#x7EC7;repo</h1>
<p>&#x6BD4;&#x5982;CI/CD&#x5DE5;&#x5177;&#x5E93;&#x5728;<code>alpine/infra/docker/alpine-gitlab-ci</code>&#x4E0B;&#x9762;, &#x5148;&#x662F;&#x6839;alpine, &#x518D;&#x662F;infra, &#x518D;&#x662F;docker, &#x6700;&#x540E;&#x662F;repo</p>
<h1 id="&#x7EC4;&#x7EC7;&#x6E05;&#x723D;-&#x6E90;&#x4EE3;&#x7801;&#x5E72;&#x51C0;"><a name="&#x7EC4;&#x7EC7;&#x6E05;&#x723D;-&#x6E90;&#x4EE3;&#x7801;&#x5E72;&#x51C0;" class="anchor-navigation-ex-anchor" href="#&#x7EC4;&#x7EC7;&#x6E05;&#x723D;-&#x6E90;&#x4EE3;&#x7801;&#x5E72;&#x51C0;"><i class="fa fa-link" aria-hidden="true"></i></a>3. &#x7EC4;&#x7EC7;&#x6E05;&#x723D;, &#x6E90;&#x4EE3;&#x7801;&#x5E72;&#x51C0;</h1>
<p>&#x6BD4;&#x5982;<code>alpine-gitlab-ci/-/blob/master/overlay/usr/local/bin/build.sh</code>&#x91CC;&#x9762;&#x7684;shell &#x8F93;&#x51FA;&#x4EE3;&#x7801;:</p>
<pre class="language-"><code class="lang-sh"><span class="token builtin class-name">:</span> <span class="token string">&quot;<span class="token variable">${CI_ALPINE_BUILD_OFFSET<span class="token operator">:=</span>0}</span>&quot;</span>
<span class="token builtin class-name">:</span> <span class="token string">&quot;<span class="token variable">${CI_ALPINE_BUILD_LIMIT<span class="token operator">:=</span>9999}</span>&quot;</span>

<span class="token function-name function">msg</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin class-name">local</span> <span class="token assign-left variable">color</span><span class="token operator">=</span><span class="token variable">${2<span class="token operator">:-</span>green}</span>
    <span class="token keyword">case</span> <span class="token string">&quot;<span class="token variable">$color</span>&quot;</span> <span class="token keyword">in</span>
        red<span class="token punctuation">)</span> <span class="token assign-left variable">color</span><span class="token operator">=</span><span class="token string">&quot;31&quot;</span><span class="token punctuation">;</span><span class="token punctuation">;</span>
        green<span class="token punctuation">)</span> <span class="token assign-left variable">color</span><span class="token operator">=</span><span class="token string">&quot;32&quot;</span><span class="token punctuation">;</span><span class="token punctuation">;</span>
        yellow<span class="token punctuation">)</span> <span class="token assign-left variable">color</span><span class="token operator">=</span><span class="token string">&quot;33&quot;</span><span class="token punctuation">;</span><span class="token punctuation">;</span>
        blue<span class="token punctuation">)</span> <span class="token assign-left variable">color</span><span class="token operator">=</span><span class="token string">&quot;34&quot;</span><span class="token punctuation">;</span><span class="token punctuation">;</span>
        *<span class="token punctuation">)</span> <span class="token assign-left variable">color</span><span class="token operator">=</span><span class="token string">&quot;32&quot;</span><span class="token punctuation">;</span><span class="token punctuation">;</span>
    <span class="token keyword">esac</span>
    <span class="token builtin class-name">printf</span> <span class="token string">&quot;<span class="token entity" title="\033">\033</span>[1;%sm&gt;&gt;&gt;<span class="token entity" title="\033">\033</span>[1;0m %s<span class="token entity" title="\n">\n</span>&quot;</span> <span class="token string">&quot;<span class="token variable">$color</span>&quot;</span> <span class="token string">&quot;<span class="token variable">$1</span>&quot;</span> <span class="token operator">|</span> <span class="token function">xargs</span> <span class="token operator">&gt;</span><span class="token file-descriptor important">&amp;2</span>
<span class="token punctuation">}</span>

<span class="token function-name function">verbose</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;&gt; &quot;</span> <span class="token string">&quot;<span class="token variable">$@</span>&quot;</span>
    <span class="token comment"># shellcheck disable=SC2068</span>
    <span class="token variable">$@</span>
<span class="token punctuation">}</span>

<span class="token function-name function">debugging</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">[</span> <span class="token parameter variable">-n</span> <span class="token string">&quot;<span class="token variable">$CI_DEBUG_BUILD</span>&quot;</span> <span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token function-name function">debug</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> debugging<span class="token punctuation">;</span> <span class="token keyword">then</span>
        verbose <span class="token string">&quot;<span class="token variable">$@</span>&quot;</span>
    <span class="token keyword">fi</span>
<span class="token punctuation">}</span>

<span class="token function-name function">die</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    msg <span class="token string">&quot;<span class="token variable">$1</span>&quot;</span> red
    <span class="token builtin class-name">exit</span> <span class="token number">1</span>
<span class="token punctuation">}</span>

<span class="token function-name function">capture_stderr</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;<span class="token variable">$@</span>&quot;</span> <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token file-descriptor important">&amp;1</span>
<span class="token punctuation">}</span>

<span class="token function-name function">report</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token assign-left variable">report</span><span class="token operator">=</span><span class="token variable">$1</span>

    <span class="token assign-left variable">reportsdir</span><span class="token operator">=</span><span class="token variable">$APORTSDIR</span>/logs/
    <span class="token function">mkdir</span> <span class="token parameter variable">-p</span> <span class="token string">&quot;<span class="token variable">$reportsdir</span>&quot;</span>

    <span class="token function">tee</span> <span class="token parameter variable">-a</span> <span class="token string">&quot;<span class="token variable">$reportsdir</span>/<span class="token variable">$report</span>.log&quot;</span>
<span class="token punctuation">}</span>
</code></pre>
<h1 id="&#x53D1;&#x5E03;&#x5468;&#x671F;"><a name="&#x53D1;&#x5E03;&#x5468;&#x671F;" class="anchor-navigation-ex-anchor" href="#&#x53D1;&#x5E03;&#x5468;&#x671F;"><i class="fa fa-link" aria-hidden="true"></i></a>4. &#x53D1;&#x5E03;&#x5468;&#x671F;</h1>
<p>&#x4E00;&#x5E74;&#x4E24;&#x4E2A;&#x5927;&#x7248;&#x672C;, &#x901A;&#x5E38;&#x5728;5&#x6708;&#x548C;11&#x6708;&#x53D1;&#x5E03;. &#x6BCF;&#x4E2A;&#x7248;&#x672C;&#x7EF4;&#x62A4;2&#x5E74;.</p>
<h1 id="aports"><a name="aports" class="anchor-navigation-ex-anchor" href="#aports"><i class="fa fa-link" aria-hidden="true"></i></a>5. aports</h1>
<p>alpine&#x652F;&#x6301;&#x7684;package&#x90FD;&#x653E;&#x5728;<a href="https://gitlab.alpinelinux.org/alpine/aports" target="_blank">aports</a>&#x8FD9;&#x4E2A;&#x5E93;&#x4E0B;&#x9762;.</p>
<ul>
<li>main: alpine core team&#x76F4;&#x63A5;&#x652F;&#x6301;&#x7684;package</li>
<li>community: &#x7531;&#x793E;&#x533A;&#x652F;&#x6301;&#x7684;package</li>
</ul>
<p>&#x56E0;&#x4E3A;aports&#x4E0B;&#x9762;&#x7684;package&#x975E;&#x5E38;&#x591A;, &#x7528;gitlab&#x7F51;&#x9875;&#x6D4F;&#x89C8;&#x4F1A;&#x975E;&#x5E38;&#x6162;.
&#x7528;<a href="https://git.alpinelinux.org/aports/tree/?h=3.16-stable" target="_blank">&#x8FD9;&#x4E2A;&#x7B80;&#x5355;&#x7684;git&#x7F51;&#x9875;&#x4F1A;&#x5FEB;</a></p>
<p>&#x53C2;&#x8003;: <a href="https://wiki.alpinelinux.org/wiki/Repositories" target="_blank">https://wiki.alpinelinux.org/wiki/Repositories</a></p>
<p><code>/etc/apk/repositories</code>&#x662F;package&#x7684;&#x914D;&#x7F6E;</p>
<pre class="language-"><code>/ # cat /etc/apk/repositories
https://dl-cdn.alpinelinux.org/alpine/v3.15/main
https://dl-cdn.alpinelinux.org/alpine/v3.15/community
</code></pre><p>&#x6BD4;&#x5982;<code>https://dl-cdn.alpinelinux.org/alpine/v3.15/main</code>&#x76EE;&#x5F55;&#x4E0B;&#x5305;&#x62EC;&#x4E86;&#x6240;&#x6709;arch&#x7684;&#x9884;&#x7F16;&#x8BD1;&#x597D;&#x7684;apk<br><img src="img/system_alpine_20220902115455.png" alt=""><br>&#x70B9;&#x8FDB;&#x53BB;&#x770B;&#x8FD9;&#x4E9B;apk&#x7684;&#x4FEE;&#x6539;&#x65F6;&#x95F4;&#x662F;&#x4E0D;&#x4E00;&#x6837;&#x7684;, &#x8BF4;&#x660E;apk&#x662F;&#x6309;&#x9700;&#x7F16;&#x8BD1;&#x7684;.</p>
<h2 id="&#x4EA4;&#x53C9;&#x7F16;&#x8BD1;"><a name="&#x4EA4;&#x53C9;&#x7F16;&#x8BD1;" class="anchor-navigation-ex-anchor" href="#&#x4EA4;&#x53C9;&#x7F16;&#x8BD1;"><i class="fa fa-link" aria-hidden="true"></i></a>5.1. &#x4EA4;&#x53C9;&#x7F16;&#x8BD1;</h2>
<p>&#x4F3C;&#x4E4E;&#x53EF;&#x4EE5;&#x7528;bootstrap.sh&#x6765;&#x751F;&#x6210;&#x4EA4;&#x53C9;&#x7F16;&#x8BD1;&#x7684;&#x5DE5;&#x5177;&#x94FE;<br>&#x53C2;&#x8003;: <a href="https://github.com/richfelker/musl-cross-make.git" target="_blank">musl-cross-make</a></p>
<h3 id="&#x4EA4;&#x53C9;&#x7F16;&#x8BD1;&#x6982;&#x5FF5;"><a name="&#x4EA4;&#x53C9;&#x7F16;&#x8BD1;&#x6982;&#x5FF5;" class="anchor-navigation-ex-anchor" href="#&#x4EA4;&#x53C9;&#x7F16;&#x8BD1;&#x6982;&#x5FF5;"><i class="fa fa-link" aria-hidden="true"></i></a>5.1.1. &#x4EA4;&#x53C9;&#x7F16;&#x8BD1;&#x6982;&#x5FF5;</h3>
<p>&#x5728;&#x4EA4;&#x53C9;&#x7F16;&#x8BD1;&#x4E2D;, &#x7ECF;&#x5E38;&#x4F1A;&#x51FA;&#x73B0;<code>--build</code>, <code>--host</code>, <code>--target</code>&#x6982;&#x5FF5;.</p>
<ul>
<li><code>--build</code>: &#x5728;&#x54EA;&#x7F16;&#x8BD1;</li>
<li><code>--host</code>: &#x7F16;&#x8BD1;&#x540E;&#x7684;&#x7A0B;&#x5E8F;&#x5728;&#x54EA;&#x8FD0;&#x884C;</li>
<li><code>--target</code>: &#x7F16;&#x8BD1;&#x540E;&#x7684;&#x7A0B;&#x5E8F;&#x53EF;&#x4EE5;&#x5904;&#x7406;&#x7684;arch</li>
</ul>
<p>&#x6BD4;&#x5982;&#x4E00;&#x822C;build&#x5C31;&#x662F;x86_64&#x670D;&#x52A1;&#x5668;, &#x8981;&#x7F16;&#x8BD1;gcc, &#x8FD9;&#x4E2A;gcc&#x4E5F;&#x5728;x86_64&#x4E0A;&#x8DD1;, &#x4F46;&#x8981;&#x4EA7;&#x751F;arm&#x6307;&#x4EE4;&#x96C6;:</p>
<ul>
<li><code>--build</code>: x86_64</li>
<li><code>--host</code>: x86_64</li>
<li><code>--target</code>: arm</li>
</ul>
<p>&#x518D;&#x6BD4;&#x5982;&#x5728;x86_64&#x670D;&#x52A1;&#x5668;&#x7F16;&#x8BD1;htop, &#x8FD9;&#x4E2A;htop&#x5728;arm&#x4E0A;&#x8DD1;</p>
<ul>
<li><code>--build</code>: x86_64</li>
<li><code>--host</code>: arm</li>
<li><code>--target</code>: &#x4E0D;&#x9700;&#x8981;</li>
</ul>
<p>&#x53C2;&#x8003;:  </p>
<ul>
<li><a href="https://sites.google.com/site/readliner/study/host-target-build" target="_blank">https://sites.google.com/site/readliner/study/host-target-build</a></li>
<li><a href="https://gcc.gnu.org/onlinedocs/gccint/Configure-Terms.html" target="_blank">https://gcc.gnu.org/onlinedocs/gccint/Configure-Terms.html</a></li>
<li><a href="https://www.gnu.org/software/autoconf/manual/autoconf-2.69/html_node/Hosts-and-Cross_002dCompilation.html" target="_blank">https://www.gnu.org/software/autoconf/manual/autoconf-2.69/html_node/Hosts-and-Cross_002dCompilation.html</a></li>
</ul>
<blockquote>
<p>The configure and build process has a long and colorful history, and can be confusing to anyone who doesn&#x2019;t know why things are the way they are. While there are other documents which describe the configuration process in detail, here are a few things that everyone working on GCC should know.</p>
<p>There are three system names that the build knows about: the machine you are building on (build), the machine that you are building for (host), and the machine that GCC will produce code for (target). When you configure GCC, you specify these with --build=, --host=, and --target=.</p>
<p>Specifying the host without specifying the build should be avoided, as configure may (and once did) assume that the host you specify is also the build, which may not be true.</p>
<p>If build, host, and target are all the same, this is called a native. If build and host are the same but target is different, this is called a cross. If build, host, and target are all different this is called a canadian (for obscure reasons dealing with Canada&#x2019;s political party and the background of the person working on the build at that time). If host and target are the same, but build is different, you are using a cross-compiler to build a native for a different system. Some people call this a host-x-host, crossed native, or cross-built native. If build and target are the same, but host is different, you are using a cross compiler to build a cross compiler that produces code for the machine you&#x2019;re building on. This is rare, so there is no common way of describing it. There is a proposal to call this a crossback.</p>
<p>If build and host are the same, the GCC you are building will also be used to build the target libraries (like libstdc++). If build and host are different, you must have already built and installed a cross compiler that will be used to build the target libraries (if you configured with --target=foo-bar, this compiler will be called foo-bar-gcc).</p>
<p>In the case of target libraries, the machine you&#x2019;re building for is the machine you specified with --target. So, build is the machine you&#x2019;re building on (no change there), host is the machine you&#x2019;re building for (the target libraries are built for the target, so host is the target you specified), and target doesn&#x2019;t apply (because you&#x2019;re not building a compiler, you&#x2019;re building libraries). The configure/make process will adjust these variables as needed. It also sets $with_cross_host to the original --host value in case you need it.</p>
<p>The libiberty support library is built up to three times: once for the host, once for the target (even if they are the same), and once for the build if build and host are different. This allows it to be used by all programs which are generated in the course of the build process.</p>
</blockquote>
<h3 id="alpine&#x4E2D;&#x7684;&#x4E0D;&#x540C;arch"><a name="alpine&#x4E2D;&#x7684;&#x4E0D;&#x540C;arch" class="anchor-navigation-ex-anchor" href="#alpine&#x4E2D;&#x7684;&#x4E0D;&#x540C;arch"><i class="fa fa-link" aria-hidden="true"></i></a>5.1.2. alpine&#x4E2D;&#x7684;&#x4E0D;&#x540C;arch</h3>
<p>&#x539F;&#x59CB;&#x4EE3;&#x7801;&#x5728;<code>abuild/functions.sh.in</code></p>
<p>&#x5B89;&#x88C5;&#x5728;:
<code>/usr/share/abuild/functions.sh</code></p>
<pre class="language-"><code>arch_to_hostspec() {
    case &quot;$1&quot; in
    aarch64)    echo &quot;aarch64-alpine-linux-musl&quot; ;;
    armel)        echo &quot;armv5-alpine-linux-musleabi&quot; ;;
    armhf)        echo &quot;armv6-alpine-linux-musleabihf&quot; ;;
    armv7)        echo &quot;armv7-alpine-linux-musleabihf&quot; ;;
    loongarch32)    echo &quot;loongarch32-alpine-linux-musl&quot; ;;
    loongarchx32)    echo &quot;loongarchx32-alpine-linux-musl&quot; ;;
    loongarch64)    echo &quot;loongarch64-alpine-linux-musl&quot; ;;
    mips)           echo &quot;mips-alpine-linux-musl&quot; ;;
    mips64)         echo &quot;mips64-alpine-linux-musl&quot; ;;
    mipsel)         echo &quot;mipsel-alpine-linux-musl&quot; ;;
    mips64el)       echo &quot;mips64el-alpine-linux-musl&quot; ;;
    ppc)        echo &quot;powerpc-alpine-linux-musl&quot; ;;
    ppc64)        echo &quot;powerpc64-alpine-linux-musl&quot; ;;
    ppc64le)    echo &quot;powerpc64le-alpine-linux-musl&quot; ;;
    riscv32)    echo &quot;riscv32-alpine-linux-musl&quot; ;;
    riscv64)    echo &quot;riscv64-alpine-linux-musl&quot; ;;
    s390x)        echo &quot;s390x-alpine-linux-musl&quot; ;;
    x86)        echo &quot;i586-alpine-linux-musl&quot; ;;
    x86_64)        echo &quot;x86_64-alpine-linux-musl&quot; ;;
    *)        echo &quot;unknown&quot; ;;
    esac
}
</code></pre><p>&#x5927;&#x6982;&#x770B;&#x4E86;&#x4E00;&#x4E0B;<code>/usr/share/abuild/functions.sh</code></p>
<ul>
<li>CBUILD&#x4ECE;<code>apk --print-arch</code>&#x800C;&#x6765;, &#x68C0;&#x6D4B;&#x5F53;&#x524D;&#x7684;&#x7CFB;&#x7EDF;</li>
<li>CHOST&#x9ED8;&#x8BA4;&#x4E3A;CBUILD, &#x9664;&#x975E;&#x73AF;&#x5883;&#x53D8;&#x91CF;&#x6307;&#x5B9A;</li>
<li>CTARGET&#x9ED8;&#x8BA4;&#x4E3A;CHOST, &#x9664;&#x975E;&#x73AF;&#x5883;&#x53D8;&#x91CF;&#x6307;&#x5B9A;</li>
<li>CARCH&#x4ECE;CHOST&#x800C;&#x6765;</li>
</ul>
<pre class="language-"><code class="lang-sh"><span class="token punctuation">[</span> <span class="token parameter variable">-z</span> <span class="token string">&quot;<span class="token variable">$CBUILD</span>&quot;</span> <span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token assign-left variable">CBUILD</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span>$<span class="token punctuation">{</span>APK:-apk<span class="token punctuation">}</span> --print-arch <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span>/dev/null <span class="token operator">||</span> <span class="token builtin class-name">:</span><span class="token variable">)</span></span>&quot;</span>
<span class="token punctuation">[</span> <span class="token parameter variable">-z</span> <span class="token string">&quot;<span class="token variable">$CHOST</span>&quot;</span> <span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token assign-left variable">CHOST</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$CBUILD</span>&quot;</span>
<span class="token punctuation">[</span> <span class="token parameter variable">-z</span> <span class="token string">&quot;<span class="token variable">$CTARGET</span>&quot;</span> <span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token assign-left variable">CTARGET</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$CHOST</span>&quot;</span>

<span class="token punctuation">[</span> <span class="token parameter variable">-z</span> <span class="token string">&quot;<span class="token variable">$CARCH</span>&quot;</span> <span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token assign-left variable">CARCH</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span>hostspec_to_arch $CHOST<span class="token variable">)</span></span>&quot;</span>
</code></pre>
<p>&#x548C;<a href="https://www.gnu.org/software/autoconf/manual/autoconf-2.69/html_node/Hosts-and-Cross_002dCompilation.html" target="_blank">autoconf&#x624B;&#x518C;</a>&#x4E2D;&#x8BF4;&#x7684;&#x4E00;&#x81F4;:</p>
<blockquote>
<p>The relationship between build, host, and target have been cleaned up: the chain of default is now simply: target defaults to host, host to build, and build to the result of config.guess.</p>
</blockquote>
<h3 id="&#x7ED3;&#x8BBA;"><a name="&#x7ED3;&#x8BBA;" class="anchor-navigation-ex-anchor" href="#&#x7ED3;&#x8BBA;"><i class="fa fa-link" aria-hidden="true"></i></a>5.1.3. &#x7ED3;&#x8BBA;</h3>
<p>&#x6BD4;&#x5982;&#x6211;&#x8981;&#x5728;x86_64&#x673A;&#x5668;&#x4E0A;, &#x4EA4;&#x53C9;&#x7F16;&#x8BD1;&#x51FA;&#x4E00;&#x4E2A;ppc&#x7684;&#x7F16;&#x8BD1;&#x5668;, &#x8BE5;&#x7F16;&#x8BD1;&#x5668;&#x5728;x86_64&#x8FD0;&#x884C;, &#x4F46;&#x4EA7;&#x751F;ppc&#x7684;&#x6307;&#x4EE4;&#x96C6;.</p>
<ul>
<li>CBUILD&#x4E0D;&#x7528;&#x6307;&#x5B9A;, &#x8FD9;&#x91CC;&#x662F;x86_64</li>
<li>CHOST&#x5F88;&#x91CD;&#x8981;, &#x51B3;&#x5B9A;&#x4E86;&#x76EE;&#x6807;apk&#x4F1A;&#x88AB;&#x5B89;&#x88C5;&#x5230;&#x54EA;&#x4E2A;arch<ul>
<li>&#x5982;&#x679C;&#x662F;&#x7F16;&#x8BD1;gcc, CHOST&#x5C31;&#x662F;x86_64, CTARGET&#x662F;ppc</li>
<li>&#x5982;&#x679C;&#x662F;&#x7F16;&#x8BD1;&#x666E;&#x901A;&#x5305;, &#x6BD4;&#x5982;musl&#x6216;&#x8005;libucontext, CHOST&#x662F;ppc, CTARGET&#x65E0;&#x610F;&#x4E49;.</li>
</ul>
</li>
</ul>
<h2 id="chost&#x5728;alpine&#x4E2D;&#x7684;&#x5E94;&#x7528;"><a name="chost&#x5728;alpine&#x4E2D;&#x7684;&#x5E94;&#x7528;" class="anchor-navigation-ex-anchor" href="#chost&#x5728;alpine&#x4E2D;&#x7684;&#x5E94;&#x7528;"><i class="fa fa-link" aria-hidden="true"></i></a>5.2. CHOST&#x5728;alpine&#x4E2D;&#x7684;&#x5E94;&#x7528;</h2>
<p>&#x6BD4;&#x5982;<code>libucontext</code>&#x8FD9;&#x4E2A;&#x5305;, &#x5728;<code>~/aports/main/libucontext</code>&#x4E0B;  </p>
<p>&#x5982;&#x679C;&#x76F4;&#x63A5;<code>abuild -r</code>, &#x4F1A;&#x7F16;&#x8BD1;&#x51FA;<code>libucontext-1.2-r0.apk</code>, &#x653E;&#x5728;<code>~/packages/main/x86_64/</code>&#x4E0B;&#x9762;</p>
<p>&#x6211;&#x5728;&#x7CFB;&#x7EDF;&#x4E0A;&#x5DF2;&#x7ECF;&#x7F16;&#x8BD1;&#x4E86;ppc&#x7684;&#x4EA4;&#x53C9;&#x5DE5;&#x5177;&#x94FE;, &#x5219;<br>&#x5982;&#x679C;<code>CHOST=ppc abuild -r</code>, &#x5219;&#x4F1A;&#x4EA4;&#x53C9;&#x7F16;&#x8BD1;&#x51FA;<code>libucontext-1.2-r0.apk</code>, &#x653E;&#x5728;<code>~/packages/main/ppc/</code>&#x4E0B;&#x9762;</p>
<p>&#x4F46;&#x6211;&#x7684;&#x7CFB;&#x7EDF;&#x6CA1;&#x6709;mips&#x4EA4;&#x53C9;&#x5DE5;&#x5177;&#x94FE;, &#x4F1A;&#x63D0;&#x793A;&#x51FA;&#x9519;:<br>&#x5982;&#x679C;<code>CHOST=mips abuild -r</code>, &#x4F1A;&#x63D0;&#x793A;<code>build-base-mips (no such package)</code></p>
<p>&#x7ED3;&#x8BBA;:
&#x5728;&#x6709;&#x76F8;&#x5E94;&#x4EA4;&#x53C9;&#x5DE5;&#x5177;&#x94FE;&#x7684;&#x60C5;&#x51B5;&#x4E0B;, &#x7528;<code>CHOST=xxx</code>&#x53EF;&#x4EE5;&#x4EA4;&#x53C9;&#x7F16;&#x8BD1;package, &#x5E76;&#x653E;&#x5230;&#x5BF9;&#x5E94;&#x7684;<code>~/packages/main/arch</code>&#x4E0B;&#x9762;.</p>
<h1 id="openrc"><a name="openrc" class="anchor-navigation-ex-anchor" href="#openrc"><i class="fa fa-link" aria-hidden="true"></i></a>6. openrc</h1>
<p>alpine&#x4F7F;&#x7528;openrc<br><a href="https://wiki.alpinelinux.org/wiki/OpenRC" target="_blank">https://wiki.alpinelinux.org/wiki/OpenRC</a></p>
<h1 id="musl-libc"><a name="musl-libc" class="anchor-navigation-ex-anchor" href="#musl-libc"><i class="fa fa-link" aria-hidden="true"></i></a>7. musl libc</h1>
<p>alpine&#x4F7F;&#x7528;musl libc, &#x6211;&#x770B;&#x597D;musl&#x7684;&#x8F7B;&#x91CF;&#x7B80;&#x6D01;.<br><a href="http://www.etalabs.net/compare_libcs.html" target="_blank">&#x51E0;&#x79CD;libc&#x7684;&#x6BD4;&#x8F83;</a></p>
<h1 id="&#x7F16;&#x8BD1;htop&#x5B9E;&#x4F8B;"><a name="&#x7F16;&#x8BD1;htop&#x5B9E;&#x4F8B;" class="anchor-navigation-ex-anchor" href="#&#x7F16;&#x8BD1;htop&#x5B9E;&#x4F8B;"><i class="fa fa-link" aria-hidden="true"></i></a>8. &#x7F16;&#x8BD1;htop&#x5B9E;&#x4F8B;</h1>
<p>&#x53C2;&#x8003;: <a href="https://wiki.alpinelinux.org/wiki/Creating_an_Alpine_package" target="_blank">https://wiki.alpinelinux.org/wiki/Creating_an_Alpine_package</a></p>
<p>alpine&#x901A;&#x8FC7;aports&#x5E93;&#x7BA1;&#x7406;package, &#x901A;&#x8FC7;abuild&#x6765;&#x7F16;&#x8BD1;package.
&#x7F16;&#x8BD1;&#x4E5F;&#x662F;&#x5728;&#x4E00;&#x4E2A;alpine&#x7CFB;&#x7EDF;&#x4E0B;&#x8FDB;&#x884C;&#x7684;.</p>
<p>&#x4E0B;&#x9762;&#x6211;&#x4F7F;&#x7528;docker&#x65B9;&#x5F0F;&#x5148;&#x5728;x86_64&#x4E0A;&#x542F;&#x52A8;alpine, &#x7136;&#x540E;&#x5728;&#x91CC;&#x9762;&#x914D;&#x7F6E;&#x7F16;&#x8BD1;&#x73AF;&#x5883;, &#x518D;&#x4EE5;&#x7F16;&#x8BD1;htop&#x4E3A;&#x4F8B;, &#x5148;&#x68B3;&#x7406;&#x4E00;&#x4E0B;alpine&#x7F16;&#x8BD1;&#x5305;&#x7684;&#x8FC7;&#x7A0B;.</p>
<h2 id="&#x51C6;&#x5907;alpine&#x7F16;&#x8BD1;&#x73AF;&#x5883;"><a name="&#x51C6;&#x5907;alpine&#x7F16;&#x8BD1;&#x73AF;&#x5883;" class="anchor-navigation-ex-anchor" href="#&#x51C6;&#x5907;alpine&#x7F16;&#x8BD1;&#x73AF;&#x5883;"><i class="fa fa-link" aria-hidden="true"></i></a>8.1. &#x51C6;&#x5907;alpine&#x7F16;&#x8BD1;&#x73AF;&#x5883;</h2>
<p>&#x5F88;&#x7B80;&#x5355;, &#x5148;&#x8FD0;&#x884C;alpine&#x5BB9;&#x5668;:
<code>docker run -it alpine</code></p>
<h3 id="&#x5B89;&#x88C5;alpine-sdk"><a name="&#x5B89;&#x88C5;alpine-sdk" class="anchor-navigation-ex-anchor" href="#&#x5B89;&#x88C5;alpine-sdk"><i class="fa fa-link" aria-hidden="true"></i></a>8.1.1. &#x5B89;&#x88C5;alpine-sdk</h3>
<p><code>apk add alpine-sdk</code></p>
<p>alpine-sdk&#x662F;&#x6700;&#x57FA;&#x7840;&#x7684;&#x7F16;&#x8BD1;&#x7CFB;&#x7EDF;, &#x5305;&#x62EC;&#x57FA;&#x7840;&#x5E93;, musl c&#x5E93;, gcc, make&#x7B49;&#x975E;&#x5E38;&#x57FA;&#x7840;&#x7684;&#x5DE5;&#x5177;.</p>
<h3 id="&#x51C6;&#x5907;&#x666E;&#x901A;&#x7528;&#x6237;"><a name="&#x51C6;&#x5907;&#x666E;&#x901A;&#x7528;&#x6237;" class="anchor-navigation-ex-anchor" href="#&#x51C6;&#x5907;&#x666E;&#x901A;&#x7528;&#x6237;"><i class="fa fa-link" aria-hidden="true"></i></a>8.1.2. &#x51C6;&#x5907;&#x666E;&#x901A;&#x7528;&#x6237;</h3>
<p>alpine&#x9ED8;&#x8BA4;&#x662F;root&#x767B;&#x9646;&#x7684;, &#x4F46;&#x540E;&#x9762;&#x7684;abuild&#x5FC5;&#x987B;&#x7528;&#x666E;&#x901A;&#x7528;&#x6237;&#x6765;&#x6267;&#x884C;. &#x8FD9;&#x91CC;&#x6211;&#x4F7F;&#x7528;<code>doas</code>&#x6765;&#x66FF;&#x4EE3;<code>sudo</code>, &#x56E0;&#x4E3A;<code>doas</code>&#x5305;&#x66F4;&#x5C0F;, &#x66F4;&#x7B26;&#x5408;alpine&#x7684;&#x7406;&#x5FF5;.</p>
<pre class="language-"><code class="lang-sh">apk <span class="token function">add</span> alpine-sdk
apk <span class="token function">add</span> doas
<span class="token function">ln</span> <span class="token parameter variable">-s</span> /usr/bin/doas /usr/bin/sudo    
<span class="token builtin class-name">echo</span> <span class="token string">&quot;permit persist :wheel&quot;</span> <span class="token operator">&gt;&gt;</span> /etc/doas.d/doas.conf

adduser <span class="token parameter variable">-g</span> <span class="token string">&quot;reborn&quot;</span> reborn
    passwd: platform
addgroup reborn wheel
addgroup reborn abuild
</code></pre>
<p>&#x5207;&#x6362;&#x5230;&#x666E;&#x901A;&#x7528;&#x6237;</p>
<pre class="language-"><code class="lang-sh"><span class="token function">su</span> reborn
<span class="token builtin class-name">cd</span> ~
abuild-keygen <span class="token parameter variable">-a</span> <span class="token parameter variable">-i</span>
<span class="token function">cat</span> /etc/abuild.conf
<span class="token function">cat</span> ~/.abuild/abuild.conf
</code></pre>
<h2 id="&#x547D;&#x4EE4;&#x6C47;&#x603B;"><a name="&#x547D;&#x4EE4;&#x6C47;&#x603B;" class="anchor-navigation-ex-anchor" href="#&#x547D;&#x4EE4;&#x6C47;&#x603B;"><i class="fa fa-link" aria-hidden="true"></i></a>8.2. &#x547D;&#x4EE4;&#x6C47;&#x603B;</h2>
<pre class="language-"><code class="lang-sh"><span class="token function">docker</span> run <span class="token parameter variable">-it</span> alpine:edge
<span class="token comment">#&#x4F7F;&#x7528;&#x7A33;&#x5B9A;&#x7248;&#x672C;</span>
<span class="token function">docker</span> run <span class="token parameter variable">-it</span> alpine:3.17

<span class="token comment"># &#x597D;&#x50CF;wget&#x53EA;&#x8BA4;&#x5C0F;&#x5199;&#x7684;proxy</span>
<span class="token comment">#export http_proxy=http://10.158.100.9:8080</span>
<span class="token builtin class-name">export</span> <span class="token assign-left variable">http_proxy</span><span class="token operator">=</span>http://10.158.100.6:8080
<span class="token builtin class-name">export</span> <span class="token assign-left variable">https_proxy</span><span class="token operator">=</span><span class="token variable">$http_proxy</span>
<span class="token builtin class-name">export</span> <span class="token assign-left variable">HTTP_PROXY</span><span class="token operator">=</span><span class="token variable">$http_proxy</span>
<span class="token builtin class-name">export</span> <span class="token assign-left variable">HTTPS_PROXY</span><span class="token operator">=</span><span class="token variable">$http_proxy</span>

apk update
apk upgrade

apk <span class="token function">add</span> alpine-sdk
apk <span class="token function">add</span> doas
<span class="token function">ln</span> <span class="token parameter variable">-s</span> /usr/bin/doas /usr/bin/sudo
<span class="token builtin class-name">echo</span> <span class="token string">&quot;permit persist :wheel&quot;</span> <span class="token operator">&gt;&gt;</span> /etc/doas.d/doas.conf

<span class="token comment"># passwd: platform</span>
adduser <span class="token parameter variable">-g</span> <span class="token string">&quot;reborn&quot;</span> reborn
addgroup reborn wheel
addgroup reborn abuild

<span class="token function">su</span> reborn
<span class="token builtin class-name">cd</span> ~
abuild-keygen <span class="token parameter variable">-a</span> <span class="token parameter variable">-i</span>
<span class="token comment"># cat /etc/abuild.conf</span>
<span class="token comment"># cat ~/.abuild/abuild.conf</span>

<span class="token function">git</span> config <span class="token parameter variable">--global</span> user.name <span class="token string">&quot;Bai Yingjie&quot;</span>
<span class="token function">git</span> config <span class="token parameter variable">--global</span> user.email <span class="token string">&quot;yingjie.bai@nokia-sbell.com&quot;</span>
<span class="token comment">#git clone https://gitlab.alpinelinux.org/alpine/aports --depth=1</span>
<span class="token function">git</span> clone https://gitlabe1.ext.net.nokia.com/rebornlinux/aports.git <span class="token parameter variable">--depth</span><span class="token operator">=</span><span class="token number">1</span>

<span class="token builtin class-name">cd</span> aports/main/htop
abuild checksum <span class="token operator">&amp;&amp;</span> abuild <span class="token parameter variable">-r</span>
</code></pre>
<h2 id="&#x5F00;&#x59CB;&#x7F16;&#x8BD1;htop"><a name="&#x5F00;&#x59CB;&#x7F16;&#x8BD1;htop" class="anchor-navigation-ex-anchor" href="#&#x5F00;&#x59CB;&#x7F16;&#x8BD1;htop"><i class="fa fa-link" aria-hidden="true"></i></a>8.3. &#x5F00;&#x59CB;&#x7F16;&#x8BD1;htop</h2>
<p>&#x7F16;&#x8BD1;aports&#x4E2D;&#x7684;package, &#x6BD4;&#x5982;&#x672C;&#x4F8B;&#x4E2D;&#x7684;htop, &#x9700;&#x8981;&#x5148;clone aports&#x5E93;<br><code>git clone https://gitlab.alpinelinux.org/alpine/aports --depth=1</code><br>&#x8FD9;&#x91CC;&#x6211;&#x4F7F;&#x7528;<code>--depth=1</code>&#x53EA;&#x53D6;&#x6700;&#x540E;&#x4E00;&#x4E2A;commit, &#x53EF;&#x4EE5;&#x51CF;&#x5C0F;clone&#x5E93;&#x9700;&#x8981;&#x7684;&#x65F6;&#x95F4;.</p>
<p>&#x7F16;&#x8BD1;&#x9700;&#x8981;&#x5728;package&#x76EE;&#x5F55;&#x4E0B;&#x8FDB;&#x884C;, &#x53EA;&#x9700;&#x8981;&#x4E24;&#x4E2A;&#x547D;&#x4EE4;&#x5C31;&#x597D;&#x4E86;:</p>
<pre class="language-"><code class="lang-sh"><span class="token builtin class-name">cd</span> aports/main/htop
abuild checksum <span class="token operator">&amp;&amp;</span> abuild <span class="token parameter variable">-r</span>
</code></pre>
<p>&#x4E0B;&#x9762;&#x68B3;&#x7406;&#x4E00;&#x4E0B;&#x7F16;&#x8BD1;&#x8FC7;&#x7A0B;</p>
<h3 id="abuild-checksum"><a name="abuild-checksum" class="anchor-navigation-ex-anchor" href="#abuild-checksum"><i class="fa fa-link" aria-hidden="true"></i></a>8.3.1. abuild checksum</h3>
<p>&#x5148;&#x4E0B;&#x8F7D;&#x4E86;&#x6E90;&#x7801;, &#x6E90;&#x7801;&#x8DEF;&#x5F84;&#x5728;<code>APKBUILD</code>&#x6587;&#x4EF6;&#x91CC;&#x6307;&#x5B9A;&#x7684;:</p>
<pre class="language-"><code class="lang-sh"><span class="token assign-left variable">pkgname</span><span class="token operator">=</span>htop
<span class="token assign-left variable">pkgver</span><span class="token operator">=</span><span class="token number">3.2</span>.1
<span class="token assign-left variable">pkgrel</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token assign-left variable">pkgdesc</span><span class="token operator">=</span><span class="token string">&quot;Interactive process viewer&quot;</span>
<span class="token assign-left variable">url</span><span class="token operator">=</span><span class="token string">&quot;https://htop.dev/&quot;</span>
<span class="token assign-left variable">arch</span><span class="token operator">=</span><span class="token string">&quot;all&quot;</span>
<span class="token assign-left variable">license</span><span class="token operator">=</span><span class="token string">&quot;GPL-2.0-or-later&quot;</span>
<span class="token assign-left variable">makedepends</span><span class="token operator">=</span><span class="token string">&quot;ncurses-dev python3 linux-headers lm-sensors-dev&quot;</span>
<span class="token assign-left variable">subpackages</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$pkgname</span>-doc&quot;</span>
<span class="token assign-left variable">source</span><span class="token operator">=</span><span class="token string">&quot;https://github.com/htop-dev/htop/releases/download/<span class="token variable">$pkgver</span>/htop-<span class="token variable">$pkgver</span>.tar.xz&quot;</span>
<span class="token assign-left variable">options</span><span class="token operator">=</span><span class="token string">&quot;!check&quot;</span> <span class="token comment"># no upstream/available test-suite</span>
</code></pre>
<p>&#x6CE8;&#x610F;&#x5230;&#x7248;&#x672C;&#x53F7;<code>pkgver</code>&#x662F;&#x901A;&#x7528;&#x7684;&#x4E09;&#x6BB5;&#x5F0F;, <code>pkgrel</code>&#x662F;&#x8BF4;release&#x53F7;.<br>&#x6E90;&#x7801;&#x8DEF;&#x5F84;&#x7528;<code>source</code>&#x6307;&#x5B9A;.</p>
<h3 id="abuild--r"><a name="abuild--r" class="anchor-navigation-ex-anchor" href="#abuild--r"><i class="fa fa-link" aria-hidden="true"></i></a>8.3.2. abuild -r</h3>
<p>&#x8FD9;&#x4E2A;&#x547D;&#x4EE4;&#x5148;&#x662F;&#x662F;&#x9012;&#x5F52;&#x7684;&#x5904;&#x7406;&#x4F9D;&#x8D56;, &#x7136;&#x540E;&#x7F16;&#x8BD1;.</p>
<pre class="language-"><code class="lang-sh"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> htop: Analyzing dependencies<span class="token punctuation">..</span>.
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> htop: Installing <span class="token keyword">for</span> build: build-base ncurses-dev python3 linux-headers lm-sensors-dev
</code></pre>
<p><code>makedepends</code>&#x8BF4;htop&#x4F9D;&#x8D56;<code>&quot;ncurses-dev python3 linux-headers lm-sensors-dev&quot;</code>, &#x6240;&#x4EE5;abuild&#x5C31;&#x5148;&#x4E0B;&#x8F7D;&#x5B89;&#x88C5;&#x8FD9;&#x4E9B;&#x4F9D;&#x8D56;.</p>
<p>&#x6839;&#x636E;&#x6253;&#x5370;, abuild&#x81EA;&#x5DF1;&#x6DFB;&#x52A0;&#x4E86;<code>build-base</code>&#x8FD9;&#x4E2A;&#x57FA;&#x7840;&#x4F9D;&#x8D56;. &#x6CE8;&#x610F;&#x8FD9;&#x4E9B;&#x4F9D;&#x8D56;&#x53EA;&#x662F;&#x5B89;&#x88C5;, &#x5E76;&#x6CA1;&#x6709;&#x73B0;&#x573A;&#x7F16;&#x8BD1;. &#x8FD9;&#x4E2A;&#x8FC7;&#x7A0B;&#x5F88;&#x5FEB;.</p>
<p><img src="img/system_alpine_20221114105635.png" alt="">  </p>
<p>&#x7F16;&#x8BD1;&#x7684;&#x4F9D;&#x8D56;&#x662F;&#x76F4;&#x63A5;&#x5B89;&#x88C5;&#x5728;&#x7CFB;&#x7EDF;&#x91CC;&#x7684;, &#x7F16;&#x8BD1;&#x5B8C;&#x6210;&#x540E;, abuild&#x4F1A;&#x79FB;&#x9664;&#x8FD9;&#x4E9B;&#x4F9D;&#x8D56;.
&#x7F16;&#x8BD1;&#x8FC7;&#x7A0B;&#x4E2D;&#x7684;&#x4E34;&#x65F6;&#x6587;&#x4EF6;, &#x6BD4;&#x5982;src&#x7B49;&#x76EE;&#x5F55;, &#x4E5F;&#x4F1A;&#x88AB;&#x79FB;&#x9664;.</p>
<p>&#x540E;&#x9762;&#x5C31;&#x662F;&#x89E3;&#x538B;&#x6E90;&#x7801;&#x5305;, &#x7F16;&#x8BD1;. &#x7F16;&#x8BD1;&#x8FC7;&#x7A0B;&#x662F;htop&#x7684;<code>APKBUILD</code>&#x6307;&#x5B9A;&#x7684;:<br>htop&#x662F;&#x5178;&#x578B;&#x7684;autoconf&#x548C;make&#x7CFB;&#x7EDF;&#x4E0B;&#x7684;&#x7F16;&#x8BD1;</p>
<pre class="language-"><code>build() {
        ./configure \
                --build=$CBUILD \
                --host=$CHOST \
                --prefix=/usr \
                --sysconfdir=/etc \
                --mandir=/usr/share/man \
                --localstatedir=/var \
                --enable-cgroup \
                --enable-taskstats
        make
}

package() {
        make DESTDIR=&quot;$pkgdir&quot; pixmapdir=/usr/share/icons/hicolor/128x128/apps install
}
</code></pre><p><code>configure</code>&#x7A0B;&#x5E8F;&#x4F1A;&#x81EA;&#x52A8;&#x68C0;&#x6D4B;&#x5F53;&#x524D;&#x7CFB;&#x7EDF;&#x7C7B;&#x578B;:</p>
<pre class="language-"><code>checking build system type... x86_64-alpine-linux-musl
checking host system type... x86_64-alpine-linux-musl
...
&#x540E;&#x9762;&#x4F1A;&#x5BF9;gcc&#x548C;libc&#x505A;&#x5404;&#x79CD;detect
...
&#x6700;&#x540E;&#x6253;&#x5370;summary
  platform:                  linux
  os-release file:           /etc/os-release
  (Linux) proc directory:    /proc
  (Linux) openvz:            no
  (Linux) vserver:           no
  (Linux) ancient vserver:   no
  (Linux) delay accounting:  no
  (Linux) sensors:           yes
  (Linux) capabilities:      no
  unicode:                   yes
  affinity:                  yes
  unwind:                    no
  hwloc:                     no
  debug:                     no
  static:                    no
</code></pre><p>&#x7F16;&#x8BD1;&#x5B8C;&#x6210;&#x540E;, &#x4F1A;&#x8FDB;&#x5165;package&#x9636;&#x6BB5;.
&#x8BE5;&#x9636;&#x6BB5;&#x4F1A;&#x5148;&#x8FDB;&#x5165;fakeroot&#x76EE;&#x5F55;(&#x4E00;&#x822C;&#x662F;mktemp&#x5728;<code>/var/tmp</code>&#x4E0B;&#x9762;&#x751F;&#x6210;&#x7684;), &#x8C03;&#x7528;&#x5305;&#x7684;(&#x6BD4;&#x5982;htop&#x7684;)<code>make install</code>, install&#x5230;fakeroot&#x76EE;&#x5F55;, &#x7136;&#x540E;&#x6253;&#x5305;.</p>
<p>&#x5728;&#x6253;&#x5305;&#x7684;&#x8FC7;&#x7A0B;&#x4E2D;, &#x4F1A;&#x505A;&#x4F9D;&#x8D56;&#x89E3;&#x6790;:</p>
<pre class="language-"><code>&gt;&gt;&gt; htop*: Tracing dependencies...
    so:libc.musl-x86_64.so.1
    so:libncursesw.so.6
</code></pre><p>&#x751F;&#x6210;<code>.PKGINFO</code>&#x6587;&#x4EF6;:<br><img src="img/system_alpine_20221116173929.png" alt=""><br>&#x8FD9;&#x4E2A;&#x6587;&#x4EF6;&#x4E2D;&#x5C31;&#x5305;&#x62EC;so&#x7684;&#x4F9D;&#x8D56;, &#x4E0A;&#x56FE;&#x540E;&#x4E09;&#x884C;.</p>
<p>&#x987A;&#x5229;&#x7F16;&#x8BD1;&#x5B8C;&#x6210;, &#x6700;&#x540E;&#x5728;<code>~/packages/main/x86_64</code>&#x76EE;&#x5F55;&#x4E0B;, &#x6709;&#x751F;&#x6210;&#x7684;apk&#x6587;&#x4EF6;:</p>
<pre class="language-"><code>~/packages/main/x86_64 $ ls -lh
total 136K
-rw-r--r--    1 reborn   reborn       825 Nov 14 02:10 APKINDEX.tar.gz
-rw-r--r--    1 reborn   reborn    119.1K Nov 14 02:10 htop-3.2.1-r1.apk
-rw-r--r--    1 reborn   reborn      9.4K Nov 14 02:10 htop-doc-3.2.1-r1.apk
</code></pre><p>&#x5B89;&#x88C5;&#x540E;&#x7684;htop&#x5F88;&#x5C0F;, &#x4F1A;&#x81EA;&#x52A8;&#x5B89;&#x88C5;&#x4F9D;&#x8D56;<code>ncurses-terminfo-base</code>&#x548C;<code>ncurses-libs</code><br><img src="img/system_alpine_20221114111943.png" alt="">  </p>
<p>&#x7591;&#x95EE;: htop&#x7684;<code>APKBUILD</code>&#x5E76;&#x6CA1;&#x6709;&#x6307;&#x5B9A;&#x8FD0;&#x884C;&#x65F6;&#x4F9D;&#x8D56;, <code>apk add</code>&#x548C;<code>abuild</code>&#x600E;&#x4E48;&#x77E5;&#x9053;&#x7684;?</p>
<h3 id="&#x6D4B;&#x8BD5;&#x672C;&#x5730;&#x7F16;&#x8BD1;&#x7684;apk"><a name="&#x6D4B;&#x8BD5;&#x672C;&#x5730;&#x7F16;&#x8BD1;&#x7684;apk" class="anchor-navigation-ex-anchor" href="#&#x6D4B;&#x8BD5;&#x672C;&#x5730;&#x7F16;&#x8BD1;&#x7684;apk"><i class="fa fa-link" aria-hidden="true"></i></a>8.3.3. &#x6D4B;&#x8BD5;&#x672C;&#x5730;&#x7F16;&#x8BD1;&#x7684;apk</h3>
<p>&#x7F16;&#x8BD1;&#x5B8C;&#x6210;&#x540E;, &#x5BF9;&#x5E94;apk&#x5305;&#x5728;<code>~/packages/main/x86_64</code>. &#x4FEE;&#x6539;<code>/etc/apk/repositories</code>&#x6307;&#x5411;&#x672C;&#x5730;build, &#x5C31;&#x53EF;&#x4EE5;&#x7528;<code>apk add</code>&#x6D4B;&#x8BD5;&#x672C;&#x5730;&#x5305;&#x4E86;.</p>
<p>&#x6BD4;&#x5982;<code>/etc/apk/repositories</code>&#x6539;&#x6210;&#x8FD9;&#x6837;:</p>
<pre class="language-"><code>/home/reborn/packages/main
/home/reborn/packages/community
https://dl-cdn.alpinelinux.org/alpine/edge/main
https://dl-cdn.alpinelinux.org/alpine/edge/community

/media/sdc/apks
#http://dl-2.alpinelinux.org/alpine/v3.7/main
#http://dl-2.alpinelinux.org/alpine/v3.7/community
http://dl-2.alpinelinux.org/alpine/edge/main
http://dl-2.alpinelinux.org/alpine/edge/community
http://dl-2.alpinelinux.org/alpine/edge/testing
</code></pre><p>&#x6216;&#x8005;&#x7528;<code>apk add</code>&#x7684;<code>-X, --repository</code>&#x529F;&#x80FD;:
<code>doas apk add --repository /home/USER/packages/testing $pkgname</code></p>
<h3 id="&#x7F16;&#x8BD1;&#x9009;&#x9879;&#x7531;etcabuildconf&#x6307;&#x5B9A;"><a name="&#x7F16;&#x8BD1;&#x9009;&#x9879;&#x7531;etcabuildconf&#x6307;&#x5B9A;" class="anchor-navigation-ex-anchor" href="#&#x7F16;&#x8BD1;&#x9009;&#x9879;&#x7531;etcabuildconf&#x6307;&#x5B9A;"><i class="fa fa-link" aria-hidden="true"></i></a>8.3.4. &#x7F16;&#x8BD1;&#x9009;&#x9879;&#x7531;/etc/abuild.conf&#x6307;&#x5B9A;</h3>
<p>&#x6BD4;&#x5982;<code>/etc/abuild.conf</code>&#x6307;&#x5B9A;&#x4E86;:</p>
<pre class="language-"><code>~/aports/main/htop $ cat /etc/abuild.conf
export CFLAGS=&quot;-Os -fomit-frame-pointer&quot;
export CXXFLAGS=&quot;$CFLAGS&quot;
export CPPFLAGS=&quot;$CFLAGS&quot;
export LDFLAGS=&quot;-Wl,--as-needed,-O1,--sort-common&quot;
export GOFLAGS=&quot;-buildmode=pie&quot;
# Do note that these should work with at least GDC and LDC
export DFLAGS=&quot;-Os&quot;
</code></pre><p>&#x548C;&#x4E0B;&#x9762;&#x7684;<code>-Os -fomit-frame-pointer</code>&#x662F;&#x4E00;&#x81F4;&#x7684;</p>
<pre class="language-"><code>gcc -DHAVE_CONFIG_H -I.  -DNDEBUG -Os -fomit-frame-pointer -Wall -Wcast-align -Wcast-qual -Wextra -Wfloat-equal -Wformat=2 -Winit-self -Wmissing-format-attribute -Wmissing-noreturn -Wmissin
g-prototypes -Wpointer-arith -Wshadow -Wstrict-prototypes -Wundef -Wunused -Wwrite-strings -Wnull-dereference -pedantic -std=c99 -D_XOPEN_SOURCE_EXTENDED -DSYSCONFDIR=&quot;\&quot;/etc\&quot;&quot; -I&quot;./linux&quot;
 -Os -fomit-frame-pointer -MT Panel.o -MD -MP -MF $depbase.Tpo -c -o Panel.o Panel.c &amp;&amp;\
</code></pre><h1 id="packages"><a name="packages" class="anchor-navigation-ex-anchor" href="#packages"><i class="fa fa-link" aria-hidden="true"></i></a>9. packages</h1>
<h2 id="build-base"><a name="build-base" class="anchor-navigation-ex-anchor" href="#build-base"><i class="fa fa-link" aria-hidden="true"></i></a>9.1. build-base</h2>
<p>build-base&#x662F;&#x4E2A;&#x5143;package, &#x65B9;&#x6CD5;&#x5C31;&#x662F;&#x5217;&#x51FA;&#x4F9D;&#x8D56;.<br>APKBUILD&#x5982;&#x4E0B;:</p>
<pre class="language-"><code class="lang-sh"><span class="token comment"># Maintainer: Natanael Copa &lt;ncopa@alpinelinux.org&gt;</span>
<span class="token assign-left variable">pkgname</span><span class="token operator">=</span>build-base
<span class="token assign-left variable">pkgver</span><span class="token operator">=</span><span class="token number">0.5</span>
<span class="token assign-left variable">pkgrel</span><span class="token operator">=</span><span class="token number">3</span>
<span class="token assign-left variable">url</span><span class="token operator">=</span>http://dev.alpinelinux.org/cgit
<span class="token assign-left variable">pkgdesc</span><span class="token operator">=</span><span class="token string">&quot;Meta package for build base&quot;</span>
<span class="token assign-left variable">depends</span><span class="token operator">=</span><span class="token string">&quot;binutils file gcc g++ make libc-dev fortify-headers patch&quot;</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token string">&quot;<span class="token variable">$CHOST</span>&quot;</span> <span class="token operator">!=</span> <span class="token string">&quot;<span class="token variable">$CTARGET</span>&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
    <span class="token assign-left variable">pkgname</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$pkgname</span>-<span class="token variable">$CTARGET_ARCH</span>&quot;</span>
    <span class="token assign-left variable">pkgdesc</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$pkgdesc</span> (<span class="token variable">$CTARGET_ARCH</span>)&quot;</span>
    <span class="token assign-left variable">depends</span><span class="token operator">=</span><span class="token string">&quot;binutils-<span class="token variable">$CTARGET_ARCH</span> gcc-<span class="token variable">$CTARGET_ARCH</span> g++-<span class="token variable">$CTARGET_ARCH</span> <span class="token variable">$depends</span>&quot;</span>
<span class="token keyword">fi</span>
<span class="token assign-left variable">arch</span><span class="token operator">=</span><span class="token string">&quot;noarch&quot;</span>
<span class="token assign-left variable">license</span><span class="token operator">=</span><span class="token string">&quot;MIT&quot;</span>
<span class="token assign-left variable">options</span><span class="token operator">=</span><span class="token string">&quot;!check&quot;</span>

<span class="token function-name function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin class-name">:</span>
<span class="token punctuation">}</span>

<span class="token function-name function">package</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">mkdir</span> <span class="token parameter variable">-p</span> <span class="token string">&quot;<span class="token variable">$pkgdir</span>&quot;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>&#x5982;&#x679C;&#x662F;&#x4EA4;&#x53C9;&#x7F16;&#x8BD1;<code>&quot;$CHOST&quot; != &quot;$CTARGET&quot;</code>, &#x5305;&#x540D;&#x5C31;&#x53D8;&#x6210;&#x4E86;<code>build-base-CTARGET_ARCH</code>, depends&#x4E5F;&#x589E;&#x52A0;&#x4E86;<code>&quot;binutils-$CTARGET_ARCH gcc-$CTARGET_ARCH g++-$CTARGET_ARCH&quot;</code></p>
<h1 id="abuild"><a name="abuild" class="anchor-navigation-ex-anchor" href="#abuild"><i class="fa fa-link" aria-hidden="true"></i></a>10. abuild</h1>
<h2 id="abuildin"><a name="abuildin" class="anchor-navigation-ex-anchor" href="#abuildin"><i class="fa fa-link" aria-hidden="true"></i></a>10.1. abuild.in</h2>
<p><a href="https://gitlab.alpinelinux.org/alpine/abuild/-/blob/master/abuild.in" target="_blank">https://gitlab.alpinelinux.org/alpine/abuild/-/blob/master/abuild.in</a></p>
<p>abuild&#x5176;&#x5B9E;&#x662F;&#x4E2A;ash&#x811A;&#x672C;, &#x4E00;&#x822C;&#x6D41;&#x7A0B;&#x662F;:</p>
<pre class="language-"><code class="lang-sh">all<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token function-name function">build_abuildrepo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin class-name">local</span> part <span class="token assign-left variable">_check</span><span class="token operator">=</span>check
    <span class="token keyword">if</span> options_has <span class="token string">&quot;checkroot&quot;</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
        <span class="token assign-left variable">_check</span><span class="token operator">=</span>check_fakeroot
    <span class="token keyword">fi</span>
    <span class="token keyword">if</span> <span class="token operator">!</span> want_check<span class="token punctuation">;</span> <span class="token keyword">then</span>
        <span class="token assign-left variable">_check</span><span class="token operator">=</span>true
    <span class="token keyword">fi</span>
    <span class="token keyword">if</span> <span class="token operator">!</span> apk_up2date <span class="token operator">||</span> <span class="token punctuation">[</span> <span class="token parameter variable">-n</span> <span class="token string">&quot;<span class="token variable">$force</span>&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
        <span class="token comment"># check early if we have abuild key</span>
        abuild-sign <span class="token parameter variable">--installed</span>
        logcmd <span class="token string">&quot;building <span class="token variable">$repo</span>/<span class="token variable">$pkgname</span>-<span class="token variable">$pkgver</span>-r<span class="token variable">$pkgrel</span>&quot;</span>
        <span class="token builtin class-name">local</span> <span class="token assign-left variable">_starttime</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">date</span> <span class="token parameter variable">--utc</span> +%s<span class="token variable">)</span></span>
        msg <span class="token string">&quot;Building <span class="token variable">$repo</span>/<span class="token variable">$pkgname</span> <span class="token variable">$pkgver</span>-r<span class="token variable">$pkgrel</span> (using <span class="token variable">$program</span> <span class="token variable">$program_version</span>) started <span class="token variable"><span class="token variable">$(</span><span class="token function">date</span> <span class="token parameter variable">-R</span><span class="token variable">)</span></span>&quot;</span>

        <span class="token comment"># make sure SOURCE_DATE_EPOCH is set</span>
        set_source_date

        <span class="token keyword">for</span> <span class="token for-or-select variable">part</span> <span class="token keyword">in</span> sanitycheck builddeps clean fetch unpack prepare mkusers build <span class="token punctuation">\</span>
                <span class="token variable">$_check</span> rootpkg<span class="token punctuation">;</span> <span class="token keyword">do</span>
            runpart <span class="token variable">$part</span>
        <span class="token keyword">done</span>
        <span class="token builtin class-name">local</span> <span class="token assign-left variable">_endtime</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">date</span> <span class="token parameter variable">--utc</span> +%s<span class="token variable">)</span></span>
        <span class="token builtin class-name">local</span> <span class="token assign-left variable">_difftime</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$((</span>_endtime <span class="token operator">-</span> _starttime<span class="token variable">))</span></span>
        msg <span class="token string">&quot;Build complete at <span class="token variable"><span class="token variable">$(</span><span class="token function">date</span> <span class="token parameter variable">-R</span><span class="token variable">)</span></span> elapsed time <span class="token variable"><span class="token variable">$((</span>_difftime<span class="token operator">/</span><span class="token number">3600</span><span class="token variable">))</span></span>h <span class="token variable"><span class="token variable">$((</span>_difftime<span class="token operator">/</span><span class="token number">60</span><span class="token operator">%</span><span class="token number">60</span><span class="token variable">))</span></span>m <span class="token variable"><span class="token variable">$((</span>_difftime<span class="token operator">%</span><span class="token number">60</span><span class="token variable">))</span></span>s&quot;</span>
        cleanup <span class="token variable">$CLEANUP</span>
    <span class="token keyword">fi</span>
    update_abuildrepo_index
<span class="token punctuation">}</span>
</code></pre>
<p>&#x5173;&#x952E;&#x53D8;&#x91CF;</p>
<ul>
<li>BOOTSTRAP</li>
</ul>
<pre class="language-"><code class="lang-sh"><span class="token function-name function">want_check</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">[</span> <span class="token parameter variable">-n</span> <span class="token string">&quot;<span class="token variable">$ABUILD_BOOTSTRAP</span>&quot;</span> <span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token builtin class-name">return</span> <span class="token number">1</span>
    cross_compiling <span class="token operator">&amp;&amp;</span> <span class="token builtin class-name">return</span> <span class="token number">1</span>
    options_has <span class="token string">&quot;!check&quot;</span> <span class="token operator">&amp;&amp;</span> <span class="token builtin class-name">return</span> <span class="token number">1</span>
    <span class="token builtin class-name">return</span> <span class="token number">0</span>
<span class="token punctuation">}</span>

<span class="token comment"># build and install dependencies</span>
<span class="token function-name function">builddeps</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">..</span>.
    <span class="token keyword">case</span> <span class="token string">&quot;<span class="token variable">$BOOTSTRAP</span>&quot;</span> <span class="token keyword">in</span>
    no*<span class="token punctuation">)</span>    <span class="token assign-left variable">BUILD_BASE</span><span class="token operator">=</span><span class="token string">&quot;&quot;</span><span class="token punctuation">;</span><span class="token punctuation">;</span>
    *<span class="token punctuation">)</span>    <span class="token keyword">if</span> cross_creating <span class="token operator">||</span> cross_compiling<span class="token punctuation">;</span> <span class="token keyword">then</span>
            <span class="token assign-left variable">BUILD_BASE</span><span class="token operator">=</span><span class="token string">&quot;build-base-<span class="token variable">$CTARGET_ARCH</span>&quot;</span>
        <span class="token keyword">else</span>
            <span class="token assign-left variable">BUILD_BASE</span><span class="token operator">=</span><span class="token string">&quot;build-base&quot;</span>
        <span class="token keyword">fi</span>
    <span class="token keyword">esac</span>
    <span class="token punctuation">..</span>.
<span class="token punctuation">}</span>
</code></pre>
<ul>
<li>CROSS_COMPILE</li>
<li>CHOST CTARGET</li>
</ul>
<pre class="language-"><code class="lang-sh"><span class="token comment"># creating&#x8BF4;&#x7684;&#x662F;&#x6B63;&#x5728;build&#x4EA4;&#x53C9;&#x5DE5;&#x5177;&#x94FE;</span>
<span class="token comment"># &#x6BD4;&#x5982;&#x6B64;&#x65F6;BUILD=x86_64, HOST=x86_64, TARGET=ppc</span>
<span class="token function-name function">cross_creating</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin class-name">test</span> <span class="token string">&quot;<span class="token variable">$CHOST</span>&quot;</span> <span class="token operator">!=</span> <span class="token string">&quot;<span class="token variable">$CTARGET</span>&quot;</span> <span class="token parameter variable">-a</span> <span class="token parameter variable">-n</span> <span class="token string">&quot;<span class="token variable">$CBUILDROOT</span>&quot;</span>
<span class="token punctuation">}</span>
<span class="token comment"># compiling&#x8BF4;&#x7684;&#x662F;&#x4EA4;&#x53C9;&#x5DE5;&#x5177;&#x94FE;&#x6B63;&#x5728;&#x4EA4;&#x53C9;&#x7F16;&#x8BD1;&#x76EE;&#x6807;</span>
<span class="token comment"># &#x6BD4;&#x5982;&#x6B64;&#x65F6;BUILD=x86_64, HOST=ppc, TARGET=ppc(&#x7406;&#x8BBA;&#x4E0A;&#x5E94;&#x8BE5;&#x6CA1;&#x6709;&#x7528;&#x5230;)</span>
<span class="token function-name function">cross_compiling</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin class-name">test</span> <span class="token string">&quot;<span class="token variable">$CBUILD</span>&quot;</span> <span class="token operator">!=</span> <span class="token string">&quot;<span class="token variable">$CHOST</span>&quot;</span> <span class="token parameter variable">-a</span> <span class="token parameter variable">-n</span> <span class="token string">&quot;<span class="token variable">$CBUILDROOT</span>&quot;</span>
<span class="token punctuation">}</span>
</code></pre>
<h2 id="functionssh"><a name="functionssh" class="anchor-navigation-ex-anchor" href="#functionssh"><i class="fa fa-link" aria-hidden="true"></i></a>10.2. functions.sh</h2>
<p>&#x539F;&#x59CB;&#x4EE3;&#x7801;&#x5728;<code>abuild/functions.sh.in</code></p>
<p>&#x5B89;&#x88C5;&#x5728;:
<code>/usr/share/abuild/functions.sh</code></p>
<p>&#x6BCF;&#x6B21;abuild&#x8FD0;&#x884C;&#x65F6;, &#x90FD;&#x88AB;source&#x4E00;&#x6B21;.</p>
<p>&#x8BBE;&#x7F6E;&#x9ED8;&#x8BA4;&#x503C;, &#x6BD4;&#x5982;&#x9ED8;&#x8BA4;&#x7684;&#x5404;&#x79CD;&#x8DEF;&#x5F84;&#x548C;CC&#x7B49;.</p>
<h2 id="&#x652F;&#x6301;&#x4EA4;&#x53C9;&#x7F16;&#x8BD1;"><a name="&#x652F;&#x6301;&#x4EA4;&#x53C9;&#x7F16;&#x8BD1;" class="anchor-navigation-ex-anchor" href="#&#x652F;&#x6301;&#x4EA4;&#x53C9;&#x7F16;&#x8BD1;"><i class="fa fa-link" aria-hidden="true"></i></a>10.3. &#x652F;&#x6301;&#x4EA4;&#x53C9;&#x7F16;&#x8BD1;</h2>
<p>functions.sh&#x4E2D;, &#x76F4;&#x63A5;&#x652F;&#x6301;&#x4EA4;&#x53C9;&#x7F16;&#x8BD1;:</p>
<pre class="language-"><code class="lang-sh">    <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token string">&quot;<span class="token variable">$CHOST</span>&quot;</span> <span class="token operator">!=</span> <span class="token string">&quot;<span class="token variable">$CTARGET</span>&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
        <span class="token comment"># setup environment for creating cross compiler</span>
        <span class="token punctuation">[</span> <span class="token parameter variable">-z</span> <span class="token string">&quot;<span class="token variable">$CBUILDROOT</span>&quot;</span> <span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token builtin class-name">export</span> <span class="token assign-left variable">CBUILDROOT</span><span class="token operator">=</span><span class="token string">&quot;<span class="token environment constant">$HOME</span>/sysroot-<span class="token variable">$CTARGET_ARCH</span>/&quot;</span>
    <span class="token keyword">elif</span> <span class="token punctuation">[</span> <span class="token string">&quot;<span class="token variable">$CBUILD</span>&quot;</span> <span class="token operator">!=</span> <span class="token string">&quot;<span class="token variable">$CHOST</span>&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
        <span class="token comment"># setup build root</span>
        <span class="token punctuation">[</span> <span class="token parameter variable">-z</span> <span class="token string">&quot;<span class="token variable">$CBUILDROOT</span>&quot;</span> <span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token builtin class-name">export</span> <span class="token assign-left variable">CBUILDROOT</span><span class="token operator">=</span><span class="token string">&quot;<span class="token environment constant">$HOME</span>/sysroot-<span class="token variable">$CTARGET_ARCH</span>/&quot;</span>
        <span class="token comment"># prepare pkg-config for cross building</span>
        <span class="token punctuation">[</span> <span class="token parameter variable">-z</span> <span class="token string">&quot;<span class="token variable">$PKG_CONFIG_PATH</span>&quot;</span> <span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token builtin class-name">export</span> <span class="token assign-left variable">PKG_CONFIG_PATH</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">${CBUILDROOT}</span>/usr/lib/pkgconfig/&quot;</span>
        <span class="token punctuation">[</span> <span class="token parameter variable">-z</span> <span class="token string">&quot;<span class="token variable">$PKG_CONFIG_SYSROOT_DIR</span>&quot;</span> <span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token builtin class-name">export</span> <span class="token assign-left variable">PKG_CONFIG_SYSROOT_DIR</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">${CBUILDROOT}</span>&quot;</span>
        <span class="token comment"># libtool bug workaround for extra rpaths</span>
        <span class="token punctuation">[</span> <span class="token parameter variable">-z</span> <span class="token string">&quot;<span class="token variable">$lt_cv_sys_lib_dlsearch_path_spec</span>&quot;</span> <span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">\</span>
            <span class="token builtin class-name">export</span> <span class="token assign-left variable">lt_cv_sys_lib_dlsearch_path_spec</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">${CBUILDROOT}</span>/lib <span class="token variable">${CBUILDROOT}</span>/usr/lib /usr/lib /lib /usr/local/lib&quot;</span>
        <span class="token comment"># setup cross-compiler</span>
        <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-z</span> <span class="token string">&quot;<span class="token variable">$CROSS_COMPILE</span>&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
            <span class="token builtin class-name">export</span> <span class="token assign-left variable">CROSS_COMPILE</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">${CHOST}</span>-&quot;</span>
            <span class="token builtin class-name">export</span> <span class="token assign-left variable">HOSTCC</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$CC</span>&quot;</span>
            <span class="token builtin class-name">export</span> <span class="token assign-left variable">HOSTCXX</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$CXX</span>&quot;</span>
            <span class="token builtin class-name">export</span> <span class="token assign-left variable">HOSTLD</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$LD</span>&quot;</span>
            <span class="token builtin class-name">export</span> <span class="token assign-left variable">HOSTCPPFLAGS</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$CPPFLAGS</span>&quot;</span>
            <span class="token builtin class-name">export</span> <span class="token assign-left variable">HOSTCXXFLAGS</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$CXXFLAGS</span>&quot;</span>
            <span class="token builtin class-name">export</span> <span class="token assign-left variable">HOSTCFLAGS</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$CFLAGS</span>&quot;</span>
            <span class="token builtin class-name">export</span> <span class="token assign-left variable">HOSTLDFLAGS</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$LDFLAGS</span>&quot;</span>
            <span class="token builtin class-name">export</span> <span class="token assign-left variable">CC</span><span class="token operator">=</span><span class="token variable">${CROSS_COMPILE}</span><span class="token variable">$CC</span>
            <span class="token builtin class-name">export</span> <span class="token assign-left variable">CXX</span><span class="token operator">=</span><span class="token variable">${CROSS_COMPILE}</span><span class="token variable">$CXX</span>
            <span class="token builtin class-name">export</span> <span class="token assign-left variable">LD</span><span class="token operator">=</span><span class="token variable">${CROSS_COMPILE}</span><span class="token variable">$LD</span>
            <span class="token builtin class-name">export</span> <span class="token assign-left variable">CPPFLAGS</span><span class="token operator">=</span><span class="token string">&quot;--sysroot=<span class="token variable">${CBUILDROOT}</span> <span class="token variable">$CPPFLAGS</span>&quot;</span>
            <span class="token builtin class-name">export</span> <span class="token assign-left variable">CXXFLAGS</span><span class="token operator">=</span><span class="token string">&quot;--sysroot=<span class="token variable">${CBUILDROOT}</span> <span class="token variable">$CXXFLAGS</span>&quot;</span>
            <span class="token builtin class-name">export</span> <span class="token assign-left variable">CFLAGS</span><span class="token operator">=</span><span class="token string">&quot;--sysroot=<span class="token variable">${CBUILDROOT}</span> <span class="token variable">$CFLAGS</span>&quot;</span>
            <span class="token builtin class-name">export</span> <span class="token assign-left variable">LDFLAGS</span><span class="token operator">=</span><span class="token string">&quot;--sysroot=<span class="token variable">${CBUILDROOT}</span> <span class="token variable">$LDFLAGS</span>&quot;</span>
        <span class="token keyword">fi</span>
    <span class="token keyword">fi</span>
</code></pre>
<ul>
<li>&#x5982;&#x679C;<code>CHOST</code> &#x548C; <code>CTARGET</code>&#x4E0D;&#x4E00;&#x6837;, &#x6BD4;&#x5982;&#x7F16;&#x8BD1;gcc&#x65F6;, &#x9ED8;&#x8BA4;<code>CBUILDROOT=&quot;$HOME/sysroot-$CTARGET_ARCH/&quot;</code></li>
<li>&#x5982;&#x679C;<code>CBUILD</code>&#x548C;<code>CHOST</code>&#x4E0D;&#x540C;, &#x8BF4;&#x660E;&#x6B63;&#x5728;&#x7528;&#x4EA4;&#x53C9;&#x7F16;&#x8BD1;&#x5668;&#x7F16;&#x8BD1;&#x76EE;&#x6807;&#x677F;&#x7684;package.<br>&#x9ED8;&#x8BA4;&#x7684;<code>--sysroot</code>&#x662F;<code>${CBUILDROOT}</code>, &#x88AB;&#x52A0;&#x5230;<code>CFLAGS</code>&#x7B49;&#x53D8;&#x91CF;&#x4E2D;.</li>
</ul>
<h2 id="&#x4EA4;&#x53C9;&#x7F16;&#x8BD1;&#x5B9E;&#x4F8B;"><a name="&#x4EA4;&#x53C9;&#x7F16;&#x8BD1;&#x5B9E;&#x4F8B;" class="anchor-navigation-ex-anchor" href="#&#x4EA4;&#x53C9;&#x7F16;&#x8BD1;&#x5B9E;&#x4F8B;"><i class="fa fa-link" aria-hidden="true"></i></a>10.4. &#x4EA4;&#x53C9;&#x7F16;&#x8BD1;&#x5B9E;&#x4F8B;</h2>
<p>&#x7528;&#x6211;&#x81EA;&#x5DF1;&#x505A;&#x7684;docker image, &#x4EA4;&#x53C9;&#x7F16;&#x8BD1;&#x5F88;&#x7B80;&#x5355;:</p>
<pre class="language-"><code class="lang-sh"><span class="token comment"># &#x7528;EXTRADEPENDS_TARGET&#x589E;&#x52A0;&#x4F9D;&#x8D56;, &#x7A7A;&#x683C;&#x505A;&#x5217;&#x8868;</span>
<span class="token assign-left variable">EXTRADEPENDS_TARGET</span><span class="token operator">=</span><span class="token string">&quot;ncurses-dev&quot;</span> <span class="token assign-left variable">CHOST</span><span class="token operator">=</span>ppc64 abuild <span class="token parameter variable">-r</span>
<span class="token assign-left variable">EXTRADEPENDS_TARGET</span><span class="token operator">=</span><span class="token string">&quot;linux-headers musl musl-dev libucontext libucontext-dev&quot;</span> <span class="token assign-left variable">CTARGET</span><span class="token operator">=</span>ppc64 abuild <span class="token parameter variable">-r</span>
</code></pre>
<h2 id="&#x5904;&#x7406;&#x4F9D;&#x8D56;"><a name="&#x5904;&#x7406;&#x4F9D;&#x8D56;" class="anchor-navigation-ex-anchor" href="#&#x5904;&#x7406;&#x4F9D;&#x8D56;"><i class="fa fa-link" aria-hidden="true"></i></a>10.5. &#x5904;&#x7406;&#x4F9D;&#x8D56;</h2>
<p>native&#x7F16;&#x8BD1;&#x65F6;, <code>build-base</code>&#x662F;&#x5FC5;&#x9009;&#x7684;&#x4F9D;&#x8D56;.<br>&#x4EA4;&#x53C9;&#x7F16;&#x8BD1;&#x65F6;, <code>build-base-$CTARGET_ARCH</code>&#x662F;&#x5FC5;&#x9009;&#x7684;&#x4F9D;&#x8D56;.</p>
<p>&#x4F9D;&#x8D56;&#x53C8;&#x5206;build&#x4F9D;&#x8D56;&#x548C;host&#x4F9D;&#x8D56;</p>
<pre class="language-"><code class="lang-sh"><span class="token function-name function">calcdeps</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token assign-left variable">builddeps</span><span class="token operator">=</span>
    <span class="token assign-left variable">hostdeps</span><span class="token operator">=</span>

    <span class="token comment"># &#x5728;&#x4EA4;&#x53C9;&#x7F16;&#x8BD1;&#x7684;&#x65F6;&#x5019;, $EXTRADEPENDS_BUILD&#x88AB;&#x52A0;&#x5165;&#x5230;builddeps</span>
    <span class="token comment"># $EXTRADEPENDS_HOST&#x548C;$EXTRADEPENDS_TARGET&#x4F5C;&#x7528;&#x76F8;&#x540C;, &#x88AB;&#x52A0;&#x5165;&#x5230;hostdeps</span>
    <span class="token keyword">if</span> cross_compiling <span class="token operator">&amp;&amp;</span> <span class="token punctuation">[</span> <span class="token parameter variable">-n</span> <span class="token string">&quot;<span class="token variable">$makedepends_build</span>&quot;</span> <span class="token parameter variable">-o</span> <span class="token parameter variable">-n</span> <span class="token string">&quot;<span class="token variable">$makedepends_host</span>&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
        <span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> <span class="token variable">$EXTRADEPENDS_BUILD</span> <span class="token variable">$1</span> <span class="token variable">$makedepends_build</span><span class="token punctuation">;</span> <span class="token keyword">do</span>
            list_has <span class="token variable">$i</span> <span class="token variable">$hostdeps</span> <span class="token operator">&amp;&amp;</span> <span class="token builtin class-name">continue</span>
            <span class="token assign-left variable">builddeps</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$builddeps</span> <span class="token variable">$i</span>&quot;</span>
        <span class="token keyword">done</span>
        <span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> <span class="token variable">$EXTRADEPENDS_HOST</span> <span class="token variable">$EXTRADEPENDS_TARGET</span> <span class="token variable">$makedepends_host</span><span class="token punctuation">;</span> <span class="token keyword">do</span>
            <span class="token punctuation">[</span> <span class="token string">&quot;<span class="token variable">$pkgname</span>&quot;</span> <span class="token operator">=</span> <span class="token string">&quot;<span class="token variable">${i<span class="token operator">%%</span><span class="token punctuation">[</span>&lt;&gt;=<span class="token punctuation">]</span>*}</span>&quot;</span> <span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token builtin class-name">continue</span>
            list_has <span class="token variable">$i</span> <span class="token variable">$hostdeps</span> <span class="token operator">&amp;&amp;</span> <span class="token builtin class-name">continue</span>
            subpackages_has <span class="token variable">${i<span class="token operator">%%</span><span class="token punctuation">[</span>&lt;&gt;=<span class="token punctuation">]</span>*}</span> <span class="token operator">||</span> <span class="token assign-left variable">hostdeps</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$hostdeps</span> <span class="token variable">$i</span>&quot;</span>
        <span class="token keyword">done</span>
    <span class="token comment"># &#x975E;&#x4EA4;&#x53C9;&#x7F16;&#x8BD1;&#x7684;&#x65F6;&#x5019;(&#x5305;&#x62EC;&#x751F;&#x6210;&#x4EA4;&#x53C9;&#x5DE5;&#x5177;&#x94FE;&#x7684;&#x65F6;&#x5019;)</span>
    <span class="token comment"># $EXTRADEPENDS_BUILD&#x548C;$EXTRADEPENDS_HOST&#x88AB;&#x5F53;&#x4F5C;builddeps</span>
    <span class="token comment"># &#x800C;$EXTRADEPENDS_TARGET&#x5219;&#x5C31;&#x662F;hostdeps</span>
    <span class="token keyword">else</span>
        <span class="token punctuation">[</span> <span class="token parameter variable">-z</span> <span class="token string">&quot;<span class="token variable">$makedepends</span>&quot;</span> <span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token assign-left variable">makedepends</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$makedepends_build</span> <span class="token variable">$makedepends_host</span>&quot;</span>
        want_check <span class="token operator">&amp;&amp;</span> <span class="token assign-left variable">makedepends</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$makedepends</span> <span class="token variable">$checkdepends</span>&quot;</span>
        <span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> <span class="token variable">$EXTRADEPENDS_BUILD</span> <span class="token variable">$EXTRADEPENDS_HOST</span> <span class="token variable">$1</span> <span class="token variable">$depends</span> <span class="token variable">$makedepends</span><span class="token punctuation">;</span> <span class="token keyword">do</span>
            <span class="token punctuation">[</span> <span class="token string">&quot;<span class="token variable">$pkgname</span>&quot;</span> <span class="token operator">=</span> <span class="token string">&quot;<span class="token variable">${i<span class="token operator">%%</span><span class="token punctuation">[</span>&lt;&gt;=<span class="token punctuation">]</span>*}</span>&quot;</span> <span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token builtin class-name">continue</span>
            list_has <span class="token variable">$i</span> <span class="token variable">$builddeps</span> <span class="token operator">&amp;&amp;</span> <span class="token builtin class-name">continue</span>
            subpackages_has <span class="token variable">${i<span class="token operator">%%</span><span class="token punctuation">[</span>&lt;&gt;=<span class="token punctuation">]</span>*}</span> <span class="token operator">||</span> <span class="token assign-left variable">builddeps</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$builddeps</span> <span class="token variable">$i</span>&quot;</span>
        <span class="token keyword">done</span>
        <span class="token assign-left variable">hostdeps</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$EXTRADEPENDS_TARGET</span>&quot;</span>
    <span class="token keyword">fi</span>
<span class="token punctuation">}</span>
</code></pre>
<p>abuild&#x672C;&#x6765;&#x5C31;&#x662F;&#x7F16;&#x8BD1;&#x7528;&#x7684;, &#x7F16;&#x8BD1;&#x8FC7;&#x7A0B;&#x4E2D;&#x7684;&#x4F9D;&#x8D56;&#x7EDF;&#x7EDF;&#x90FD;&#x662F;makedeps</p>
<p>deps&#x51FD;&#x6570;&#x5C31;&#x662F;&#x7528;&#x6765;&#x5B89;&#x88C5;&#x4F9D;&#x8D56;&#x7684;. &#x5148;&#x5B89;&#x88C5;build&#x4F9D;&#x8D56;, &#x5982;&#x679C;&#x6709;<code>$CBUILDROOT</code>&#x5B58;&#x5728;, &#x5219;&#x5B89;&#x88C5;host&#x4F9D;&#x8D56;.<br>host&#x4F9D;&#x8D56;&#x4F1A;&#x88AB;&#x5B89;&#x88C5;&#x5230;<code>--root &quot;$CBUILDROOT&quot;</code>&#x4E0B;&#x9762;</p>
<pre class="language-"><code class="lang-sh"><span class="token function-name function">deps</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">[</span> <span class="token parameter variable">-z</span> <span class="token string">&quot;<span class="token variable">$hostdeps</span>&quot;</span> <span class="token parameter variable">-a</span> <span class="token parameter variable">-z</span> <span class="token string">&quot;<span class="token variable">$builddeps</span>&quot;</span> <span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> calcdeps

    <span class="token builtin class-name">local</span> <span class="token assign-left variable">_quiet</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$1</span>&quot;</span>
    <span class="token punctuation">[</span> <span class="token parameter variable">-z</span> <span class="token string">&quot;<span class="token variable">$_quiet</span>&quot;</span> <span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> msg <span class="token string">&quot;Installing for build:<span class="token variable">$builddeps</span>&quot;</span>
    apk_add_makedeps <span class="token function">make</span> <span class="token variable">$_quiet</span> <span class="token variable">$builddeps</span> <span class="token operator">||</span> <span class="token builtin class-name">return</span> <span class="token number">1</span>
    <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-n</span> <span class="token string">&quot;<span class="token variable">$CBUILDROOT</span>&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
        <span class="token punctuation">[</span> <span class="token parameter variable">-z</span> <span class="token string">&quot;<span class="token variable">$_quiet</span>&quot;</span> <span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> msg <span class="token string">&quot;Installing for host:<span class="token variable">$hostdeps</span>&quot;</span>
        apk_add_makedeps <span class="token function">host</span> <span class="token variable">$_quiet</span> --no-scripts <span class="token punctuation">\</span>
            <span class="token parameter variable">--root</span> <span class="token string">&quot;<span class="token variable">$CBUILDROOT</span>&quot;</span> <span class="token parameter variable">--arch</span> <span class="token string">&quot;<span class="token variable">$CTARGET_ARCH</span>&quot;</span> <span class="token variable">$hostdeps</span> <span class="token punctuation">\</span>
            <span class="token operator">||</span> <span class="token builtin class-name">return</span> <span class="token number">1</span>
    <span class="token keyword">fi</span>
<span class="token punctuation">}</span>
</code></pre>
<h1 id="apk&#x4F7F;&#x7528;"><a name="apk&#x4F7F;&#x7528;" class="anchor-navigation-ex-anchor" href="#apk&#x4F7F;&#x7528;"><i class="fa fa-link" aria-hidden="true"></i></a>11. apk&#x4F7F;&#x7528;</h1>
<p>&#x524D;&#x9762;&#x8BF4;&#x8FC7;, &#x5728;<code>/etc/apk/repositories</code>&#x4E2D;&#x53EF;&#x4EE5;&#x914D;&#x7F6E;apk&#x4F7F;&#x7528;&#x672C;&#x5730;&#x5305;, &#x6BD4;&#x5982;</p>
<pre class="language-"><code class="lang-sh"><span class="token function">cat</span> /etc/apk/repositories
/home/reborn/packages/main
/home/reborn/packages/community
https://dl-cdn.alpinelinux.org/alpine/edge/main
https://dl-cdn.alpinelinux.org/alpine/edge/community
</code></pre>
<p>&#x8FD9;&#x6837;<code>apk add</code>&#x4F1A;&#x5148;&#x53BB;&#x6307;&#x5B9A;&#x7684;&#x672C;&#x5730;&#x76EE;&#x5F55;&#x641C;&#x7D22;package</p>
<p>&#x4F46;&#x5982;&#x679C;&#x7528;&#x4E86;<code>--root</code>&#x6765;&#x6307;&#x5B9A;&#x6839;&#x76EE;&#x5F55;, &#x5C31;&#x8981;&#x914D;&#x7F6E;&#x76EE;&#x6807;root&#x76EE;&#x5F55;&#x4E0B;&#x7684;<code>etc/apk/repositories</code></p>
<p><code>--root</code>&#x4F1A;&#x4F7F;&#x7528;&#x76EE;&#x6807;root&#x4E0B;&#x7684;<code>etc/apk/repositories</code>&#x548C;<code>etc/apk/arch</code></p>
<p>&#x6BD4;&#x5982;</p>
<pre class="language-"><code class="lang-sh"><span class="token builtin class-name">echo</span> /home/reborn/packages/main <span class="token operator">&gt;</span> /home/reborn/sysroot-ppc/etc/apk/repositories

~ $ <span class="token function">cat</span> /home/reborn/sysroot-ppc/etc/apk/repositories
/home/reborn/packages/main
~ $ <span class="token function">cat</span> /home/reborn/sysroot-ppc/etc/apk/arch
ppc

<span class="token comment">#&#x914D;&#x7F6E;&#x597D;root&#x76EE;&#x5F55;&#x4E0B;&#x7684;repositories, &#x5C31;&#x53EF;&#x4EE5;&#x5B89;&#x88C5;&#x672C;&#x5730;&#x5305;&#x4E86;, &#x6BD4;&#x5982;</span>
<span class="token function">sudo</span> apk <span class="token parameter variable">--root</span> /home/reborn/sysroot-ppc/ <span class="token function">add</span> libedit
</code></pre>
<h2 id="bootstrap"><a name="bootstrap" class="anchor-navigation-ex-anchor" href="#bootstrap"><i class="fa fa-link" aria-hidden="true"></i></a>11.1. bootstrap</h2>
<pre class="language-"><code class="lang-sh">aports/scripts/bootstrap.sh ppc64 gccgo,norust,nokernel
aports/scripts/bootstrap.sh ppc gccgo,norust,nokernel
</code></pre>
<h2 id="&#x7F16;&#x8BD1;gccgo-for-ppc"><a name="&#x7F16;&#x8BD1;gccgo-for-ppc" class="anchor-navigation-ex-anchor" href="#&#x7F16;&#x8BD1;gccgo-for-ppc"><i class="fa fa-link" aria-hidden="true"></i></a>11.2. &#x7F16;&#x8BD1;gccgo for ppc</h2>
<pre class="language-"><code class="lang-sh"><span class="token comment">#&#x9700;&#x8981;&#x5378;&#x8F7D;&#x51B2;&#x7A81;&#x5305;</span>
<span class="token comment"># apk del gcc-ppc gcc-go-ppc gcc-ppc64 gcc-go-ppc64 gcc-mips64 gcc-aarch64</span>
<span class="token comment"># rm -rf /home/reborn/sysroot*</span>
<span class="token assign-left variable">APKBUILD</span><span class="token operator">=</span>aports/main/gcc/APKBUILD <span class="token assign-left variable">EXTRADEPENDS_TARGET</span><span class="token operator">=</span><span class="token string">&quot;linux-headers musl musl-dev libucontext libucontext-dev&quot;</span> <span class="token assign-left variable">CTARGET</span><span class="token operator">=</span>ppc abuild <span class="token parameter variable">-r</span>
<span class="token assign-left variable">APKBUILD</span><span class="token operator">=</span>aports/main/gcc/APKBUILD <span class="token assign-left variable">EXTRADEPENDS_TARGET</span><span class="token operator">=</span><span class="token string">&quot;linux-headers musl musl-dev libucontext libucontext-dev&quot;</span> <span class="token assign-left variable">CTARGET</span><span class="token operator">=</span>ppc64 abuild <span class="token parameter variable">-r</span>
</code></pre>
<h2 id="&#x4F7F;&#x7528;&#x4EA4;&#x53C9;&#x7F16;&#x8BD1;&#x7684;gccgo&#x5DE5;&#x5177;&#x94FE;"><a name="&#x4F7F;&#x7528;&#x4EA4;&#x53C9;&#x7F16;&#x8BD1;&#x7684;gccgo&#x5DE5;&#x5177;&#x94FE;" class="anchor-navigation-ex-anchor" href="#&#x4F7F;&#x7528;&#x4EA4;&#x53C9;&#x7F16;&#x8BD1;&#x7684;gccgo&#x5DE5;&#x5177;&#x94FE;"><i class="fa fa-link" aria-hidden="true"></i></a>11.3. &#x4F7F;&#x7528;&#x4EA4;&#x53C9;&#x7F16;&#x8BD1;&#x7684;gccgo&#x5DE5;&#x5177;&#x94FE;</h2>
<h3 id="&#x8C03;&#x8BD5;&#x8FC7;&#x7A0B;"><a name="&#x8C03;&#x8BD5;&#x8FC7;&#x7A0B;" class="anchor-navigation-ex-anchor" href="#&#x8C03;&#x8BD5;&#x8FC7;&#x7A0B;"><i class="fa fa-link" aria-hidden="true"></i></a>11.3.1. &#x8C03;&#x8BD5;&#x8FC7;&#x7A0B;</h3>
<p>&#x56E0;&#x4E3A;&#x8981;&#x5728;x86&#x4E0A;&#x4F7F;&#x7528;&#x4EA4;&#x53C9;&#x7F16;&#x8BD1;&#x5668;gccgo, &#x6240;&#x4EE5;&#x5148;&#x8981;&#x5728;x86&#x4E0A;&#x5B89;&#x88C5;</p>
<pre class="language-"><code class="lang-sh"><span class="token function">sudo</span> apk <span class="token function">add</span> gcc-ppc64 gcc-go-ppc64
<span class="token comment"># gcc-go-ppc64&#x548C;gcc-go-ppc&#x6709;&#x51B2;&#x7A81;, &#x4F1A;&#x63D0;&#x793A;</span>
<span class="token punctuation">(</span><span class="token number">1</span>/1<span class="token punctuation">)</span> Installing gcc-go-ppc64 <span class="token punctuation">(</span><span class="token number">12.2</span>.1_git20220924-r4<span class="token punctuation">)</span>
ERROR: gcc-go-ppc64-12.2.1_git20220924-r4: trying to overwrite usr/lib/libgo.a owned by gcc-go-ppc-12.2.1_git20220924-r4.
<span class="token comment"># usr/lib/libgo.a, usr/lib/libgo.so, usr/lib/libgobegin.a, usr/lib/libgolibbegin.a&#x51B2;&#x7A81;</span>

<span class="token comment"># &#x8FD8;&#x9700;&#x8981;&#x89E3;&#x538B;gcc-go-ppc64-12.2.1_git20220924-r4.apk&#x5230;&#x76EE;&#x6807;sysroot</span>
<span class="token comment"># &#x73B0;&#x5728;&#x4E0D;&#x9700;&#x8981;&#x4E86;</span>
apk fetch gcc-go-ppc64
<span class="token function">tar</span> xvf gcc-go-ppc64-12.2.1_git20220924-r4.apk <span class="token parameter variable">-C</span> /home/reborn/sysroot-ppc64 <span class="token parameter variable">--exclude</span> usr/libexec* <span class="token parameter variable">--exclude</span> usr/bin*
</code></pre>
<p>&#x6CE8;: &#x6309;&#x7406;&#x8BF4;<code>apk add gcc-go-ppc64</code>&#x540E;, gccgo&#x7A0B;&#x5E8F;&#x5E94;&#x8BE5;&#x4F1A;&#x4F7F;&#x7528;&#x5728;x86_64&#x7F16;&#x8BD1;&#x673A;&#x7684;<code>/usr/lib/go/12.2.1/powerpc64-alpine-linux-musl</code>&#x4E0B;&#x9762;&#x7684;&#x9884;&#x7F16;&#x8BD1;&#x7684;&#x6807;&#x51C6;&#x5E93;(*.gox&#x7ED3;&#x5C3E;&#x7684;&#x5E93;&#x6587;&#x4EF6;), &#x56E0;&#x4E3A;&#x4E0D;&#x77E5;&#x9053;&#x4E3A;&#x4EC0;&#x4E48;, &#x8FD9;&#x4E9B;&#x6587;&#x4EF6;&#x5B58;&#x5728;, &#x4F46;&#x8FD8;&#x662F;&#x63D0;&#x793A;&#x627E;&#x4E0D;&#x5230;. </p>
<p>&#x89E3;&#x51B3;&#x529E;&#x6CD5;&#x662F;:</p>
<ul>
<li>&#x7528;gcc&#x7684;<code>-B</code>&#x9009;&#x9879;(&#x610F;&#x601D;&#x662F;&#x589E;&#x52A0;&#x641C;&#x7D22;&#x76EE;&#x5F55;)&#x6307;&#x5B9A;, &#x6BD4;&#x5982;<code>/usr/bin/powerpc-alpine-linux-musl-gccgo -B /usr/lib/go/12.2.1/powerpc-alpine-linux-musl hello.go</code></li>
<li>&#x4EE5;&#x4E0A;<code>-B</code>&#x9009;&#x9879;&#x7528;<code>-L</code>&#x4E5F;&#x884C;, &#x6548;&#x679C;&#x4E00;&#x6837;:<br><code>powerpc64-alpine-linux-musl-gccgo -L /usr/lib/go/12.2.1/powerpc64-alpine-linux-musl/ -static -Wl,--whole-archive -lucontext -Wl,--no-whole-archive webhello.go</code></li>
<li>&#x6216;&#x8005;&#x76F4;&#x63A5;&#x89E3;&#x538B;gcc-go-ppc64-12.2.1_git20220924-r4.apk&#x5230;&#x76EE;&#x6807;sysroot
&#x56E0;&#x4E3A;&#x5F53;&#x65F6;&#x7F16;&#x8BD1;gccgo&#x5DE5;&#x5177;&#x94FE;&#x7684;&#x65F6;&#x5019;, &#x5DF2;&#x7ECF;&#x5199;&#x6B7B;&#x4E86;sysroot&#x76EE;&#x5F55;, &#x4E00;&#x822C;&#x5728;<code>/home/username/sysroot-$target_arch</code></li>
<li>&#x6211;&#x6539;&#x4E86;<code>aports/main/gcc/APKBUILD</code>&#x540E;, &#x73B0;&#x5728;&#x7F16;&#x8BD1;&#x4E0D;&#x518D;&#x9700;&#x8981;&#x4E0A;&#x9762;&#x7684;&#x64CD;&#x4F5C;:<br><code>powerpc64-alpine-linux-musl-gccgo -static -Wl,--whole-archive -lucontext -Wl,--no-whole-archive webhello.go</code></li>
</ul>
<p>&#x518D;&#x7528;<code>--root</code>&#x5B89;&#x88C5;ppc64&#x7684;&#x5305;</p>
<pre class="language-"><code class="lang-sh"><span class="token builtin class-name">echo</span> /home/reborn/packages/main <span class="token operator">&gt;</span> /home/reborn/sysroot-ppc64/etc/apk/repositories

<span class="token comment">#&#x4F1A;&#x81EA;&#x52A8;&#x5B89;&#x88C5;musl libgcc libucontext, &#x56E0;&#x4E3A;libgo&#x4F9D;&#x8D56;&#x5982;&#x4E0A;&#x5305;</span>
<span class="token comment">#&#x8FD8;&#x9700;&#x8981;&#x989D;&#x5916;&#x5B89;&#x88C5;libucontext-dev musl-dev</span>
<span class="token function">sudo</span> apk <span class="token parameter variable">--root</span> /home/reborn/sysroot-ppc64 <span class="token function">add</span> libgo libucontext-dev musl-dev
</code></pre>
<h3 id="context&#x76F8;&#x5173;&#x7B26;&#x53F7;&#x627E;&#x4E0D;&#x5230;&#x7684;&#x95EE;&#x9898;"><a name="context&#x76F8;&#x5173;&#x7B26;&#x53F7;&#x627E;&#x4E0D;&#x5230;&#x7684;&#x95EE;&#x9898;" class="anchor-navigation-ex-anchor" href="#context&#x76F8;&#x5173;&#x7B26;&#x53F7;&#x627E;&#x4E0D;&#x5230;&#x7684;&#x95EE;&#x9898;"><i class="fa fa-link" aria-hidden="true"></i></a>11.3.2. context&#x76F8;&#x5173;&#x7B26;&#x53F7;&#x627E;&#x4E0D;&#x5230;&#x7684;&#x95EE;&#x9898;</h3>
<p>gccgo&#x9ED8;&#x8BA4;&#x662F;&#x52A8;&#x6001;&#x94FE;&#x63A5;, &#x80FD;&#x591F;&#x6210;&#x529F;&#x7F16;&#x8BD1;:  </p>
<pre class="language-"><code class="lang-sh"><span class="token comment"># &#x52A8;&#x6001;&#x94FE;&#x63A5;</span>
powerpc64-alpine-linux-musl-gccgo webhello.go
<span class="token comment"># &#x751F;&#x6210;a.out, &#x5927;&#x5C0F;100k</span>
</code></pre>
<p>&#x4F46;&#x9759;&#x6001;&#x94FE;&#x63A5;&#x7684;&#x65F6;&#x5019;, &#x4F1A;&#x62A5;&#x9519;, &#x63D0;&#x793A;&#x5F88;&#x591A;<code>getcontext</code>&#x76F8;&#x5173;&#x7684;&#x7B26;&#x53F7;&#x627E;&#x4E0D;&#x5230;:  </p>
<pre class="language-"><code class="lang-sh"><span class="token comment"># &#x9759;&#x6001;&#x94FE;&#x63A5;</span>
powerpc64-alpine-linux-musl-gccgo <span class="token parameter variable">-static</span> webhello.go
</code></pre>
<p>&#x63D0;&#x793A;&#x9519;&#x8BEF;:<br><img src="img/system_alpine_20221124233423.png" alt="">  </p>
<p>&#x5176;&#x539F;&#x56E0;, &#x6211;&#x8C03;&#x67E5;&#x4E0B;&#x6765;, &#x662F;&#x56E0;&#x4E3A;libgo.a&#x91CC;&#x9762;&#x52A8;&#x6001;&#x94FE;&#x63A5;&#x4E86;libucontext&#x7684;&#x7B26;&#x53F7;, &#x800C;&#x540E;&#x8005;&#x7684;&#x9759;&#x6001;&#x5E93;(libucontext.a)&#x867D;&#x7136;&#x5B58;&#x5728;, &#x4F46;&#x8FD8;&#x662F;&#x63D0;&#x793A;&#x627E;&#x4E0D;&#x5230;.
libucontext&#x662F;gcc&#x7F16;&#x8BD1;&#x5668;&#x81EA;&#x8EAB;&#x4EA7;&#x751F;&#x7684;&#x5E93;.</p>
<p>&#x53C2;&#x8003;&#x4E0B;&#x9762;&#x6587;&#x7AE0;&#x7684;&#x89E3;&#x51B3;&#x529E;&#x6CD5;:<br><a href="https://www.mail-archive.com/adelie-users@lists.adelielinux.org/msg00044.html" target="_blank">https://www.mail-archive.com/adelie-users@lists.adelielinux.org/msg00044.html</a></p>
<p>&#x589E;&#x52A0;&#x7C7B;&#x4F3C;&#x8FD9;&#x6837;&#x7684;&#x7ED9;ld&#x7684;&#x53C2;&#x6570;<code>-gccgoflags &apos;-static -Wl,--whole-archive -lucontext -Wl,--no-whole-archive&apos;</code></p>
<p>&#x6211;&#x662F;&#x8FD9;&#x6837;&#x7F16;&#x8BD1;&#x7684;, &#x5C31;&#x597D;&#x4E86;:</p>
<pre class="language-"><code>powerpc64-alpine-linux-musl-gccgo -static -Wl,--whole-archive -lucontext -Wl,--no-whole-archive webhello.go
</code></pre><p>&#x6CE8;&#x610F;&#x5FC5;&#x987B;&#x8FD9;&#x6837;&#x5199;:<br><code>-Wl,--whole-archive -lucontext -Wl,--no-whole-archive</code></p>
<h3 id="&#x6700;&#x7EC8;&#x64CD;&#x4F5C;"><a name="&#x6700;&#x7EC8;&#x64CD;&#x4F5C;" class="anchor-navigation-ex-anchor" href="#&#x6700;&#x7EC8;&#x64CD;&#x4F5C;"><i class="fa fa-link" aria-hidden="true"></i></a>11.3.3. &#x6700;&#x7EC8;&#x64CD;&#x4F5C;</h3>
<pre class="language-"><code class="lang-sh"><span class="token comment"># ppc64</span>
apk <span class="token function">add</span> gcc-ppc64 gcc-go-ppc64

<span class="token builtin class-name">echo</span> /home/reborn/packages/main <span class="token operator">&gt;</span> /home/reborn/sysroot-ppc64/etc/apk/repositories
apk <span class="token parameter variable">--root</span> /home/reborn/sysroot-ppc64 <span class="token function">add</span> libgo libucontext-dev musl-dev

<span class="token comment"># &#x7F16;&#x8BD1;</span>
powerpc64-alpine-linux-musl-gccgo <span class="token parameter variable">-static</span> -Wl,--whole-archive <span class="token parameter variable">-lucontext</span> -Wl,--no-whole-archive webhello.go

<span class="token comment"># ppc</span>
apk <span class="token function">add</span> gcc-ppc gcc-go-ppc

<span class="token builtin class-name">echo</span> /home/reborn/packages/main <span class="token operator">&gt;</span> /home/reborn/sysroot-ppc/etc/apk/repositories
apk <span class="token parameter variable">--root</span> /home/reborn/sysroot-ppc <span class="token function">add</span> libgo libucontext-dev musl-dev

<span class="token comment"># &#x7F16;&#x8BD1;</span>
powerpc-alpine-linux-musl-gccgo <span class="token parameter variable">-static</span> -Wl,--whole-archive <span class="token parameter variable">-lucontext</span> -Wl,--no-whole-archive webhello.go
</code></pre>
<h3 id="gccgo&#x5DE5;&#x5177;&#x94FE;&#x91CC;&#x6709;&#x4EC0;&#x4E48;"><a name="gccgo&#x5DE5;&#x5177;&#x94FE;&#x91CC;&#x6709;&#x4EC0;&#x4E48;" class="anchor-navigation-ex-anchor" href="#gccgo&#x5DE5;&#x5177;&#x94FE;&#x91CC;&#x6709;&#x4EC0;&#x4E48;"><i class="fa fa-link" aria-hidden="true"></i></a>11.3.4. gccgo&#x5DE5;&#x5177;&#x94FE;&#x91CC;&#x6709;&#x4EC0;&#x4E48;</h3>
<pre class="language-"><code class="lang-sh"><span class="token comment"># &#x4EA4;&#x53C9;go&#x7F16;&#x8BD1;&#x5668;bin</span>
usr/bin/powerpc64-alpine-linux-musl-gccgo

<span class="token comment"># go&#x7684;&#x6807;&#x51C6;&#x5E93;, &#x6BD4;&#x5982;</span>
usr/lib/go/12.2.1/powerpc64-alpine-linux-musl/archive/tar.gox
usr/lib/go/12.2.1/powerpc64-alpine-linux-musl/fmt.gox
usr/lib/go/12.2.1/powerpc64-alpine-linux-musl/runtime.gox
usr/lib/go/12.2.1/powerpc64-alpine-linux-musl/runtime/cgo.gox
<span class="token punctuation">..</span>.

<span class="token comment"># &#x9759;&#x6001;&#x94FE;&#x63A5;&#x548C;&#x52A8;&#x6001;&#x94FE;&#x63A5;&#x9700;&#x8981;&#x7684;&#x5E93;</span>
usr/lib/libgo.a
usr/lib/libgo.so
usr/lib/libgobegin.a
usr/lib/libgolibbegin.a

<span class="token comment"># &#x5185;&#x90E8;&#x53EF;&#x6267;&#x884C;&#x6587;&#x4EF6;</span>
usr/libexec/gcc/powerpc64-alpine-linux-musl/12.2.1/go1
</code></pre>
<p>&#x6309;&#x7406;&#x8BF4;&#x4EA4;&#x53C9;&#x5DE5;&#x5177;&#x94FE;&#x7684;gccgo&#x7684;&#x5B89;&#x88C5;&#x5305;&#x4E0D;&#x5E94;&#x8BE5;&#x628A;<code>libgo.a</code>&#x7B49;&#x9759;&#x6001;&#x94FE;&#x63A5;&#x6587;&#x4EF6;&#x5B89;&#x88C5;&#x5230;<code>/usr/lib</code>&#x4E0B;&#x9762;. &#x6211;&#x5728;&#x81EA;&#x5DF1;&#x7684;&#x5F00;&#x53D1;&#x5206;&#x949F;&#x4FEE;&#x590D;&#x4E86;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;.</p>
<h2 id="&#x7F16;&#x8BD1;gcgo&#x524D;&#x7AEF;"><a name="&#x7F16;&#x8BD1;gcgo&#x524D;&#x7AEF;" class="anchor-navigation-ex-anchor" href="#&#x7F16;&#x8BD1;gcgo&#x524D;&#x7AEF;"><i class="fa fa-link" aria-hidden="true"></i></a>11.4. &#x7F16;&#x8BD1;gcgo&#x524D;&#x7AEF;</h2>
<pre class="language-"><code class="lang-sh">apk <span class="token function">add</span> <span class="token function">bash</span>
<span class="token function">git</span> clone https://gitlabe1.ext.net.nokia.com/godevsig/golang-go.git <span class="token parameter variable">-b</span> godevsig <span class="token parameter variable">--depth</span> <span class="token number">10</span>

<span class="token builtin class-name">cd</span> golang-go/src
<span class="token assign-left variable">GOOS</span><span class="token operator">=</span>linux <span class="token assign-left variable">GOARCH</span><span class="token operator">=</span>amd64 ./bootstrap.bash

<span class="token comment">#&#x4E0A;&#x4F20;</span>
<span class="token function">curl</span> <span class="token parameter variable">-H</span> <span class="token string">&quot;X-JFrog-Art-Api:AKCp8hyinctVijrdqGaFc1YAT7e7KDHWJEaackjuv6oCheipkYU9jU5okRj8rnFkVvcZWnTVc&quot;</span> <span class="token parameter variable">-X</span> PUT <span class="token string">&quot;https://artifactory-blr1.int.net.nokia.com/artifactory/rebornlinux-generic-local/alpine/v3.17/golang-go/<span class="token variable"><span class="token variable">`</span><span class="token function">git</span> branch --show-current<span class="token variable">`</span></span>-<span class="token variable"><span class="token variable">`</span><span class="token function">git</span> rev-parse <span class="token parameter variable">--short</span> HEAD<span class="token variable">`</span></span>/&quot;</span>  <span class="token parameter variable">-T</span> <span class="token punctuation">..</span>/<span class="token punctuation">..</span>/go-linux-amd64-bootstrap.tbz
</code></pre>
<h1 id="repository-&#x7EF4;&#x62A4;"><a name="repository-&#x7EF4;&#x62A4;" class="anchor-navigation-ex-anchor" href="#repository-&#x7EF4;&#x62A4;"><i class="fa fa-link" aria-hidden="true"></i></a>12. repository &#x7EF4;&#x62A4;</h1>
<h2 id="apk-index&#x6587;&#x4EF6;"><a name="apk-index&#x6587;&#x4EF6;" class="anchor-navigation-ex-anchor" href="#apk-index&#x6587;&#x4EF6;"><i class="fa fa-link" aria-hidden="true"></i></a>12.1. apk index&#x6587;&#x4EF6;</h2>
<p>APK&#x7684;repository&#x4E0B;&#x9762;&#x90FD;&#x6709;&#x4E2A;<code>APKINDEX.tar.gz</code>&#x6587;&#x4EF6;, &#x6709;&#x8FD9;&#x4E2A;&#x6587;&#x4EF6;&#x624D;&#x662F;&#x4E00;&#x4E2A;repository, &#x91CC;&#x9762;&#x5305;&#x62EC;3&#x4E2A;&#x6587;&#x4EF6;</p>
<pre class="language-"><code>.SIGN.RSA.reborn-638089aa.rsa.pub
DESCRIPTION
APKINDEX
</code></pre><ul>
<li>&#x7B2C;&#x4E00;&#x4E2A;&#x662F;build key</li>
<li>&#x7B2C;&#x4E8C;&#x4E2A;&#x91CC;&#x9762;&#x7684;&#x5185;&#x5BB9;&#x901A;&#x5E38;&#x662F;main, &#x6216;&#x8005;community</li>
<li>&#x7B2C;&#x4E09;&#x4E2A;&#x662F;&#x91CD;&#x70B9;, &#x91CC;&#x9762;&#x662F;&#x6240;&#x6709;&#x7684;packge&#x7684;&#x4FE1;&#x606F;</li>
</ul>
<p>&#x6211;&#x539F;&#x672C;&#x7F16;&#x8BD1;&#x4E86;&#x4E00;&#x4E2A;base&#x7684;&#x7CFB;&#x7EDF;, &#x6240;&#x6709;package&#x90FD;&#x653E;&#x5230;&#x4E86;<br><img src="img/system_alpine_20230423171830.png" alt=""></p>
<p>&#x540E;&#x6765;&#x6211;&#x53C8;&#x91CD;&#x65B0;&#x7F16;&#x8BD1;&#x4E86;gcc, &#x5E76;&#x5347;&#x7EA7;&#x4E86;&#x5C0F;&#x7248;&#x672C;&#x53F7;:<br><img src="img/system_alpine_20230423172006.png" alt=""></p>
<p>&#x73B0;&#x5728;&#x6211;&#x60F3;&#x628A;&#x65B0;&#x7F16;&#x7684;gcc r5&#x7248;&#x672C;&#x4E5F;&#x653E;&#x5230;<code>rebornlinux-generic-local/alpine/v3.17/main/x86_64/</code>&#x91CC;&#x9762;&#x53BB;.</p>
<h2 id="&#x4E0A;&#x4F20;&#x7F16;&#x8BD1;&#x597D;&#x7684;apk"><a name="&#x4E0A;&#x4F20;&#x7F16;&#x8BD1;&#x597D;&#x7684;apk" class="anchor-navigation-ex-anchor" href="#&#x4E0A;&#x4F20;&#x7F16;&#x8BD1;&#x597D;&#x7684;apk"><i class="fa fa-link" aria-hidden="true"></i></a>12.2. &#x4E0A;&#x4F20;&#x7F16;&#x8BD1;&#x597D;&#x7684;apk</h2>
<p>&#x653E;apk&#x597D;&#x653E;:</p>
<pre class="language-"><code>curl -H &quot;X-JFrog-Art-Api:AKCp8hyinctVijrdqGaFc1YAT7e7KDHWJEaackjuv6oCheipkYU9jU5okRj8rnFkVvcZWnTVc&quot; -X PUT &quot;https://artifactory-blr1.int.net.nokia.com:443/artifactory/godevsig-generic-local/alpine/v3.17/main/x86_64/&quot; -T &quot;{$(echo *.apk | tr &apos; &apos; &apos;,&apos;)}&quot;
</code></pre><p>&#x6CE8;&#x610F;curl&#x4E0D;&#x652F;&#x6301;&#x901A;&#x914D;&#x7B26;, &#x8FD9;&#x91CC;&#x7528;shell&#x7684;echo&#x548C;tr&#x6784;&#x9020;&#x51FA;<code>{file1.apk,file2.apk}</code>&#x7684;&#x5F62;&#x5F0F;</p>
<h2 id="&#x66F4;&#x65B0;apkindextargz&#x6587;&#x4EF6;"><a name="&#x66F4;&#x65B0;apkindextargz&#x6587;&#x4EF6;" class="anchor-navigation-ex-anchor" href="#&#x66F4;&#x65B0;apkindextargz&#x6587;&#x4EF6;"><i class="fa fa-link" aria-hidden="true"></i></a>12.3. &#x66F4;&#x65B0;APKINDEX.tar.gz&#x6587;&#x4EF6;</h2>
<p>&#x73B0;&#x5728;&#x95EE;&#x9898;&#x662F;&#x5982;&#x4F55;&#x66F4;&#x65B0;<code>APKINDEX.tar.gz</code>&#x6587;&#x4EF6;, &#x601D;&#x8DEF;&#x662F;&#x628A;&#x4E24;&#x4E2A;tar.gz&#x6587;&#x4EF6;&#x91CC;&#x7684;APKINDEX&#x5408;&#x5E76;:</p>
<pre class="language-"><code>wget -Y off https://artifactory-blr1.int.net.nokia.com/artifactory/rebornlinux-generic-local/alpine/v3.17/main/x86_64/APKINDEX.tar.gz -O origin_APKINDEX.tar.gz
mkdir origin &amp;&amp; tar xvf origin_APKINDEX.tar.gz -C origin

(cat origin/APKINDEX; tar xf APKINDEX.tar.gz APKINDEX -O) &gt; origin/APKINDEX.both
mv -f origin/APKINDEX.both origin/APKINDEX

cd origin &amp;&amp; tar zcvf ../both_APKINDEX.tar.gz .SIGN.* DESCRIPTION APKINDEX &amp;&amp; cd ..
</code></pre><p>&#x8FD9;&#x6837;concatenate&#x540E;, <code>apk update</code>&#x663E;&#x793A;</p>
<pre class="language-"><code># apk update
fetch https://artifactory-blr1.int.net.nokia.com/artifactory/godevsig-generic-local/alpine/v3.17/main/x86_64/APKINDEX.tar.gz
ERROR: https://artifactory-blr1.int.net.nokia.com/artifactory/godevsig-generic-local/alpine/v3.17/main: BAD signature
</code></pre><p>&#x7528;<code>apk update --allow-untrusted</code>&#x80FD;&#x8FC7;:</p>
<pre class="language-"><code># apk update --allow-untrusted
fetch https://artifactory-blr1.int.net.nokia.com/artifactory/godevsig-generic-local/alpine/v3.17/main/x86_64/APKINDEX.tar.gz
fetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz
fetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz
main  [https://artifactory-blr1.int.net.nokia.com/artifactory/godevsig-generic-local/alpine/v3.17/main]
v3.17.3-120-g60944b2cca6 [https://dl-cdn.alpinelinux.org/alpine/v3.17/main]
v3.17.3-125-g510ba6022c3 [https://dl-cdn.alpinelinux.org/alpine/v3.17/community]
OK: 17879 distinct packages available
</code></pre><p>&#x770B;&#x8D77;&#x6765;&#x6211;&#x4EEC;&#x6574;&#x5408;&#x7684;<code>APKINDEX.tar.gz</code>&#x7B7E;&#x540D;&#x4E0D;&#x5BF9;, &#x5F3A;&#x884C;&#x4F7F;&#x7528;&#x9700;&#x8981;&#x52A0;<code>--allow-untrusted</code>, &#x6BD4;&#x5982;</p>
<pre class="language-"><code>apk update --allow-untrusted
apk search gcc-go --allow-untrusted
</code></pre><h3 id="&#x89E3;&#x51B3;&#x7B7E;&#x540D;&#x95EE;&#x9898;"><a name="&#x89E3;&#x51B3;&#x7B7E;&#x540D;&#x95EE;&#x9898;" class="anchor-navigation-ex-anchor" href="#&#x89E3;&#x51B3;&#x7B7E;&#x540D;&#x95EE;&#x9898;"><i class="fa fa-link" aria-hidden="true"></i></a>12.3.1. &#x89E3;&#x51B3;&#x7B7E;&#x540D;&#x95EE;&#x9898;</h3>
<p>&#x7528;&#x4E0B;&#x9762;&#x7684;&#x547D;&#x4EE4;&#x5C31;&#x597D;&#x4E86;:</p>
<pre class="language-"><code>abuild-sign APKINDEX.tar.gz
</code></pre><h2 id="&#x66F4;&#x65B0;apk-index&#x547D;&#x4EE4;&#x5B8C;&#x6574;&#x7248;&#x589E;&#x91CF;&#x65B9;&#x5F0F;"><a name="&#x66F4;&#x65B0;apk-index&#x547D;&#x4EE4;&#x5B8C;&#x6574;&#x7248;&#x589E;&#x91CF;&#x65B9;&#x5F0F;" class="anchor-navigation-ex-anchor" href="#&#x66F4;&#x65B0;apk-index&#x547D;&#x4EE4;&#x5B8C;&#x6574;&#x7248;&#x589E;&#x91CF;&#x65B9;&#x5F0F;"><i class="fa fa-link" aria-hidden="true"></i></a>12.4. &#x66F4;&#x65B0;apk index&#x547D;&#x4EE4;&#x5B8C;&#x6574;&#x7248;(&#x589E;&#x91CF;&#x65B9;&#x5F0F;)</h2>
<p>&#x601D;&#x8DEF;&#x662F;&#x4E0B;&#x8F7D;<code>APKINDEX.tar.gz</code>, &#x5E76;&#x589E;&#x91CF;&#x66F4;&#x65B0;</p>
<pre class="language-"><code class="lang-sh"><span class="token function">su</span> reborn

<span class="token function-name function">update_apk_index</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin class-name">local</span> <span class="token assign-left variable">arch</span><span class="token operator">=</span><span class="token variable">$1</span>
    <span class="token builtin class-name">cd</span> ~/packages/main/<span class="token variable">$arch</span>
    <span class="token comment"># apk index *.apk -o APKINDEX.tar.gz --description &quot;main &quot;</span>

    <span class="token function">mkdir</span> index <span class="token operator">&amp;&amp;</span> <span class="token function">tar</span> xvf APKINDEX.tar.gz <span class="token parameter variable">-C</span> index
    <span class="token function">pushd</span> index
    <span class="token function">wget</span> <span class="token parameter variable">-Y</span> off https://artifactory-blr1.int.net.nokia.com/artifactory/rebornlinux-generic-local/alpine/v3.17/main/<span class="token variable">$arch</span>/APKINDEX.tar.gz <span class="token parameter variable">-O</span> APKINDEX.tar.gz
    <span class="token punctuation">(</span>tar xf APKINDEX.tar.gz APKINDEX -O<span class="token punctuation">;</span><span class="token function">cat</span> APKINDEX<span class="token punctuation">)</span> <span class="token operator">&gt;</span> APKINDEX.both
    <span class="token function">mv</span> <span class="token parameter variable">-f</span> APKINDEX.both APKINDEX
    <span class="token function">rm</span> <span class="token parameter variable">-f</span> APKINDEX.tar.gz
    <span class="token function">tar</span> zcvf <span class="token punctuation">..</span>/APKINDEX.tar.gz *
    <span class="token function">popd</span> <span class="token operator">&amp;&amp;</span> <span class="token function">rm</span> <span class="token parameter variable">-rf</span> index
    abuild-sign APKINDEX.tar.gz

    <span class="token function">curl</span> <span class="token parameter variable">-H</span> <span class="token string">&quot;X-JFrog-Art-Api:AKCp8hyinctVijrdqGaFc1YAT7e7KDHWJEaackjuv6oCheipkYU9jU5okRj8rnFkVvcZWnTVc&quot;</span> <span class="token parameter variable">-X</span> PUT <span class="token string">&quot;https://artifactory-blr1.int.net.nokia.com:443/artifactory/rebornlinux-generic-local/alpine/v3.17/main/<span class="token variable">$arch</span>/&quot;</span> <span class="token parameter variable">-T</span> <span class="token string">&quot;{<span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">echo</span> *.apk <span class="token operator">|</span> <span class="token function">tr</span> <span class="token string">&apos; &apos;</span> <span class="token string">&apos;,&apos;</span><span class="token variable">)</span></span>}&quot;</span>

    <span class="token function">curl</span> <span class="token parameter variable">-H</span> <span class="token string">&quot;X-JFrog-Art-Api:AKCp8hyinctVijrdqGaFc1YAT7e7KDHWJEaackjuv6oCheipkYU9jU5okRj8rnFkVvcZWnTVc&quot;</span> <span class="token parameter variable">-X</span> PUT <span class="token string">&quot;https://artifactory-blr1.int.net.nokia.com:443/artifactory/rebornlinux-generic-local/alpine/v3.17/main/<span class="token variable">$arch</span>/&quot;</span> <span class="token parameter variable">-T</span> <span class="token string">&quot;APKINDEX.tar.gz&quot;</span>
<span class="token punctuation">}</span>

<span class="token builtin class-name">cd</span> ~/packages/main
<span class="token keyword">for</span> <span class="token for-or-select variable">arch</span> <span class="token keyword">in</span> *<span class="token punctuation">;</span> <span class="token keyword">do</span> <span class="token builtin class-name">echo</span> <span class="token variable">$arch</span><span class="token punctuation">;</span> <span class="token keyword">done</span>
</code></pre>
<h2 id="&#x4E0B;&#x8F7D;&#x5E76;&#x91CD;&#x5EFA;index&#x91CD;&#x6253;&#x5305;&#x65B9;&#x5F0F;"><a name="&#x4E0B;&#x8F7D;&#x5E76;&#x91CD;&#x5EFA;index&#x91CD;&#x6253;&#x5305;&#x65B9;&#x5F0F;" class="anchor-navigation-ex-anchor" href="#&#x4E0B;&#x8F7D;&#x5E76;&#x91CD;&#x5EFA;index&#x91CD;&#x6253;&#x5305;&#x65B9;&#x5F0F;"><i class="fa fa-link" aria-hidden="true"></i></a>12.5. &#x4E0B;&#x8F7D;&#x5E76;&#x91CD;&#x5EFA;index(&#x91CD;&#x6253;&#x5305;&#x65B9;&#x5F0F;)</h2>
<p>&#x601D;&#x8DEF;&#x662F;&#x628A;&#x539F;&#x6765;&#x7684;apk&#x90FD;&#x5148;&#x4ECE;artifactory&#x4E0B;&#x8F7D;&#x4E0B;&#x6765;, &#x89E3;&#x538B;&#x5230;packages&#x76EE;&#x5F55;; &#x672C;&#x5730;&#x65B0;&#x7F16;&#x7684;package&#x5C31;&#x653E;&#x5230;&#x8FD9;&#x4E2A;&#x76EE;&#x5F55;&#x4E0B;, &#x7136;&#x540E;&#x91CD;&#x65B0;&#x4E00;&#x8D77;&#x6253;&#x5305;<code>apk index *.apk -o APKINDEX.tar.gz --description &quot;main &quot;</code>; &#x6700;&#x540E;&#x4E0A;&#x4F20;&#x6574;&#x4E2A;main.tar</p>
<pre class="language-"><code>su reborn
export http_proxy=
export https_proxy=$http_proxy
export HTTP_PROXY=$http_proxy
export HTTPS_PROXY=$http_proxy

mkdir -p ~/packages/main &amp;&amp; cd ~/packages/main
curl &quot;https://artifactory-blr1.int.net.nokia.com/artifactory/api/archive/download/rebornlinux-generic-local/alpine/v3.17/main?archiveType=tar&quot; -o main.tar

tar xvf main.tar
#&#x7F16;&#x8BD1;packages...

update_apk_index() {
    local arch=$1
    pushd ~/packages/main/$arch
    apk index *.apk -o APKINDEX.tar.gz --description &quot;main &quot;
    abuild-sign APKINDEX.tar.gz
    popd
}

for arch in *; do update_apk_index $arch; done
cd ~/packages
tar cvf main.tar main

curl -H &quot;X-JFrog-Art-Api:AKCp8hyinctVijrdqGaFc1YAT7e7KDHWJEaackjuv6oCheipkYU9jU5okRj8rnFkVvcZWnTVc&quot; -H &quot;X-Explode-Archive:true&quot; -X PUT &quot;https://artifactory-blr1.int.net.nokia.com:443/artifactory/rebornlinux-generic-local/alpine/v3.17/&quot; -T main.tar
</code></pre><h2 id="&#x4E0A;&#x4F20;"><a name="&#x4E0A;&#x4F20;" class="anchor-navigation-ex-anchor" href="#&#x4E0A;&#x4F20;"><i class="fa fa-link" aria-hidden="true"></i></a>12.6. &#x4E0A;&#x4F20;</h2>
<pre class="language-"><code>su reborn
export http_proxy=
export https_proxy=$http_proxy
export HTTP_PROXY=$http_proxy
export HTTPS_PROXY=$http_proxy

upload() {
    local arch=$1
    pushd ~/packages/main/$arch
    curl -H &quot;X-JFrog-Art-Api:AKCp8hyinctVijrdqGaFc1YAT7e7KDHWJEaackjuv6oCheipkYU9jU5okRj8rnFkVvcZWnTVc&quot; -X PUT &quot;https://artifactory-blr1.int.net.nokia.com/artifactory/rebornlinux-generic-local/alpine/v3.17/main/$arch/&quot; -T &quot;{$(echo * | tr &apos; &apos; &apos;,&apos;)}&quot;
    popd
}

for arch in *; do upload $arch; done
</code></pre><h2 id="&#x5220;&#x9664;main"><a name="&#x5220;&#x9664;main" class="anchor-navigation-ex-anchor" href="#&#x5220;&#x9664;main"><i class="fa fa-link" aria-hidden="true"></i></a>12.7. &#x5220;&#x9664;main</h2>
<pre class="language-"><code>curl -H &quot;X-JFrog-Art-Api:AKCp8hyinctVijrdqGaFc1YAT7e7KDHWJEaackjuv6oCheipkYU9jU5okRj8rnFkVvcZWnTVc&quot; -X DELETE &quot;https://artifactory-blr1.int.net.nokia.com/artifactory/rebornlinux-generic-local/alpine/v3.17/main&quot;
</code></pre><h1 id="apkbuild-&#x6587;&#x4EF6;"><a name="apkbuild-&#x6587;&#x4EF6;" class="anchor-navigation-ex-anchor" href="#apkbuild-&#x6587;&#x4EF6;"><i class="fa fa-link" aria-hidden="true"></i></a>13. APKBUILD &#x6587;&#x4EF6;</h1>
<h2 id="depends"><a name="depends" class="anchor-navigation-ex-anchor" href="#depends"><i class="fa fa-link" aria-hidden="true"></i></a>13.1. depends</h2>
<p>&#x8FD0;&#x884C;&#x65F6;&#x7684;&#x975E;so&#x4F9D;&#x8D56;. &#x52A8;&#x6001;&#x94FE;&#x63A5;&#x5E93;(so)&#x7684;&#x4F9D;&#x8D56;&#x662F;&#x81EA;&#x52A8;&#x76D1;&#x6D4B;&#x7684;, &#x4E0D;&#x8981;&#x5199;&#x5728;&#x8FD9;&#x91CC;. &#x7528;<code>!</code>&#x524D;&#x7F00;&#x53EF;&#x4EE5;&#x6307;&#x5B9A;&#x51B2;&#x7A81;&#x7684;&#x4F9D;&#x8D56;.</p>
<h2 id="dependsdev"><a name="dependsdev" class="anchor-navigation-ex-anchor" href="#dependsdev"><i class="fa fa-link" aria-hidden="true"></i></a>13.2. depends_dev</h2>
<p>&#x5B50;package <code>$pkgname-dev</code>&#x7684;&#x8FD0;&#x884C;&#x65F6;&#x4F9D;&#x8D56;</p>
<h2 id="&#x5B50;package&#x4F9D;&#x8D56;"><a name="&#x5B50;package&#x4F9D;&#x8D56;" class="anchor-navigation-ex-anchor" href="#&#x5B50;package&#x4F9D;&#x8D56;"><i class="fa fa-link" aria-hidden="true"></i></a>13.3. &#x5B50;package&#x4F9D;&#x8D56;</h2>
<p>&#x4EE5;&#x4E0B;&#x5173;&#x952E;&#x5B57;&#x662F;&#x7ED9;&#x5BF9;&#x5E94;&#x7684;&#x5B50;package&#x7528;&#x7684;</p>
<ul>
<li>depends_doc</li>
<li>depends_openrc</li>
<li>depends_libs</li>
<li>depends_static</li>
</ul>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="system_原理杂记.html" class="navigation navigation-prev " aria-label="Previous page: 系统原理杂记">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="system_进程间通信.html" class="navigation navigation-next " aria-label="Next page: 进程间通信">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Alpine Linux","level":"1.15.5","depth":2,"next":{"title":"进程间通信","level":"1.15.6","depth":2,"path":"notes/system_进程间通信.md","ref":"notes/system_进程间通信.md","articles":[]},"previous":{"title":"系统原理杂记","level":"1.15.4","depth":2,"path":"notes/system_原理杂记.md","ref":"notes/system_原理杂记.md","articles":[]},"dir":"ltr"},"config":{"plugins":["-livereload","-sharing","-lunr","-search","search-plus","-highlight","theme-comscore","prism","code","chapter-fold","github","splitter","wide-page","hide-navigation-buttons","anchor-navigation-ex","sequence@0.1.1","mermaid-gb3"],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"chapter-fold":{},"prism":{"css":["prismjs/themes/prism.css"],"ignore":["mermaid","sequence"]},"sequence":{"theme":"simple"},"github":{"url":"https://github.com/Bai-Yingjie/Bai-Yingjie.github.io"},"splitter":{},"wide-page":{},"code":{"copyButtons":true},"fontsettings":{"theme":"white","family":"sans","size":2},"hide-navigation-buttons":{},"mermaid-gb3":{},"anchor-navigation-ex":{"mode":"float","pageTop":{"level1Icon":"","level2Icon":"","level3Icon":"","showLevelIcon":false},"isRewritePageTitle":true,"showLevel":true,"tocLevel1Icon":"fa fa-hand-o-right","tocLevel2Icon":"fa fa-hand-o-right","tocLevel3Icon":"fa fa-hand-o-right","showGoTop":true,"isShowTocTitleIcon":true,"printLog":false,"multipleH1":true,"associatedWithSummary":true,"float":{"floatIcon":"fa fa-navicon","level1Icon":"","level2Icon":"","level3Icon":"","showLevelIcon":false}},"theme-comscore":{},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false},"search-plus":{}},"theme":"default","author":"Bai Yingjie","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"My Notes","language":"zh-hans","gitbook":"*"},"file":{"path":"notes/system_alpine.md","mtime":"2023-09-11T01:54:11.927Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2023-09-11T01:55:16.281Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-search-plus/jquery.mark.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search-plus/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-code/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-chapter-fold/chapter-fold.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-github/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-splitter/splitter.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-mermaid-gb3/book/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-theme-comscore/test.js"></script>
        
    

    <script src="../gitbook/gitbook-plugin-mermaid-gb3/mermaid/mermaid.min.js"></script>

    </body>
</html>

